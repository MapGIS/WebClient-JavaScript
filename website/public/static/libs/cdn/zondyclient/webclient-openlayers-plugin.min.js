!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=453)}([function(t,e,i){"use strict";i.r(e),i.d(e,"DOCUMENT",function(){return n}),i.d(e,"XML_SCHEMA_INSTANCE_URI",function(){return o}),i.d(e,"createElementNS",function(){return a}),i.d(e,"getAllTextContent",function(){return s}),i.d(e,"getAllTextContent_",function(){return l}),i.d(e,"isDocument",function(){return u}),i.d(e,"getAttributeNS",function(){return c}),i.d(e,"parse",function(){return h}),i.d(e,"makeArrayExtender",function(){return d}),i.d(e,"makeArrayPusher",function(){return p}),i.d(e,"makeReplacer",function(){return f}),i.d(e,"makeObjectPropertyPusher",function(){return g}),i.d(e,"makeObjectPropertySetter",function(){return y}),i.d(e,"makeChildAppender",function(){return v}),i.d(e,"makeArraySerializer",function(){return m}),i.d(e,"makeSimpleNodeFactory",function(){return _}),i.d(e,"OBJECT_PROPERTY_NODE_FACTORY",function(){return b}),i.d(e,"makeSequence",function(){return S}),i.d(e,"makeStructureNS",function(){return O}),i.d(e,"parseNode",function(){return C}),i.d(e,"pushParseAndPop",function(){return T}),i.d(e,"serialize",function(){return x}),i.d(e,"pushSerializeAndPop",function(){return E});var r=i(12),n=document.implementation.createDocument("","",null),o="http://www.w3.org/2001/XMLSchema-instance";function a(t,e){return n.createElementNS(t,e)}function s(t,e){return l(t,e,[]).join("")}function l(t,e,i){var r;if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?i.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):i.push(t.nodeValue);else for(r=t.firstChild;r;r=r.nextSibling)l(r,e,i);return i}function u(t){return"documentElement"in t}function c(t,e,i){return t.getAttributeNS(e,i)||""}function h(t){return(new DOMParser).parseFromString(t,"application/xml")}function d(t,e){return function(i,n){var o=t.call(void 0!==e?e:this,i,n);if(void 0!==o){var a=n[n.length-1];Object(r.c)(a,o)}}}function p(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&r[r.length-1].push(n)}}function f(t,e){return function(i,r){var n=t.call(void 0!==e?e:this,i,r);void 0!==n&&(r[r.length-1]=n)}}function g(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);if(void 0!==o){var a=n[n.length-1],s=void 0!==e?e:r.localName;(s in a?a[s]:a[s]=[]).push(o)}}}function y(t,e,i){return function(r,n){var o=t.call(void 0!==i?i:this,r,n);void 0!==o&&(n[n.length-1][void 0!==e?e:r.localName]=o)}}function v(t,e){return function(i,r,n){t.call(void 0!==e?e:this,i,r,n),n[n.length-1].node.appendChild(i)}}function m(t,e){var i,r;return function(e,n,o){if(void 0===i){i={};var a={};a[e.localName]=t,i[e.namespaceURI]=a,r=_(e.localName)}x(i,r,n,o)}}function _(t,e){var i=t;return function(t,r,n){var o=r[r.length-1].node,s=i;return void 0===s&&(s=n),a(void 0!==e?e:o.namespaceURI,s)}}var b=_();function S(t,e){for(var i=e.length,r=new Array(i),n=0;n<i;++n)r[n]=t[e[n]];return r}function O(t,e,i){var r,n,o=void 0!==i?i:{};for(r=0,n=t.length;r<n;++r)o[t[r]]=e;return o}function C(t,e,i,r){var n;for(n=e.firstElementChild;n;n=n.nextElementSibling){var o=t[n.namespaceURI];if(void 0!==o){var a=o[n.localName];void 0!==a&&a.call(r,n,i)}}}function T(t,e,i,r,n){return r.push(t),C(e,i,r,n),r.pop()}function x(t,e,i,r,n,o){for(var a,s,l=(void 0!==n?n:i).length,u=0;u<l;++u)void 0!==(a=i[u])&&void 0!==(s=e.call(void 0!==o?o:this,a,r,void 0!==n?n[u]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,r)}function E(t,e,i,r,n,o,a){return n.push(t),x(e,i,r,n,o,a),n.pop()}},function(t,e,i){"use strict";i.r(e),i.d(e,"boundingExtent",function(){return a}),i.d(e,"buffer",function(){return s}),i.d(e,"clone",function(){return l}),i.d(e,"closestSquaredDistanceXY",function(){return u}),i.d(e,"containsCoordinate",function(){return c}),i.d(e,"containsExtent",function(){return h}),i.d(e,"containsXY",function(){return d}),i.d(e,"coordinateRelationship",function(){return p}),i.d(e,"createEmpty",function(){return f}),i.d(e,"createOrUpdate",function(){return g}),i.d(e,"createOrUpdateEmpty",function(){return y}),i.d(e,"createOrUpdateFromCoordinate",function(){return v}),i.d(e,"createOrUpdateFromCoordinates",function(){return m}),i.d(e,"createOrUpdateFromFlatCoordinates",function(){return _}),i.d(e,"createOrUpdateFromRings",function(){return b}),i.d(e,"equals",function(){return S}),i.d(e,"extend",function(){return O}),i.d(e,"extendCoordinate",function(){return C}),i.d(e,"extendCoordinates",function(){return T}),i.d(e,"extendFlatCoordinates",function(){return x}),i.d(e,"extendRings",function(){return E}),i.d(e,"extendXY",function(){return P}),i.d(e,"forEachCorner",function(){return j}),i.d(e,"getArea",function(){return R}),i.d(e,"getBottomLeft",function(){return I}),i.d(e,"getBottomRight",function(){return L}),i.d(e,"getCenter",function(){return w}),i.d(e,"getCorner",function(){return A}),i.d(e,"getEnlargedArea",function(){return M}),i.d(e,"getForViewAndSize",function(){return F}),i.d(e,"getHeight",function(){return k}),i.d(e,"getIntersectionArea",function(){return N}),i.d(e,"getIntersection",function(){return D}),i.d(e,"getMargin",function(){return G}),i.d(e,"getSize",function(){return B}),i.d(e,"getTopLeft",function(){return U}),i.d(e,"getTopRight",function(){return V}),i.d(e,"getWidth",function(){return W}),i.d(e,"intersects",function(){return Z}),i.d(e,"isEmpty",function(){return z}),i.d(e,"returnOrUpdate",function(){return H}),i.d(e,"scaleFromCenter",function(){return Y}),i.d(e,"intersectsSegment",function(){return X}),i.d(e,"applyTransform",function(){return q});var r=i(23),n=i(178),o=i(86);function a(t){for(var e=[1/0,1/0,-1/0,-1/0],i=0,r=t.length;i<r;++i)C(e,t[i]);return e}function s(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function l(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function u(t,e,i){var r,n;return(r=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*r+(n=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0)*n}function c(t,e){return d(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function d(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function p(t,e){var i=t[0],r=t[1],n=t[2],a=t[3],s=e[0],l=e[1],u=o.a.UNKNOWN;return s<i?u|=o.a.LEFT:s>n&&(u|=o.a.RIGHT),l<r?u|=o.a.BELOW:l>a&&(u|=o.a.ABOVE),u===o.a.UNKNOWN&&(u=o.a.INTERSECTING),u}function f(){return[1/0,1/0,-1/0,-1/0]}function g(t,e,i,r,n){return n?(n[0]=t,n[1]=e,n[2]=i,n[3]=r,n):[t,e,i,r]}function y(t){return g(1/0,1/0,-1/0,-1/0,t)}function v(t,e){var i=t[0],r=t[1];return g(i,r,i,r,e)}function m(t,e){return T(y(e),t)}function _(t,e,i,r,n){return x(y(n),t,e,i,r)}function b(t,e){return E(y(e),t)}function S(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function O(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function C(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function T(t,e){for(var i=0,r=e.length;i<r;++i)C(t,e[i]);return t}function x(t,e,i,r,n){for(;i<r;i+=n)P(t,e[i],e[i+1]);return t}function E(t,e){for(var i=0,r=e.length;i<r;++i)T(t,e[i]);return t}function P(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function j(t,e,i){var r;return(r=e.call(i,I(t)))?r:(r=e.call(i,L(t)))?r:(r=e.call(i,V(t)))?r:(r=e.call(i,U(t)))||!1}function R(t){var e=0;return z(t)||(e=W(t)*k(t)),e}function I(t){return[t[0],t[1]]}function L(t){return[t[2],t[1]]}function w(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function A(t,e){var i;return e===n.a.BOTTOM_LEFT?i=I(t):e===n.a.BOTTOM_RIGHT?i=L(t):e===n.a.TOP_LEFT?i=U(t):e===n.a.TOP_RIGHT?i=V(t):Object(r.a)(!1,13),i}function M(t,e){var i=Math.min(t[0],e[0]),r=Math.min(t[1],e[1]);return(Math.max(t[2],e[2])-i)*(Math.max(t[3],e[3])-r)}function F(t,e,i,r,n){var o=e*r[0]/2,a=e*r[1]/2,s=Math.cos(i),l=Math.sin(i),u=o*s,c=o*l,h=a*s,d=a*l,p=t[0],f=t[1],y=p-u+d,v=p-u-d,m=p+u-d,_=p+u+d,b=f-c-h,S=f-c+h,O=f+c+h,C=f+c-h;return g(Math.min(y,v,m,_),Math.min(b,S,O,C),Math.max(y,v,m,_),Math.max(b,S,O,C),n)}function k(t){return t[3]-t[1]}function N(t,e){return R(D(t,e))}function D(t,e,i){var r=i||[1/0,1/0,-1/0,-1/0];return Z(t,e)?(t[0]>e[0]?r[0]=t[0]:r[0]=e[0],t[1]>e[1]?r[1]=t[1]:r[1]=e[1],t[2]<e[2]?r[2]=t[2]:r[2]=e[2],t[3]<e[3]?r[3]=t[3]:r[3]=e[3]):y(r),r}function G(t){return W(t)+k(t)}function B(t){return[t[2]-t[0],t[3]-t[1]]}function U(t){return[t[0],t[3]]}function V(t){return[t[2],t[3]]}function W(t){return t[2]-t[0]}function Z(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function z(t){return t[2]<t[0]||t[3]<t[1]}function H(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Y(t,e){var i=(t[2]-t[0])/2*(e-1),r=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=r,t[3]+=r}function X(t,e,i){var r=!1,n=p(t,e),a=p(t,i);if(n===o.a.INTERSECTING||a===o.a.INTERSECTING)r=!0;else{var s,l,u=t[0],c=t[1],h=t[2],d=t[3],f=e[0],g=e[1],y=i[0],v=i[1],m=(v-g)/(y-f);a&o.a.ABOVE&&!(n&o.a.ABOVE)&&(r=(s=y-(v-d)/m)>=u&&s<=h),r||!(a&o.a.RIGHT)||n&o.a.RIGHT||(r=(l=v-(y-h)*m)>=c&&l<=d),r||!(a&o.a.BELOW)||n&o.a.BELOW||(r=(s=y-(v-c)/m)>=u&&s<=h),r||!(a&o.a.LEFT)||n&o.a.LEFT||(r=(l=v-(y-u)*m)>=c&&l<=d)}return r}function q(t,e,i){var r=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]];return e(r,r,2),function(t,e,i){return g(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}([r[0],r[2],r[4],r[6]],[r[1],r[3],r[5],r[7]],i)}},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return l}),i.d(e,"e",function(){return u}),i.d(e,"f",function(){return c}),i.d(e,"g",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"i",function(){return p}),i.d(e,"j",function(){return f}),i.d(e,"k",function(){return g}),i.d(e,"l",function(){return y}),i.d(e,"m",function(){return v}),i.d(e,"n",function(){return m});var r=i(0),n=i(116);function o(t){return a(Object(r.getAllTextContent)(t,!1))}function a(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function s(t){var e=Object(r.getAllTextContent)(t,!1),i=Date.parse(e);return isNaN(i)?void 0:i/1e3}function l(t){return u(Object(r.getAllTextContent)(t,!1))}function u(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function c(t){return h(Object(r.getAllTextContent)(t,!1))}function h(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function d(t){return Object(r.getAllTextContent)(t,!1).trim()}function p(t,e){m(t,e?"1":"0")}function f(t,e){t.appendChild(r.DOCUMENT.createCDATASection(e))}function g(t,e){var i=new Date(1e3*e),o=i.getUTCFullYear()+"-"+Object(n.b)(i.getUTCMonth()+1,2)+"-"+Object(n.b)(i.getUTCDate(),2)+"T"+Object(n.b)(i.getUTCHours(),2)+":"+Object(n.b)(i.getUTCMinutes(),2)+":"+Object(n.b)(i.getUTCSeconds(),2)+"Z";t.appendChild(r.DOCUMENT.createTextNode(o))}function y(t,e){var i=e.toPrecision();t.appendChild(r.DOCUMENT.createTextNode(i))}function v(t,e){var i=e.toString();t.appendChild(r.DOCUMENT.createTextNode(i))}function m(t,e){t.appendChild(r.DOCUMENT.createTextNode(e))}},function(t,e,i){"use strict";i.r(e),i.d(e,"bindListener",function(){return n}),i.d(e,"findListener",function(){return o}),i.d(e,"getListeners",function(){return a}),i.d(e,"listen",function(){return u}),i.d(e,"listenOnce",function(){return c}),i.d(e,"unlisten",function(){return h}),i.d(e,"unlistenByKey",function(){return d}),i.d(e,"unlistenAll",function(){return p});var r=i(11);function n(t){var e=function(e){var i=t.listener,r=t.bindTo||t.target;return t.callOnce&&d(t),i.call(r,e)};return t.boundListener=e,e}function o(t,e,i,r){for(var n,o=0,a=t.length;o<a;++o)if((n=t[o]).listener===e&&n.bindTo===i)return r&&(n.deleteIndex=o),n}function a(t,e){var i=s(t);return i?i[e]:void 0}function s(t,e){var i=t.ol_lm;return!i&&e&&(i=t.ol_lm={}),i}function l(t,e){var i=a(t,e);if(i){for(var n=0,o=i.length;n<o;++n)t.removeEventListener(e,i[n].boundListener),Object(r.clear)(i[n]);i.length=0;var l=s(t);l&&(delete l[e],0===Object.keys(l).length&&function(t){delete t.ol_lm}(t))}}function u(t,e,i,r,a){var l=s(t,!0),u=l[e];u||(u=l[e]=[]);var c=o(u,i,r,!1);return c?a||(c.callOnce=!1):(c={bindTo:r,callOnce:!!a,listener:i,target:t,type:e},t.addEventListener(e,n(c)),u.push(c)),c}function c(t,e,i,r){return u(t,e,i,r,!0)}function h(t,e,i,r){var n=a(t,e);if(n){var s=o(n,i,r,!0);s&&d(s)}}function d(t){if(t&&t.target){t.target.removeEventListener(t.type,t.boundListener);var e=a(t.target,t.type);if(e){var i="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==i&&e.splice(i,1),0===e.length&&l(t.target,t.type)}Object(r.clear)(t)}}function p(t){var e=s(t);if(e)for(var i in e)l(t,i)}},function(t,e,i){"use strict";function r(){return function(){throw new Error("Unimplemented abstract method.")}()}function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}i.r(e),i.d(e,"abstract",function(){return r}),i.d(e,"inherits",function(){return n}),i.d(e,"getUid",function(){return a}),i.d(e,"VERSION",function(){return s});var o=0;function a(t){return t.ol_uid||(t.ol_uid=String(++o))}var s="5.3.3"},function(t,e,i){"use strict";i.r(e),e.default={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=window.Zondy=window.Zondy||{};r.Event=r.Event||{},r.Object=r.Object||{},r.Object.ContourAnalyse=r.Object.ContourAnalyse||{},r.Object.Theme=r.Object.Theme||{},r.Service=r.Service||{},r.Socket=r.Socket||{},r.Enum=r.Enum||{},r.Enum.Net=r.Enum.Net||{},r.Enum.Theme=r.Enum.Theme||{},r.Enum.Map=r.Enum.Map||{},r.Catalog=r.Catalog||{},r.Util=r.Util||{},r.CRS=r.CRS||{},r.Map=r.Map||{},r.xsd=r.xsd||{},r.XLink=r.XLink||{},r.extent=r.extent||{},r.xml=r.xml||{},r.array=r.array||{},r.string=r.string||{},r.LevelRenderer=r.LevelRenderer||{},r.LevelRenderer.Tool=r.LevelRenderer.Tool||{},r.LevelRenderer.Animation=r.LevelRenderer.Animation||{},r.Feature=r.Feature||{},r.Feature.ShapeParameters=r.Feature.ShapeParameters||{},r.Geometry=r.Geometry||{},r.Client=r.Client||{},r.Source=r.Source||{},r.GeomInteraction=r.GeomInteraction||{},r.Format=r.Format||{},r.Control=r.Control||{},r.OGC=r.OGC||{},e.Zondy=r},function(t,e,i){"use strict";i.r(e),i.d(e,"ONE",function(){return r}),i.d(e,"SRC_ALPHA",function(){return n}),i.d(e,"COLOR_ATTACHMENT0",function(){return o}),i.d(e,"COLOR_BUFFER_BIT",function(){return a}),i.d(e,"TRIANGLES",function(){return s}),i.d(e,"TRIANGLE_STRIP",function(){return l}),i.d(e,"ONE_MINUS_SRC_ALPHA",function(){return u}),i.d(e,"ARRAY_BUFFER",function(){return c}),i.d(e,"ELEMENT_ARRAY_BUFFER",function(){return h}),i.d(e,"STREAM_DRAW",function(){return d}),i.d(e,"STATIC_DRAW",function(){return p}),i.d(e,"DYNAMIC_DRAW",function(){return f}),i.d(e,"CULL_FACE",function(){return g}),i.d(e,"BLEND",function(){return y}),i.d(e,"STENCIL_TEST",function(){return v}),i.d(e,"DEPTH_TEST",function(){return m}),i.d(e,"SCISSOR_TEST",function(){return _}),i.d(e,"UNSIGNED_BYTE",function(){return b}),i.d(e,"UNSIGNED_SHORT",function(){return S}),i.d(e,"UNSIGNED_INT",function(){return O}),i.d(e,"FLOAT",function(){return C}),i.d(e,"RGBA",function(){return T}),i.d(e,"FRAGMENT_SHADER",function(){return x}),i.d(e,"VERTEX_SHADER",function(){return E}),i.d(e,"LINK_STATUS",function(){return P}),i.d(e,"LINEAR",function(){return j}),i.d(e,"TEXTURE_MAG_FILTER",function(){return R}),i.d(e,"TEXTURE_MIN_FILTER",function(){return I}),i.d(e,"TEXTURE_WRAP_S",function(){return L}),i.d(e,"TEXTURE_WRAP_T",function(){return w}),i.d(e,"TEXTURE_2D",function(){return A}),i.d(e,"TEXTURE0",function(){return M}),i.d(e,"CLAMP_TO_EDGE",function(){return F}),i.d(e,"COMPILE_STATUS",function(){return k}),i.d(e,"FRAMEBUFFER",function(){return N}),i.d(e,"getContext",function(){return G}),i.d(e,"DEBUG",function(){return V}),i.d(e,"HAS",function(){return W}),i.d(e,"MAX_TEXTURE_SIZE",function(){return B}),i.d(e,"EXTENSIONS",function(){return U});var r=1,n=770,o=36064,a=16384,s=4,l=5,u=771,c=34962,h=34963,d=35040,p=35044,f=35048,g=2884,y=3042,v=2960,m=2929,_=3089,b=5121,S=5123,O=5125,C=5126,T=6408,x=35632,E=35633,P=35714,j=9729,R=10240,I=10241,L=10242,w=10243,A=3553,M=33984,F=33071,k=35713,N=36160,D=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function G(t,e){for(var i=D.length,r=0;r<i;++r)try{var n=t.getContext(D[r],e);if(n)return n}catch(t){}return null}var B,U,V=!0,W=!1;if("undefined"!=typeof window&&"WebGLRenderingContext"in window)try{var Z=G(document.createElement("canvas"),{failIfMajorPerformanceCaveat:!0});Z&&(W=!0,B=Z.getParameter(Z.MAX_TEXTURE_SIZE),U=Z.getSupportedExtensions())}catch(t){}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";i.r(e);var r=i(70),n=i(1),o=i(19),a=i(127),s=i(49),l=6378137,u=Math.PI*l,c=[-u,-u,u,u],h=[-180,-85,180,85],d=function(t){function e(e){t.call(this,{code:e,units:s.default.METERS,extent:c,global:!0,worldExtent:h,getPointResolution:function(t,e){return t/Object(o.b)(e[1]/l)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),p=[new d("EPSG:3857"),new d("EPSG:102100"),new d("EPSG:102113"),new d("EPSG:900913"),new d("urn:ogc:def:crs:EPSG:6.18:3:3857"),new d("urn:ogc:def:crs:EPSG::3857"),new d("http://www.opengis.net/gml/srs/epsg.xml#3857")];function f(t,e,i){var r=t.length,n=i>1?i:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(r));for(var a=u,s=0;s<r;s+=n){o[s]=a*t[s]/180;var c=l*Math.log(Math.tan(Math.PI*(t[s+1]+90)/360));c>a?c=a:c<-a&&(c=-a),o[s+1]=c}return o}function g(t,e,i){var r=t.length,n=i>1?i:2,o=e;void 0===o&&(o=n>2?t.slice():new Array(r));for(var a=0;a<r;a+=n)o[a]=180*t[a]/u,o[a+1]=360*Math.atan(Math.exp(t[a+1]/l))/Math.PI-90;return o}var y=[-180,-90,180,90],v=6378137*Math.PI/180,m=function(t){function e(e,i){t.call(this,{code:e,units:s.default.DEGREES,extent:y,axisOrientation:i,global:!0,metersPerUnit:v,worldExtent:y})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),_=[new m("CRS:84"),new m("EPSG:4326","neu"),new m("urn:ogc:def:crs:EPSG::4326","neu"),new m("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new m("urn:ogc:def:crs:OGC:1.3:CRS84"),new m("urn:ogc:def:crs:OGC:2:84"),new m("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new m("urn:x-ogc:def:crs:EPSG:4326","neu")],b={},S=i(131);function O(t,e,i){var r;if(void 0!==e){for(var n=0,o=t.length;n<o;++n)e[n]=t[n];r=e}else r=t.slice();return r}function C(t,e,i){if(void 0!==e&&t!==e){for(var r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function T(t){!function(t,e){b[t]=e}(t.getCode(),t),Object(S.a)(t,t,O)}function x(t){t.forEach(T)}function E(t){return"string"==typeof t?function(t){return b[t]||null}(t):t||null}function P(t,e,i,n){var o,a=(t=E(t)).getPointResolutionFunc();if(a)o=a(e,i);else if(t.getUnits()==s.default.DEGREES&&!n||n==s.default.DEGREES)o=e;else{var l=N(t,E("EPSG:4326")),u=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];u=l(u,u,2),o=(Object(r.getDistance)(u.slice(0,2),u.slice(2,4))+Object(r.getDistance)(u.slice(4,6),u.slice(6,8)))/2;var c=n?s.METERS_PER_UNIT[n]:t.getMetersPerUnit();void 0!==c&&(o/=c)}return o}function j(t){x(t),t.forEach(function(e){t.forEach(function(t){e!==t&&Object(S.a)(e,t,O)})})}function R(t,e,i,r){t.forEach(function(t){e.forEach(function(e){Object(S.a)(t,e,i),Object(S.a)(e,t,r)})})}function I(){b={},Object(S.b)()}function L(t,e){return t?"string"==typeof t?E(t):t:E(e)}function w(t){return function(e,i,r){for(var n=e.length,o=void 0!==r?r:2,a=void 0!==i?i:new Array(n),s=0;s<n;s+=o){var l=t([e[s],e[s+1]]);a[s]=l[0],a[s+1]=l[1];for(var u=o-1;u>=2;--u)a[s+u]=e[s+u]}return a}}function A(t,e,i,r){var n=E(t),o=E(e);Object(S.a)(n,o,w(i)),Object(S.a)(o,n,w(r))}function M(t,e){return G(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function F(t,e){var i=G(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),r=i[0];return(r<-180||r>180)&&(i[0]=Object(o.d)(r+180,360)-180),i}function k(t,e){if(t===e)return!0;var i=t.getUnits()===e.getUnits();return t.getCode()===e.getCode()?i:N(t,e)===O&&i}function N(t,e){var i=t.getCode(),r=e.getCode(),n=Object(S.c)(i,r);return n||(n=C),n}function D(t,e){return N(E(t),E(e))}function G(t,e,i){return D(e,i)(t,void 0,t.length)}function B(t,e,i){var r=D(e,i);return Object(n.applyTransform)(t,r)}function U(t,e,i){return N(e,i)(t)}function V(){j(p),j(_),R(_,p,f,g)}i.d(e,"cloneTransform",function(){return O}),i.d(e,"identityTransform",function(){return C}),i.d(e,"addProjection",function(){return T}),i.d(e,"addProjections",function(){return x}),i.d(e,"get",function(){return E}),i.d(e,"getPointResolution",function(){return P}),i.d(e,"addEquivalentProjections",function(){return j}),i.d(e,"addEquivalentTransforms",function(){return R}),i.d(e,"clearAllProjections",function(){return I}),i.d(e,"createProjection",function(){return L}),i.d(e,"createTransformFromCoordinateTransform",function(){return w}),i.d(e,"addCoordinateTransforms",function(){return A}),i.d(e,"fromLonLat",function(){return M}),i.d(e,"toLonLat",function(){return F}),i.d(e,"equivalent",function(){return k}),i.d(e,"getTransformFromProjections",function(){return N}),i.d(e,"getTransform",function(){return D}),i.d(e,"transform",function(){return G}),i.d(e,"transformExtent",function(){return B}),i.d(e,"transformWithProjections",function(){return U}),i.d(e,"addCommon",function(){return V}),i.d(e,"METERS_PER_UNIT",function(){return s.METERS_PER_UNIT}),i.d(e,"Projection",function(){return a.default}),V()},function(t,e,i){"use strict";i.r(e),e.default={CHANGE:"change",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",ERROR:"error",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",MOUSEDOWN:"mousedown",MOUSEMOVE:"mousemove",MOUSEOUT:"mouseout",MOUSEUP:"mouseup",MOUSEWHEEL:"mousewheel",MSPOINTERDOWN:"MSPointerDown",RESIZE:"resize",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",WHEEL:"wheel"}},function(t,e,i){"use strict";i.r(e),i.d(e,"assign",function(){return r}),i.d(e,"clear",function(){return n}),i.d(e,"getValues",function(){return o}),i.d(e,"isEmpty",function(){return a});var r="function"==typeof Object.assign?Object.assign:function(t,e){var i=arguments;if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,o=arguments.length;n<o;++n){var a=i[n];if(void 0!==a&&null!==a)for(var s in a)a.hasOwnProperty(s)&&(r[s]=a[s])}return r};function n(t){for(var e in t)delete t[e]}function o(t){var e=[];for(var i in t)e.push(t[i]);return e}function a(t){var e;for(e in t)return!1;return!e}},function(t,e,i){"use strict";function r(t,e,i){for(var r,o,a=i||n,s=0,l=t.length,u=!1;s<l;)(o=+a(t[r=s+(l-s>>1)],e))<0?s=r+1:(l=r,u=!o);return u?s:~s}function n(t,e){return t>e?1:t<e?-1:0}function o(t,e){return t.indexOf(e)>=0}function a(t,e,i){var r,n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function s(t,e,i){for(;e<i;){var r=t[e];t[e]=t[i],t[i]=r,++e,--i}}function l(t,e){for(var i=Array.isArray(e)?e:[e],r=i.length,n=0;n<r;n++)t[t.length]=i[n]}function u(t,e){var i=t.indexOf(e),r=i>-1;return r&&t.splice(i,1),r}function c(t,e){for(var i,r=t.length>>>0,n=0;n<r;n++)if(e(i=t[n],n,t))return i;return null}function h(t,e){var i=t.length;if(i!==e.length)return!1;for(var r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}function d(t,e){var i,r=t.length,n=Array(t.length);for(i=0;i<r;i++)n[i]={index:i,value:t[i]};for(n.sort(function(t,i){return e(t.value,i.value)||t.index-i.index}),i=0;i<t.length;i++)t[i]=n[i].value}function p(t,e){var i;return t.every(function(r,n){return i=n,!e(r,n,t)})?-1:i}function f(t,e,i){var r=e||n;return t.every(function(e,n){if(0===n)return!0;var o=r(t[n-1],e);return!(o>0||i&&0===o)})}i.d(e,"a",function(){return r}),i.d(e,"i",function(){return n}),i.d(e,"f",function(){return o}),i.d(e,"h",function(){return a}),i.d(e,"k",function(){return s}),i.d(e,"c",function(){return l}),i.d(e,"j",function(){return u}),i.d(e,"d",function(){return c}),i.d(e,"b",function(){return h}),i.d(e,"l",function(){return d}),i.d(e,"e",function(){return p}),i.d(e,"g",function(){return f})},function(t,e,i){t.exports={default:i(524),__esModule:!0}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(125));e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,r.default)(e))&&"function"!=typeof e?t:e}},function(t,e,i){"use strict";e.__esModule=!0;var r=a(i(526)),n=a(i(530)),o=a(i(125));function a(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,o.default)(e)));t.prototype=(0,n.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(r.default?(0,r.default)(t,e):t.__proto__=e)}},function(t,e,i){"use strict";i.r(e),e.default={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4,ABORT:5}},function(t,e,i){"use strict";i.d(e,"c",function(){return o}),i.d(e,"f",function(){return a}),i.d(e,"e",function(){return s}),i.d(e,"i",function(){return u}),i.d(e,"a",function(){return c}),i.d(e,"g",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"j",function(){return p}),i.d(e,"b",function(){return f}),i.d(e,"d",function(){return g});var r=i(23),n=new Array(6);function o(){return[1,0,0,1,0,0]}function a(t){return l(t,1,0,0,1,0,0)}function s(t,e){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=e[0],u=e[1],c=e[2],h=e[3],d=e[4],p=e[5];return t[0]=i*l+n*u,t[1]=r*l+o*u,t[2]=i*c+n*h,t[3]=r*c+o*h,t[4]=i*d+n*p+a,t[5]=r*d+o*p+s,t}function l(t,e,i,r,n,o,a){return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function c(t,e){var i=e[0],r=e[1];return e[0]=t[0]*i+t[2]*r+t[4],e[1]=t[1]*i+t[3]*r+t[5],e}function h(t,e){var i=Math.cos(e),r=Math.sin(e);return s(t,l(n,i,r,-r,i,0,0))}function d(t,e,i){return s(t,l(n,e,0,0,i,0,0))}function p(t,e,i){return s(t,l(n,1,0,0,1,e,i))}function f(t,e,i,r,n,o,a,s){var l=Math.sin(o),u=Math.cos(o);return t[0]=r*u,t[1]=n*l,t[2]=-r*l,t[3]=n*u,t[4]=a*r*u-s*r*l+e,t[5]=a*n*l+s*n*u+i,t}function g(t){var e=function(t){return t[0]*t[3]-t[1]*t[2]}(t);Object(r.a)(0!==e,32);var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5];return t[0]=a/e,t[1]=-n/e,t[2]=-o/e,t[3]=i/e,t[4]=(o*l-a*s)/e,t[5]=-(i*l-n*s)/e,t}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(283));e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,r.default)(t,n.key,n)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}()},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return a}),i.d(e,"h",function(){return s}),i.d(e,"g",function(){return l}),i.d(e,"f",function(){return u}),i.d(e,"i",function(){return c}),i.d(e,"j",function(){return h}),i.d(e,"d",function(){return d}),i.d(e,"c",function(){return p});var r=i(23);function n(t,e,i){return Math.min(Math.max(t,e),i)}var o="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function a(t){return Object(r.a)(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function s(t,e,i,r,n,o){var a=n-i,s=o-r;if(0!==a||0!==s){var u=((t-i)*a+(e-r)*s)/(a*a+s*s);u>1?(i=n,r=o):u>0&&(i+=a*u,r+=s*u)}return l(t,e,i,r)}function l(t,e,i,r){var n=i-t,o=r-e;return n*n+o*o}function u(t){for(var e=t.length,i=0;i<e;i++){for(var r=i,n=Math.abs(t[i][i]),o=i+1;o<e;o++){var a=Math.abs(t[o][i]);a>n&&(n=a,r=o)}if(0===n)return null;var s=t[r];t[r]=t[i],t[i]=s;for(var l=i+1;l<e;l++)for(var u=-t[l][i]/t[i][i],c=i;c<e+1;c++)i==c?t[l][c]=0:t[l][c]+=u*t[i][c]}for(var h=new Array(e),d=e-1;d>=0;d--){h[d]=t[d][e]/t[d][d];for(var p=d-1;p>=0;p--)t[p][e]-=t[p][d]*h[d]}return h}function c(t){return 180*t/Math.PI}function h(t){return t*Math.PI/180}function d(t,e){var i=t%e;return i*e<0?i+e:i}function p(t,e,i){return t+i*(e-t)}},function(t,e,i){"use strict";i.r(e),e.default={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"}},function(t,e,i){"use strict";i.r(e),i.d(e,"defaultFont",function(){return l}),i.d(e,"defaultFillStyle",function(){return u}),i.d(e,"defaultLineCap",function(){return c}),i.d(e,"defaultLineDash",function(){return h}),i.d(e,"defaultLineDashOffset",function(){return d}),i.d(e,"defaultLineJoin",function(){return p}),i.d(e,"defaultMiterLimit",function(){return f}),i.d(e,"defaultStrokeStyle",function(){return g}),i.d(e,"defaultTextAlign",function(){return y}),i.d(e,"defaultTextBaseline",function(){return v}),i.d(e,"defaultPadding",function(){return m}),i.d(e,"defaultLineWidth",function(){return _}),i.d(e,"labelCache",function(){return b}),i.d(e,"checkedFonts",function(){return S}),i.d(e,"textHeights",function(){return C}),i.d(e,"checkFont",function(){return T}),i.d(e,"measureTextHeight",function(){return E}),i.d(e,"measureTextWidth",function(){return P}),i.d(e,"rotateAtOffset",function(){return j}),i.d(e,"resetTransform",function(){return R}),i.d(e,"drawImage",function(){return I});var r=i(37),n=i(24),o=i(11),a=i(173),s=i(17),l="10px sans-serif",u=[0,0,0,1],c="round",h=[],d=0,p="round",f=10,g=[0,0,0,1],y="center",v="middle",m=[0,0,0,0],_=1,b=new a.default,S={},O=null,C={},T=function(){var t,e,i=60,n=S,a="32px ",s=["monospace","serif"],l=s.length,u="wmytzilWMYTZIL@#/&?$%10ï€“";function c(t){for(var i=x(),r=100;r<=700;r+=300){for(var n=r+" ",o=!0,c=0;c<l;++c){var h=s[c];if(i.font=n+a+h,e=i.measureText(u).width,t!=h){i.font=n+a+t+","+h;var d=i.measureText(u).width;o=o&&d!=e}}if(o)return!0}return!1}function h(){var e=!0;for(var r in n)n[r]<i&&(c(r)?(n[r]=i,Object(o.clear)(C),O=null,b.clear()):(++n[r],e=!1));e&&(clearInterval(t),t=void 0)}return function(e){var o=Object(r.g)(e);if(o)for(var a=0,s=o.length;a<s;++a){var l=o[a];l in n||(n[l]=i,c(l)||(n[l]=0,void 0===t&&(t=setInterval(h,32))))}}}();function x(){return O||(O=Object(n.createCanvasContext2D)(1,1)),O}var E=function(){var t,e=C;return function(i){var r=e[i];return void 0==r&&(t||((t=document.createElement("span")).textContent="M",t.style.margin=t.style.padding="0 !important",t.style.position="absolute !important",t.style.left="-99999px !important"),t.style.font=i,document.body.appendChild(t),r=e[i]=t.offsetHeight,document.body.removeChild(t)),r}}();function P(t,e){var i=x();return t!=i.font&&(i.font=t),i.measureText(e).width}function j(t,e,i,r){0!==e&&(t.translate(i,r),t.rotate(e),t.translate(-i,-r))}var R=Object(s.c)();function I(t,e,i,r,n,o,a,s,l,u,c){var h;1!=i&&(h=t.globalAlpha,t.globalAlpha=h*i),e&&t.setTransform.apply(t,e),t.drawImage(r,n,o,a,s,l,u,a*c,s*c),h&&(t.globalAlpha=h),e&&t.setTransform.apply(t,R)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCanvasContext2D=exports.mixin=exports.merge=exports.DeepMerge=exports.ChineseToUtf8=exports.getTopAnalysisResult=exports.bindAsEventListener=exports.bind=exports.newGuid=exports.cloneObject=exports.copyAttributesWithClip=exports.copyAttributes=exports.transformResult=exports.toJSON=exports.isInTheSameDomain=exports.supportCanvas=exports.isSupportCanvas=exports.getBrowser=exports.Browser=exports.IS_GECKO=exports.getParameters=exports.urlAppend=exports.getWFParameterString=exports.getParameterString=exports.applyDefaults=exports.modifyDOMElement=exports.indexOf=exports.removeItem=exports.isElement=exports.getElement=exports.reset=exports.copyExcluce=exports.copy=exports.extendDeep=exports.isArray=exports.extend=void 0;var _defineProperty=__webpack_require__(283),_defineProperty2=_interopRequireDefault(_defineProperty),_getOwnPropertyDescriptor=__webpack_require__(349),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor),_getOwnPropertySymbols=__webpack_require__(499),_getOwnPropertySymbols2=_interopRequireDefault(_getOwnPropertySymbols),_getOwnPropertyNames=__webpack_require__(359),_getOwnPropertyNames2=_interopRequireDefault(_getOwnPropertyNames),_classCallCheck2=__webpack_require__(8),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_typeof2=__webpack_require__(125),_typeof3=_interopRequireDefault(_typeof2),_Base=__webpack_require__(6);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var extend=function(t,e){if(t=t||{},e){for(var i in e){var r=e[i];void 0!==r&&(t[i]=r)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},extendDeep=function t(e,i){var r,n=Object.prototype.toString;for(r in e=e||{},i)i.hasOwnProperty(r)&&("object"===(0,_typeof3.default)(i[r])?("[object Null]"!==n.call(e[r])&&"[object Undefined]"!==n.call(e[r])||(e[r]="[object Array]"===n.call(i[r])?[]:{}),t(e[r],i[r])):e[r]=i[r],""!==i[r]&&null!==i[r]||(e[r]=i[r]));return e},copy=function(t,e){var i;if(t=t||{},e)for(var r in t)void 0!==(i=e[r])&&(t[r]=i)},copyExcluce=function(t,e,i){var r;if(t=t||{},e)for(var n in e)void 0!==(r=e[n])&&"function"!=typeof r&&i.indexOf(n)<0&&(t[n]=r)},reset=function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===(0,_typeof3.default)(t[e])&&t[e]instanceof Array){for(var i in t[e])t[e][i].destroy&&t[e][i].destroy();t[e].length=0}else"object"===(0,_typeof3.default)(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement=function(){for(var t=[],e=0,i=arguments.length;e<i;e++){var r=arguments[e];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;t.push(r)}return t},isElement=function(t){return!(!t||1!==t.nodeType)},removeItem=function(t,e){for(var i=t.length-1;i>=0;i--)t[i]===e&&t.splice(i,1);return t},indexOf=function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},modifyDOMElement=function(t,e,i,r,n,o,a,s){e&&(t.id=e),i&&(t.style.left=i.x+"px",t.style.top=i.y+"px"),r&&(t.style.width=r.w+"px",t.style.height=r.h+"px"),n&&(t.style.position=n),o&&(t.style.border=o),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults=function(t,e){t=t||{};var i="function"==typeof window.Event&&e instanceof window.Event;for(var r in e)(void 0===t[r]||!i&&e.hasOwnProperty&&e.hasOwnProperty(r)&&!t.hasOwnProperty(r))&&(t[r]=e[r]);return!i&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString=function(t){var e=[];for(var i in t){var r=t[i];if(null!=r&&"function"!=typeof r){var n;if("object"===(void 0===r?"undefined":(0,_typeof3.default)(r))&&r.constructor===Array){for(var o,a=[],s=0,l=r.length;s<l;s++)o=r[s],a.push(encodeURIComponent(null===o||void 0===o?"":o));n=a.join(",")}else n=encodeURIComponent(r);e.push(encodeURIComponent(i)+"="+n)}}return e.join("&")},getWFParameterString=function(t){var e=[];for(var i in t){var r=t[i];if(null!=r&&"function"!=typeof r){var n;if("object"===(void 0===r?"undefined":(0,_typeof3.default)(r))&&r.constructor===Array){for(var o,a=[],s=0,l=r.length;s<l;s++)o=r[s],a.push(encodeURIComponent(null===o||void 0===o?"":o));n=a.join(",")}else n=encodeURIComponent(r);e.push(encodeURIComponent(i)+":"+n)}}return e.join(";")},urlAppend=function(t,e){var i=t;if(e){var r=(t+" ").split(/[?&]/);i+=" "===r.pop()?e:r.length?"&"+e:"?"+e}return i},getParameters=function(t){var e="";if((t=null===t||void 0===t?window.location.href:t).indexOf("?")>-1){var i=t.indexOf("?")+1;t.indexOf("#");var r=t.indexOf("#")>-1?t.indexOf("#"):t.length;e=t.substring(i,r)}for(var n={},o=e.split(/[&;]/),a=0,s=o.length;a<s;++a){var l=o[a].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(t){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),n[u]=c}}return n},IS_GECKO=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),Browser=function(){var t,e="",i="",r="pc",n=navigator.userAgent.toLowerCase();return n.indexOf("msie")>-1||n.indexOf("trident")>-1&&n.indexOf("rv")>-1?(e="msie",t=n.match(/msie ([\d.]+)/)||n.match(/rv:([\d.]+)/)):n.indexOf("chrome")>-1?(e="chrome",t=n.match(/chrome\/([\d.]+)/)):n.indexOf("firefox")>-1?(e="firefox",t=n.match(/firefox\/([\d.]+)/)):n.indexOf("opera")>-1?(e="opera",t=n.match(/version\/([\d.]+)/)):n.indexOf("safari")>-1&&(e="safari",t=n.match(/version\/([\d.]+)/)),i=t?t[1]:"",n.indexOf("ipad")>-1||n.indexOf("ipod")>-1||n.indexOf("iphone")>-1?r="apple":n.indexOf("android")>-1&&(i=(t=n.match(/version\/([\d.]+)/))?t[1]:"",r="android"),{name:e,version:i,device:r}}(),getBrowser=function(){return Browser},isSupportCanvas=function(){var t=!0,e=getBrowser();return document.createElement("canvas").getContext?("firefox"===e.name&&parseFloat(e.version)<5&&(t=!1),"safari"===e.name&&parseFloat(e.version)<4&&(t=!1),"opera"===e.name&&parseFloat(e.version)<10&&(t=!1),"msie"===e.name&&parseFloat(e.version)<9&&(t=!1)):t=!1,t}(),supportCanvas=function(){return isSupportCanvas},isInTheSameDomain=function(t){if(!t)return!0;var e=t.indexOf("//"),i=document.location.toString(),r=i.indexOf("//");if(-1===e)return!0;var n,o=n=t.substring(0,e),a=i.substring(r+2);r=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,r),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==o.toLowerCase())return!1;var c=(o=t.substring(e+2)).indexOf(":");e=o.indexOf("/");var h,d=o.substring(0,e);return-1!==c?h=o.substring(0,c):(h=o.substring(0,e),d+=":"+("http:"===n.toLowerCase()?80:443)),h===document.domain&&d===l},toJSON=function t(e){var i=e;if(null==i)return null;switch(i.constructor){case String:return(i=(i=(i=(i=(i=(i='"'+i.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r=[],n=0,o=i.length;n<o;n++)r.push(t(i[n]));return"["+r.join(",")+"]";case Number:return isFinite(i)?String(i):null;case Boolean:return String(i);case Date:return"{'__type':\"System.DateTime\",'Year':"+i.getFullYear()+",'Month':"+(i.getMonth()+1)+",'Day':"+i.getDate()+",'Hour':"+i.getHours()+",'Minute':"+i.getMinutes()+",'Second':"+i.getSeconds()+",'Millisecond':"+i.getMilliseconds()+",'TimezoneOffset':"+i.getTimezoneOffset()+"}";default:if("object"===(void 0===i?"undefined":(0,_typeof3.default)(i))){if(i.length){for(r=[],n=0,o=i.length;n<o;n++)r.push(t(i[n]));return"["+r.join(",")+"]"}var a=[];for(var s in i)"function"!=typeof i[s]&&"CLASS_NAME"!==s&&a.push("'"+s+"':"+t(i[s]));return a.length>0?"{"+a.join(",")+"}":"{}"}return i.toString()}},transformResult=function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes=function(t,e){if(t=t||{},e)for(var i in e){var r=e[i];void 0!==r&&"CLASS_NAME"!==i&&"function"!=typeof r&&(t[i]=r)}return t},copyAttributesWithClip=function(t,e,i){if(t=t||{},e)for(var r in e){var n=!1;if(i&&i.length)for(var o=0,a=i.length;o<a;o++)if(r===i[o]){n=!0;break}if(!0!==n){var s=e[r];void 0!==s&&"CLASS_NAME"!==r&&"function"!=typeof s&&(t[r]=s)}}return t},cloneObject=function t(e){if(null===e||"object"!==(void 0===e?"undefined":(0,_typeof3.default)(e)))return e;if(e instanceof Date)return(i=new Date).setTime(e.getTime()),i;if(e instanceof Array)return e.slice(0);if(e instanceof Object){var i={};for(var r in e)e.hasOwnProperty(r)&&(i[r]=t(e[r]));return i}throw new Error("Unable to copy obj! Its type isn't supported.")},newGuid=function(){for(var t="",e=1;e<=32;e++)t+=Math.floor(16*Math.random()).toString(16),8!=e&&12!=e&&16!=e&&20!=e||(t+="-");return t},bind=function(t,e){var i=Array.prototype.slice.apply(arguments,[2]);return function(){var r=i.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,r)}},bindAsEventListener=function(t,e){return function(i){return t.call(e,i||window.event)}},getTopAnalysisResult=function(t){switch(t.value){case 0:return"Intersect";case 1:return"Disjoin";case 2:return"Include";case 3:return"Adjacent";default:return"Unknown"}},ChineseToUtf8=function(t){return t.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(t){return EncodeUtf8(t)})},EncodeUtf8=function(t){var e=escape(t).split("%"),i="";""!=e[0]&&(i=e[0]);for(var r=1;r<e.length;r++)"u"==e[r].substring(0,1)?i+=Hex2Utf8(Str2Hex(e[r].substring(1,5))):i+="%"+e[r];return i},Str2Hex=function Str2Hex(s){for(var c="",n,ss="0123456789ABCDEF",digS="",i=0;i<s.length;i++)c=s.charAt(i),n=ss.indexOf(c),digS+=Dec2Dig(eval(n));return digS},Hex2Utf8=function Hex2Utf8(s){var retS="",tempS="",ss="";if(16==s.length){tempS="1110"+s.substring(0,4),tempS+="10"+s.substring(4,10),tempS+="10"+s.substring(10,16);for(var sss="0123456789ABCDEF",i=0;i<3;i++)retS+="%",ss=tempS.substring(8*i,8*(eval(i)+1)),retS+=sss.charAt(Dig2Dec(ss.substring(0,4))),retS+=sss.charAt(Dig2Dec(ss.substring(4,8)));return retS}return""},Dig2Dec=function Dig2Dec(s){var retV=0;if(4==s.length){for(var i=0;i<4;i++)retV+=eval(s.charAt(i))*Math.pow(2,3-i);return retV}return-1},Dec2Dig=function(t){for(var e="",i=0,r=0;r<4;r++)t>=(i=Math.pow(2,3-r))?(e+="1",t-=i):e+="0";return e},DeepMerge=function t(e,i){if("[object Object]"===Object.prototype.toString.call(e)&&"[object Object]"===Object.prototype.toString.call(i))for(var r in i)e[r]?e[r]=t(e[r],i[r]):e[r]=i[r];else e="[object Array]"===Object.prototype.toString.call(e)&&"[object Array]"===Object.prototype.toString.call(i)?e.concat(i):i;return e},mergeItem=function(t,e,i,r){e.hasOwnProperty(i)&&("object"!=(0,_typeof3.default)(t[i])||{"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1}[Object.prototype.toString.call(t[i])]?!r&&i in t||(t[i]=e[i]):merge(t[i],e[i],r))},merge=function(t,e,i){for(var r in e)mergeItem(t,e,r,i);return t},mixin=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var r=function t(i){(0,_classCallCheck3.default)(this,t);for(var r=0;r<e.length;r++)a(this,new e[r](i))},n=0;n<e.length;n++){var o=e[n];a(r,o),a(r.prototype,o.prototype),a(r.prototype,new o)}return r;function a(t,e){var i=(0,_getOwnPropertyNames2.default)(e);_getOwnPropertySymbols2.default&&(i=i.concat((0,_getOwnPropertySymbols2.default)(e)));for(var r=0;r<i.length;r++){var n=i[r];if("constructor"!==n&&"prototype"!==n&&"name"!==n&&"length"!==n){var o=(0,_getOwnPropertyDescriptor2.default)(e,n);window.ActiveXObject?(0,_defineProperty2.default)(t,n,o||{}):(0,_defineProperty2.default)(t,n,o)}}}},createCanvasContext2D=function(t,e){var i=document.createElement("CANVAS");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")};exports.extend=extend,exports.isArray=isArray,exports.extendDeep=extendDeep,exports.copy=copy,exports.copyExcluce=copyExcluce,exports.reset=reset,exports.getElement=getElement,exports.isElement=isElement,exports.removeItem=removeItem,exports.indexOf=indexOf,exports.modifyDOMElement=modifyDOMElement,exports.applyDefaults=applyDefaults,exports.getParameterString=getParameterString,exports.getWFParameterString=getWFParameterString,exports.urlAppend=urlAppend,exports.getParameters=getParameters,exports.IS_GECKO=IS_GECKO,exports.Browser=Browser,exports.getBrowser=getBrowser,exports.isSupportCanvas=isSupportCanvas,exports.supportCanvas=supportCanvas,exports.isInTheSameDomain=isInTheSameDomain,exports.toJSON=toJSON,exports.transformResult=transformResult,exports.copyAttributes=copyAttributes,exports.copyAttributesWithClip=copyAttributesWithClip,exports.cloneObject=cloneObject,exports.newGuid=newGuid,exports.bind=bind,exports.bindAsEventListener=bindAsEventListener,exports.getTopAnalysisResult=getTopAnalysisResult,exports.ChineseToUtf8=ChineseToUtf8,exports.DeepMerge=DeepMerge,exports.merge=merge,exports.mixin=mixin,exports.createCanvasContext2D=createCanvasContext2D,_Base.Zondy.Util.extend=extend,_Base.Zondy.Util.isArray=isArray,_Base.Zondy.Util.extendDeep=extendDeep,_Base.Zondy.Util.copy=copy,_Base.Zondy.Util.copyExcluce=copyExcluce,_Base.Zondy.Util.reset=reset,_Base.Zondy.Util.getElement=getElement,_Base.Zondy.Util.isElement=isElement,_Base.Zondy.Util.removeItem=removeItem,_Base.Zondy.Util.indexOf=indexOf,_Base.Zondy.Util.modifyDOMElement=modifyDOMElement,_Base.Zondy.Util.applyDefaults=applyDefaults,_Base.Zondy.Util.getParameterString=getParameterString,_Base.Zondy.Util.getWFParameterString=getWFParameterString,_Base.Zondy.Util.urlAppend=urlAppend,_Base.Zondy.Util.getParameters=getParameters,_Base.Zondy.IS_GECKO=IS_GECKO,_Base.Zondy.Browser=Browser,_Base.Zondy.Util.getBrowser=getBrowser,_Base.Zondy.Util.isSupportCanvas=isSupportCanvas,_Base.Zondy.Util.supportCanvas=supportCanvas,_Base.Zondy.Util.isInTheSameDomain=isInTheSameDomain,_Base.Zondy.Util.toJSON=toJSON,_Base.Zondy.Util.transformResult=transformResult,_Base.Zondy.Util.copyAttributes=copyAttributes,_Base.Zondy.Util.copyAttributesWithClip=copyAttributesWithClip,_Base.Zondy.Util.cloneObject=cloneObject,_Base.Zondy.Util.newGuid=newGuid,_Base.Zondy.Util.bind=bind,_Base.Zondy.Util.bindAsEventListener=bindAsEventListener,_Base.Zondy.Util.getTopAnalysisResult=getTopAnalysisResult,_Base.Zondy.Util.ChineseToUtf8=ChineseToUtf8,_Base.Zondy.Util.DeepMerge=DeepMerge,_Base.Zondy.Util.merge=merge,_Base.Zondy.Util.mixin=mixin,_Base.Zondy.Util.createCanvasContext2D=createCanvasContext2D},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i(184);function n(t,e){if(!t)throw new r.a(e)}},function(t,e,i){"use strict";function r(t,e){var i=document.createElement("canvas");return t&&(i.width=t),e&&(i.height=e),i.getContext("2d")}function n(t){var e=t.offsetWidth,i=getComputedStyle(t);return e+(parseInt(i.marginLeft,10)+parseInt(i.marginRight,10))}function o(t){var e=t.offsetHeight,i=getComputedStyle(t);return e+(parseInt(i.marginTop,10)+parseInt(i.marginBottom,10))}function a(t,e){var i=e.parentNode;i&&i.replaceChild(t,e)}function s(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function l(t){for(;t.lastChild;)t.removeChild(t.lastChild)}i.r(e),i.d(e,"createCanvasContext2D",function(){return r}),i.d(e,"outerWidth",function(){return n}),i.d(e,"outerHeight",function(){return o}),i.d(e,"replaceNode",function(){return a}),i.d(e,"removeNode",function(){return s}),i.d(e,"removeChildren",function(){return l})},function(t,e,i){"use strict";i.r(e),i.d(e,"ObjectEvent",function(){return l}),i.d(e,"getChangeEventType",function(){return h});var r=i(4),n=i(122),o=i(155),a=i(35),s=i(11),l=function(t){function e(e,i,r){t.call(this,e),this.key=i,this.oldValue=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),u=function(t){function e(e){t.call(this),Object(r.getUid)(this),this.values_={},void 0!==e&&this.setProperties(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return Object(s.assign)({},this.values_)},e.prototype.notify=function(t,e){var i;i=h(t),this.dispatchEvent(new l(i,t,e)),i=n.a.PROPERTYCHANGE,this.dispatchEvent(new l(i,t,e))},e.prototype.set=function(t,e,i){if(i)this.values_[t]=e;else{var r=this.values_[t];this.values_[t]=e,r!==e&&this.notify(t,r)}},e.prototype.setProperties=function(t,e){for(var i in t)this.set(i,t[i],e)},e.prototype.unset=function(t,e){if(t in this.values_){var i=this.values_[t];delete this.values_[t],e||this.notify(t,i)}},e}(o.default),c={};function h(t){return c.hasOwnProperty(t)?c[t]:c[t]="change:"+t}e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"add",function(){return o}),i.d(e,"closestOnCircle",function(){return a}),i.d(e,"closestOnSegment",function(){return s}),i.d(e,"createStringXY",function(){return l}),i.d(e,"degreesToStringHDMS",function(){return u}),i.d(e,"format",function(){return c}),i.d(e,"equals",function(){return h}),i.d(e,"rotate",function(){return d}),i.d(e,"scale",function(){return p}),i.d(e,"squaredDistance",function(){return f}),i.d(e,"distance",function(){return g}),i.d(e,"squaredDistanceToSegment",function(){return y}),i.d(e,"toStringHDMS",function(){return v}),i.d(e,"toStringXY",function(){return m});var r=i(19),n=i(116);function o(t,e){return t[0]+=e[0],t[1]+=e[1],t}function a(t,e){var i=e.getRadius(),r=e.getCenter(),n=r[0],o=r[1],a=t[0]-n,s=t[1]-o;0===a&&0===s&&(a=1);var l=Math.sqrt(a*a+s*s);return[n+i*a/l,o+i*s/l]}function s(t,e){var i,r,n=t[0],o=t[1],a=e[0],s=e[1],l=a[0],u=a[1],c=s[0],h=s[1],d=c-l,p=h-u,f=0===d&&0===p?0:(d*(n-l)+p*(o-u))/(d*d+p*p||0);return f<=0?(i=l,r=u):f>=1?(i=c,r=h):(i=l+f*d,r=u+f*p),[i,r]}function l(t){return function(e){return m(e,t)}}function u(t,e,i){var o=Object(r.d)(e+180,360)-180,a=Math.abs(3600*o),s=i||0,l=Math.pow(10,s),u=Math.floor(a/3600),c=Math.floor((a-3600*u)/60),h=a-3600*u-60*c;return(h=Math.ceil(h*l)/l)>=60&&(h=0,c+=1),c>=60&&(c=0,u+=1),u+"Â° "+Object(n.b)(c,2)+"â€² "+Object(n.b)(h,2,s)+"â€³"+(0==o?"":" "+t.charAt(o<0?1:0))}function c(t,e,i){return t?e.replace("{x}",t[0].toFixed(i)).replace("{y}",t[1].toFixed(i)):""}function h(t,e){for(var i=!0,r=t.length-1;r>=0;--r)if(t[r]!=e[r]){i=!1;break}return i}function d(t,e){var i=Math.cos(e),r=Math.sin(e),n=t[0]*i-t[1]*r,o=t[1]*i+t[0]*r;return t[0]=n,t[1]=o,t}function p(t,e){return t[0]*=e,t[1]*=e,t}function f(t,e){var i=t[0]-e[0],r=t[1]-e[1];return i*i+r*r}function g(t,e){return Math.sqrt(f(t,e))}function y(t,e){return f(t,s(t,e))}function v(t,e){return t?u("NS",t[1],e)+" "+u("EW",t[0],e):""}function m(t,e){return c(t,"{x}, {y}",e)}},function(t,e,i){"use strict";e.a={IDLE:0,LOADING:1,LOADED:2,ERROR:3}},function(t,e,i){"use strict";i.r(e),e.default={ANIMATING:0,INTERACTING:1}},function(t,e,i){"use strict";function r(){return!0}function n(){return!1}function o(){}i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";e.a={CIRCLE:"Circle",DEFAULT:"Default",IMAGE:"Image",LINE_STRING:"LineString",POLYGON:"Polygon",TEXT:"Text"}},function(t,e,i){"use strict";i.r(e);var r=i(10);e.default={SINGLECLICK:"singleclick",CLICK:r.default.CLICK,DBLCLICK:r.default.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";i.r(e),i.d(e,"altKeyOnly",function(){return s}),i.d(e,"altShiftKeysOnly",function(){return l}),i.d(e,"focus",function(){return u}),i.d(e,"always",function(){return c}),i.d(e,"click",function(){return h}),i.d(e,"mouseActionButton",function(){return d}),i.d(e,"never",function(){return p}),i.d(e,"pointerMove",function(){return f}),i.d(e,"singleClick",function(){return g}),i.d(e,"doubleClick",function(){return y}),i.d(e,"noModifierKeys",function(){return v}),i.d(e,"platformModifierKeyOnly",function(){return m}),i.d(e,"shiftKeyOnly",function(){return _}),i.d(e,"targetNotEditable",function(){return b}),i.d(e,"mouseOnly",function(){return S}),i.d(e,"primaryAction",function(){return O});var r=i(31),n=i(23),o=i(29),a=i(42),s=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},l=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},u=function(t){return t.target.getTargetElement()===document.activeElement},c=o.b,h=function(t){return t.type==r.default.CLICK},d=function(t){var e=t.originalEvent;return 0==e.button&&!(a.WEBKIT&&a.MAC&&e.ctrlKey)},p=o.a,f=function(t){return"pointermove"==t.type},g=function(t){return t.type==r.default.SINGLECLICK},y=function(t){return t.type==r.default.DBLCLICK},v=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},m=function(t){var e=t.originalEvent;return!e.altKey&&(a.MAC?e.metaKey:e.ctrlKey)&&!e.shiftKey},_=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},b=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},S=function(t){var e=t.pointerEvent;return Object(n.a)(void 0!==e,56),"mouse"==e.pointerType},O=function(t){var e=t.pointerEvent;return Object(n.a)(void 0!==e,56),e.isPrimary&&0===e.button}},function(t,e,i){"use strict";i.r(e),i.d(e,"transformWithOptions",function(){return s});var r=i(11),n=i(4),o=i(9),a=function(){this.dataProjection=null,this.defaultFeatureProjection=null};function s(t,e,i){var r,n=i?Object(o.get)(i.featureProjection):null,a=i?Object(o.get)(i.dataProjection):null;if(r=n&&a&&!Object(o.equivalent)(n,a)?Array.isArray(t)?Object(o.transformExtent)(t,a,n):(e?t.clone():t).transform(e?n:a,e?a:n):t,e&&i&&void 0!==i.decimals&&!Array.isArray(r)){var s=Math.pow(10,i.decimals);r===t&&(r=t.clone()),r.applyTransform(function(t){for(var e=0,i=t.length;e<i;++e)t[e]=Math.round(t[e]*s)/s;return t})}return r}a.prototype.getReadOptions=function(t,e){var i;return e&&(i={dataProjection:e.dataProjection?e.dataProjection:this.readProjection(t),featureProjection:e.featureProjection}),this.adaptOptions(i)},a.prototype.adaptOptions=function(t){return Object(r.assign)({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},a.prototype.getLastExtent=function(){return null},a.prototype.getType=function(){return Object(n.abstract)()},a.prototype.readFeature=function(t,e){return Object(n.abstract)()},a.prototype.readFeatures=function(t,e){return Object(n.abstract)()},a.prototype.readGeometry=function(t,e){return Object(n.abstract)()},a.prototype.readProjection=function(t){return Object(n.abstract)()},a.prototype.writeFeature=function(t,e){return Object(n.abstract)()},a.prototype.writeFeatures=function(t,e){return Object(n.abstract)()},a.prototype.writeGeometry=function(t,e){return Object(n.abstract)()},e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"circular",function(){return O}),i.d(e,"fromExtent",function(){return C}),i.d(e,"fromCircle",function(){return T}),i.d(e,"makeRegular",function(){return x});var r=i(12),n=i(1),o=i(20),a=i(5),s=i(147),l=i(38),u=i(76),c=i(70),h=i(158),d=i(102),p=i(107),f=i(87),g=i(91),y=i(65),v=i(159),m=i(93),_=i(119),b=i(19),S=function(t){function e(e,i,r){t.call(this),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==i&&r?(this.setFlatCoordinates(i,e),this.ends_=r):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLinearRing=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return Object(p.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return Object(h.b)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.d)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Object(g.b)(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Object(n.getCenter)(this.getExtent());this.flatInteriorPoint_=Object(y.a)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new l.default(this.getFlatInteriorPoint(),o.default.XYM)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new s.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[],n=0,o=0,a=i.length;o<a;++o){var l=i[o],u=new s.default(e.slice(n,l),t);r.push(u),n=l}return r},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.b)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.d)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(_.c)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),i,0,r),new e(i,o.default.XY,r)},e.prototype.getType=function(){return a.default.POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.c)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(f.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(u.default);function O(t,e,i,n){for(var a=i||32,s=[],l=0;l<a;++l)Object(r.c)(s,Object(c.offset)(t,e,2*Math.PI*l/a,n));return s.push(s[0],s[1]),new S(s,o.default.XY,[s.length])}function C(t){var e=t[0],i=t[1],r=t[2],n=t[3],a=[e,i,e,n,r,n,r,i,e,i];return new S(a,o.default.XY,[a.length])}function T(t,e,i){for(var r=e||32,n=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=n*(r+1),l=new Array(s),u=0;u<s;u+=n){l[u]=0,l[u+1]=0;for(var c=2;c<n;c++)l[u+c]=a[c]}var h=[l.length],d=new S(l,o,h);return x(d,a,t.getRadius(),i),d}function x(t,e,i,r){for(var n=t.getFlatCoordinates(),o=t.getStride(),a=n.length/o-1,s=r||0,l=0;l<=a;++l){var u=l*o,c=s+2*Object(b.d)(l,a)*Math.PI/a;n[u]=e[0]+i*Math.cos(c),n[u+1]=e[1]+i*Math.sin(c)}t.changed()}e.default=S},function(t,e,i){"use strict";i.r(e),i.d(e,"stopPropagation",function(){return n}),i.d(e,"preventDefault",function(){return o});var r=function(t){this.propagationStopped,this.type=t,this.target=null};function n(t){t.stopPropagation()}function o(t){t.preventDefault()}r.prototype.preventDefault=function(){this.propagationStopped=!0},r.prototype.stopPropagation=function(){this.propagationStopped=!0},e.default=r},function(t,e,i){"use strict";i.r(e),i.d(e,"createStyleFunction",function(){return l});var r=i(23),n=i(3),o=i(10),a=i(25),s=function(t){function e(e){if(t.call(this),this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,Object(n.listen)(this,Object(a.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),e)if("function"==typeof e.getSimplifiedGeometry){var i=e;this.setGeometry(i)}else{var r=e;this.setProperties(r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var i=this.getGeometry();i&&t.setGeometry(i.clone());var r=this.getStyle();return r&&t.setStyle(r),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(Object(n.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=Object(n.listen)(t,o.default.CHANGE,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){Object(n.unlisten)(this,Object(a.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.geometryName_=t,Object(n.listen)(this,Object(a.getChangeEventType)(this.geometryName_),this.handleGeometryChanged_,this),this.handleGeometryChanged_()},e}(a.default);function l(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(Object(r.a)("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}e.default=s},function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"d",function(){return n}),i.d(e,"e",function(){return o}),i.d(e,"f",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"a",function(){return l}),i.d(e,"g",function(){return u});var r="ol-hidden",n="ol-selectable",o="ol-unselectable",a="ol-unsupported",s="ol-control",l="ol-collapsed",u=function(){var t,e={};return function(i){if(t||(t=document.createElement("div").style),!(i in e)){t.font=i;var r=t.fontFamily;if(t.font="",!r)return null;e[i]=r.split(/,\s?/)}return e[i]}}()},function(t,e,i){"use strict";i.r(e);var r=i(1),n=i(5),o=i(76),a=i(87),s=i(19),l=function(t){function e(e,i){t.call(this),this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=Object(s.g)(t,e,n[0],n[1]);if(o<r){for(var a=this.stride,l=0;l<a;++l)i[l]=n[l];return i.length=a,o}return r},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Object(r.createOrUpdateFromCoordinate)(this.flatCoordinates,t)},e.prototype.getType=function(){return n.default.POINT},e.prototype.intersectsExtent=function(t){return Object(r.containsXY)(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(a.deflateCoordinate)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o.default);e.default=l},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(1),o=i(20),a=i(5),s=i(76),l=i(102),u=i(87),c=i(91),h=i(64),d=i(159),p=i(255),f=i(253),g=i(119),y=function(t){function e(e,i){t.call(this),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(l.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(l.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.forEachSegment=function(t){return Object(f.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM)return null;var i=void 0!==e&&e;return Object(h.b)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return Object(p.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(g.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,o.default.XY)},e.prototype.getType=function(){return a.default.LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(d.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.default);e.default=y},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(13)),n=o(i(349));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function t(e,i,o){null===e&&(e=Function.prototype);var a=(0,n.default)(e,i);if(void 0===a){var s=(0,r.default)(e);return null===s?void 0:t(s,i,o)}if("value"in a)return a.value;var l=a.get;return void 0!==l?l.call(o):void 0}},function(t,e,i){"use strict";i.r(e),i.d(e,"pan",function(){return l}),i.d(e,"rotate",function(){return u}),i.d(e,"rotateWithoutConstraints",function(){return c}),i.d(e,"zoom",function(){return h}),i.d(e,"zoomByDelta",function(){return d}),i.d(e,"zoomWithoutConstraints",function(){return p});var r=i(25),n=i(56),o=i(67),a=i(19),s=function(t){function e(e){t.call(this),e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getActive=function(){return this.get(o.a.ACTIVE)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(o.a.ACTIVE,t)},e.prototype.setMap=function(t){this.map_=t},e}(r.default);function l(t,e,i){var r=t.getCenter();if(r){var o=t.constrainCenter([r[0]+e[0],r[1]+e[1]]);i?t.animate({duration:i,easing:n.linear,center:o}):t.setCenter(o)}}function u(t,e,i,r){c(t,e=t.constrainRotation(e,0),i,r)}function c(t,e,i,r){if(void 0!==e){var o=t.getRotation(),a=t.getCenter();void 0!==o&&a&&r>0?t.animate({rotation:e,anchor:i,duration:r,easing:n.easeOut}):t.rotate(e,i)}}function h(t,e,i,r,n){p(t,e=t.constrainResolution(e,0,n),i,r)}function d(t,e,i,r){var n=t.getResolution(),o=t.constrainResolution(n,e,0);if(void 0!==o){var s=t.getResolutions();o=Object(a.a)(o,t.getMinResolution()||s[s.length-1],t.getMaxResolution()||s[0])}if(i&&void 0!==o&&o!==n){var l=t.getCenter(),u=t.calculateCenterZoom(o,i);u=t.constrainCenter(u),i=[(o*l[0]-n*u[0])/(o-n),(o*l[1]-n*u[1])/(o-n)]}p(t,o,i,r)}function p(t,e,i,r){if(e){var o=t.getResolution(),a=t.getCenter();if(void 0!==o&&a&&e!==o&&r)t.animate({resolution:e,anchor:i,duration:r,easing:n.easeOut});else{if(i){var s=t.calculateCenterZoom(e,i);t.setCenter(s)}t.setResolution(e)}}}e.default=s},function(t,e,i){"use strict";i.r(e),i.d(e,"FIREFOX",function(){return o}),i.d(e,"SAFARI",function(){return a}),i.d(e,"WEBKIT",function(){return s}),i.d(e,"MAC",function(){return l}),i.d(e,"DEVICE_PIXEL_RATIO",function(){return u}),i.d(e,"CANVAS_LINE_DASH",function(){return c}),i.d(e,"GEOLOCATION",function(){return h}),i.d(e,"TOUCH",function(){return d}),i.d(e,"POINTER",function(){return p}),i.d(e,"MSPOINTER",function(){return f});var r=i(7);i.d(e,"WEBGL",function(){return r.HAS});var n="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",o=-1!==n.indexOf("firefox"),a=-1!==n.indexOf("safari")&&-1==n.indexOf("chrom"),s=-1!==n.indexOf("webkit")&&-1==n.indexOf("edge"),l=-1!==n.indexOf("macintosh"),u=window.devicePixelRatio||1,c=function(){var t=!1;try{t=!!document.createElement("canvas").getContext("2d").setLineDash}catch(t){}return t}(),h="geolocation"in navigator,d="ontouchstart"in window,p="PointerEvent"in window,f=!!navigator.msPointerEnabled},function(t,e,i){"use strict";e.a={UNDEFINED:"undefined",LOADING:"loading",READY:"ready",ERROR:"error"}},function(t,e,i){"use strict";i.r(e),i.d(e,"GMLNS",function(){return m});var r=i(12),n=i(36),o=i(33),a=i(120),s=i(20),l=i(39),u=i(147),c=i(54),h=i(82),d=i(88),p=i(38),f=i(34),g=i(11),y=i(9),v=i(0),m="http://www.opengis.net/gml",_=/^[\s\xa0]*$/,b=function(t){function e(e){t.call(this);var i=e||{};this.featureType=i.featureType,this.featureNS=i.featureNS,this.srsName=i.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:Object(v.makeArrayPusher)(this.readFeaturesInternal),featureMembers:Object(v.makeReplacer)(this.readFeaturesInternal)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesInternal=function(t,e){var i=t.localName,r=null;if("FeatureCollection"==i)r=Object(v.pushParseAndPop)([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==i||"featureMember"==i){var n=e[0],o=n.featureType,a=n.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,l=t.childNodes.length;s<l;++s){var u=t.childNodes[s];if(1===u.nodeType){var c=u.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",d=0,p=u.namespaceURI;for(var f in a){if(a[f]===p){h=f;break}++d}h||(a[h="p"+d]=p),o.push(h+":"+c)}}}"featureMember"!=i&&(n.featureType=o,n.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var y={},m=Array.isArray(o)?o:[o];for(var _ in a){for(var b={},S=0,O=m.length;S<O;++S)(-1===m[S].indexOf(":")?"p0":m[S].split(":")[0])===_&&(b[m[S].split(":").pop()]="featureMembers"==i?Object(v.makeArrayPusher)(this.readFeatureElement,this):Object(v.makeReplacer)(this.readFeatureElement,this));y[a[_]]=b}r="featureMember"==i?Object(v.pushParseAndPop)(void 0,y,t,e):Object(v.pushParseAndPop)([],y,t,e)}return null===r&&(r=[]),r},e.prototype.readGeometryElement=function(t,e){var i=e[0];i.srsName=t.firstElementChild.getAttribute("srsName"),i.srsDimension=t.firstElementChild.getAttribute("srsDimension");var r=Object(v.pushParseAndPop)(null,this.GEOMETRY_PARSERS,t,e,this);return r?Object(o.transformWithOptions)(r,!1,i):void 0},e.prototype.readFeatureElementInternal=function(t,e,i){for(var r,o={},a=t.firstElementChild;a;a=a.nextElementSibling){var s=void 0,l=a.localName;0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)?(s=Object(v.getAllTextContent)(a,!1),_.test(s)&&(s=void 0)):(i&&(s=this.readGeometryElement(a,e)),s?"boundedBy"!==l&&(r=l):s=this.readFeatureElementInternal(a,e,!1)),o[l]?(o[l]instanceof Array||(o[l]=[o[l]]),o[l].push(s)):o[l]=s;var u=a.attributes.length;if(u>0){o[l]={_content_:o[l]};for(var c=0;c<u;c++){var h=a.attributes[c].name;o[l][h]=a.attributes[c].value}}}if(i){var d=new n.default(o);r&&d.setGeometryName(r);var p=t.getAttribute("fid")||Object(v.getAttributeNS)(t,this.namespace,"id");return p&&d.setId(p),d}return o},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new p.default(i,s.default.XYZ)},e.prototype.readMultiPoint=function(t,e){var i=Object(v.pushParseAndPop)([],this.MULTIPOINT_PARSERS_,t,e,this);return i?new h.default(i):void 0},e.prototype.readMultiLineString=function(t,e){var i=Object(v.pushParseAndPop)([],this.MULTILINESTRING_PARSERS_,t,e,this);if(i)return new c.default(i)},e.prototype.readMultiPolygon=function(t,e){var i=Object(v.pushParseAndPop)([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(i)return new d.default(i)},e.prototype.pointMemberParser_=function(t,e){Object(v.parseNode)(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){Object(v.parseNode)(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){Object(v.parseNode)(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);return i?new l.default(i,s.default.XYZ):void 0},e.prototype.readFlatLinearRing_=function(t,e){return Object(v.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var i=this.readFlatCoordinatesFromNode_(t,e);if(i)return new u.default(i,s.default.XYZ)},e.prototype.readPolygon=function(t,e){var i=Object(v.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(i&&i[0]){var n,o,a=i[0],l=[a.length];for(n=1,o=i.length;n<o;++n)Object(r.c)(a,i[n]),l.push(a.length);return new f.default(a,s.default.XYZ,l)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return Object(v.pushParseAndPop)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var i={featureType:this.featureType,featureNS:this.featureNS};return e&&Object(g.assign)(i,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[i])||[]},e.prototype.readProjectionFromNode=function(t){return Object(y.get)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(a.a);b.prototype.namespace=m,b.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},b.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},b.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},b.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Object(v.makeArrayPusher)(b.prototype.pointMemberParser_),pointMembers:Object(v.makeArrayPusher)(b.prototype.pointMemberParser_)}},b.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Object(v.makeArrayPusher)(b.prototype.lineStringMemberParser_),lineStringMembers:Object(v.makeArrayPusher)(b.prototype.lineStringMemberParser_)}},b.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Object(v.makeArrayPusher)(b.prototype.polygonMemberParser_),polygonMembers:Object(v.makeArrayPusher)(b.prototype.polygonMemberParser_)}},b.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Object(v.makeArrayPusher)(b.prototype.readFlatCoordinatesFromNode_)}},b.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(v.makeArrayPusher)(b.prototype.readLineString)}},b.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(v.makeArrayPusher)(b.prototype.readPolygon)}},b.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Object(v.makeReplacer)(b.prototype.readFlatLinearRing_)}},e.default=b},function(t,e,i){"use strict";function r(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function n(t){return t[0]>0&&t[1]>0}function o(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function a(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}i.r(e),i.d(e,"buffer",function(){return r}),i.d(e,"hasArea",function(){return n}),i.d(e,"scale",function(){return o}),i.d(e,"toSize",function(){return a})},function(t,e,i){"use strict";function r(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function n(t,e,i){return t+"/"+e+"/"+i}function o(t){return n(t[0],t[1],t[2])}function a(t){return t.split("/").map(Number)}function s(t){return(t[1]<<t[0])+t[2]}function l(t){var e,i,r=t[0],n=new Array(r),o=1<<r-1;for(e=0;e<r;++e)i=48,t[1]&o&&(i+=1),t[2]&o&&(i+=2),n[e]=String.fromCharCode(i),o>>=1;return n.join("")}function u(t,e){var i=t[0],r=t[1],n=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,i):e.getFullTileRange(i))||o.containsXY(r,n)}i.r(e),i.d(e,"createOrUpdate",function(){return r}),i.d(e,"getKeyZXY",function(){return n}),i.d(e,"getKey",function(){return o}),i.d(e,"fromKey",function(){return a}),i.d(e,"hash",function(){return s}),i.d(e,"quadKey",function(){return l}),i.d(e,"withinExtentAndZ",function(){return u})},function(t,e,i){"use strict";i.r(e),i.d(e,"centroid",function(){return s});var r=i(31),n=i(41),o=i(11),a=function(t){function e(e){var i=e||{};t.call(this,i),i.handleDownEvent&&(this.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(this.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(this.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(this.handleUpEvent=i.handleUpEvent),i.stopDown&&(this.stopDown=i.stopDown),this.handlingDownUpSequence=!1,this.trackedPointers_={},this.targetPointers=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==r.default.POINTERDRAG)this.handleDragEvent(t);else if(t.type==r.default.POINTERUP){var i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==r.default.POINTERDOWN){var n=this.handleDownEvent(t);n&&t.preventDefault(),this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==r.default.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===r.default.POINTERDOWN||e===r.default.POINTERDRAG||e===r.default.POINTERUP}(t)){var e=t.pointerEvent,i=e.pointerId.toString();t.type==r.default.POINTERUP?delete this.trackedPointers_[i]:t.type==r.default.POINTERDOWN?this.trackedPointers_[i]=e:i in this.trackedPointers_&&(this.trackedPointers_[i]=e),this.targetPointers=Object(o.getValues)(this.trackedPointers_)}},e}(n.default);function s(t){for(var e=t.length,i=0,r=0,n=0;n<e;n++)i+=t[n].clientX,r+=t[n].clientY;return[i/e,r/e]}e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"CollectionEvent",function(){return s});var r=i(184),n=i(51),o=i(25),a="length",s=function(t){function e(e,i){t.call(this,e),this.element=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(35).default),l=function(t){function e(e,i){t.call(this);var r=i||{};if(this.unique_=!!r.unique,this.array_=e||[],this.unique_)for(var n=0,o=this.array_.length;n<o;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,i=t.length;e<i;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)t(e[i],i,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(a)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new s(n.default.ADD,e))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,i=0,r=e.length;i<r;++i)if(e[i]===t)return this.removeAt(i)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new s(n.default.REMOVE,e)),e},e.prototype.setAt=function(t,e){var i=this.getLength();if(t<i){this.unique_&&this.assertUnique_(e,t);var r=this.array_[t];this.array_[t]=e,this.dispatchEvent(new s(n.default.REMOVE,r)),this.dispatchEvent(new s(n.default.ADD,e))}else{for(var o=i;o<t;++o)this.insertAt(o,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(a,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new r.a(58)},e}(o.default);e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"METERS_PER_UNIT",function(){return n});var r={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},n={};n[r.DEGREES]=2*Math.PI*6370997/360,n[r.FEET]=.3048,n[r.METERS]=1,n[r.USFEET]=1200/3937,e.default=r},function(t,e,i){"use strict";e.a={IMAGE:"IMAGE",TILE:"TILE",VECTOR_TILE:"VECTOR_TILE",VECTOR:"VECTOR"}},function(t,e,i){"use strict";i.r(e),e.default={ADD:"add",REMOVE:"remove"}},function(t,e,i){"use strict";function r(t,e,i,r,n,o){for(var a=o||[],s=0,l=e;l<i;l+=r){var u=t[l],c=t[l+1];a[s++]=n[0]*u+n[2]*c+n[4],a[s++]=n[1]*u+n[3]*c+n[5]}return o&&a.length!=s&&(a.length=s),a}function n(t,e,i,r,n,o,a){for(var s=a||[],l=Math.cos(n),u=Math.sin(n),c=o[0],h=o[1],d=0,p=e;p<i;p+=r){var f=t[p]-c,g=t[p+1]-h;s[d++]=c+f*l-g*u,s[d++]=h+f*u+g*l;for(var y=p+2;y<p+r;++y)s[d++]=t[y]}return a&&s.length!=d&&(s.length=d),s}function o(t,e,i,r,n,o,a,s){for(var l=s||[],u=a[0],c=a[1],h=0,d=e;d<i;d+=r){var p=t[d]-u,f=t[d+1]-c;l[h++]=u+n*p,l[h++]=c+o*f;for(var g=d+2;g<d+r;++g)l[h++]=t[g]}return s&&l.length!=h&&(l.length=h),l}function a(t,e,i,r,n,o,a){for(var s=a||[],l=0,u=e;u<i;u+=r){s[l++]=t[u]+n,s[l++]=t[u+1]+o;for(var c=u+2;c<u+r;++c)s[l++]=t[c]}return a&&s.length!=l&&(s.length=l),s}i.d(e,"c",function(){return r}),i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"d",function(){return a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgsServiceBase=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,n.default)(this,e),i=i||{};var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.CLASS_NAME="Zondy.IgsServiceBase",o}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this);var t=this;t.events&&(t.events.un(t.eventListeners),t.events.listeners=null,t.events.destroy(),t.events=null,t.eventListeners=null)}},{key:"processAsync",value:function(t){this.request({method:t&&t.method?t.method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed,data:t&&t.data?t.data:null,headers:t&&t.headers?t.headers:null})}},{key:"serviceProcessCompleted",value:function(t){(t=(0,u.transformResult)(t)).succeed?this.events&&this.events.triggerEvent("processCompleted",{result:t}):this.events.triggerEvent("processFailed",{error:t})}}]),e}(i(412).CommonServiceBase);e.IgsServiceBase=h,Zondy.Service.IgsServiceBase=h},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(1),o=i(20),a=i(5),s=i(39),l=i(76),u=i(102),c=i(87),h=i(91),d=i(64),p=i(159),f=i(119),g=function(t){function e(e,i,n){if(t.call(this),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,i);else if(void 0!==i&&n)this.setFlatCoordinates(i,e),this.ends_=n;else{for(var o=this.getLayout(),a=e,s=[],l=[],u=0,c=a.length;u<c;++u){var h=a[u];0===u&&(o=h.getLayout()),Object(r.c)(s,h.getFlatCoordinates()),l.push(s.length)}this.setFlatCoordinates(o,s),this.ends_=l}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendLineString=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(u.a)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(u.b)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=o.default.XYM&&this.layout!=o.default.XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,n=void 0!==i&&i;return Object(d.c)(this.flatCoordinates,0,this.ends_,this.stride,t,r,n)},e.prototype.getCoordinates=function(){return Object(h.b)(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new s.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[],n=0,o=0,a=e.length;o<a;++o){var l=e[o],u=new s.default(t.slice(n,l),i);r.push(u),n=l}return r},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,o=this.stride,a=0,s=n.length;a<s;++a){var l=n[a],u=Object(d.a)(e,i,l,o,.5);Object(r.c)(t,u),i=l}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(f.b)(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,o.default.XY,r)},e.prototype.getType=function(){return a.default.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p.b)(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(c.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(l.default);e.default=g},function(t,e,i){"use strict";i.r(e),i.d(e,"asString",function(){return s}),i.d(e,"fromString",function(){return l}),i.d(e,"asArray",function(){return u}),i.d(e,"normalize",function(){return c}),i.d(e,"toString",function(){return h});var r=i(23),n=i(19),o=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,a=/^([a-z]*)$/i;function s(t){return"string"==typeof t?t:h(t)}var l=function(){var t={},e=0;return function(i){var n;if(t.hasOwnProperty(i))n=t[i];else{if(e>=1024){var s=0;for(var l in t)0==(3&s++)&&(delete t[l],--e)}n=function(t){var e,i,n,s,l;if(a.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var i=getComputedStyle(e).color;return document.body.removeChild(e),i}return""}(t)),o.exec(t)){var u,h=t.length-1;u=h<=4?1:2;var d=4===h||8===h;e=parseInt(t.substr(1+0*u,u),16),i=parseInt(t.substr(1+1*u,u),16),n=parseInt(t.substr(1+2*u,u),16),s=d?parseInt(t.substr(1+3*u,u),16):255,1==u&&(e=(e<<4)+e,i=(i<<4)+i,n=(n<<4)+n,d&&(s=(s<<4)+s)),l=[e,i,n,s/255]}else 0==t.indexOf("rgba(")?c(l=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((l=t.slice(4,-1).split(",").map(Number)).push(1),c(l)):Object(r.a)(!1,14);return l}(i),t[i]=n,++e}return n}}();function u(t){return Array.isArray(t)?t:l(t)}function c(t){return t[0]=Object(n.a)(t[0]+.5|0,0,255),t[1]=Object(n.a)(t[1]+.5|0,0,255),t[2]=Object(n.a)(t[2]+.5|0,0,255),t[3]=Object(n.a)(t[3],0,1),t}function h(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var i=t[1];i!=(0|i)&&(i=i+.5|0);var r=t[2];return r!=(0|r)&&(r=r+.5|0),"rgba("+e+","+i+","+r+","+(void 0===t[3]?1:t[3])+")"}},function(t,e,i){"use strict";function r(t){return Math.pow(t,3)}function n(t){return 1-r(1-t)}function o(t){return 3*t*t-2*t*t*t}function a(t){return t}function s(t){return t<.5?o(2*t):1-o(2*(t-.5))}i.r(e),i.d(e,"easeIn",function(){return r}),i.d(e,"easeOut",function(){return n}),i.d(e,"inAndOut",function(){return o}),i.d(e,"linear",function(){return a}),i.d(e,"upAndDown",function(){return s})},function(t,e,i){"use strict";e.a={POSTCOMPOSE:"postcompose",PRECOMPOSE:"precompose",RENDER:"render",RENDERCOMPLETE:"rendercomplete"}},function(t,e,i){t.exports={default:i(493),__esModule:!0}},function(t,e,i){"use strict";i.r(e),i.d(e,"getForProjection",function(){return c}),i.d(e,"wrapX",function(){return h}),i.d(e,"createForExtent",function(){return d}),i.d(e,"createXYZ",function(){return p}),i.d(e,"createForProjection",function(){return g}),i.d(e,"extentFromProjection",function(){return y});var r=i(148),n=i(45),o=i(1),a=i(178),s=i(9),l=i(49),u=i(105);function c(t){var e=t.getDefaultTileGrid();return e||(e=g(t),t.setDefaultTileGrid(e)),e}function h(t,e,i){var r=e[0],n=t.getTileCoordCenter(e),a=y(i);if(Object(o.containsCoordinate)(a,n))return e;var s=Object(o.getWidth)(a),l=Math.ceil((a[0]-n[0])/s);return n[0]+=s*l,t.getTileCoordForCoordAndZ(n,r)}function d(t,e,i,r){var n=void 0!==r?r:a.a.TOP_LEFT,s=f(t,e,i);return new u.default({extent:t,origin:Object(o.getCorner)(t,n),resolutions:s,tileSize:i})}function p(t){var e=t||{},i=e.extent||Object(s.get)("EPSG:3857").getExtent(),r={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:f(i,e.maxZoom,e.tileSize)};return new u.default(r)}function f(t,e,i){for(var a=void 0!==e?e:r.a,s=Object(o.getHeight)(t),l=Object(o.getWidth)(t),u=Object(n.toSize)(void 0!==i?i:r.b),c=Math.max(l/u[0],s/u[1]),h=a+1,d=new Array(h),p=0;p<h;++p)d[p]=c/Math.pow(2,p);return d}function g(t,e,i,r){return d(y(t),e,i,r)}function y(t){var e=(t=Object(s.get)(t)).getExtent();if(!e){var i=180*s.METERS_PER_UNIT[l.default.DEGREES]/t.getMetersPerUnit();e=Object(o.createOrUpdate)(-i,-i,i,i)}return e}},function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return c}),i.d(e,"c",function(){return h}),i.d(e,"d",function(){return d});var r=i(4),n=i(27),o=i(5),a=i(30),s=.5,l={Point:function(t,e,i,r){var o=i.getImage();if(o){if(o.getImageState()!=n.a.LOADED)return;var s=t.getReplay(i.getZIndex(),a.a.IMAGE);s.setImageStyle(o,t.addDeclutter(!1)),s.drawPoint(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!!o)),u.drawText(e,r)}},LineString:function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),a.a.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawLineString(e,r)}var s=i.getText();if(s){var l=t.getReplay(i.getZIndex(),a.a.TEXT);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,r)}},Polygon:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),a.a.POLYGON);s.setFillStrokeStyle(n,o),s.drawPolygon(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,r)}},MultiPoint:function(t,e,i,r){var o=i.getImage();if(o){if(o.getImageState()!=n.a.LOADED)return;var s=t.getReplay(i.getZIndex(),a.a.IMAGE);s.setImageStyle(o,t.addDeclutter(!1)),s.drawMultiPoint(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!!o)),u.drawText(e,r)}},MultiLineString:function(t,e,i,r){var n=i.getStroke();if(n){var o=t.getReplay(i.getZIndex(),a.a.LINE_STRING);o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,r)}var s=i.getText();if(s){var l=t.getReplay(i.getZIndex(),a.a.TEXT);l.setTextStyle(s,t.addDeclutter(!1)),l.drawText(e,r)}},MultiPolygon:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(o||n){var s=t.getReplay(i.getZIndex(),a.a.POLYGON);s.setFillStrokeStyle(n,o),s.drawMultiPolygon(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,r)}},GeometryCollection:function(t,e,i,r){var n,o,a=e.getGeometriesArray();for(n=0,o=a.length;n<o;++n){(0,l[a[n].getType()])(t,a[n],i,r)}},Circle:function(t,e,i,r){var n=i.getFill(),o=i.getStroke();if(n||o){var s=t.getReplay(i.getZIndex(),a.a.CIRCLE);s.setFillStrokeStyle(n,o),s.drawCircle(e,r)}var l=i.getText();if(l){var u=t.getReplay(i.getZIndex(),a.a.TEXT);u.setTextStyle(l,t.addDeclutter(!1)),u.drawText(e,r)}}};function u(t,e){return parseInt(Object(r.getUid)(t),10)-parseInt(Object(r.getUid)(e),10)}function c(t,e){var i=h(t,e);return i*i}function h(t,e){return s*t/e}function d(t,e,i,r,s,u){var c=!1,h=i.getImage();if(h){var d=h.getImageState();d==n.a.LOADED||d==n.a.ERROR?h.unlistenImageChange(s,u):(d==n.a.IDLE&&h.load(),d=h.getImageState(),h.listenImageChange(s,u),c=!0)}return function(t,e,i,r){var n=i.getGeometryFunction()(e);if(n){var s=n.getSimplifiedGeometry(r);if(i.getRenderer())!function t(e,i,r,n){if(i.getType()!=o.default.GEOMETRY_COLLECTION)e.getReplay(r.getZIndex(),a.a.DEFAULT).drawCustom(i,n,r.getRenderer());else for(var s=i.getGeometries(),l=0,u=s.length;l<u;++l)t(e,s[l],r,n)}(t,s,i,e);else(0,l[s.getType()])(t,s,i,e)}}(t,e,i,r),c}},function(t,e,i){"use strict";e.a={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(1),o=i(33),a=i(44),s=i(2),l=i(20),u=i(39),c=i(54),h=i(88),d=i(34),p=i(11),f=i(9),g=i(0),y=a.GMLNS+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",v={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},m=function(t){function e(e){var i=e||{};t.call(this,i),this.surface_=void 0!==i.surface&&i.surface,this.curve_=void 0!==i.curve&&i.curve,this.multiCurve_=void 0===i.multiCurve||i.multiCurve,this.multiSurface_=void 0===i.multiSurface||i.multiSurface,this.schemaLocation=i.schemaLocation?i.schemaLocation:y,this.hasZ=void 0!==i.hasZ&&i.hasZ}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readMultiCurve_=function(t,e){var i=Object(g.pushParseAndPop)([],this.MULTICURVE_PARSERS_,t,e,this);return i?new c.default(i):void 0},e.prototype.readMultiSurface_=function(t,e){var i=Object(g.pushParseAndPop)([],this.MULTISURFACE_PARSERS_,t,e,this);if(i)return new h.default(i)},e.prototype.curveMemberParser_=function(t,e){Object(g.parseNode)(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){Object(g.parseNode)(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return Object(g.pushParseAndPop)([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return Object(g.pushParseAndPop)([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return Object(g.pushParseAndPop)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return Object(g.pushParseAndPop)([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var i=Object(g.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.exteriorParser_=function(t,e){var i=Object(g.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.readSurface_=function(t,e){var i=Object(g.pushParseAndPop)([null],this.SURFACE_PARSERS_,t,e,this);if(i&&i[0]){var n,o,a=i[0],s=[a.length];for(n=1,o=i.length;n<o;++n)Object(r.c)(a,i[n]),s.push(a.length);return new d.default(a,l.default.XYZ,s)}},e.prototype.readCurve_=function(t,e){var i=Object(g.pushParseAndPop)([null],this.CURVE_PARSERS_,t,e,this);return i?new u.default(i,l.default.XYZ):void 0},e.prototype.readEnvelope_=function(t,e){var i=Object(g.pushParseAndPop)([null],this.ENVELOPE_PARSERS_,t,e,this);return Object(n.createOrUpdate)(i[1][0],i[1][1],i[2][0],i[2][1])},e.prototype.readFlatPos_=function(t,e){for(var i,r=Object(g.getAllTextContent)(t,!1),n=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];i=n.exec(r);)o.push(parseFloat(i[1])),r=r.substr(i[0].length);if(""===r){var a,s,l=e[0].srsName,u="enu";if(l&&(u=Object(f.get)(l).getAxisOrientation()),"neu"===u)for(a=0,s=o.length;a<s;a+=3){var c=o[a],h=o[a+1];o[a]=h,o[a+1]=c}var d=o.length;if(2==d&&o.push(0),0!==d)return o}},e.prototype.readFlatPosList_=function(t,e){var i=Object(g.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),r=e[0],n=r.srsName,o=r.srsDimension,a="enu";n&&(a=Object(f.get)(n).getAxisOrientation());var l,u,c,h=i.split(/\s+/),d=2;t.getAttribute("srsDimension")?d=Object(s.g)(t.getAttribute("srsDimension")):t.getAttribute("dimension")?d=Object(s.g)(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?d=Object(s.g)(t.parentNode.getAttribute("srsDimension")):o&&(d=Object(s.g)(o));for(var p=[],y=0,v=h.length;y<v;y+=d)l=parseFloat(h[y]),u=parseFloat(h[y+1]),c=3===d?parseFloat(h[y+2]):0,"en"===a.substr(0,2)?p.push(l,u,c):p.push(u,l,c);return p},e.prototype.writePos_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?"3":"2";t.setAttribute("srsDimension",o);var a=r.srsName,l="enu";a&&(l=Object(f.get)(a).getAxisOrientation());var u,c=e.getCoordinates();u="en"===l.substr(0,2)?c[0]+" "+c[1]:c[1]+" "+c[0],n&&(u+=" "+(c[2]||0)),Object(s.n)(t,u)},e.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=Object(f.get)(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return i&&(n+=" "+(t[2]||0)),n},e.prototype.writePosList_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=n?"3":"2";t.setAttribute("srsDimension",o);for(var a,l=r.srsName,u=e.getCoordinates(),c=u.length,h=new Array(c),d=0;d<c;++d)a=u[d],h[d]=this.getCoords_(a,l,n);Object(s.n)(t,h.join(" "))},e.prototype.writePoint_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=Object(g.createElementNS)(t.namespaceURI,"pos");t.appendChild(n),this.writePos_(n,e,i)},e.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(g.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,g.OBJECT_PROPERTY_NODE_FACTORY,n,i,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=Object(g.createElementNS)(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Object(g.createElementNS)(n.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();Object(g.pushSerializeAndPop)({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=Object(g.createElementNS)(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},e.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=Object(g.createElementNS)(t.namespaceURI,"posList");t.appendChild(n),this.writePosList_(n,e,i)}else if("Curve"===t.nodeName){var o=Object(g.createElementNS)(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();Object(g.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.srsName,o=r.hasZ;n&&t.setAttribute("srsName",n);var a=e.getPoints();Object(g.pushSerializeAndPop)({node:t,hasZ:o,srsName:n},this.POINTMEMBER_SERIALIZERS_,Object(g.makeSimpleNodeFactory)("pointMember"),a,i,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();Object(g.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeRing_=function(t,e,i){var r=Object(g.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},e.prototype.writePointMember_=function(t,e,i){var r=Object(g.createElementNS)(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},e.prototype.writeSurfacePatches_=function(t,e,i){var r=Object(g.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},e.prototype.writeCurveSegments_=function(t,e,i){var r=Object(g.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},e.prototype.writeGeometryElement=function(t,e,i){var r,n=i[i.length-1],a=Object(p.assign)({},n);a.node=t,r=Array.isArray(e)?n.dataProjection?Object(f.transformExtent)(e,n.featureProjection,n.dataProjection):e:Object(o.transformWithOptions)(e,!0,n),Object(g.pushSerializeAndPop)(a,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[r],i,void 0,this)},e.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,a=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var l=e.getProperties(),u=[],c=[];for(var h in l){var d=l[h];null!==d&&(u.push(h),c.push(d),h==a||"function"==typeof d.getSimplifiedGeometry?h in n.serializers[o]||(n.serializers[o][h]=Object(g.makeChildAppender)(this.writeGeometryElement,this)):h in n.serializers[o]||(n.serializers[o][h]=Object(g.makeChildAppender)(s.n)))}var f=Object(p.assign)({},n);f.node=t,Object(g.pushSerializeAndPop)(f,n.serializers,Object(g.makeSimpleNodeFactory)(void 0,o),c,i,u)},e.prototype.writeFeatureMembers_=function(t,e,i){var r=i[i.length-1],n=r.featureType,o=r.featureNS,a={};a[o]={},a[o][n]=Object(g.makeChildAppender)(this.writeFeatureElement,this);var s=Object(p.assign)({},r);s.node=t,Object(g.pushSerializeAndPop)(s,a,Object(g.makeSimpleNodeFactory)(n,o),e,i)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return Object(g.createElementNS)(this.namespace,v[r.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,a=n.surface,s=n.curve,l=n.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"LineString"===r&&!0===s?r="Curve":"MultiLineString"===r&&!0===l&&(r="MultiCurve"),Object(g.createElementNS)(this.namespace,r)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var i=Object(g.createElementNS)(this.namespace,"geom"),r={node:i,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object(p.assign)(r,e),this.writeGeometryElement(i,t,[r]),i},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Object(g.createElementNS)(this.namespace,"featureMembers");i.setAttributeNS(g.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation);var r={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object(p.assign)(r,e),this.writeFeatureMembers_(i,t,[r]),i},e}(a.default);m.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Object(g.makeReplacer)(m.prototype.readFlatPos_),posList:Object(g.makeReplacer)(m.prototype.readFlatPosList_)}},m.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:m.prototype.interiorParser_,exterior:m.prototype.exteriorParser_}},m.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(g.makeReplacer)(a.default.prototype.readPoint),MultiPoint:Object(g.makeReplacer)(a.default.prototype.readMultiPoint),LineString:Object(g.makeReplacer)(a.default.prototype.readLineString),MultiLineString:Object(g.makeReplacer)(a.default.prototype.readMultiLineString),LinearRing:Object(g.makeReplacer)(a.default.prototype.readLinearRing),Polygon:Object(g.makeReplacer)(a.default.prototype.readPolygon),MultiPolygon:Object(g.makeReplacer)(a.default.prototype.readMultiPolygon),Surface:Object(g.makeReplacer)(m.prototype.readSurface_),MultiSurface:Object(g.makeReplacer)(m.prototype.readMultiSurface_),Curve:Object(g.makeReplacer)(m.prototype.readCurve_),MultiCurve:Object(g.makeReplacer)(m.prototype.readMultiCurve_),Envelope:Object(g.makeReplacer)(m.prototype.readEnvelope_)}},m.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Object(g.makeArrayPusher)(m.prototype.curveMemberParser_),curveMembers:Object(g.makeArrayPusher)(m.prototype.curveMemberParser_)}},m.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Object(g.makeArrayPusher)(m.prototype.surfaceMemberParser_),surfaceMembers:Object(g.makeArrayPusher)(m.prototype.surfaceMemberParser_)}},m.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Object(g.makeArrayPusher)(a.default.prototype.readLineString),Curve:Object(g.makeArrayPusher)(m.prototype.readCurve_)}},m.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Object(g.makeArrayPusher)(a.default.prototype.readPolygon),Surface:Object(g.makeArrayPusher)(m.prototype.readSurface_)}},m.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Object(g.makeReplacer)(m.prototype.readPatch_)}},m.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Object(g.makeReplacer)(m.prototype.readSegment_)}},m.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Object(g.makeArrayPusher)(m.prototype.readFlatPosList_),upperCorner:Object(g.makeArrayPusher)(m.prototype.readFlatPosList_)}},m.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Object(g.makeReplacer)(m.prototype.readPolygonPatch_)}},m.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Object(g.makeReplacer)(m.prototype.readLineStringSegment_)}},m.prototype.writeFeatures,m.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Object(g.makeChildAppender)(m.prototype.writeRing_),interior:Object(g.makeChildAppender)(m.prototype.writeRing_)}},m.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(g.makeChildAppender)(s.n),upperCorner:Object(g.makeChildAppender)(s.n)}},m.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygonMember_)}},m.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(g.makeChildAppender)(m.prototype.writePointMember_)}},m.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(g.makeChildAppender)(m.prototype.writeLineStringOrCurveMember_),curveMember:Object(g.makeChildAppender)(m.prototype.writeLineStringOrCurveMember_)}},m.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(g.makeChildAppender)(m.prototype.writeCurveOrLineString_),MultiCurve:Object(g.makeChildAppender)(m.prototype.writeMultiCurveOrLineString_),Point:Object(g.makeChildAppender)(m.prototype.writePoint_),MultiPoint:Object(g.makeChildAppender)(m.prototype.writeMultiPoint_),LineString:Object(g.makeChildAppender)(m.prototype.writeCurveOrLineString_),MultiLineString:Object(g.makeChildAppender)(m.prototype.writeMultiCurveOrLineString_),LinearRing:Object(g.makeChildAppender)(m.prototype.writeLinearRing_),Polygon:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(g.makeChildAppender)(m.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(g.makeChildAppender)(m.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(g.makeChildAppender)(m.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(g.makeChildAppender)(m.prototype.writeEnvelope)}},e.default=m},function(t,e,i){"use strict";e.a={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s});var r=i(12),n=i(19);function o(t,e,i,o,a,s){var l=NaN,u=NaN,c=(i-e)/o;if(1===c)l=t[e],u=t[e+1];else if(2==c)l=(1-a)*t[e]+a*t[e+o],u=(1-a)*t[e+1]+a*t[e+o+1];else if(0!==c){for(var h=t[e],d=t[e+1],p=0,f=[0],g=e+o;g<i;g+=o){var y=t[g],v=t[g+1];p+=Math.sqrt((y-h)*(y-h)+(v-d)*(v-d)),f.push(p),h=y,d=v}var m=a*p,_=Object(r.a)(f,m);if(_<0){var b=(m-f[-_-2])/(f[-_-1]-f[-_-2]),S=e+(-_-2)*o;l=Object(n.c)(t[S],t[S+o],b),u=Object(n.c)(t[S+1],t[S+o+1],b)}else l=t[e+_*o],u=t[e+_*o+1]}return s?(s[0]=l,s[1]=u,s):[l,u]}function a(t,e,i,r,o,a){if(i==e)return null;var s;if(o<t[e+r-1])return a?((s=t.slice(e,e+r))[r-1]=o,s):null;if(t[i-1]<o)return a?((s=t.slice(i-r,i))[r-1]=o,s):null;if(o==t[e+r-1])return t.slice(e,e+r);for(var l=e/r,u=i/r;l<u;){var c=l+u>>1;o<t[(c+1)*r-1]?u=c:l=c+1}var h=t[l*r-1];if(o==h)return t.slice((l-1)*r,(l-1)*r+r);var d=(o-h)/(t[(l+1)*r-1]-h);s=[];for(var p=0;p<r-1;++p)s.push(Object(n.c)(t[(l-1)*r+p],t[l*r+p],d));return s.push(o),s}function s(t,e,i,r,n,o,s){if(s)return a(t,e,i[i.length-1],r,n,o);var l;if(n<t[r-1])return o?((l=t.slice(0,r))[r-1]=n,l):null;if(t[t.length-1]<n)return o?((l=t.slice(t.length-r))[r-1]=n,l):null;for(var u=0,c=i.length;u<c;++u){var h=i[u];if(e!=h){if(n<t[e+r-1])return null;if(n<=t[h-1])return a(t,e,h,r,n,!1);e=h}}return null}},function(t,e,i){"use strict";i.d(e,"a",function(){return o}),i.d(e,"b",function(){return a});var r=i(12),n=i(107);function o(t,e,i,o,a,s,l){for(var u,c,h,d,p,f,g,y=a[s+1],v=[],m=0,_=i.length;m<_;++m){var b=i[m];for(d=t[b-o],f=t[b-o+1],u=e;u<b;u+=o)p=t[u],g=t[u+1],(y<=f&&g<=y||f<=y&&y<=g)&&(h=(y-f)/(g-f)*(p-d)+d,v.push(h)),d=p,f=g}var S=NaN,O=-1/0;for(v.sort(r.i),d=v[0],u=1,c=v.length;u<c;++u){p=v[u];var C=Math.abs(p-d);C>O&&(h=(d+p)/2,Object(n.c)(t,e,i,o,h,y)&&(S=h,O=C)),d=p}return isNaN(S)&&(S=a[s]),l?(l.push(S,y,O),l):[S,y,O]}function a(t,e,i,r,n){for(var a=[],s=0,l=i.length;s<l;++s){var u=i[s];a=o(t,e,u,r,n,2*s,a),e=u[u.length-1]}return a}},function(t,e,i){"use strict";i.r(e);var r=i(101),n=i(254),o=function(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new r.default({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:n.a.POINT,this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding};o.prototype.clone=function(){return new o({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0})},o.prototype.getOverflow=function(){return this.overflow_},o.prototype.getFont=function(){return this.font_},o.prototype.getMaxAngle=function(){return this.maxAngle_},o.prototype.getPlacement=function(){return this.placement_},o.prototype.getOffsetX=function(){return this.offsetX_},o.prototype.getOffsetY=function(){return this.offsetY_},o.prototype.getFill=function(){return this.fill_},o.prototype.getRotateWithView=function(){return this.rotateWithView_},o.prototype.getRotation=function(){return this.rotation_},o.prototype.getScale=function(){return this.scale_},o.prototype.getStroke=function(){return this.stroke_},o.prototype.getText=function(){return this.text_},o.prototype.getTextAlign=function(){return this.textAlign_},o.prototype.getTextBaseline=function(){return this.textBaseline_},o.prototype.getBackgroundFill=function(){return this.backgroundFill_},o.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},o.prototype.getPadding=function(){return this.padding_},o.prototype.setOverflow=function(t){this.overflow_=t},o.prototype.setFont=function(t){this.font_=t},o.prototype.setMaxAngle=function(t){this.maxAngle_=t},o.prototype.setOffsetX=function(t){this.offsetX_=t},o.prototype.setOffsetY=function(t){this.offsetY_=t},o.prototype.setPlacement=function(t){this.placement_=t},o.prototype.setFill=function(t){this.fill_=t},o.prototype.setRotation=function(t){this.rotation_=t},o.prototype.setScale=function(t){this.scale_=t},o.prototype.setStroke=function(t){this.stroke_=t},o.prototype.setText=function(t){this.text_=t},o.prototype.setTextAlign=function(t){this.textAlign_=t},o.prototype.setTextBaseline=function(t){this.textBaseline_=t},o.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},o.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},o.prototype.setPadding=function(t){this.padding_=t},e.default=o},function(t,e,i){"use strict";e.a={ACTIVE:"active"}},function(t,e,i){"use strict";i.r(e),i.d(e,"sortByZIndex",function(){return f});var r=i(4),n=i(134),o=i(3),a=i(10),s=i(1),l=i(29),u=i(83),c=i(187),h=i(17),d=function(t){function e(e){t.call(this),this.map_=e,this.layerRenderers_={},this.layerRendererListeners_={},this.layerRendererConstructors_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){Object(r.abstract)()},e.prototype.registerLayerRenderers=function(t){this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_,t)},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,i=t.coordinateToPixelTransform,r=t.pixelToCoordinateTransform;Object(h.b)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Object(h.d)(Object(h.i)(r,i))},e.prototype.removeLayerRenderers=function(){for(var t in this.layerRenderers_)this.removeLayerRendererByKey_(t).dispose()},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o,a,l){var c,h=e.viewState,d=h.resolution;function p(t,i){var a=e.layerStates[Object(r.getUid)(i)].managed;if(!(Object(r.getUid)(t)in e.skippedFeatureUids)||a)return n.call(o,t,a?i:null)}var f=h.projection,g=t;if(f.canWrapX()){var y=f.getExtent(),v=Object(s.getWidth)(y),m=t[0];(m<y[0]||m>y[2])&&(g=[m+v*Math.ceil((y[0]-m)/v),t[1]])}var _,b=e.layerStatesArray;for(_=b.length-1;_>=0;--_){var S=b[_],O=S.layer;if(Object(u.visibleAtResolution)(S,d)&&a.call(l,O)){var C=this.getLayerRenderer(O),T=O.getSource();if(T&&(c=C.forEachFeatureAtCoordinate(T.getWrapX()?g:t,e,i,p)),c)return c}}},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o,a,s){return Object(r.abstract)()},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,l.b,this,r,n)},e.prototype.getLayerRenderer=function(t){var e=Object(r.getUid)(t);if(e in this.layerRenderers_)return this.layerRenderers_[e];for(var i,n=0,s=this.layerRendererConstructors_.length;n<s;++n){var l=this.layerRendererConstructors_[n];if(l.handles(t)){i=l.create(this,t);break}}if(!i)throw new Error("Unable to create renderer for layer: "+t.getType());return this.layerRenderers_[e]=i,this.layerRendererListeners_[e]=Object(o.listen)(i,a.default.CHANGE,this.handleLayerRendererChange_,this),i},e.prototype.getLayerRendererByKey=function(t){return this.layerRenderers_[t]},e.prototype.getLayerRenderers=function(){return this.layerRenderers_},e.prototype.getMap=function(){return this.map_},e.prototype.handleLayerRendererChange_=function(){this.map_.render()},e.prototype.removeLayerRendererByKey_=function(t){var e=this.layerRenderers_[t];return delete this.layerRenderers_[t],Object(o.unlistenByKey)(this.layerRendererListeners_[t]),delete this.layerRendererListeners_[t],e},e.prototype.removeUnusedLayerRenderers_=function(t,e){for(var i in this.layerRenderers_)e&&i in e.layerStates||this.removeLayerRendererByKey_(i).dispose()},e.prototype.renderFrame=function(t){Object(r.abstract)()},e.prototype.scheduleExpireIconCache=function(t){t.postRenderFunctions.push(p)},e.prototype.scheduleRemoveUnusedLayerRenderers=function(t){for(var e in this.layerRenderers_)if(!(e in t.layerStates))return void t.postRenderFunctions.push(this.removeUnusedLayerRenderers_.bind(this))},e}(n.a);function p(t,e){c.shared.expire()}function f(t,e){return t.zIndex-e.zIndex}e.default=d},function(t,e,i){"use strict";i.d(e,"a",function(){return o});var r=i(23),n=i(11),o=1/0,a=function(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}};a.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Object(n.clear)(this.queuedElements_)},a.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var r=this.keyFunction_(i);return delete this.queuedElements_[r],i},a.prototype.enqueue=function(t){Object(r.a)(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=o&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},a.prototype.getCount=function(){return this.elements_.length},a.prototype.getLeftChildIndex_=function(t){return 2*t+1},a.prototype.getRightChildIndex_=function(t){return 2*t+2},a.prototype.getParentIndex_=function(t){return t-1>>1},a.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},a.prototype.isEmpty=function(){return 0===this.elements_.length},a.prototype.isKeyQueued=function(t){return t in this.queuedElements_},a.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},a.prototype.siftUp_=function(t){for(var e=this.elements_,i=this.priorities_,r=e.length,n=e[t],o=i[t],a=t;t<r>>1;){var s=this.getLeftChildIndex_(t),l=this.getRightChildIndex_(t),u=l<r&&i[l]<i[s]?l:s;e[t]=e[u],i[t]=i[u],t=u}e[t]=n,i[t]=o,this.siftDown_(a,t)},a.prototype.siftDown_=function(t,e){for(var i=this.elements_,r=this.priorities_,n=i[e],o=r[e];e>t;){var a=this.getParentIndex_(e);if(!(r[a]>o))break;i[e]=i[a],r[e]=r[a],e=a}i[e]=n,r[e]=o},a.prototype.reprioritize=function(){var t,e,i,r=this.priorityFunction_,n=this.elements_,a=this.priorities_,s=0,l=n.length;for(e=0;e<l;++e)(i=r(t=n[e]))==o?delete this.queuedElements_[this.keyFunction_(t)]:(a[s]=i,n[s++]=t);n.length=s,a.length=s,this.heapify_()},e.b=a},function(t,e,i){"use strict";i.r(e),i.d(e,"DEFAULT_RADIUS",function(){return o}),i.d(e,"getDistance",function(){return a}),i.d(e,"getLength",function(){return l}),i.d(e,"getArea",function(){return c}),i.d(e,"offset",function(){return h});var r=i(19),n=i(5),o=6371008.8;function a(t,e,i){var n=i||o,a=Object(r.j)(t[1]),s=Object(r.j)(e[1]),l=(s-a)/2,u=Object(r.j)(e[0]-t[0])/2,c=Math.sin(l)*Math.sin(l)+Math.sin(u)*Math.sin(u)*Math.cos(a)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function s(t,e){for(var i=0,r=0,n=t.length;r<n-1;++r)i+=a(t[r],t[r+1],e);return i}function l(t,e){var i=e||{},r=i.radius||o,a=i.projection||"EPSG:3857",u=t.getType();u!==n.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(a,"EPSG:4326"));var c,h,d,p,f,g,y=0;switch(u){case n.default.POINT:case n.default.MULTI_POINT:break;case n.default.LINE_STRING:case n.default.LINEAR_RING:y=s(c=t.getCoordinates(),r);break;case n.default.MULTI_LINE_STRING:case n.default.POLYGON:for(d=0,p=(c=t.getCoordinates()).length;d<p;++d)y+=s(c[d],r);break;case n.default.MULTI_POLYGON:for(d=0,p=(c=t.getCoordinates()).length;d<p;++d)for(f=0,g=(h=c[d]).length;f<g;++f)y+=s(h[f],r);break;case n.default.GEOMETRY_COLLECTION:var v=t.getGeometries();for(d=0,p=v.length;d<p;++d)y+=l(v[d],e);break;default:throw new Error("Unsupported geometry type: "+u)}return y}function u(t,e){for(var i=0,n=t.length,o=t[n-1][0],a=t[n-1][1],s=0;s<n;s++){var l=t[s][0],u=t[s][1];i+=Object(r.j)(l-o)*(2+Math.sin(Object(r.j)(a))+Math.sin(Object(r.j)(u))),o=l,a=u}return i*e*e/2}function c(t,e){var i=e||{},r=i.radius||o,a=i.projection||"EPSG:3857",s=t.getType();s!==n.default.GEOMETRY_COLLECTION&&(t=t.clone().transform(a,"EPSG:4326"));var l,h,d,p,f,g,y=0;switch(s){case n.default.POINT:case n.default.MULTI_POINT:case n.default.LINE_STRING:case n.default.MULTI_LINE_STRING:case n.default.LINEAR_RING:break;case n.default.POLYGON:for(l=t.getCoordinates(),y=Math.abs(u(l[0],r)),d=1,p=l.length;d<p;++d)y-=Math.abs(u(l[d],r));break;case n.default.MULTI_POLYGON:for(d=0,p=(l=t.getCoordinates()).length;d<p;++d)for(h=l[d],y+=Math.abs(u(h[0],r)),f=1,g=h.length;f<g;++f)y-=Math.abs(u(h[f],r));break;case n.default.GEOMETRY_COLLECTION:var v=t.getGeometries();for(d=0,p=v.length;d<p;++d)y+=c(v[d],e);break;default:throw new Error("Unsupported geometry type: "+s)}return y}function h(t,e,i,n){var a=n||o,s=Object(r.j)(t[1]),l=Object(r.j)(t[0]),u=e/a,c=Math.asin(Math.sin(s)*Math.cos(u)+Math.cos(s)*Math.sin(u)*Math.cos(i)),h=l+Math.atan2(Math.sin(i)*Math.sin(u)*Math.cos(s),Math.cos(u)-Math.sin(s)*Math.sin(c));return[Object(r.i)(h),Object(r.i)(c)]}},function(t,e,i){"use strict";t.exports=n,t.exports.default=n;var r=i(454);function n(t,e){if(!(this instanceof n))return new n(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function o(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,i,r,n){n||(n=v(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var o,a=e;a<i;a++)o=t.children[a],l(n,t.leaf?r(o):o);return n}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function h(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function d(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function f(t,e){var i=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),n=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,n-i)*Math.max(0,o-r)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function v(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,i,n,o){for(var a,s=[e,i];s.length;)(i=s.pop())-(e=s.pop())<=n||(a=e+Math.ceil((i-e)/n/2)*n,r(t,a,e,i,o),s.push(e,a,a,i))}n.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],r=this.toBBox;if(!y(t,e))return i;for(var n,o,a,s,l=[];e;){for(n=0,o=e.children.length;n<o;n++)a=e.children[n],y(t,s=e.leaf?r(a):a)&&(e.leaf?i.push(a):g(t,s)?this._all(a,i):l.push(a));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!y(t,e))return!1;for(var r,n,o,a,s=[];e;){for(r=0,n=e.children.length;r<n;r++)if(o=e.children[r],y(t,a=e.leaf?i(o):o)){if(e.leaf||g(t,a))return!0;s.push(o)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=v([]),this},remove:function(t,e){if(!t)return this;for(var i,r,n,a,s=this.data,l=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),r=u[u.length-1],i=c.pop(),a=!0),s.leaf&&-1!==(n=o(t,s.children,e)))return s.children.splice(n,1),u.push(s),this._condense(u),this;a||s.leaf||!g(s,l)?r?(i++,s=r.children[i],a=!1):s=null:(u.push(s),c.push(i),i=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,r){var n,o=i-e+1,s=this._maxEntries;if(o<=s)return a(n=v(t.slice(e,i+1)),this.toBBox),n;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(n=v([])).leaf=!1,n.height=r;var l,u,c,h,d=Math.ceil(o/s),p=d*Math.ceil(Math.sqrt(s));for(m(t,e,i,p,this.compareMinX),l=e;l<=i;l+=p)for(m(t,l,c=Math.min(l+p-1,i),d,this.compareMinY),u=l;u<=c;u+=d)h=Math.min(u+d-1,c),n.children.push(this._build(t,u,h,r-1));return a(n,this.toBBox),n},_chooseSubtree:function(t,e,i,r){for(var n,o,a,s,l,u,c,d;r.push(e),!e.leaf&&r.length-1!==i;){for(c=d=1/0,n=0,o=e.children.length;n<o;n++)l=h(a=e.children[n]),(u=p(t,a)-l)<d?(d=u,c=l<c?l:c,s=a):u===d&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,i){var r=this.toBBox,n=i?t:r(t),o=[],a=this._chooseSubtree(n,this.data,e,o);for(a.children.push(t),l(a,n);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(n,o,e)},_split:function(t,e){var i=t[e],r=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,r);var o=this._chooseSplitIndex(i,n,r),s=v(i.children.splice(o,i.children.length-o));s.height=i.height,s.leaf=i.leaf,a(i,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},_splitRoot:function(t,e){this.data=v([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var r,n,o,a,l,u,c,d;for(u=c=1/0,r=e;r<=i-e;r++)a=f(n=s(t,0,r,this.toBBox),o=s(t,r,i,this.toBBox)),l=h(n)+h(o),a<u?(u=a,d=r,c=l<c?l:c):a===u&&l<c&&(c=l,d=r);return d},_chooseSplitAxis:function(t,e,i){var r=t.leaf?this.compareMinX:u,n=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,n)&&t.children.sort(r)},_allDistMargin:function(t,e,i,r){t.children.sort(r);var n,o,a=this.toBBox,u=s(t,0,e,a),c=s(t,i-e,i,a),h=d(u)+d(c);for(n=e;n<i-e;n++)o=t.children[n],l(u,t.leaf?a(o):o),h+=d(u);for(n=i-e-1;n>=e;n--)o=t.children[n],l(c,t.leaf?a(o):o),h+=d(c);return h},_adjustParentBBoxes:function(t,e,i){for(var r=i;r>=0;r--)l(e[r],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(25),o=i(1),a=i(52),s=i(9),l=i(49),u=i(17),c=Object(u.c)(),h=function(t){function e(){t.call(this),this.extent_=Object(o.createEmpty)(),this.extentRevision_=-1,this.simplifiedGeometryCache={},this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return Object(r.abstract)()},e.prototype.closestPointXY=function(t,e,i,n){return Object(r.abstract)()},e.prototype.containsXY=function(t,e){return!1},e.prototype.getClosestPoint=function(t,e){var i=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],i,1/0),i},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return Object(r.abstract)()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),Object(o.returnOrUpdate)(this.extent_,t)},e.prototype.rotate=function(t,e){Object(r.abstract)()},e.prototype.scale=function(t,e,i){Object(r.abstract)()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return Object(r.abstract)()},e.prototype.getType=function(){return Object(r.abstract)()},e.prototype.applyTransform=function(t){Object(r.abstract)()},e.prototype.intersectsExtent=function(t){return Object(r.abstract)()},e.prototype.translate=function(t,e){Object(r.abstract)()},e.prototype.transform=function(t,e){var i=Object(s.get)(t),r=i.getUnits()==l.default.TILE_PIXELS?function(t,r,n){var l=i.getExtent(),h=i.getWorldExtent(),d=Object(o.getHeight)(h)/Object(o.getHeight)(l);return Object(u.b)(c,h[0],h[3],d,-d,0,0,0),Object(a.c)(t,0,t.length,n,c,r),Object(s.getTransform)(i,e)(t,r,n)}:Object(s.getTransform)(i,e);return this.applyTransform(r),this},e}(n.default);e.default=h},function(t,e,i){"use strict";i.d(e,"a",function(){return s});var r=i(48),n=i(209),o=i(208),a=i(207);function s(t){var e=t||{},i=new r.default;return(void 0===e.zoom||e.zoom)&&i.push(new a.default(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&i.push(new o.default(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&i.push(new n.default(e.attributionOptions)),i}},function(t,e,i){"use strict";e.a={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",SOURCE:"source"}},function(t,e,i){"use strict";i.r(e);var r=i(29),n=i(137),o=i(25),a=i(24),s=i(3),l=function(t){function e(e){t.call(this),this.element=e.element?e.element:null,this.target_=null,this.map_=null,this.listenerKeys=[],this.render=e.render?e.render:r.c,e.target&&this.setTarget(e.target)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(a.removeNode)(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Object(a.removeNode)(this.element);for(var e=0,i=this.listenerKeys.length;e<i;++e)Object(s.unlistenByKey)(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==r.c&&this.listenerKeys.push(Object(s.listen)(t,n.a.POSTRENDER,this.render,this)),t.render())},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(o.default);e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"getStrideForLayout",function(){return c}),i.d(e,"transformGeom2D",function(){return h});var r=i(4),n=i(1),o=i(72),a=i(20),s=i(52),l=i(11),u=function(t){function e(){t.call(this),this.layout=a.default.XY,this.stride=2,this.flatCoordinates=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.computeExtent=function(t){return Object(n.createOrUpdateFromFlatCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return Object(r.abstract)()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(l.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(e))return this.simplifiedGeometryCache[e];var i=this.getSimplifiedGeometryInternal(t);return i.getFlatCoordinates().length<this.flatCoordinates.length?(this.simplifiedGeometryCache[e]=i,i):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=c(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){Object(r.abstract)()},e.prototype.setLayout=function(t,e,i){var r;if(t)r=c(t);else{for(var n=0;n<i;++n){if(0===e.length)return this.layout=a.default.XY,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=a.default.XY:3==t?e=a.default.XYZ:4==t&&(e=a.default.XYZM),e}(r=e.length)}this.layout=t,this.stride=r},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Object(s.a)(i,0,i.length,r,t,e,i),this.changed()}},e.prototype.scale=function(t,e,i){var r=e;void 0===r&&(r=t);var o=i;o||(o=Object(n.getCenter)(this.getExtent()));var a=this.getFlatCoordinates();if(a){var l=this.getStride();Object(s.b)(a,0,a.length,l,t,r,o,a),this.changed()}},e.prototype.translate=function(t,e){var i=this.getFlatCoordinates();if(i){var r=this.getStride();Object(s.d)(i,0,i.length,r,t,e,i),this.changed()}},e}(o.default);function c(t){var e;return t==a.default.XY?e=2:t==a.default.XYZ||t==a.default.XYM?e=3:t==a.default.XYZM&&(e=4),e}function h(t,e,i){var r=t.getFlatCoordinates();if(r){var n=t.getStride();return Object(s.c)(r,0,r.length,n,e,i)}return null}e.default=u},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o});var r=i(30),n=[r.a.POLYGON,r.a.CIRCLE,r.a.LINE_STRING,r.a.IMAGE,r.a.TEXT,r.a.DEFAULT],o={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1}},function(t,e,i){"use strict";e.a={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e){var i=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(t,e,i){"use strict";i.r(e);var r=i(85),n=i(4),o=i(145),a=i(186),s=i(16),l=i(3),u=i(10),c=i(9),h=i(98),d=i(1),p=i(19),f=i(138),g=i(266),y=function(t){function e(e,i,n,o,a,l,u,c,h,y,v){t.call(this,a,s.default.IDLE),this.renderEdges_=void 0!==v&&v,this.pixelRatio_=u,this.gutter_=c,this.canvas_=null,this.sourceTileGrid_=i,this.targetTileGrid_=o,this.wrappedTileCoord_=l||a,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;var m=o.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent(),b=this.sourceTileGrid_.getExtent(),S=_?Object(d.getIntersection)(m,_):m;if(0!==Object(d.getArea)(S)){var O=e.getExtent();O&&(b=b?Object(d.getIntersection)(b,O):O);var C=o.getResolution(this.wrappedTileCoord_[0]),T=Object(d.getCenter)(S),x=Object(f.a)(e,n,T,C);if(!isFinite(x)||x<=0)this.state=s.default.EMPTY;else{var E=void 0!==y?y:r.b;if(this.triangulation_=new g.a(e,n,S,b,x*E),0!==this.triangulation_.getTriangles().length){this.sourceZ_=i.getZForResolution(x);var P=this.triangulation_.calculateSourceExtent();if(b&&(e.canWrapX()?(P[1]=Object(p.a)(P[1],b[1],b[3]),P[3]=Object(p.a)(P[3],b[1],b[3])):P=Object(d.getIntersection)(P,b)),Object(d.getArea)(P)){for(var j=i.getTileRangeForExtentAndZ(P,this.sourceZ_),R=j.minX;R<=j.maxX;R++)for(var I=j.minY;I<=j.maxY;I++){var L=h(this.sourceZ_,R,I,u);L&&this.sourceTiles_.push(L)}0===this.sourceTiles_.length&&(this.state=s.default.EMPTY)}else this.state=s.default.EMPTY}else this.state=s.default.EMPTY}}else this.state=s.default.EMPTY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==s.default.LOADING&&this.unlistenSources_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,i,r){e&&e.getState()==s.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=s.default.ERROR;else{var e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],n="number"==typeof i?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Object(f.b)(r,n,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=s.default.LOADED}this.changed()},e.prototype.load=function(){if(this.state==s.default.IDLE){this.state=s.default.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,i,r){var n=e.getState();if(n==s.default.IDLE||n==s.default.LOADING){t++;var o=Object(l.listen)(e,u.default.CHANGE,function(i){var r=e.getState();r!=s.default.LOADED&&r!=s.default.ERROR&&r!=s.default.EMPTY||(Object(l.unlistenByKey)(o),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,i){t.getState()==s.default.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(l.unlistenByKey),this.sourcesListenerKeys_=null},e}(h.default),v=i(227),m=i(46),_=i(59),b=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:S,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,this.tileClass=void 0!==e.tileClass?e.tileClass:o.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){if(!r.a)return t.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1},e.prototype.expireCache=function(e,i){if(r.a){var n=this.getTileCacheForProjection(e);for(var o in this.tileCache.expireCache(this.tileCache==n?i:{}),this.tileCacheForProjection){var a=this.tileCacheForProjection[o];a.expireCache(a==n?i:{})}}else t.prototype.expireCache.call(this,e,i)},e.prototype.getGutterForProjection=function(t){return r.a&&this.getProjection()&&t&&!Object(c.equivalent)(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(r.a&&this.getProjection()&&e&&!Object(c.equivalent)(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(e){if(!r.a)return t.prototype.getTileGridForProjection.call(this,e);var i=this.getProjection();if(!this.tileGrid||i&&!Object(c.equivalent)(i,e)){var o=Object(n.getUid)(e);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=Object(_.getForProjection)(e)),this.tileGridForProjection[o]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(e){if(!r.a)return t.prototype.getTileCacheForProjection.call(this,e);var i=this.getProjection();if(!i||Object(c.equivalent)(i,e))return this.tileCache;var o=Object(n.getUid)(e);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new a.a(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},e.prototype.createTile_=function(t,e,i,r,n,o){var a=[t,e,i],c=this.getTileCoordForTileUrlFunction(a,n),h=c?this.tileUrlFunction(c,r,n):void 0,d=new this.tileClass(a,void 0!==h?s.default.IDLE:s.default.EMPTY,void 0!==h?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return d.key=o,Object(l.listen)(d,u.default.CHANGE,this.handleTileChange,this),d},e.prototype.getTile=function(t,e,i,n,o){var a=this.getProjection();if(r.a&&a&&o&&!Object(c.equivalent)(a,o)){var s,l=this.getTileCacheForProjection(o),u=[t,e,i],h=Object(m.getKey)(u);l.containsKey(h)&&(s=l.get(h));var d=this.getKey();if(s&&s.key==d)return s;var p=this.getTileGridForProjection(a),f=this.getTileGridForProjection(o),g=this.getTileCoordForTileUrlFunction(u,o),v=new y(a,p,o,f,u,g,this.getTilePixelRatio(n),this.getGutter(),function(t,e,i,r){return this.getTileInternal(t,e,i,r,a)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return v.key=d,s?(v.interimTile=s,v.refreshInterimChain(),l.replace(h,v)):l.set(h,v),v}return this.getTileInternal(t,e,i,n,a||o)},e.prototype.getTileInternal=function(t,e,i,r,n){var o=null,a=Object(m.getKeyZXY)(t,e,i),l=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=l){var u=o;o=this.createTile_(t,e,i,r,n,l),u.getState()==s.default.IDLE?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,i,r,n,l),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(r.a&&this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){if(r.a){var i=Object(c.get)(t);if(i){var o=Object(n.getUid)(i);o in this.tileGridForProjection||(this.tileGridForProjection[o]=e)}}},e}(v.default);function S(t,e){t.getImage().src=e}e.default=b},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(1),o=i(5),a=i(38),s=i(76),l=i(87),u=i(91),c=i(19),h=function(t){function e(e,i){t.call(this),i&&!Array.isArray(e[0])?this.setFlatCoordinates(i,e):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPoint=function(t){this.flatCoordinates?Object(r.c)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,r){if(r<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e))return r;for(var o=this.flatCoordinates,a=this.stride,s=0,l=o.length;s<l;s+=a){var u=Object(c.g)(t,e,o[s],o[s+1]);if(u<r){r=u;for(var h=0;h<a;++h)i[h]=o[s+h];i.length=a}}return r},e.prototype.getCoordinates=function(){return Object(u.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new a.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,r=[],n=0,o=t.length;n<o;n+=i){var s=new a.default(t.slice(n,n+i),e);r.push(s)}return r},e.prototype.getType=function(){return o.default.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,r=0,o=e.length;r<o;r+=i){var a=e[r],s=e[r+1];if(Object(n.containsXY)(t,a,s))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(l.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(s.default);e.default=h},function(t,e,i){"use strict";i.r(e),i.d(e,"visibleAtResolution",function(){return p});var r=i(3),n=i(10),o=i(4),a=i(25),s=i(222),l=i(74),u=i(11),c=i(57),h=i(43),d=function(t){function e(e){var i=Object(u.assign)({},e);delete i.source,t.call(this,i),this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,e.map&&this.setMap(e.map),Object(r.listen)(this,Object(a.getChangeEventType)(l.a.SOURCE),this.handleSourcePropertyChange_,this);var n=e.source?e.source:null;this.setSource(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(l.a.SOURCE)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():h.a.UNDEFINED},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(Object(r.unlistenByKey)(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=Object(r.listen)(t,n.default.CHANGE,this.handleSourceChange_,this)),this.changed()},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(Object(r.unlistenByKey)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(Object(r.unlistenByKey)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Object(r.listen)(t,c.a.PRECOMPOSE,function(t){var e=t,i=this.getLayerState();i.managed=!1,void 0===this.getZIndex()&&(i.zIndex=1/0),e.frameState.layerStatesArray.push(i),e.frameState.layerStates[Object(o.getUid)(this)]=i},this),this.mapRenderKey_=Object(r.listen)(this,n.default.CHANGE,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(l.a.SOURCE,t)},e}(s.default);function p(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}e.default=d},function(t,e,i){"use strict";i.r(e),i.d(e,"toFunction",function(){return u}),i.d(e,"createDefaultStyle",function(){return h}),i.d(e,"createEditingStyle",function(){return d});var r=i(23),n=i(5),o=i(258),a=i(101),s=i(96),l=function(t){var e=t||{};this.geometry_=null,this.geometryFunction_=p,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex};function u(t){var e,i;"function"==typeof t?e=t:(Array.isArray(t)?i=t:(Object(r.a)("function"==typeof t.getZIndex,41),i=[t]),e=function(){return i});return e}l.prototype.clone=function(){var t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new l({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.setRenderer=function(t){this.renderer_=t},l.prototype.getGeometry=function(){return this.geometry_},l.prototype.getGeometryFunction=function(){return this.geometryFunction_},l.prototype.getFill=function(){return this.fill_},l.prototype.setFill=function(t){this.fill_=t},l.prototype.getImage=function(){return this.image_},l.prototype.setImage=function(t){this.image_=t},l.prototype.getStroke=function(){return this.stroke_},l.prototype.setStroke=function(t){this.stroke_=t},l.prototype.getText=function(){return this.text_},l.prototype.setText=function(t){this.text_=t},l.prototype.getZIndex=function(){return this.zIndex_},l.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=p,this.geometry_=t},l.prototype.setZIndex=function(t){this.zIndex_=t};var c=null;function h(t,e){if(!c){var i=new a.default({color:"rgba(255,255,255,0.4)"}),r=new s.default({color:"#3399CC",width:1.25});c=[new l({image:new o.default({fill:i,stroke:r,radius:5}),fill:i,stroke:r})]}return c}function d(){var t={},e=[255,255,255,1],i=[0,153,255,1];return t[n.default.POLYGON]=[new l({fill:new a.default({color:[255,255,255,.5]})})],t[n.default.MULTI_POLYGON]=t[n.default.POLYGON],t[n.default.LINE_STRING]=[new l({stroke:new s.default({color:e,width:5})}),new l({stroke:new s.default({color:i,width:3})})],t[n.default.MULTI_LINE_STRING]=t[n.default.LINE_STRING],t[n.default.CIRCLE]=t[n.default.POLYGON].concat(t[n.default.LINE_STRING]),t[n.default.POINT]=[new l({image:new o.default({radius:6,fill:new a.default({color:i}),stroke:new s.default({color:e,width:1.5})}),zIndex:1/0})],t[n.default.MULTI_POINT]=t[n.default.POINT],t[n.default.GEOMETRY_COLLECTION]=t[n.default.POLYGON].concat(t[n.default.LINE_STRING],t[n.default.POINT]),t}function p(t){return t.getGeometry()}e.default=l},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n});var r=.5,n=!0},function(t,e,i){"use strict";e.a={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},function(t,e,i){"use strict";function r(t,e,i,r){for(var n=0,o=i.length;n<o;++n)t[e++]=i[n];return e}function n(t,e,i,r){for(var n=0,o=i.length;n<o;++n)for(var a=i[n],s=0;s<r;++s)t[e++]=a[s];return e}function o(t,e,i,r,o){for(var a=o||[],s=0,l=0,u=i.length;l<u;++l){var c=n(t,e,i[l],r);a[s++]=c,e=c}return a.length=s,a}function a(t,e,i,r,n){for(var a=n||[],s=0,l=0,u=i.length;l<u;++l){var c=o(t,e,i[l],r,a[s]);a[s++]=c,e=c[c.length-1]}return a.length=s,a}i.r(e),i.d(e,"deflateCoordinate",function(){return r}),i.d(e,"deflateCoordinates",function(){return n}),i.d(e,"deflateCoordinatesArray",function(){return o}),i.d(e,"deflateMultiCoordinatesArray",function(){return a})},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(1),o=i(20),a=i(5),s=i(82),l=i(34),u=i(76),c=i(158),h=i(259),d=i(102),p=i(107),f=i(87),g=i(91),y=i(65),v=i(159),m=i(93),_=i(119),b=function(t){function e(e,i,n){if(t.call(this),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=this.getLayout(),a=e,s=[],l=[],u=0,c=a.length;u<c;++u){var h=a[u];0===u&&(o=h.getLayout());for(var d=s.length,p=h.getEnds(),f=0,g=p.length;f<g;++f)p[f]+=d;Object(r.c)(s,h.getFlatCoordinates()),l.push(p)}i=o,e=s,n=l}void 0!==i&&n?(this.setFlatCoordinates(i,e),this.endss_=n):this.setCoordinates(e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(r.c)(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,o=(e=t.getEnds().slice()).length;n<o;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),r=0;r<t;++r)i[r]=this.endss_[r].slice();return new e(this.flatCoordinates.slice(),this.layout,i)},e.prototype.closestPointXY=function(t,e,i,r){return r<Object(n.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(d.f)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(d.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))},e.prototype.containsXY=function(t,e){return Object(p.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(c.c)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(m.e)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(g.c)(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Object(h.a)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(y.b)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new s.default(this.getFlatInteriorPoints().slice(),o.default.XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(m.c)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(m.e)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(_.d)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,o.default.XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var r=this.endss_[t].slice(),n=r[r.length-1];if(0!==e)for(var o=0,a=r.length;o<a;++o)r[o]-=e;return new l.default(this.flatCoordinates.slice(e,n),this.layout,r)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0,o=0,a=i.length;o<a;++o){var s=i[o].slice(),u=s[s.length-1];if(0!==n)for(var c=0,h=s.length;c<h;++c)s[c]-=n;var d=new l.default(e.slice(n,u),t,s);r.push(d),n=u}return r},e.prototype.getType=function(){return a.default.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(v.d)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(f.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var r=i[i.length-1];this.flatCoordinates.length=0===r.length?0:r[r.length-1]}this.changed()},e}(u.default);e.default=b},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(85),o=i(27),a=i(12),s=i(35),l=i(1),u=i(9),c=i(156),h=i(3),d=i(10),p=i(138),f=i(266),g=function(t){function e(e,i,r,a,s,u){var c=e.getExtent(),h=i.getExtent(),d=h?Object(l.getIntersection)(r,h):r,g=Object(l.getCenter)(d),y=Object(p.a)(e,i,g,a),v=n.b,m=new f.a(e,i,d,c,y*v),_=u(m.calculateSourceExtent(),y,s),b=o.a.LOADED;_&&(b=o.a.IDLE);var S=_?_.getPixelRatio():1;t.call(this,r,a,S,b),this.targetProj_=i,this.maxSourceExtent_=c,this.triangulation_=m,this.targetResolution_=a,this.targetExtent_=r,this.sourceImage_=_,this.sourcePixelRatio_=S,this.canvas_=null,this.sourceListenerKey_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==o.a.LOADING&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(t==o.a.LOADED){var e=Object(l.getWidth)(this.targetExtent_)/this.targetResolution_,i=Object(l.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=Object(p.b)(e,i,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(this.state==o.a.IDLE){this.state=o.a.LOADING,this.changed();var t=this.sourceImage_.getState();t==o.a.LOADED||t==o.a.ERROR?this.reproject_():(this.sourceListenerKey_=Object(h.listen)(this.sourceImage_,d.default.CHANGE,function(t){var e=this.sourceImage_.getState();e!=o.a.LOADED&&e!=o.a.ERROR||(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){Object(h.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(c.a),y=i(174);i.d(e,"defaultImageLoadFunction",function(){return _});var v=function(t){function e(e,i){t.call(this,e),this.image=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),m=function(t){function e(e){t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state}),this.resolutions_=void 0!==e.resolutions?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=Object(a.h)(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,i,r){var o=this.getProjection();if(n.a&&o&&r&&!Object(u.equivalent)(o,r)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Object(u.equivalent)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&Object(l.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new g(o,r,t,e,i,function(t,e,i){return this.getImageInternal(t,e,i,o)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return o&&(r=o),this.getImageInternal(t,e,i,r)},e.prototype.getImageInternal=function(t,e,i,n){return Object(r.abstract)()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case o.a.LOADING:this.loading=!0,this.dispatchEvent(new v("imageloadstart",e));break;case o.a.LOADED:this.loading=!1,this.dispatchEvent(new v("imageloadend",e));break;case o.a.ERROR:this.loading=!1,this.dispatchEvent(new v("imageloaderror",e))}},e}(y.default);function _(t,e){t.getImage().src=e}e.default=m},function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return l}),i.d(e,"d",function(){return u}),i.d(e,"c",function(){return c});var r=i(23),n=i(19),o=i(46);function a(t,e){var i=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,a=/\{-y\}/g;return function(s,l,u){return s?t.replace(i,s[0].toString()).replace(n,s[1].toString()).replace(o,function(){return(-s[2]-1).toString()}).replace(a,function(){var t=s[0],i=e.getFullTileRange(t);return Object(r.a)(i,55),(i.getHeight()+s[2]).toString()}):void 0}}function s(t,e){for(var i=t.length,r=new Array(i),n=0;n<i;++n)r[n]=a(t[n],e);return l(r)}function l(t){return 1===t.length?t[0]:function(e,i,r){if(e){var a=Object(o.hash)(e),s=Object(n.d)(a,t.length);return t[s](e,i,r)}}}function u(t,e,i){}function c(t){var e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){var r,n=i[1].charCodeAt(0),o=i[2].charCodeAt(0);for(r=n;r<=o;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=i=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(i[2],10),s=parseInt(i[1],10);s<=a;s++)e.push(t.replace(i[0],s.toString()));return e}return e.push(t),e}},function(t,e,i){"use strict";function r(t,e,i,r,n){for(var o=void 0!==n?n:[],a=0,s=e;s<i;s+=r)o[a++]=t.slice(s,s+r);return o.length=a,o}function n(t,e,i,n,o){for(var a=void 0!==o?o:[],s=0,l=0,u=i.length;l<u;++l){var c=i[l];a[s++]=r(t,e,c,n,a[s]),e=c}return a.length=s,a}function o(t,e,i,r,o){for(var a=void 0!==o?o:[],s=0,l=0,u=i.length;l<u;++l){var c=i[l];a[s++]=n(t,e,c,r,a[s]),e=c[c.length-1]}return a.length=s,a}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";i.r(e),i.d(e,"asColorLike",function(){return n});var r=i(55);function n(t){return Array.isArray(t)?Object(r.toString)(t):t}},function(t,e,i){"use strict";function r(t,e,i,r){for(;e<i-r;){for(var n=0;n<r;++n){var o=t[e+n];t[e+n]=t[i-r+n],t[i-r+n]=o}e+=r,i-=r}}function n(t,e,i,r){for(var n=0,o=t[i-r],a=t[i-r+1];e<i;e+=r){var s=t[e],l=t[e+1];n+=(s-o)*(l+a),o=s,a=l}return n>0}function o(t,e,i,r,o){for(var a=void 0!==o&&o,s=0,l=i.length;s<l;++s){var u=i[s],c=n(t,e,u,r);if(0===s){if(a&&c||!a&&!c)return!1}else if(a&&!c||!a&&c)return!1;e=u}return!0}function a(t,e,i,r,n){for(var a=0,s=i.length;a<s;++a)if(!o(t,e,i[a],r,n))return!1;return!0}function s(t,e,i,o,a){for(var s=void 0!==a&&a,l=0,u=i.length;l<u;++l){var c=i[l],h=n(t,e,c,o);(0===l?s&&h||!s&&!h:s&&!h||!s&&h)&&r(t,e,c,o),e=c}return e}function l(t,e,i,r,n){for(var o=0,a=i.length;o<a;++o)e=s(t,e,i[o],r,n);return e}i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return s}),i.d(e,"e",function(){return l})},function(t,e,i){"use strict";e.a={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},function(t,e,i){"use strict";function r(t,e){var i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});var r=i.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+r}i.r(e),i.d(e,"appendParams",function(){return r})},function(t,e,i){"use strict";i.r(e);var r=i(4),n=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width,this.checksum_=void 0};n.prototype.clone=function(){var t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},n.prototype.getColor=function(){return this.color_},n.prototype.getLineCap=function(){return this.lineCap_},n.prototype.getLineDash=function(){return this.lineDash_},n.prototype.getLineDashOffset=function(){return this.lineDashOffset_},n.prototype.getLineJoin=function(){return this.lineJoin_},n.prototype.getMiterLimit=function(){return this.miterLimit_},n.prototype.getWidth=function(){return this.width_},n.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},n.prototype.setLineCap=function(t){this.lineCap_=t,this.checksum_=void 0},n.prototype.setLineDash=function(t){this.lineDash_=t,this.checksum_=void 0},n.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t,this.checksum_=void 0},n.prototype.setLineJoin=function(t){this.lineJoin_=t,this.checksum_=void 0},n.prototype.setMiterLimit=function(t){this.miterLimit_=t,this.checksum_=void 0},n.prototype.setWidth=function(t){this.width_=t,this.checksum_=void 0},n.prototype.getChecksum=function(){return void 0===this.checksum_&&(this.checksum_="s",this.color_?"string"==typeof this.color_?this.checksum_+=this.color_:this.checksum_+=Object(r.getUid)(this.color_):this.checksum_+="-",this.checksum_+=","+(void 0!==this.lineCap_?this.lineCap_.toString():"-")+","+(this.lineDash_?this.lineDash_.toString():"-")+","+(void 0!==this.lineDashOffset_?this.lineDashOffset_:"-")+","+(void 0!==this.lineJoin_?this.lineJoin_:"-")+","+(void 0!==this.miterLimit_?this.miterLimit_.toString():"-")+","+(void 0!==this.width_?this.width_.toString():"-")),this.checksum_},e.default=n},function(t,e,i){"use strict";e.a={FRACTION:"fraction",PIXELS:"pixels"}},function(t,e,i){"use strict";i.r(e);var r=i(16),n=i(56),o=i(106),a=i(10),s=function(t){function e(e,i,r){t.call(this);var n=r||{};this.tileCoord=e,this.state=i,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(a.default.CHANGE)},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==r.default.LOADED)return t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==r.default.LOADED){t.interimTile=null;break}t.getState()==r.default.LOADING?e=t:t.getState()==r.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){this.state=t,this.changed()},e.prototype.load=function(){},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;var r=e-i+1e3/60;return r>=this.transition_?1:Object(n.easeIn)(r/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(o.a);e.default=s},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";i.r(e);var r=i(50),n=i(83),o=i(257),a=i(11),s=i(84),l="renderOrder",u=function(t){function e(e){var i=e||{},n=Object(a.assign)({},i);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,t.call(this,n),this.declutter_=void 0!==i.declutter&&i.declutter,this.renderBuffer_=void 0!==i.renderBuffer?i.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(i.style),this.updateWhileAnimating_=void 0!==i.updateWhileAnimating&&i.updateWhileAnimating,this.updateWhileInteracting_=void 0!==i.updateWhileInteracting&&i.updateWhileInteracting,this.renderMode_=i.renderMode||o.a.VECTOR,this.type=r.a.VECTOR}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.setDeclutter=function(t){this.declutter_=t},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(l)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(l,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:s.createDefaultStyle,this.styleFunction_=null===t?void 0:Object(s.toFunction)(this.style_),this.changed()},e.prototype.getRenderMode=function(){return this.renderMode_},e}(n.default);u.prototype.getSource,e.default=u},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(55),o=function(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.checksum_=void 0};o.prototype.clone=function(){var t=this.getColor();return new o({color:Array.isArray(t)?t.slice():t||void 0})},o.prototype.getColor=function(){return this.color_},o.prototype.setColor=function(t){this.color_=t,this.checksum_=void 0},o.prototype.getChecksum=function(){if(void 0===this.checksum_){var t=this.color_;t?Array.isArray(t)||"string"==typeof t?this.checksum_="f"+Object(n.asString)(t):this.checksum_=Object(r.getUid)(this.color_):this.checksum_="f-"}return this.checksum_},e.default=o},function(t,e,i){"use strict";i.d(e,"e",function(){return o}),i.d(e,"a",function(){return a}),i.d(e,"f",function(){return s}),i.d(e,"d",function(){return l}),i.d(e,"b",function(){return u}),i.d(e,"c",function(){return c});var r=i(19);function n(t,e,i,n,o,a,s){var l,u=t[e],c=t[e+1],h=t[i]-u,d=t[i+1]-c;if(0===h&&0===d)l=e;else{var p=((o-u)*h+(a-c)*d)/(h*h+d*d);if(p>1)l=i;else{if(p>0){for(var f=0;f<n;++f)s[f]=Object(r.c)(t[e+f],t[i+f],p);return void(s.length=n)}l=e}}for(var g=0;g<n;++g)s[g]=t[l+g];s.length=n}function o(t,e,i,n,o){var a=t[e],s=t[e+1];for(e+=n;e<i;e+=n){var l=t[e],u=t[e+1],c=Object(r.g)(a,s,l,u);c>o&&(o=c),a=l,s=u}return o}function a(t,e,i,r,n){for(var a=0,s=i.length;a<s;++a){var l=i[a];n=o(t,e,l,r,n),e=l}return n}function s(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){var l=i[o];n=a(t,e,l,r,n),e=l[l.length-1]}return n}function l(t,e,i,o,a,s,l,u,c,h,d){if(e==i)return h;var p,f;if(0===a){if((f=Object(r.g)(l,u,t[e],t[e+1]))<h){for(p=0;p<o;++p)c[p]=t[e+p];return c.length=o,f}return h}for(var g=d||[NaN,NaN],y=e+o;y<i;)if(n(t,y-o,y,o,l,u,g),(f=Object(r.g)(l,u,g[0],g[1]))<h){for(h=f,p=0;p<o;++p)c[p]=g[p];c.length=o,y+=o}else y+=o*Math.max((Math.sqrt(f)-Math.sqrt(h))/a|0,1);if(s&&(n(t,i-o,e,o,l,u,g),(f=Object(r.g)(l,u,g[0],g[1]))<h)){for(h=f,p=0;p<o;++p)c[p]=g[p];c.length=o}return h}function u(t,e,i,r,n,o,a,s,u,c,h){for(var d=h||[NaN,NaN],p=0,f=i.length;p<f;++p){var g=i[p];c=l(t,e,g,r,n,o,a,s,u,c,d),e=g}return c}function c(t,e,i,r,n,o,a,s,l,c,h){for(var d=h||[NaN,NaN],p=0,f=i.length;p<f;++p){var g=i[p];c=u(t,e,g,r,n,o,a,s,l,c,d),e=g[g.length-1]}return c}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeFactory=void 0;var r=C(i(8)),n=C(i(18)),o=i(6),a=i(241),s=i(301),l=i(242),u=i(383),c=i(243),h=i(384),d=i(385),p=i(302),f=i(303),g=i(386),y=i(387),v=i(304),m=i(300),_=i(244),b=i(388),S=i(389),O=i(22);function C(t){return t&&t.__esModule?t:{default:t}}var T=function(){function t(e){(0,r.default)(this,t),this.shapeParameters=e,this.CLASS_NAME="Zondy.Feature.ShapeFactory"}return(0,n.default)(t,[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var i=this.shapeParameters;if(i instanceof a.Point){var r=new Object;r.x=i.x,r.y=i.y,r.r=i.r,r=(0,O.copyAttributesWithClip)(r,i.style,["x","y"]);var n=new f.SmicPoint;return n.style=t.transformStyle(r),n.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(n,i,["x","y","style","highlightStyle"]),n}if(i instanceof s.Line){if(!i.pointList)return null;var o=new Object;o.pointList=i.pointList,o=(0,O.copyAttributesWithClip)(o,i.style,["pointList"]);var C=new v.SmicBrokenLine;return C.style=t.transformStyle(o),C.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(C,i,["pointList","style","highlightStyle"]),C}if(i instanceof l.Polygon){if(!i.pointList)return null;var T=new Object;T.pointList=i.pointList,T=(0,O.copyAttributesWithClip)(T,i.style,["pointList"]);var x=new _.SmicPolygon;return x.style=t.transformStyle(T),x.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(x,i,["pointList","style","highlightStyle"]),x}if(i instanceof u.Rectangle){if(!i.x&&!i.y&!i.width&!i.height)return null;var E=new Object;E.x=i.x,E.y=i.y,E.width=i.width,E.height=i.height,E=(0,O.copyAttributesWithClip)(E,i.style,["x","y","width","height"]);var P=new b.SmicRectangle;return P.style=t.transformStyle(E),P.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(P,i,["x","y","width","height","style","highlightStyle"]),P}if(i instanceof c.Sector){var j=new Object;j.x=i.x,j.y=i.y,j.r=i.r,j.startAngle=i.startAngle,j.endAngle=i.endAngle,i.r0&&(j.r0=i.r0),i.clockWise&&(j.clockWise=i.clockWise),j=(0,O.copyAttributesWithClip)(j,i.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var R=new S.SmicSector;return R.style=t.transformStyle(j),R.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(R,i,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),R}if(i instanceof h.Label){var I=new Object;I.x=i.x,I.y=i.y,I.text=i.text,I=(0,O.copyAttributesWithClip)(I,i.style,["x","y","text"]);var L=new g.SmicText;return L.style=t.transformStyle(I),L.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(L,i,["x","y","text","style","highlightStyle"]),L}if(i instanceof d.Image){var w=new Object;w.x=i.x,w.y=i.y,i.image&&(w.image=i.image),i.width&&(w.width=i.width),i.height&&(w.height=i.height),i.sx&&(w.sx=i.sx),i.sy&&(w.sy=i.sy),i.sWidth&&(w.sWidth=i.sWidth),i.sHeight&&(w.sHeight=i.sHeight),w=(0,O.copyAttributesWithClip)(w,i.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var A=new m.SmicImage;return A.style=t.transformStyle(w),A.highlightStyle=t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(A,i,["x","y","image","width","height","style","highlightStyle"]),A}if(i instanceof p.Circle){var M=new Object;M.x=i.x,M.r=i.r,M.y=i.y,M=(0,O.copyAttributesWithClip)(M,i.style,["x","y","r"]);var F=new y.SmicCircle;return F.style=new t.transformStyle(M),F.highlightStyle=new t.transformStyle(i.highlightStyle),(0,O.copyAttributesWithClip)(F,i,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),F}return null}}],[{key:"transformStyle",value:function(t){var e={},i=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var n in t)switch(n){case"fill":r[0]=t[n];break;case"fillColor":e.color=t[n];break;case"stroke":r[1]=t[n];break;case"strokeWidth":e.lineWidth=t[n];break;case"strokeLinecap":e.lineCap=t[n];break;case"strokeLineJoin":e.lineJoin=t[n];break;case"strokeDashstyle":e.lineType=t[n];break;case"pointRadius":e.r=t[n];break;case"label":e.text=t[n];break;case"labelRect":e.labelRect=t[n];break;case"fontColor":e.textColor=t[n];break;case"fontStyle":i[0]=t[n];break;case"fontVariant":i[1]=t[n];break;case"fontWeight":i[2]=t[n];break;case"fontSize":var o="";t[n]&&t[n].toString().indexOf("px")<0&&(o="px"),i[3]=t[n]+o;break;case"fontFamily":i[4]=t[n];break;case"fontOpacity":e.opacity=t[n];break;case"labelPosition":e.textPosition=t[n];break;case"labelAlign":e.textAlign=t[n];break;case"labelBaseline":e.textBaseline=t[n];break;case"labelRotation":e.textRotation=t[n];break;default:e[n]=t[n]}return e.textFont=i.join(" "),!0===r[0]&&!1===r[1]?e.brushType="fill":!1===r[0]&&!0===r[1]?e.brushType="stroke":!0===r[0]&&!0===r[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,i){var r=i||{},n=new u.Rectangle(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return n.style={fillColor:"#f3f3f3"},r.backgroundStyle&&(0,O.copyAttributesWithClip)(n.style,r.backgroundStyle),r.backgroundRadius&&(n.style.radius=r.backgroundRadius),n.clickable=!1,n.hoverable=!1,t.createShape(n)}},{key:"GraphAxis",value:function(t,e,i,r){var n,o=e,a=i||{},u=[],c=[],d=!!a.useXReferenceLine&&a.useXReferenceLine,p=a.axisYTick&&!isNaN(a.axisYTick)?a.axisYTick:0,f=[],g=[];if(0===p){if(g.push([o[0],o[3]-5]),g.push([o[0],o[1]]),a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var y=parseInt(a.axis3DParameter),v=[o[0]-y,o[1]+y];a.axisUseArrow?(f.push([v[0]+1.5,v[1]-7.5]),f.push([v[0]-1,v[1]+1]),f.push([v[0]+7.5,v[1]-1.5]),g.push([v[0],v[1]])):g.push([v[0],v[1]]),g.push([o[0],o[1]])}g.push([o[2]+5,o[1]])}else{var m=Math.abs(o[1]-o[3])/p,_=o[3];g.push([o[0],_-5]);for(var b=0;b<p;b++){if(g.push([o[0],_]),g.push([o[0]-5,_]),g.push([o[0],_]),d){var S=new s.Line([[o[0],_],[o[2],_]]);S.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},S.clickable=!1,S.hoverable=!1,a.xReferenceLineStyle&&(0,O.copyAttributesWithClip)(S.style,a.xReferenceLineStyle),u.push(t.createShape(S))}_+=m}if(g.push([o[0],o[1]]),a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var C=parseInt(a.axis3DParameter),T=[o[0]-C,o[1]+C];a.axisUseArrow?(f.push([T[0]+1.5,T[1]-7.5]),f.push([T[0]-1,T[1]+1]),f.push([T[0]+7.5,T[1]-1.5]),g.push([T[0],T[1]])):g.push([T[0],T[1]]),g.push([o[0],o[1]])}g.push([o[2]+5,o[1]])}if(a.axisUseArrow){var x=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],E=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],P=new l.Polygon(x);P.style={fillColor:"#008acd"},(0,O.copyAttributesWithClip)(P.style,a.axisStyle),c.push(t.createShape(P));var j=new l.Polygon(E);if(j.style={fillColor:"#008acd"},(0,O.copyAttributesWithClip)(j.style,a.axisStyle),c.push(t.createShape(j)),a.axis3DParameter&&!isNaN(a.axis3DParameter)&&a.axis3DParameter>=15){var R=new l.Polygon(f);R.style={fillColor:"#008acd"},(0,O.copyAttributesWithClip)(R.style,a.axisStyle),c.push(t.createShape(R))}}n=g;var I=new s.Line(n);I.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},a.axisStyle&&(0,O.copyAttributesWithClip)(I.style,a.axisStyle),I.clickable=!1,I.hoverable=!1;var L=[t.createShape(I)],w=[];if(a.axisYLabels&&a.axisYLabels.length&&a.axisYLabels.length>0){var A=a.axisYLabels,M=A.length,F=[0,0];if(a.axisYLabelsOffset&&a.axisYLabelsOffset.length&&(F=a.axisYLabelsOffset),1===M){var k=new h.Label(o[0]-5+F[0],o[3]+F[1],A[0]);k.style={labelAlign:"right"},a.axisYLabelsStyle&&(0,O.copyAttributesWithClip)(k.style,a.axisYLabelsStyle),k.clickable=!1,k.hoverable=!1,w.push(t.createShape(k))}else for(var N=o[3],D=Math.abs(o[1]-o[3])/(M-1),G=0;G<M;G++){var B=new h.Label(o[0]-5+F[0],N+F[1],A[G]);B.style={labelAlign:"right"},a.axisYLabelsStyle&&(0,O.copyAttributesWithClip)(B.style,a.axisYLabelsStyle),B.clickable=!1,B.hoverable=!1,w.push(t.createShape(B)),N+=D}}var U=[];if(a.axisXLabels&&a.axisXLabels.length&&a.axisXLabels.length>0){var V=a.axisXLabels,W=V.length,Z=[0,0];if(a.axisXLabelsOffset&&a.axisXLabelsOffset.length&&(Z=a.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length===W)for(var z=r.xPositions,H=0;H<W;H++){var Y=new h.Label(z[H]+Z[0],o[1]+Z[1],V[H]);Y.style={labelAlign:"center",labelBaseline:"top"},a.axisXLabelsStyle&&(0,O.copyAttributesWithClip)(Y.style,a.axisXLabelsStyle),Y.clickable=!1,Y.hoverable=!1,U.push(t.createShape(Y))}else if(1===W){var X=new h.Label(o[0]-5+Z[0],o[1]+Z[0],V[0]);X.style={labelAlign:"center",labelBaseline:"top"},a.axisXLabelsStyle&&(0,O.copyAttributesWithClip)(X.style,a.axisXLabelsStyle),X.clickable=!1,X.hoverable=!1,U.push(t.createShape(X))}else for(var q=o[0],K=Math.abs(o[2]-o[0])/(W-1),J=0;J<W;J++){var Q=new h.Label(q+Z[0],o[1]+Z[1],V[J]);Q.style={labelAlign:"center",labelBaseline:"top"},a.axisXLabelsStyle&&(0,O.copyAttributesWithClip)(Q.style,a.axisXLabelsStyle),Q.clickable=!1,Q.hoverable=!1,U.push(t.createShape(Q)),q+=K}}return u.concat(L).concat(w).concat(U).concat(c)}},{key:"ShapeStyleTool",value:function(t,e,i,r,n,o){var a=t||{};if(e&&(0,O.copyAttributesWithClip)(a,e),i&&i.length&&void 0!==n&&!isNaN(n)&&n>=0&&i[n]&&(0,O.copyAttributesWithClip)(a,i[n]),r&&r.length&&void 0!==o)for(var s=r,l=s.length,u=parseFloat(o),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){(0,O.copyAttributesWithClip)(a,s[c].style);break}return a}}]),t}();e.ShapeFactory=T,o.Zondy.Feature.ShapeFactory=T},function(t,e,i){"use strict";i.r(e);var r=i(148),n=i(23),o=i(129),a=i(12),s=i(1),l=i(19),u=i(45),c=i(46),h=[0,0,0],d=function(t){var e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,Object(n.a)(Object(a.g)(this.resolutions_,function(t,e){return e-t},!0),17),!t.origins)for(var i=0,l=this.resolutions_.length-1;i<l;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,Object(n.a)(this.origins_.length==this.resolutions_.length,20));var u=t.extent;void 0===u||this.origin_||this.origins_||(this.origin_=Object(s.getTopLeft)(u)),Object(n.a)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,Object(n.a)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.b,Object(n.a)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==u?u:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(function(t,e){return new o.b(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):u&&this.calculateTileRanges_(u)};d.prototype.forEachTileCoord=function(t,e,i){for(var r=this.getTileRangeForExtentAndZ(t,e),n=r.minX,o=r.maxX;n<=o;++n)for(var a=r.minY,s=r.maxY;a<=s;++a)i([e,n,a])},d.prototype.forEachTileCoordParentTileRange=function(t,e,i,r,n){var a,s,l,u=null,c=t[0]-1;for(2===this.zoomFactor_?(s=t[1],l=t[2]):u=this.getTileCoordExtent(t,n);c>=this.minZoom;){if(2===this.zoomFactor_?(s=Math.floor(s/2),l=Math.floor(l/2),a=Object(o.a)(s,s,l,l,r)):a=this.getTileRangeForExtentAndZ(u,c,r),e.call(i,c,a))return!0;--c}return!1},d.prototype.getExtent=function(){return this.extent_},d.prototype.getMaxZoom=function(){return this.maxZoom},d.prototype.getMinZoom=function(){return this.minZoom},d.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},d.prototype.getResolution=function(t){return this.resolutions_[t]},d.prototype.getResolutions=function(){return this.resolutions_},d.prototype.getTileCoordChildTileRange=function(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var r=2*t[1],n=2*t[2];return Object(o.a)(r,r+1,n,n+1,e)}var a=this.getTileCoordExtent(t,i);return this.getTileRangeForExtentAndZ(a,t[0]+1,e)}return null},d.prototype.getTileRangeExtent=function(t,e,i){var r=this.getOrigin(t),n=this.getResolution(t),o=Object(u.toSize)(this.getTileSize(t),this.tmpSize_),a=r[0]+e.minX*o[0]*n,l=r[0]+(e.maxX+1)*o[0]*n,c=r[1]+e.minY*o[1]*n,h=r[1]+(e.maxY+1)*o[1]*n;return Object(s.createOrUpdate)(a,c,l,h,i)},d.prototype.getTileRangeForExtentAndZ=function(t,e,i){var r=h;this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r);var n=r[1],a=r[2];return this.getTileCoordForXYAndZ_(t[2],t[3],e,!0,r),Object(o.a)(n,r[1],a,r[2],i)},d.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Object(u.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]+(t[2]+.5)*r[1]*i]},d.prototype.getTileCoordExtent=function(t,e){var i=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=Object(u.toSize)(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*n[0]*r,a=i[1]+t[2]*n[1]*r,l=o+n[0]*r,c=a+n[1]*r;return Object(s.createOrUpdate)(o,a,l,c,e)},d.prototype.getTileCoordForCoordAndResolution=function(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)},d.prototype.getTileCoordForXYAndResolution_=function(t,e,i,r,n){var o=this.getZForResolution(i),a=i/this.getResolution(o),s=this.getOrigin(o),l=Object(u.toSize)(this.getTileSize(o),this.tmpSize_),h=r?.5:0,d=r?0:.5,p=Math.floor((t-s[0])/i+h),f=Math.floor((e-s[1])/i+d),g=a*p/l[0],y=a*f/l[1];return r?(g=Math.ceil(g)-1,y=Math.ceil(y)-1):(g=Math.floor(g),y=Math.floor(y)),Object(c.createOrUpdate)(o,g,y,n)},d.prototype.getTileCoordForXYAndZ_=function(t,e,i,r,n){var o=this.getOrigin(i),a=this.getResolution(i),s=Object(u.toSize)(this.getTileSize(i),this.tmpSize_),l=r?.5:0,h=r?0:.5,d=Math.floor((t-o[0])/a+l),p=Math.floor((e-o[1])/a+h),f=d/s[0],g=p/s[1];return r?(f=Math.ceil(f)-1,g=Math.ceil(g)-1):(f=Math.floor(f),g=Math.floor(g)),Object(c.createOrUpdate)(i,f,g,n)},d.prototype.getTileCoordForCoordAndZ=function(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)},d.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},d.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},d.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},d.prototype.getZForResolution=function(t,e){var i=Object(a.h)(this.resolutions_,t,e||0);return Object(l.a)(i,this.minZoom,this.maxZoom)},d.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,i=new Array(e),r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i},e.default=d},function(t,e,i){"use strict";var r=i(134),n=i(3),o=i(29),a=i(35),s=function(t){function e(){t.call(this),this.pendingRemovals_={},this.dispatching_={},this.listeners_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addEventListener=function(t,e){var i=this.listeners_[t];i||(i=this.listeners_[t]=[]),-1===i.indexOf(e)&&i.push(e)},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new a.default(t):t,i=e.type;e.target=this;var r,n=this.listeners_[i];if(n){i in this.dispatching_||(this.dispatching_[i]=0,this.pendingRemovals_[i]=0),++this.dispatching_[i];for(var s=0,l=n.length;s<l;++s)if(!1===n[s].call(this,e)||e.propagationStopped){r=!1;break}if(--this.dispatching_[i],0===this.dispatching_[i]){var u=this.pendingRemovals_[i];for(delete this.pendingRemovals_[i];u--;)this.removeEventListener(i,o.c);delete this.dispatching_[i]}return r}},e.prototype.disposeInternal=function(){Object(n.unlistenAll)(this)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var i=this.listeners_[t];if(i){var r=i.indexOf(e);t in this.pendingRemovals_?(i[r]=o.c,++this.pendingRemovals_[t]):(i.splice(r,1),0===i.length&&delete this.listeners_[t])}},e}(r.a);e.a=s},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"c",function(){return a}),i.d(e,"d",function(){return s});var r=i(1);function n(t,e,i,n,a){return!Object(r.forEachCorner)(a,function(r){return!o(t,e,i,n,r[0],r[1])})}function o(t,e,i,r,n,o){for(var a=0,s=t[i-r],l=t[i-r+1];e<i;e+=r){var u=t[e],c=t[e+1];l<=o?c>o&&(u-s)*(o-l)-(n-s)*(c-l)>0&&a++:c<=o&&(u-s)*(o-l)-(n-s)*(c-l)<0&&a--,s=u,l=c}return 0!==a}function a(t,e,i,r,n,a){if(0===i.length)return!1;if(!o(t,e,i[0],r,n,a))return!1;for(var s=1,l=i.length;s<l;++s)if(o(t,i[s-1],i[s],r,n,a))return!1;return!0}function s(t,e,i,r,n,o){if(0===i.length)return!1;for(var s=0,l=i.length;s<l;++s){var u=i[s];if(a(t,e,u,r,n,o))return!0;e=u[u.length-1]}return!1}},function(t,e,i){"use strict";e.a={ARRAY_BUFFER:"arraybuffer",JSON:"json",TEXT:"text",XML:"xml"}},function(t,e,i){"use strict";e.a={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature"}},function(t,e,i){var r=i(289)("wks"),n=i(235),o=i(103).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:n)("Symbol."+t))}).store=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=void 0;var r=f(i(13)),n=f(i(8)),o=f(i(18)),a=f(i(14)),s=f(i(40)),l=f(i(15)),u=i(6),c=i(22),h=i(200),d=i(238),p=i(117);function f(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return t=t||{},i.id=null,i.style={},i.highlightStyle=null,i.parent=null,i.__dirty=!0,i.__clipShapes=[],i.invisible=!1,i.ignore=!1,i.zlevel=0,i.draggable=!1,i.clickable=!1,i.hoverable=!0,i.z=0,i.refOriginalPosition=[0,0],i.refDataID=null,i.isHoverByRefDataID=!1,i.refDataHoverGroup=null,i.dataInfo=null,(0,c.extend)(i,t),i.id=i.id||(0,c.newGuid)(),i.CLASS_NAME="Zondy.LevelRenderer.Shape",i.getTansform=function(){var t=[];return function(e,i){var r=[e,i];return this.needTransform&&this.transform&&(p.SUtil.Util_matrix.invert(t,this.transform),p.SUtil.Util_matrix.mulVector(r,t,[e,i,1]),e===r[0]&&i===r[1]&&this.updateNeedTransform()),r}}(),i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var i=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,i),i.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",i),t.fill(),i.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",i),t.stroke()),this.setCtxGlobalAlpha(t,"reset",i);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",i),i.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",i);break;default:this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)}this.drawText(t,i,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var i=this.style;return this.brushTypeOnly&&(i.brushType=this.brushTypeOnly),e&&(i=this.getHighlightStyle(i,this.highlightStyle||{},this.brushTypeOnly)),"stroke"===this.brushTypeOnly&&(i.strokeColor=i.strokeColor||i.color),t.save(),this.doClip(t),this.setContext(t,i),this.setTransform(t),i}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var i=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,n=i.length;r<n;r++){var o=e[i[r][0]],a=i[r][1];void 0!==o&&(t[a]=o)}}},{key:"doClip",value:function(t){var e=p.SUtil.Util_matrix.create();if(this.__clipShapes)for(var i=0;i<this.__clipShapes.length;i++){var r=this.__clipShapes[i];if(r.needTransform){var n=r.transform;p.SUtil.Util_matrix.invert(e,n),t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}if(t.beginPath(),r.buildPath(t,r.style),t.clip(),r.needTransform){var o=e;t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(t,e,i){var r={};for(var n in t)r[n]=t[n];var o=p.SUtil.Util_color.getHighlightColor();for(var a in"stroke"!==t.brushType?(r.strokeColor=o,r.lineWidth=t.lineWidth||1,r.brushType="both"):"stroke"!==i?(r.strokeColor=o,r.lineWidth=t.lineWidth||1):r.strokeColor=e.strokeColor||p.SUtil.Util_color.mix(t.strokeColor,p.SUtil.Util_color.toRGB(o)),e)void 0!==e[a]&&(r[a]=e[a]);return r}},{key:"getHighlightZoom",value:function(){return"text"!==this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){}},{key:"getRect",value:function(t){}},{key:"isCover",value:function(t,e){var i=this.getTansform(t,e);t=i[0],e=i[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height&&p.SUtil.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,i,r){if(void 0!==i.text&&!1!==i.text){var n=i.textColor||i.color||i.strokeColor;t.fillStyle=n;var o,a,s,l,u,c=10,h=i.textPosition||this.textPosition||"top";switch(u=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],h){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var d=(r||i).__rect||this.getRect(r||i);switch(h){case"inside":s=d.x+d.width/2,l=d.y+d.height/2,o="center",a="middle","stroke"!==i.brushType&&n===i.color&&(t.fillStyle="#fff");break;case"left":s=d.x-c,l=d.y+d.height/2,o="end",a="middle";break;case"right":s=d.x+d.width+c,l=d.y+d.height/2,o="start",a="middle";break;case"top":s=d.x+d.width/2,l=d.y-c,o="center",a="bottom";break;case"bottom":s=d.x+d.width/2,l=d.y+d.height+c,o="center",a="top"}}break;case"start":case"end":var p=0,f=0,g=0,y=0;if(void 0!==i.pointList){var v=i.pointList;if(v.length<2)return;var m=v.length;switch(h){case"start":p=v[0][0]+u[0],f=v[1][0]+u[0],g=v[0][1]+u[1],y=v[1][1]+u[1];break;case"end":p=v[m-2][0]+u[0],f=v[m-1][0]+u[0],g=v[m-2][1]+u[1],y=v[m-1][1]+u[1]}}else p=i.xStart+u[0]||0,f=i.xEnd+u[0]||0,g=i.yStart+u[1]||0,y=i.yEnd+u[1]||0;switch(h){case"start":o=p<f?"end":"start",a=g<y?"bottom":"top",s=p,l=g;break;case"end":o=p<f?"start":"end",a=g<y?"top":"bottom",s=f,l=y}c-=4,p&&f&&p!==f?s-="end"===o?c:-c:o="center",g!==y?l-="bottom"===a?c:-c:a="middle";break;case"specific":s=i.textX||0,l=i.textY||0,o="start",a="middle"}i.labelXOffset&&!isNaN(i.labelXOffset)&&(s+=i.labelXOffset),i.labelYOffset&&!isNaN(i.labelYOffset)&&(l+=i.labelYOffset),null!=s&&null!=l&&e._fillText(t,i.text,s,l,i.textFont,i.textAlign||o,i.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,i){t.globalAlpha="fill"===e?void 0===i.fillOpacity?void 0===i.opacity?1:i.opacity:i.fillOpacity:"stroke"===e?void 0===i.strokeOpacity?void 0===i.opacity?1:i.opacity:i.strokeOpacity:void 0===i.opacity?1:i.opacity}}],[{key:"_fillText",value:function(t,i,r,n,o,a,s){o&&(t.font=o),t.textAlign=a,t.textBaseline=s;var l=e._getTextRect(i,r,n,o,a,s);i=(i+"").split("\n");var u=p.SUtil.Util_area.getTextHeight("ZH",o);switch(s){case"top":n=l.y;break;case"bottom":n=l.y+u;break;default:n=l.y+u/2}for(var c=0,h=i.length;c<h;c++)t.fillText(i[c],r,n),n+=u}},{key:"_getTextRect",value:function(t,e,i,r,n,o){var a=p.SUtil.Util_area.getTextWidth(t,r),s=p.SUtil.Util_area.getTextHeight("ZH",r);switch(t=(t+"").split("\n"),n){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(o){case"top":break;case"bottom":i-=s*t.length;break;default:i-=s*t.length/2}return{x:e,y:i,width:a,height:s*t.length}}}]),e}((0,c.mixin)(h.Eventful,d.Transformable));e.Shape=g,u.Zondy.LevelRenderer.Shape=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=void 0;var r,n=function(t){return t&&t.__esModule?t:{default:t}}(i(546)),o=i(6),a={SFCls:"SFeatureCls",OCls:"ObjectCls",ACls:"AnnotationCls",GnetCls:"GNetCls",RDS:"RasterDataset",SFClsInfo:"sfcls_new"};e.XClsType=a,o.Zondy.Enum.XClsType=a;var s={Unknown:0,SFCls:"SFeatureCls",AnnoCls:"AnnotationCls"};e.VectClsType=s,o.Zondy.Enum.VectClsType=s;var l={Unknown:0,Pnt:1,Lin:2,Reg:3};e.FeatureType=l,o.Zondy.Enum.FeatureType=l;var u={Positive:0,LeftOblique:1,RightOblique:2,LeftTowering:3,RightTowering:4};e.FontShape=u,o.Zondy.Enum.FontShape=u;var c={Curved:0,Forward:1,Horizontal:2,Tangent:3};e.LabelLinType=c,o.Zondy.Enum.LabelLinType=c;var h={Curved:0,Forward:1,Horizontal:2,Boundray:3,Outside:4};e.LabelRegType=h,o.Zondy.Enum.LabelRegType=h;var d={PntAnyDir:0,PntEightDir:1,PntOnFea:2};e.LabelPntType=d,o.Zondy.Enum.LabelPntType=d;var p={Auto:0,NoRep:1,OnStep:2};e.RepeatType=p,o.Zondy.Enum.RepeatType=p;var f={AutoSpread:0,Centralization:1,Decentralization:2};e.LabelSpreadType=f,o.Zondy.Enum.LabelSpreadType=f;var g={Left:0,Right:1,Above:2,Below:3,Both:4,NoRes:5};e.LineConstrain=g,o.Zondy.Enum.LineConstrain=g;var y={East:0,North:1,NorthEast:2,NorthWest:3,South:4,SouthEast:5,SouthWest:6,West:7,NoDir:8};e.EightDirType=y,o.Zondy.Enum.EightDirType=y;var v={Reg:0,Arc:1,All:2};e.ISShowArc=v,o.Zondy.Enum.ISShowArc=v;var m=(r={UserMode:"UserMode",SysModeCommwayPrefer:"SysModeCommwayPrefer",SysModeHighWayPrefer:"SysModeHighWayPrefer",SysModeMinCost:"SysModeMinCost",SysModeMinDis:"SysModeMinDis"},(0,n.default)(r,"SysModeMinDis","SysModeMinDis"),(0,n.default)(r,"SysModeSysRecommend","SysModeSysRecommend"),r);e.NetAnalyType=m,o.Zondy.Enum.Net.NetAnalyType=m;var _={Node:1,Edge:2,CNode:3,Chain:4,Center:5,Source:13,Sink:13};e.NetElemType=_,o.Zondy.Enum.Net.NetElemType=_;var b={Adjust:0,NoAdjust:1};e.CLinAdjustType=b,o.Zondy.Enum.Theme.CLinAdjustType=b;var S={Round:0,Square:1,Butt:2};e.CLinHeadType=S,o.Zondy.Enum.Theme.CLinHeadType=S;var O={Round:0,Square:1,Butt:2};e.CLinJointType=O,o.Zondy.Enum.Theme.CLinJointType=O;var C={Byrule:0,Bypoint:1};e.CLinStyleMakeType=C,o.Zondy.Enum.Theme.CLinStyleMakeType=C;var T={Unknown:0,UniqueTheme:1,RangeTheme:2};e.CItemType=T,o.Zondy.Enum.Theme.CItemType=T;var x={Doc:"mapType",Tile:"tileType"};e.MapType=x,o.Zondy.Enum.Map.MapType=x;var E={Show:"show",Hide:"hide",Include:"include",Exclude:"exclude"};e.LayerStatusType=E,o.Zondy.Enum.Map.LayerStatusType=E},function(t,e,i){"use strict";i.r(e);var r=i(156),n=i(27),o=i(3),a=i(10),s=i(1),l=function(t){function e(e,i,r,o,a,s){t.call(this,e,i,r,n.a.IDLE),this.src_=o,this.image_=new Image,null!==a&&(this.image_.crossOrigin=a),this.imageListenerKeys_=null,this.state=n.a.IDLE,this.imageLoadFunction_=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=n.a.ERROR,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Object(s.getHeight)(this.extent)/this.image_.height),this.state=n.a.LOADED,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=n.a.IDLE&&this.state!=n.a.ERROR||(this.state=n.a.LOADING,this.changed(),this.imageListenerKeys_=[Object(o.listenOnce)(this.image_,a.default.ERROR,this.handleImageError_,this),Object(o.listenOnce)(this.image_,a.default.LOAD,this.handleImageLoad_,this)],this.imageLoadFunction_(this,this.src_))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(o.unlistenByKey),this.imageListenerKeys_=null},e}(r.a);e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"VectorSourceEvent",function(){return S});var r=i(4),n=i(48),o=i(51),a=i(122),s=i(12),l=i(23),u=i(3),c=i(35),h=i(10),d=i(1),p=i(225),f=i(29),g=i(326),y=i(11),v=i(174),m=i(43),_=i(109),b=i(123),S=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.default),O=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:void 0,state:m.a.READY,wrapX:void 0===i.wrapX||i.wrapX}),this.loader_=f.c,this.format_=i.format,this.overlaps_=void 0==i.overlaps||i.overlaps,this.url_=i.url,void 0!==i.loader?this.loader_=i.loader:void 0!==this.url_&&(Object(l.a)(this.format_,7),this.loader_=Object(p.xhr)(this.url_,this.format_)),this.strategy_=void 0!==i.strategy?i.strategy:g.all;var r,o,a=void 0===i.useSpatialIndex||i.useSpatialIndex;this.featuresRtree_=a?new b.default:null,this.loadedExtentsRtree_=new b.default,this.nullGeometryFeatures_={},this.idIndex_={},this.undefIdIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(i.features)?o=i.features:i.features&&(o=(r=i.features).getArray()),a||void 0!==r||(r=new n.default(o)),void 0!==o&&this.addFeaturesInternal(o),void 0!==r&&this.bindFeaturesCollection_(r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=Object(r.getUid)(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var i=t.getGeometry();if(i){var n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new S(_.a.ADDFEATURE,t))}},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[Object(u.listen)(e,h.default.CHANGE,this.handleFeatureChange_,this),Object(u.listen)(e,a.a.PROPERTYCHANGE,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var i=!0,r=e.getId();return void 0!==r?r.toString()in this.idIndex_?i=!1:this.idIndex_[r.toString()]=e:(Object(l.a)(!(t in this.undefIdIndex_),30),this.undefIdIndex_[t]=e),i},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],i=[],n=[],o=0,a=t.length;o<a;o++){var s=t[o],l=Object(r.getUid)(s);this.addToIndex_(l,s)&&i.push(s)}for(var u=0,c=i.length;u<c;u++){var h=i[u],d=Object(r.getUid)(h);this.setupChangeEvents_(d,h);var p=h.getGeometry();if(p){var f=p.getExtent();e.push(f),n.push(h)}else this.nullGeometryFeatures_[d]=h}this.featuresRtree_&&this.featuresRtree_.load(e,n);for(var g=0,y=i.length;g<y;g++)this.dispatchEvent(new S(_.a.ADDFEATURE,i[g]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;Object(u.listen)(this,_.a.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),Object(u.listen)(this,_.a.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),Object(u.listen)(t,o.default.ADD,function(t){e||(e=!0,this.addFeature(t.element),e=!1)},this),Object(u.listen)(t,o.default.REMOVE,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)},this),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(u.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.undefIdIndex_={})}else if(this.featuresRtree_)for(var i in this.featuresRtree_.forEach(this.removeFeatureInternal,this),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.loadedExtentsRtree_.clear(),this.nullGeometryFeatures_={};var r=new S(_.a.CLEAR);this.dispatchEvent(r),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){return i.getGeometry().intersectsCoordinate(t)?e(i):void 0})},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,function(i){if(i.getGeometry().intersectsExtent(t)){var r=e(i);if(r)return r}})},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),Object(y.isEmpty)(this.nullGeometryFeatures_)||Object(s.c)(t,Object(y.getValues)(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_.getInExtent(t)},e.prototype.getClosestFeatureToCoordinate=function(t,e){var i=t[0],r=t[1],n=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],l=e||f.b;return this.featuresRtree_.forEachInExtent(s,function(t){if(l(t)){var e=t.getGeometry(),u=a;if((a=e.closestPointXY(i,r,o,a))<u){n=t;var c=Math.sqrt(a);s[0]=i-c,s[1]=r-c,s[2]=i+c,s[3]=r+c}}}),n},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,i=Object(r.getUid)(e),n=e.getGeometry();if(n){var o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);var a=e.getId();if(void 0!==a){var s=a.toString();i in this.undefIdIndex_?(delete this.undefIdIndex_[i],this.idIndex_[s]=e):this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else i in this.undefIdIndex_||(this.removeFromIdIndex_(e),this.undefIdIndex_[i]=e);this.changed(),this.dispatchEvent(new S(_.a.CHANGEFEATURE,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:Object(r.getUid)(t)in this.undefIdIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&Object(y.isEmpty)(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,i){var r=this,n=this.loadedExtentsRtree_,o=this.strategy_(t,e);this.loading=!1;for(var a=function(t,a){var s=o[t];n.forEachInExtent(s,function(t){return Object(d.containsExtent)(t.extent,s)})||(r.loader_.call(r,s,e,i),n.insert(s,{extent:s.slice()}),r.loading=r.loader_!==f.c)},s=0,l=o.length;s<l;++s)a(s)},e.prototype.removeLoadedExtent=function(t){var e,i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if(Object(d.equals)(i.extent,t))return e=i,!0}),e&&i.remove(e)},e.prototype.removeFeature=function(t){var e=Object(r.getUid)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=Object(r.getUid)(t);this.featureChangeKeys_[e].forEach(u.unlistenByKey),delete this.featureChangeKeys_[e];var i=t.getId();void 0!==i?delete this.idIndex_[i.toString()]:delete this.undefIdIndex_[e],this.dispatchEvent(new S(_.a.REMOVEFEATURE,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e}(v.default);e.default=O},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r,n,o){t.call(this,e,i,r.originalEvent,n,o),this.pointerEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(171).default);e.default=r},function(t,e,i){"use strict";function r(t,e,i){var r=void 0!==i?t.toFixed(i):""+t,n=r.indexOf(".");return(n=-1===n?r.length:n)>e?r:new Array(1+e-n).join("0")+r}function n(t,e){for(var i=(""+t).split("."),r=(""+e).split("."),n=0;n<Math.max(i.length,r.length);n++){var o=parseInt(i[n]||"0",10),a=parseInt(r[n]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}i.d(e,"b",function(){return r}),i.d(e,"a",function(){return n})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=void 0;var r=v(i(8)),n=v(i(18)),o=i(6),a=i(371),s=i(298),l=i(372),u=i(239),c=i(373),h=i(374),d=i(375),p=i(376),f=i(377),g=i(179),y=i(240);function v(t){return t&&t.__esModule?t:{default:t}}var m=function(){function t(){(0,r.default)(this,t)}return(0,n.default)(t,null,[{key:"SUtil_smoothBezier",value:function(e,i,r,n,o){o&&2===o||(o=[0,0]);var a,s,l=o,u=[],c=[],h=[],d=[],p=!!n;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var f=e.length,g=0;g<f;g++)t.Util_vector.min(a,a,[e[g][0]+l[0],e[g][1]+l[1]]),t.Util_vector.max(s,s,[e[g][0]+l[0],e[g][1]+l[1]]);t.Util_vector.min(a,a,n[0]),t.Util_vector.max(s,s,n[1])}for(var y=e.length,v=0;v<y;v++){var m=[e[v][0]+l[0],e[v][1]+l[1]],_=void 0,b=void 0;if(r)_=[e[v?v-1:y-1][0]+l[0],e[v?v-1:y-1][1]+l[1]],b=[e[(v+1)%y][0]+l[0],e[(v+1)%y][1]+l[1]];else{if(0===v||v===y-1){u.push([e[v][0]+l[0],e[v][1]+l[1]]);continue}_=[e[v-1][0]+l[0],e[v-1][1]+l[1]],b=[e[v+1][0]+l[0],e[v+1][1]+l[1]]}t.Util_vector.sub(c,b,_),t.Util_vector.scale(c,c,i);var S=t.Util_vector.distance(m,_),O=t.Util_vector.distance(m,b),C=S+O;0!==C&&(S/=C,O/=C),t.Util_vector.scale(h,c,-S),t.Util_vector.scale(d,c,O);var T=t.Util_vector.add([],m,h),x=t.Util_vector.add([],m,d);p&&(t.Util_vector.max(T,T,a),t.Util_vector.min(T,T,s),t.Util_vector.max(x,x,a),t.Util_vector.min(x,x,s)),u.push(T),u.push(x)}return r&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(e,i,r,n){n&&2===n||(n=[0,0]);for(var o=n,a=e.length,s=[],l=0,u=1;u<a;u++)l+=t.Util_vector.distance([e[u-1][0]+o[0],e[u-1][1]+o[1]],[e[u][0]+o[0],e[u][1]+o[1]]);var c=l/5;c=c<a?a:c;for(var h=0;h<c;h++){var d=h/(c-1)*(i?a:a-1),p=Math.floor(d),f=d-p,g=void 0,y=[e[p%a][0]+o[0],e[p%a][1]+o[1]],v=void 0,m=void 0;i?(g=[e[(p-1+a)%a][0]+o[0],e[(p-1+a)%a][1]+o[1]],v=[e[(p+1)%a][0]+o[0],e[(p+1)%a][1]+o[1]],m=[e[(p+2)%a][0]+o[0],e[(p+2)%a][1]+o[1]]):(g=[e[0===p?p:p-1][0]+o[0],e[0===p?p:p-1][1]+o[1]],v=[e[p>a-2?a-1:p+1][0]+o[0],e[p>a-2?a-1:p+1][1]+o[1]],m=[e[p>a-3?a-1:p+2][0]+o[0],e[p>a-3?a-1:p+2][1]+o[1]]);var _=f*f,b=f*_;s.push([S(g[0],y[0],v[0],m[0],f,_,b),S(g[1],y[1],v[1],m[1],f,_,b)])}return s;function S(t,e,i,r,n,o,a){var s=.5*(i-t),l=.5*(r-e);return(2*(e-i)+s+l)*a+(-3*(e-i)-2*s-l)*o+s*n+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,i,r,n,o,a){var s=[5,5];if(o="number"!=typeof o?5:o,t.setLineDash)return s[0]=o,s[1]=o,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,i),void t.lineTo(r,n);var l=r-e,u=n-i,c=Math.floor(Math.sqrt(l*l+u*u)/o);l/=c,u/=c;for(var h=!0,d=0;d<c;++d)h?t.moveTo(e,i):t.lineTo(e,i),h=!h,e+=l,i+=u;t.lineTo(r,n)}}]),t}();m.Util_area=new a.Area,m.Util_color=new s.Color,m.Util_computeBoundingBox=new l.ComputeBoundingBox,m.Util_curve=new u.Curve,m.Util_env=new c.Env,m.Util_event=new h.Event,m.Util_http=new d.Http,m.Util_math=new p.Math,m.Util_matrix=new f.Matrix,m.Util=new g.Util,m.Util_vector=new y.Vector,e.SUtil=m,o.Zondy.LevelRenderer.SUtil=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point2D=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(18)),a=l(i(14)),s=l(i(15));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,o){(0,n.default)(this,e);var s=o||{},l=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,s));return l.x=void 0!==t?t:null,l.y=void 0!==i?i:null,l.nearDis=void 0!==s.nearDis?parseFloat(s.nearDis):null,l.CLASS_NAME="Zondy.Object.Point2D",l}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getGeometryType",value:function(){return"point"}},{key:"setByOL",value:function(t){if(void 0!==t){var e=t.getCoordinates();this.x=e[0],this.y=e[1]}}},{key:"toString",value:function(){if(null===this.x||null===this.y)return"";var t=this.x+","+this.y;return void 0!==this.nearDis&&(t+=";"+this.nearDis),t}}]),e}(i(169).Tangram);e.Point2D=u,Zondy.Object.Point2D=u},function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o}),i.d(e,"e",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"d",function(){return u});var r=i(19);function n(t,e,i,n,o,a,s){var l=(i-e)/n;if(l<3){for(;e<i;e+=n)a[s++]=t[e],a[s++]=t[e+1];return s}var u=new Array(l);u[0]=1,u[l-1]=1;for(var c=[e,i-n],h=0;c.length>0;){for(var d=c.pop(),p=c.pop(),f=0,g=t[p],y=t[p+1],v=t[d],m=t[d+1],_=p+n;_<d;_+=n){var b=t[_],S=t[_+1],O=Object(r.h)(b,S,g,y,v,m);O>f&&(h=_,f=O)}f>o&&(u[(h-e)/n]=1,p+n<h&&c.push(p,h),h+n<d&&c.push(h,d))}for(var C=0;C<l;++C)u[C]&&(a[s++]=t[e+C*n],a[s++]=t[e+C*n+1]);return s}function o(t,e,i,r,o,a,s,l){for(var u=0,c=i.length;u<c;++u){var h=i[u];s=n(t,e,h,r,o,a,s),l.push(s),e=h}return s}function a(t,e){return e*Math.round(t/e)}function s(t,e,i,r,n,o,s){if(e==i)return s;var l,u,c=a(t[e],n),h=a(t[e+1],n);e+=r,o[s++]=c,o[s++]=h;do{if(l=a(t[e],n),u=a(t[e+1],n),(e+=r)==i)return o[s++]=l,o[s++]=u,s}while(l==c&&u==h);for(;e<i;){var d=a(t[e],n),p=a(t[e+1],n);if(e+=r,d!=l||p!=u){var f=l-c,g=u-h,y=d-c,v=p-h;f*v==g*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(g<0&&v<g||g==v||g>0&&v>g)?(l=d,u=p):(o[s++]=l,o[s++]=u,c=l,h=u,l=d,u=p)}}return o[s++]=l,o[s++]=u,s}function l(t,e,i,r,n,o,a,l){for(var u=0,c=i.length;u<c;++u){var h=i[u];a=s(t,e,h,r,n,o,a),l.push(a),e=h}return a}function u(t,e,i,r,n,o,a,s){for(var u=0,c=i.length;u<c;++u){var h=i[u],d=[];a=l(t,e,h,r,n,o,a,d),s.push(d),e=h[h.length-1]}return a}},function(t,e,i){"use strict";var r=i(4),n=i(12),o=i(33),a=i(108),s=i(0),l=function(t){function e(){t.call(this),this.xmlSerializer_=new XMLSerializer}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return a.a.XML},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var i=Object(s.parse)(t);return this.readFeatureFromDocument(i,e)}return Object(s.isDocument)(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var i=Object(s.parse)(t);return this.readFeaturesFromDocument(i,e)}return Object(s.isDocument)(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var i=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&Object(n.c)(i,this.readFeaturesFromNode(r,e));return i},e.prototype.readFeaturesFromNode=function(t,e){return Object(r.abstract)()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var i=Object(s.parse)(t);return this.readGeometryFromDocument(i,e)}return Object(s.isDocument)(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=Object(s.parse)(t);return this.readProjectionFromDocument(e)}return Object(s.isDocument)(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)},e.prototype.writeGeometryNode=function(t,e){return null},e}(o.default);e.a=l},function(t,e,i){"use strict";var r=function(t){function e(e,i,r,n){t.call(this,e,i),this.expression=r,this.matchCase=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(136).a);e.a=r},function(t,e,i){"use strict";e.a={PROPERTYCHANGE:"propertychange"}},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(71),o=i.n(n),a=i(1),s=i(11),l=function(t){this.rbush_=o()(t,void 0),this.items_={}};l.prototype.insert=function(t,e){var i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[Object(r.getUid)(e)]=i},l.prototype.load=function(t,e){for(var i=new Array(e.length),n=0,o=e.length;n<o;n++){var a=t[n],s=e[n],l={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};i[n]=l,this.items_[Object(r.getUid)(s)]=l}this.rbush_.load(i)},l.prototype.remove=function(t){var e=Object(r.getUid)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)},l.prototype.update=function(t,e){var i=this.items_[Object(r.getUid)(e)],n=[i.minX,i.minY,i.maxX,i.maxY];Object(a.equals)(n,t)||(this.remove(e),this.insert(t,e))},l.prototype.getAll=function(){return this.rbush_.all().map(function(t){return t.value})},l.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})},l.prototype.forEach=function(t,e){return this.forEach_(this.getAll(),t,e)},l.prototype.forEachInExtent=function(t,e,i){return this.forEach_(this.getInExtent(t),e,i)},l.prototype.forEach_=function(t,e,i){for(var r,n=0,o=t.length;n<o;n++)if(r=e.call(i,t[n]))return r;return r},l.prototype.isEmpty=function(){return Object(s.isEmpty)(this.items_)},l.prototype.clear=function(){this.rbush_.clear(),this.items_={}},l.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return Object(a.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)},l.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},e.default=l},function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"d",function(){return o}),i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var r=i(19);function n(t,e){return void 0!==t?0:void 0}function o(t,e){return void 0!==t?t+e:void 0}function a(t){var e=2*Math.PI/t;return function(t,i){return void 0!==t?t=Math.floor((t+i)/e+.5)*e:void 0}}function s(t){var e=t||Object(r.j)(5);return function(t,i){return void 0!==t?Math.abs(t+i)<=e?0:t+i:void 0}}},function(t,e,i){"use strict";e.__esModule=!0;var r=a(i(508)),n=a(i(515)),o="function"==typeof n.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof n.default&&t.constructor===n.default&&t!==n.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof n.default&&"symbol"===o(r.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof n.default&&t.constructor===n.default&&t!==n.default.prototype?"symbol":void 0===t?"undefined":o(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CTheme=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(8)),n=i(6),o=i(22),a=function t(e){(0,r.default)(this,t);var i=void 0!==e?e:{};(0,o.extend)(this,i),this.Name=i&&i.Name?i.Name:null,this.IsBaseTheme=!i||!i.IsBaseTheme||i.IsBaseTheme,this.Visible=!i||!i.Visible||i.Visible};e.CTheme=a,n.Zondy.Object.Theme.CTheme=a},function(t,e,i){"use strict";i.r(e);var r=i(49),n=function(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit};n.prototype.canWrapX=function(){return this.canWrapX_},n.prototype.getCode=function(){return this.code_},n.prototype.getExtent=function(){return this.extent_},n.prototype.getUnits=function(){return this.units_},n.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||r.METERS_PER_UNIT[this.units_]},n.prototype.getWorldExtent=function(){return this.worldExtent_},n.prototype.getAxisOrientation=function(){return this.axisOrientation_},n.prototype.isGlobal=function(){return this.global_},n.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},n.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},n.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},n.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},n.prototype.setWorldExtent=function(t){this.worldExtent_=t},n.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},n.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e.default=n},function(t,e,i){"use strict";i.r(e),i.d(e,"TileSourceEvent",function(){return p});var r=i(4),n=i(186),o=i(16),a=i(35),s=i(9),l=i(45),u=i(174),c=i(46),h=i(59),d=function(t){function e(e){t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX}),this.opaque_=void 0!==e.opaque&&e.opaque,this.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:null,this.tileCache=new n.a(e.cacheSize),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var i=this.getTileCacheForProjection(t);i&&i.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,i,r){var n=this.getTileCacheForProjection(t);if(!n)return!1;for(var a,s,l,u=!0,h=i.minX;h<=i.maxX;++h)for(var d=i.minY;d<=i.maxY;++d)s=Object(c.getKeyZXY)(e,h,d),l=!1,n.containsKey(s)&&(l=(a=n.get(s)).getState()===o.default.LOADED)&&(l=!1!==r(a)),l||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,i,n,o){return Object(r.abstract)()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Object(h.getForProjection)(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Object(s.equivalent)(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),n=this.getTilePixelRatio(e),o=Object(l.toSize)(r.getTileSize(t),this.tmpSize);return 1==n?o:Object(l.scale)(o,n,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var i=void 0!==e?e:this.getProjection(),r=this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Object(h.wrapX)(r,t,i)),Object(c.withinExtentAndZ)(t,r)?t:null},e.prototype.refresh=function(){this.tileCache.clear(),this.changed()},e.prototype.useTile=function(t,e,i,r){},e}(u.default),p=function(t){function e(e,i){t.call(this,e),this.tile=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default);e.default=d},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=function(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r};function n(t,e,i,n,o){return void 0!==o?(o.minX=t,o.maxX=e,o.minY=i,o.maxY=n,o):new r(t,e,i,n)}r.prototype.contains=function(t){return this.containsXY(t[1],t[2])},r.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},r.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},r.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},r.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},r.prototype.getHeight=function(){return this.maxY-this.minY+1},r.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},r.prototype.getWidth=function(){return this.maxX-this.minX+1},r.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e.b=r},function(t,e,i){"use strict";i.r(e);var r=i(3),n=i(10),o=i(1),a=i(72),s=i(5),l=i(11),u=function(t){function e(e){t.call(this),this.geometries_=e||null,this.listenGeometriesChange_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.unlistenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(r.unlisten)(this.geometries_[t],n.default.CHANGE,this.changed,this)},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)Object(r.listen)(this.geometries_[t],n.default.CHANGE,this.changed,this)},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,i,r){if(r<Object(o.closestSquaredDistanceXY)(this.getExtent(),t,e))return r;for(var n=this.geometries_,a=0,s=n.length;a<s;++a)r=n[a].closestPointXY(t,e,i,r);return r},e.prototype.containsXY=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)if(i[r].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){Object(o.createOrUpdateEmpty)(t);for(var e=this.geometries_,i=0,r=e.length;i<r;++i)Object(o.extend)(t,e[i].getExtent());return t},e.prototype.getGeometries=function(){return c(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!=this.getRevision()&&(Object(l.clear)(this.simplifiedGeometryCache),this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;var i=t.toString();if(this.simplifiedGeometryCache.hasOwnProperty(i))return this.simplifiedGeometryCache[i];for(var r=[],n=this.geometries_,o=!1,a=0,s=n.length;a<s;++a){var u=n[a],c=u.getSimplifiedGeometry(t);r.push(c),c!==u&&(o=!0)}if(o){var h=new e(null);return h.setGeometriesArray(r),this.simplifiedGeometryCache[i]=h,h}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return s.default.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,i){var r=i;r||(r=Object(o.getCenter)(this.getExtent()));for(var n=this.geometries_,a=0,s=n.length;a<s;++a)n[a].scale(t,e,r);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(c(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var i=this.geometries_,r=0,n=i.length;r<n;++r)i[r].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(a.default);function c(t){for(var e=[],i=0,r=t.length;i<r;++i)e.push(t[i].clone());return e}e.default=u},function(t,e,i){"use strict";i.d(e,"b",function(){return n}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return a}),i(11);var r={};function n(){r={}}function o(t,e,i){var n=t.getCode(),o=e.getCode();n in r||(r[n]={}),r[n][o]=i}function a(t,e){var i;return t in r&&e in r[t]&&(i=r[t][e]),i}},function(t,e,i){"use strict";e.a={IMAGE:"image",HYBRID:"hybrid",VECTOR:"vector"}},function(t,e,i){var r=i(103),n=i(80),o=i(195),a=i(166),s=i(167),l=function(t,e,i){var u,c,h,d=t&l.F,p=t&l.G,f=t&l.S,g=t&l.P,y=t&l.B,v=t&l.W,m=p?n:n[e]||(n[e]={}),_=m.prototype,b=p?r:f?r[e]:(r[e]||{}).prototype;for(u in p&&(i=e),i)(c=!d&&b&&void 0!==b[u])&&s(m,u)||(h=c?b[u]:i[u],m[u]=p&&"function"!=typeof b[u]?i[u]:y&&c?o(h,r):v&&b[u]==h?function(t){var e=function(e,i,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):g&&"function"==typeof h?o(Function.call,h):h,g&&((m.virtual||(m.virtual={}))[u]=h,t&l.R&&_&&!_[u]&&a(_,u,h)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){"use strict";var r=function(){this.disposed_=!1};r.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},r.prototype.disposeInternal=function(){},e.a=r},function(t,e,i){"use strict";var r=function(t){this.tagName_=t};r.prototype.getTagName=function(){return this.tagName_},e.a=r},function(t,e,i){"use strict";var r=function(t){function e(e,i){t.call(this,e),this.propertyName=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(135).a);e.a=r},function(t,e,i){"use strict";e.a={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend"}},function(t,e,i){"use strict";i.d(e,"a",function(){return s}),i.d(e,"b",function(){return u});var r=i(24),n=i(1),o=i(19),a=i(9);function s(t,e,i,r){var o=Object(a.transform)(i,e,t),s=Object(a.getPointResolution)(e,r,i),l=e.getMetersPerUnit();void 0!==l&&(s*=l);var u=t.getMetersPerUnit();void 0!==u&&(s/=u);var c=t.getExtent();if(!c||Object(n.containsCoordinate)(c,o)){var h=Object(a.getPointResolution)(t,s,o)/s;isFinite(h)&&h>0&&(s/=h)}return s}function l(t,e,i,r){var n=i-t,o=r-e,a=Math.sqrt(n*n+o*o);return[Math.round(i+n/a),Math.round(r+o/a)]}function u(t,e,i,a,s,u,c,h,d,p,f){var g=Object(r.createCanvasContext2D)(Math.round(i*t),Math.round(i*e));if(0===d.length)return g.canvas;g.scale(i,i);var y=Object(n.createEmpty)();d.forEach(function(t,e,i){Object(n.extend)(y,t.extent)});var v=Object(n.getWidth)(y),m=Object(n.getHeight)(y),_=Object(r.createCanvasContext2D)(Math.round(i*v/a),Math.round(i*m/a)),b=i/a;d.forEach(function(t,e,i){var r=t.extent[0]-y[0],o=-(t.extent[3]-y[3]),a=Object(n.getWidth)(t.extent),s=Object(n.getHeight)(t.extent);_.drawImage(t.image,p,p,t.image.width-2*p,t.image.height-2*p,r*b,o*b,a*b,s*b)});var S=Object(n.getTopLeft)(c);return h.getTriangles().forEach(function(t,e,r){var n=t.source,s=t.target,c=n[0][0],h=n[0][1],d=n[1][0],p=n[1][1],f=n[2][0],v=n[2][1],m=(s[0][0]-S[0])/u,b=-(s[0][1]-S[1])/u,O=(s[1][0]-S[0])/u,C=-(s[1][1]-S[1])/u,T=(s[2][0]-S[0])/u,x=-(s[2][1]-S[1])/u,E=c,P=h;c=0,h=0;var j=[[d-=E,p-=P,0,0,O-m],[f-=E,v-=P,0,0,T-m],[0,0,d,p,C-b],[0,0,f,v,x-b]],R=Object(o.f)(j);if(R){g.save(),g.beginPath();var I=(m+O+T)/3,L=(b+C+x)/3,w=l(I,L,m,b),A=l(I,L,O,C),M=l(I,L,T,x);g.moveTo(A[0],A[1]),g.lineTo(w[0],w[1]),g.lineTo(M[0],M[1]),g.clip(),g.transform(R[0],R[2],R[1],R[3],m,b),g.translate(y[0]-E,y[3]-P),g.scale(a/i,-a/i),g.drawImage(_.canvas,0,0),g.restore()}}),f&&(g.save(),g.strokeStyle="black",g.lineWidth=1,h.getTriangles().forEach(function(t,e,i){var r=t.target,n=(r[0][0]-S[0])/u,o=-(r[0][1]-S[1])/u,a=(r[1][0]-S[0])/u,s=-(r[1][1]-S[1])/u,l=(r[2][0]-S[0])/u,c=-(r[2][1]-S[1])/u;g.beginPath(),g.moveTo(a,s),g.lineTo(n,o),g.lineTo(l,c),g.closePath(),g.stroke()}),g.restore()),g.canvas}},function(t,e,i){"use strict";e.a={CARMENTA_SERVER:"carmentaserver",GEOSERVER:"geoserver",MAPSERVER:"mapserver",QGIS:"qgis"}},function(t,e,i){var r=i(141);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShapeParameters=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="Zondy.Feature.ShapeParameters"}return(0,n.default)(t,[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}]),t}();e.ShapeParameters=s,o.Zondy.Feature.ShapeParameters=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceBase=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(22);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,r.default)(this,t),(0,a.extend)(this,e),this.baseUrl=e&&e.baseUrl?e.baseUrl:null,this.ip=e&&e.ip?e.ip:"localhost",this.port=e&&e.port?e.port:"6163",this.partUrl=e&&e.partUrl?e.partUrl:null,this.networkProtocol=e&&e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:""}return(0,n.default)(t,[{key:"getFullUrl",value:function(){var t=this,e=null;if(o.Zondy.Util.isArray(t.ip))for(var i=0;i<t.ip.length;i++){e=new Array;var r;r=(0,a.isArray)(t.port)?void 0!==t.port[i]?t.port[i]:"6163":void 0!==t.port?t.port:"6163";var n;n=(0,a.isArray)(t.partUrl)?void 0!==t.partUrl[i]?t.partUrl[i]:null:void 0!==t.partUrl?t.partUrl:null,""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip[i]+":"+r:t.domainStr=t.domain,e.push(encodeURI((t.domainStr+"/"+t.baseUrl+"/"+n).trim()))}else""===t.domain?t.domainStr=t.networkProtocol+"://"+t.ip+":"+t.port:t.domainStr=t.domain,e=encodeURI((t.domainStr+"/"+t.baseUrl+"/"+t.partUrl).trim());return e}}]),t}();e.ServiceBase=l,o.Zondy.Service.ServiceBase=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnalysisBase=void 0;var r=p(i(58)),n=p(i(13)),o=p(i(8)),a=p(i(18)),s=p(i(14)),l=p(i(15)),u=i(6),c=i(22),h=i(143),d=i(53);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{};i.baseUrl="igs/rest/mrfws";var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.flowID=void 0!==i.flowID?i.flowID:null,r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"execute",value:function(t,e,i){var n={};if((0,c.copyExcluce)(n,this,["port","ip","baseUrl","partUrl","flowID"]),e||(e="get"),"get"===e.toLowerCase()&&(this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json",null!==n)){var o=(0,c.getWFParameterString)(n);null===o&&""===o||(this.partUrl+="&paraValues="+o)}if("post"===e.toLowerCase()){this.partUrl="execute/"+this.flowID+"?isAsy=false&f=json";var a=new Array;if(null!==n)for(var s in n)if(null!==n[s]){var l={};l.Key=s,l.Value=n[s].toString(),a.push(l)}n=a}var u=this.getFullUrl(),h=new d.IgsServiceBase(u,{eventListeners:{scope:this,processCompleted:t,processFailed:i}});"post"===e.toLowerCase()?h.processAsync({method:"POST",data:(0,r.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):h.processAsync()}}]),e}(h.ServiceBase);e.AnalysisBase=f,u.Zondy.Service.AnalysisBase=f},function(t,e,i){"use strict";i.r(e);var r=i(98),n=i(16),o=i(24),a=i(3),s=i(10),l=function(t){function e(e,i,r,n,o,a){t.call(this,e,i,a),this.crossOrigin_=n,this.src_=r,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.imageListenerKeys_=null,this.tileLoadFunction_=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state==n.default.LOADING&&(this.unlistenImage_(),this.image_=u()),this.interimTile&&this.interimTile.dispose(),this.state=n.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){this.state=n.default.ERROR,this.unlistenImage_(),this.image_=u(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=n.default.LOADED:this.state=n.default.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==n.default.ERROR&&(this.state=n.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==n.default.IDLE&&(this.state=n.default.LOADING,this.changed(),this.imageListenerKeys_=[Object(a.listenOnce)(this.image_,s.default.ERROR,this.handleImageError_,this),Object(a.listenOnce)(this.image_,s.default.LOAD,this.handleImageLoad_,this)],this.tileLoadFunction_(this,this.src_))},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(a.unlistenByKey),this.imageListenerKeys_=null},e}(r.default);function u(){var t=Object(o.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}e.default=l},function(t,e,i){"use strict";i.r(e);var r=function(){};r.prototype.drawCustom=function(t,e,i){},r.prototype.drawGeometry=function(t){},r.prototype.setStyle=function(t){},r.prototype.drawCircle=function(t,e){},r.prototype.drawFeature=function(t,e){},r.prototype.drawGeometryCollection=function(t,e){},r.prototype.drawLineString=function(t,e){},r.prototype.drawMultiLineString=function(t,e){},r.prototype.drawMultiPoint=function(t,e){},r.prototype.drawMultiPolygon=function(t,e){},r.prototype.drawPoint=function(t,e){},r.prototype.drawPolygon=function(t,e){},r.prototype.drawText=function(t,e){},r.prototype.setFillStrokeStyle=function(t,e){},r.prototype.setImageStyle=function(t,e){},r.prototype.setTextStyle=function(t,e){},e.default=r},function(t,e,i){"use strict";i.r(e);var r=i(1),n=i(20),o=i(5),a=i(76),s=i(158),l=i(102),u=i(87),c=i(91),h=i(119),d=function(t){function e(e,i){t.call(this),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?this.setCoordinates(e,i):this.setFlatCoordinates(i,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(r.closestSquaredDistanceXY)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(l.e)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(l.d)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.getArea=function(){return Object(s.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Object(c.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(h.a)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,n.default.XY)},e.prototype.getType=function(){return o.default.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(u.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()},e}(a.default);e.default=d},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n});var r=42,n=256},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r="http://www.w3.org/1999/xlink";function n(t){return t.getAttributeNS(r,"href")}},function(t,e,i){var r=i(140),n=i(348),o=i(285),a=Object.defineProperty;e.f=i(151)?Object.defineProperty:function(t,e,i){if(r(t),e=o(e,!0),r(i),n)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){t.exports=!i(196)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(202),h=i(104),d=i(203);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,s,l,c){(0,n.default)(this,e);var d=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,c));if(d.shapeFactory=new h.ShapeFactory,d.shapeParameters=null,d.RelativeCoordinate=!1,d.setting=null,d.origonPoint=null,d.chartBox=null,d.chartBounds=null,d.width=null,d.height=null,d.XOffset=0,d.YOffset=0,d.DVBParameter=null,d.dataViewBox=null,d.DVBCodomain=null,d.DVBCenterPoint=null,d.DVBUnitValue=null,d.DVBOrigonPoint=null,d.DVBWidth=null,d.DVBHeight=null,d.origonPointOffset=null,d.fields=o||[],d.dataValues=null,l)d.lonlat=l;else if(c&&c.calGravity)if(t.ftype===u.Zondy.Enum.FeatureType.Pnt){var p=t.fGeom.PntGeom[0].Dot;d.lonlat=[p.x,p.y]}else if(t.ftype===u.Zondy.Enum.FeatureType.Lin){var f=[];t.fGeom.LinGeom[0].Line.Arcs.forEach(function(t){var e=t.Dots;f=[].concat(e)});var g=Math.ceil(f.length/2);p=f[g-1],d.lonlat=[p.x,p.y]}else if(t.ftype===u.Zondy.Enum.FeatureType.Reg)d.lonlat=d.getCenterOfGravityPoint(t);else{var y=t.bound;d.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2]}else y=t.bound,d.lonlat=[(y.xmin+y.xmax)/2,(y.ymin+y.ymax)/2];return s&&s.width&&s.height&&s.codomain&&(d.setting=s),d.CLASS_NAME="Zondy.Feature.Theme.Graph",d}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,i=c.Theme.getDataValues(this.data,this.fields,e);this.dataValues=i||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,n=this.height,o=this.location;this.origonPoint=[o[0]-r/2,o[1]-n/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+n,a[0]+r,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3]||(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],0))}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var i=this.width,r=this.height,n=this.location;return this.chartBounds=new d.Rectangle(n[0]-i/2,n[1]-r/2,n[0]+i/2,n[1]+r/2),this.resetLinearGradient(),n}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,i=0,r=t.length;i<r;i++){t[i].refOriginalPosition=e;var n=t[i].style;for(var o in n)switch(o){case"pointList":for(var a=n[o],s=0,l=a.length;s<l;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":n[o]-=e[0];break;case"y":n[o]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}},{key:"getCenterOfGravityPoint",value:function(t){var e=[],i=0,r=0,n=0;if(t.ftype===u.Zondy.Enum.FeatureType.Reg)for(var o=t.fGeom.RegGeom,a=0;a<o.length;a++){var s=o[a];if(null!=s&&null!=s.Rings)for(var l=s.Rings,c=0;c<l.length;c++){var h=l[c];if(null!=h&&null!=h.Arcs)for(var d=h.Arcs,p=0;p<d.length;p++){var f=d[p];if(null!=f&&null!=f.Dots)for(var g=f.Dots,y=0;y<g.length;y++)e.push(g[y])}}}for(c=1;c<=e.length;c++){var v=e[c%e.length].x,m=e[c%e.length].y,_=e[c-1].x,b=e[c-1].y,S=(v*b-m*_)/2;i+=S,r+=S*(v+_)/3,n+=S*(m+b)/3}return[r/=i,n/=i]}}]),e}(c.Theme);c.Theme.getDataValues=function(t,e,i){if(!t.attributes)return!1;for(var r=[],n=t.attributes,o=0;o<e.length;o++)for(var a in n)if(a===e[o]&&null!==n[a]&&void 0!==n[a])try{!isNaN(i)&&i>=0?r.push(parseFloat(n[a].toString()).toFixed(i)):r.push(parseFloat(n[a].toString()))}catch(t){throw new Error("not a number")}return r.length===e.length&&r},e.Graph=f,u.Zondy.Theme.Graph=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CThemeInfo=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(8)),n=i(6),o=i(22);i(250),i(433),i(434);var a=function t(e){(0,r.default)(this,t);var i=void 0!==e?e:{};(0,o.extend)(this,i),this.Caption=void 0!==i.Caption?i.Caption:null,this.IsVisible=void 0===i.IsVisible||i.IsVisible,this.MaxScale=void 0!==i.MaxScale?parseFloat(i.MaxScale):0,this.MinScale=void 0!==i.MinScale?parseFloat(i.MinScale):0,this.RegInfo=void 0!==i.RegInfo?i.RegInfo:null,this.LinInfo=void 0!==i.LinInfo?i.LinInfo:null,this.PntInfo=void 0!==i.PntInfo?i.PntInfo:null};e.CThemeInfo=a,n.Zondy.Object.Theme.CThemeInfo=a},function(t,e,i){"use strict";i.r(e);var r=i(50),n=i(83),o=i(63),a=i(11),s=function(t){function e(e){var i=e||{},n=Object(a.assign)({},i);delete n.preload,delete n.useInterimTilesOnError,t.call(this,n),this.setPreload(void 0!==i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=r.a.TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(o.a.PRELOAD)},e.prototype.setPreload=function(t){this.set(o.a.PRELOAD,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(n.default);s.prototype.getSource,e.default=s},function(t,e,i){"use strict";i.r(e),i.d(e,"unByKey",function(){return s});var r=i(3),n=i(106),o=i(10),a=function(t){function e(){t.call(this),this.revision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){++this.revision_,this.dispatchEvent(o.default.CHANGE)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=Object(r.listen)(this,t[o],e);return n}return Object(r.listen)(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var i=t.length,n=new Array(i),o=0;o<i;++o)n[o]=Object(r.listenOnce)(this,t[o],e);return n}return Object(r.listenOnce)(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)Object(r.unlisten)(this,t[i],e);else Object(r.unlisten)(this,t,e)},e}(n.a);function s(t){if(Array.isArray(t))for(var e=0,i=t.length;e<i;++e)Object(r.unlistenByKey)(t[e]);else Object(r.unlistenByKey)(t)}e.default=a},function(t,e,i){"use strict";var r=i(4),n=i(106),o=i(10),a=function(t){function e(e,i,r,n){t.call(this),this.extent=e,this.pixelRatio_=r,this.resolution=i,this.state=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.changed=function(){this.dispatchEvent(o.default.CHANGE)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return Object(r.abstract)()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){Object(r.abstract)()},e}(n.a);e.a=a},function(t,e,i){"use strict";var r=i(156),n=i(27),o=function(t){function e(e,i,r,o,a){var s=void 0!==a?n.a.IDLE:n.a.LOADED;t.call(this,e,i,r,s),this.loader_=void 0!==a?a:null,this.canvas_=o,this.error_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=n.a.ERROR):this.state=n.a.LOADED,this.changed()},e.prototype.load=function(){this.state==n.a.IDLE&&(this.state=n.a.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(r.a);e.a=o},function(t,e,i){"use strict";function r(t,e,i,r){for(var n=0,o=t[i-r],a=t[i-r+1];e<i;e+=r){var s=t[e],l=t[e+1];n+=a*s-o*l,o=s,a=l}return n/2}function n(t,e,i,n){for(var o=0,a=0,s=i.length;a<s;++a){var l=i[a];o+=r(t,e,l,n),e=l}return o}function o(t,e,i,r){for(var o=0,a=0,s=i.length;a<s;++a){var l=i[a];o+=n(t,e,l,r),e=l[l.length-1]}return o}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n}),i.d(e,"c",function(){return o})},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return l}),i.d(e,"d",function(){return u});var r=i(1),n=i(107),o=i(253);function a(t,e,i,n,a){var s=Object(r.extendFlatCoordinates)(Object(r.createEmpty)(),t,e,i,n);return!!Object(r.intersects)(a,s)&&(!!Object(r.containsExtent)(a,s)||s[0]>=a[0]&&s[2]<=a[2]||s[1]>=a[1]&&s[3]<=a[3]||Object(o.a)(t,e,i,n,function(t,e){return Object(r.intersectsSegment)(a,t,e)}))}function s(t,e,i,r,n){for(var o=0,s=i.length;o<s;++o){if(a(t,e,i[o],r,n))return!0;e=i[o]}return!1}function l(t,e,i,r,o){if(!function(t,e,i,r,o){return!!(a(t,e,i,r,o)||Object(n.b)(t,e,i,r,o[0],o[1])||Object(n.b)(t,e,i,r,o[0],o[3])||Object(n.b)(t,e,i,r,o[2],o[1])||Object(n.b)(t,e,i,r,o[2],o[3]))}(t,e,i[0],r,o))return!1;if(1===i.length)return!0;for(var s=1,l=i.length;s<l;++s)if(Object(n.a)(t,i[s-1],i[s],r,o)&&!a(t,i[s-1],i[s],r,o))return!1;return!0}function u(t,e,i,r,n){for(var o=0,a=i.length;o<a;++o){var s=i[o];if(l(t,e,s,r,n))return!0;e=s[s.length-1]}return!1}},function(t,e,i){"use strict";var r=function(t,e){this.dispatcher=t,this.mapping_=e};r.prototype.getEvents=function(){return Object.keys(this.mapping_)},r.prototype.getHandlerForEvent=function(t){return this.mapping_[t]},e.a=r},function(t,e,i){"use strict";var r=function(t){function e(e,i,r){t.call(this,e),this.map=i,this.frameState=void 0!==r?r:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(35).default);e.a=r},function(t,e,i){"use strict";var r=function(t){function e(e,i,r,n,o){t.call(this,e),this.vectorContext=i,this.frameState=r,this.context=n,this.glContext=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(35).default);e.a=r},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(50),o=i(129),a=i(16),s=i(28),l=i(24),u=i(1),c=i(260),h=i(17),d=function(t){function e(e,i){t.call(this,e),this.context=i?null:Object(l.createCanvasContext2D)(),this.oversampling_,this.renderedExtent_=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Object(u.createEmpty)(),this.tmpTileRange_=new o.b(0,0,0,0),this.imageTransform_=Object(h.c)(),this.zDirection=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isDrawableTile_=function(t){var e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==a.default.LOADED||i==a.default.EMPTY||i==a.default.ERROR&&!r},e.prototype.getTile=function(t,e,i,r,n){var o=this.getLayer(),s=o.getSource().getTile(t,e,i,r,n);return s.getState()==a.default.ERROR&&(o.getUseInterimTilesOnError()?o.getPreload()>0&&(this.newTiles_=!0):s.setState(a.default.LOADED)),this.isDrawableTile_(s)||(s=s.getInterimTile()),s},e.prototype.prepareFrame=function(t,e){var i=t.pixelRatio,n=t.size,o=t.viewState,l=o.projection,c=o.resolution,d=o.center,p=this.getLayer(),f=p.getSource(),g=f.getRevision(),y=f.getTileGridForProjection(l),v=y.getZForResolution(c,this.zDirection),m=y.getResolution(v),_=Math.round(c/m)||1,b=t.extent;if(void 0!==e.extent&&(b=Object(u.getIntersection)(b,e.extent)),Object(u.isEmpty)(b))return!1;var S=y.getTileRangeForExtentAndZ(b,v),O=y.getTileRangeExtent(v,S),C=f.getTilePixelRatio(i),T={};T[v]={};var x,E,P,j=this.createLoadedTileFinder(f,l,T),R=t.viewHints,I=R[s.default.ANIMATING]||R[s.default.INTERACTING],L=this.tmpExtent,w=this.tmpTileRange_;for(this.newTiles_=!1,E=S.minX;E<=S.maxX;++E)for(P=S.minY;P<=S.maxY;++P)if(!(Date.now()-t.time>16&&I)){if(x=this.getTile(v,E,P,i,l),this.isDrawableTile_(x)){var A=Object(r.getUid)(this);if(x.getState()==a.default.LOADED){T[v][x.tileCoord.toString()]=x;var M=x.inTransition(A);this.newTiles_||!M&&-1!==this.renderedTiles.indexOf(x)||(this.newTiles_=!0)}if(1===x.getAlpha(A,t.time))continue}var F=y.getTileCoordChildTileRange(x.tileCoord,w,L),k=!1;F&&(k=j(v+1,F)),k||y.forEachTileCoordParentTileRange(x.tileCoord,j,null,w,L)}var N=m*i/C*_;if(!(this.renderedResolution&&Date.now()-t.time>16&&I)&&(this.newTiles_||!this.renderedExtent_||!Object(u.containsExtent)(this.renderedExtent_,b)||this.renderedRevision!=g||_!=this.oversampling_||!I&&N!=this.renderedResolution)){var D=this.context;if(D){var G=f.getTilePixelSize(v,i,l),B=Math.round(S.getWidth()*G[0]/_),U=Math.round(S.getHeight()*G[1]/_),V=D.canvas;V.width!=B||V.height!=U?(this.oversampling_=_,V.width=B,V.height=U):((this.renderedExtent_&&!Object(u.equals)(O,this.renderedExtent_)||this.renderedRevision!=g)&&D.clearRect(0,0,B,U),_=this.oversampling_)}this.renderedTiles.length=0;var W,Z,z,H,Y,X,q,K,J,Q,$=Object.keys(T).map(Number);for($.sort(function(t,e){return t===v?1:e===v?-1:t>e?1:t<e?-1:0}),H=0,Y=$.length;H<Y;++H)for(var tt in z=$[H],Z=f.getTilePixelSize(z,i,l),W=y.getResolution(z)/m,q=C*f.getGutterForProjection(l),K=T[z])x=K[tt],E=((X=y.getTileCoordExtent(x.getTileCoord(),L))[0]-O[0])/m*C/_,P=(O[3]-X[3])/m*C/_,J=Z[0]*W/_,Q=Z[1]*W/_,this.drawTileImage(x,t,e,E,P,J,Q,q,v===z),this.renderedTiles.push(x);this.renderedRevision=g,this.renderedResolution=m*i/C*_,this.renderedExtent_=O}var et=this.renderedResolution/c,it=Object(h.b)(this.imageTransform_,i*n[0]/2,i*n[1]/2,et,et,0,(this.renderedExtent_[0]-d[0])/this.renderedResolution*i,(d[1]-this.renderedExtent_[3])/this.renderedResolution*i);return Object(h.b)(this.coordinateToCanvasPixelTransform,i*n[0]/2-it[4],i*n[1]/2-it[5],i/c,-i/c,0,-d[0],-d[1]),this.updateUsedTiles(t.usedTiles,f,v,S),this.manageTilePyramid(t,f,y,i,l,b,v,p.getPreload()),this.scheduleExpireCache(t,f),this.renderedTiles.length>0},e.prototype.drawTileImage=function(t,e,i,n,o,a,s,l,u){var c=this.getTileImage(t);if(c){var h=Object(r.getUid)(this),d=u?t.getAlpha(h,e.time):1,p=this.getLayer().getSource();1!==d||p.getOpaque(e.viewState.projection)||this.context.clearRect(n,o,a,s);var f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,l,l,c.width-2*l,c.height-2*l,n,o,a,s),f&&this.context.restore(),1!==d?e.animate=!0:u&&t.endTransition(h)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.getTileImage=function(t){return t.getImage()},e}(c.a);d.handles=function(t){return t.getType()===n.a.TILE},d.create=function(t,e){return new d(e)},d.prototype.getLayer,e.default=d},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n}),i.d(e,"d",function(){return h});var r=1,n="mouse";function o(t){if(!this.isEventSimulatedFromTouch_(t)){r.toString()in this.pointerMap&&this.cancel(t);var e=h(t,this.dispatcher);this.pointerMap[r.toString()]=t,this.dispatcher.down(e,t)}}function a(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.move(e,t)}}function s(t){if(!this.isEventSimulatedFromTouch_(t)){var e=this.pointerMap[r.toString()];if(e&&e.button===t.button){var i=h(t,this.dispatcher);this.dispatcher.up(i,t),this.cleanupMouse()}}}function l(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.enterOver(e,t)}}function u(t){if(!this.isEventSimulatedFromTouch_(t)){var e=h(t,this.dispatcher);this.dispatcher.leaveOut(e,t)}}var c=function(t){function e(e){var i={mousedown:o,mousemove:a,mouseup:s,mouseover:l,mouseout:u};t.call(this,e,i),this.pointerMap=e.pointerMap,this.lastTouches=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isEventSimulatedFromTouch_=function(t){for(var e=this.lastTouches,i=t.clientX,r=t.clientY,n=0,o=e.length,a=void 0;n<o&&(a=e[n]);n++){var s=Math.abs(i-a[0]),l=Math.abs(r-a[1]);if(s<=25&&l<=25)return!0}return!1},e.prototype.cancel=function(t){var e=h(t,this.dispatcher);this.dispatcher.cancel(e,t),this.cleanupMouse()},e.prototype.cleanupMouse=function(){delete this.pointerMap[r.toString()]},e}(i(160).a);function h(t,e){var i=e.cloneEvent(t,t),o=i.preventDefault;return i.preventDefault=function(){t.preventDefault(),o()},i.pointerId=r,i.isPrimary=!0,i.pointerType=n,i}e.c=c},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var r="1.3.0"},function(t,e,i){var r=i(150),n=i(233);t.exports=i(151)?function(t,e,i){return r.f(t,e,n(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var r=i(498),n=i(286);t.exports=function(t){return r(n(t))}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tangram=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(22);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,r.default)(this,t);var i=e||{};(0,a.extend)(this,i)}return(0,n.default)(t,[{key:"setByOL",value:function(t){return null}},{key:"toString",value:function(){return""}},{key:"getGeometryType",value:function(){}},{key:"Trim",value:function(t,e){var i;return i=t.replace(/(^\s+)|(\s+$)/g,""),"g"===e.toLowerCase()&&(i=i.replace(/\s/g,"")),i}}]),t}();e.Tangram=l,o.Zondy.Object.Tangram=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeometryAnalysisBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{};return i.baseUrl="igs/rest/mrgs",(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i))}return(0,a.default)(e,t),e}(i(143).ServiceBase);e.GeometryAnalysisBase=u,s.Zondy.Service.GeometryAnalysisBase=u},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r,n,o){t.call(this,e,i,o),this.originalEvent=r,this.pixel=i.getEventPixel(r),this.coordinate=i.getCoordinateFromPixel(this.pixel),this.dragging=void 0!==n&&n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(i(161).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(48),o=i(51),a=i(171),s=i(252),l=i(31),u=i(161),c=i(137),h=i(94),d=i(57),p=i(25),f=i(122),g=i(185),y=i(183),v=i(28),m=i(23),_=i(24),b=i(3),S=i(35),O=i(10),C=i(1),T=i(29),x=i(42),E=i(328),P=i(45),j=i(69),R=i(17),I=function(t){function e(e){t.call(this);var i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var i,r,o,a={},s=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new E.default({layers:t.layers});return a[h.a.LAYERGROUP]=s,a[h.a.TARGET]=t.target,a[h.a.VIEW]=void 0!==t.view?t.view:new y.default,void 0!==t.controls&&(Array.isArray(t.controls)?i=new n.default(t.controls.slice()):(Object(m.a)("function"==typeof t.controls.getArray,47),i=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?r=new n.default(t.interactions.slice()):(Object(m.a)("function"==typeof t.interactions.getArray,48),r=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new n.default(t.overlays.slice()):(Object(m.a)("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new n.default,{controls:i,interactions:r,keyboardEventTarget:e,overlays:o,values:a}}(e);this.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,this.loadTilesWhileAnimating_=void 0!==e.loadTilesWhileAnimating&&e.loadTilesWhileAnimating,this.loadTilesWhileInteracting_=void 0!==e.loadTilesWhileInteracting&&e.loadTilesWhileInteracting,this.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:x.DEVICE_PIXEL_RATIO,this.animationDelayKey_,this.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_.call(this,Date.now())}.bind(this),this.coordinateToPixelTransform_=Object(R.c)(),this.pixelToCoordinateTransform_=Object(R.c)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+(x.TOUCH?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.viewport_.style.msTouchAction="none",this.viewport_.style.touchAction="none",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent";for(var r=[O.default.CLICK,O.default.DBLCLICK,O.default.MOUSEDOWN,O.default.TOUCHSTART,O.default.MSPOINTERDOWN,l.default.POINTERDOWN,O.default.MOUSEWHEEL,O.default.WHEEL],a=0,u=r.length;a<u;++a)Object(b.listen)(this.overlayContainerStopEvent_,r[a],S.stopPropagation);for(var c in this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=new s.a(this,e.moveTolerance),l.default)Object(b.listen)(this.mapBrowserEventHandler_,l.default[c],this.handleMapBrowserEvent,this);this.keyboardEventTarget_=i.keyboardEventTarget,this.keyHandlerKeys_=null,Object(b.listen)(this.viewport_,O.default.CONTEXTMENU,this.handleBrowserEvent,this),Object(b.listen)(this.viewport_,O.default.WHEEL,this.handleBrowserEvent,this),Object(b.listen)(this.viewport_,O.default.MOUSEWHEEL,this.handleBrowserEvent,this),this.controls=i.controls||new n.default,this.interactions=i.interactions||new n.default,this.overlays_=i.overlays,this.overlayIdIndex_={},this.renderer_=this.createRenderer(),this.handleResize_,this.focus_=null,this.postRenderFunctions_=[],this.tileQueue_=new g.a(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.skippedFeatureUids_={},Object(b.listen)(this,Object(p.getChangeEventType)(h.a.LAYERGROUP),this.handleLayerGroupChanged_,this),Object(b.listen)(this,Object(p.getChangeEventType)(h.a.VIEW),this.handleViewChanged_,this),Object(b.listen)(this,Object(p.getChangeEventType)(h.a.SIZE),this.handleSizeChanged_,this),Object(b.listen)(this,Object(p.getChangeEventType)(h.a.TARGET),this.handleTargetChanged_,this),this.setProperties(i.values),this.controls.forEach(function(t){t.setMap(this)}.bind(this)),Object(b.listen)(this.controls,o.default.ADD,function(t){t.element.setMap(this)},this),Object(b.listen)(this.controls,o.default.REMOVE,function(t){t.element.setMap(null)},this),this.interactions.forEach(function(t){t.setMap(this)}.bind(this)),Object(b.listen)(this.interactions,o.default.ADD,function(t){t.element.setMap(this)},this),Object(b.listen)(this.interactions,o.default.REMOVE,function(t){t.element.setMap(null)},this),this.overlays_.forEach(this.addOverlayInternal_.bind(this)),Object(b.listen)(this.overlays_,o.default.ADD,function(t){this.addOverlayInternal_(t.element)},this),Object(b.listen)(this.overlays_,o.default.REMOVE,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)},this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),Object(b.unlisten)(this.viewport_,O.default.CONTEXTMENU,this.handleBrowserEvent,this),Object(b.unlisten)(this.viewport_,O.default.WHEEL,this.handleBrowserEvent,this),Object(b.unlisten)(this.viewport_,O.default.MOUSEWHEEL,this.handleBrowserEvent,this),void 0!==this.handleResize_&&(removeEventListener(O.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,i){if(this.frameState_){var r=this.getCoordinateFromPixel(t),n=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==i.layerFilter?i.layerFilter:T.b;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,n,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var i=null;return this.forEachFeatureAtPixel(t,function(t){i||(i=[]),i.push(t)},e),i},e.prototype.forEachLayerAtPixel=function(t,e,i){if(this.frameState_){var r=i||{},n=void 0!==r.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=r.layerFilter||T.b;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,n,e,null,o,null)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var i=this.getCoordinateFromPixel(t),r=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:T.b,n=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,n,r,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),i="changedTouches"in t?t.changedTouches[0]:t;return[i.clientX-e.left,i.clientY-e.top]},e.prototype.getTarget=function(){return this.get(h.a.TARGET)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){var e=this.frameState_;return e?Object(R.a)(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(h.a.LAYERGROUP)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getPixelFromCoordinate=function(t){var e=this.frameState_;return e?Object(R.a)(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(h.a.SIZE)},e.prototype.getView=function(){return this.get(h.a.VIEW)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,i,r){var n=this.frameState_;if(!(n&&e in n.wantedTiles))return j.a;if(!n.wantedTiles[e][t.getKey()])return j.a;var o=i[0]-n.focus[0],a=i[1]-n.focus[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r},e.prototype.handleBrowserEvent=function(t,e){var i=e||t.type,r=new a.default(i,this,t);this.handleMapBrowserEvent(r)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){this.focus_=t.coordinate,t.frameState=this.frameState_;var e=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=e.length-1;i>=0;i--){var r=e[i];if(r.getActive()&&!r.handleEvent(t))break}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var i=this.maxTilesLoading_,r=i;if(t){var n=t.viewHints;n[v.default.ANIMATING]&&(i=this.loadTilesWhileAnimating_?8:0,r=2),n[v.default.INTERACTING]&&(i=this.loadTilesWhileInteracting_?8:0,r=2)}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,r))}!t||!this.hasListener(d.a.RENDERCOMPLETE)||t.animate||this.tileQueue_.getTilesLoading()||function t(e){for(var i=0,r=e.length;i<r;++i){var n=e[i];if("function"==typeof n.getLayers)return t(n.getLayers().getArray());var o=n.getSource();if(o&&o.loading)return!0}return!1}(this.getLayers().getArray())||this.renderer_.dispatchRenderEvent(d.a.RENDERCOMPLETE,t);for(var o=this.postRenderFunctions_,a=0,s=o.length;a<s;++a)o[a](this,t);o.length=0},e.prototype.handleSizeChanged_=function(){this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,i=this.keyHandlerKeys_.length;e<i;++e)Object(b.unlistenByKey)(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_);var r=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[Object(b.listen)(r,O.default.KEYDOWN,this.handleBrowserEvent,this),Object(b.listen)(r,O.default.KEYPRESS,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(O.default.RESIZE,this.handleResize_,!1))}else this.renderer_.removeLayerRenderers(),Object(_.removeNode)(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(O.default.RESIZE,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(Object(b.unlistenByKey)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(Object(b.unlistenByKey)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.viewport_.setAttribute("data-view",Object(r.getUid)(t)),this.viewPropertyListenerKey_=Object(b.listen)(t,f.a.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Object(b.listen)(t,O.default.CHANGE,this.handleViewPropertyChanged_,this)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(b.unlistenByKey),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[Object(b.listen)(t,f.a.PROPERTYCHANGE,this.render,this),Object(b.listen)(t,O.default.CHANGE,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.render=function(){void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,i=this.getSize(),n=this.getView(),o=Object(C.createEmpty)(),a=this.frameState_,s=null;if(void 0!==i&&Object(P.hasArea)(i)&&n&&n.isDef()){for(var l=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=this.getLayerGroup().getLayerStatesArray(),d={},p=0,f=h.length;p<f;++p)d[Object(r.getUid)(h[p].layer)]=h[p];e=n.getState(this.pixelRatio_),s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,extent:o,focus:this.focus_?this.focus_:e.center,index:this.frameIndex_++,layerStates:d,layerStatesArray:h,pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,skippedFeatureUids:this.skippedFeatureUids_,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:e,viewHints:l,wantedTiles:{}}}s&&(s.extent=Object(C.getForViewAndSize)(e.center,e.resolution,e.rotation,s.size,o)),this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),a&&(!this.previousExtent_||!Object(C.isEmpty)(this.previousExtent_)&&!Object(C.equals)(s.extent,this.previousExtent_))&&(this.dispatchEvent(new u.a(c.a.MOVESTART,this,a)),this.previousExtent_=Object(C.createOrUpdateEmpty)(this.previousExtent_)),this.previousExtent_&&!s.viewHints[v.default.ANIMATING]&&!s.viewHints[v.default.INTERACTING]&&!Object(C.equals)(s.extent,this.previousExtent_)&&(this.dispatchEvent(new u.a(c.a.MOVEEND,this,s)),Object(C.clone)(s.extent,this.previousExtent_))),this.dispatchEvent(new u.a(c.a.POSTRENDER,this,s)),setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(h.a.LAYERGROUP,t)},e.prototype.setSize=function(t){this.set(h.a.SIZE,t)},e.prototype.setTarget=function(t){this.set(h.a.TARGET,t)},e.prototype.setView=function(t){this.set(h.a.VIEW,t)},e.prototype.skipFeature=function(t){this.skippedFeatureUids_[Object(r.getUid)(t)]=!0,this.render()},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0)},e.prototype.unskipFeature=function(t){delete this.skippedFeatureUids_[Object(r.getUid)(t)],this.render()},e}(p.default);e.default=I},function(t,e,i){"use strict";i.r(e);var r=i(23),n=i(106),o=i(10),a=function(t){function e(e){t.call(this),this.highWaterMark=void 0!==e?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null,this.dispatchEvent(o.default.CLEAR)},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t,e){for(var i=this.oldest_;i;)t.call(e,i.value_,i.key_,this),i=i.newer},e.prototype.get=function(t){var e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?e.value_:(e===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(e.newer.older=e.older,e.older.newer=e.newer),e.newer=null,e.older=this.newest_,this.newest_.newer=e,this.newest_=e,e.value_)},e.prototype.remove=function(t){var e=this.entries_[t];return Object(r.a)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e},e.prototype.getValues=function(){var t,e=new Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},e.prototype.set=function(t,e){Object(r.a)(!(t in this.entries_),16);var i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e.prototype.prune=function(){for(;this.canExpireCache();)this.pop()},e}(n.a);e.default=a},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(25),o=i(9),a=i(43),s=function(t){function e(e){t.call(this),this.projection_=Object(o.get)(e.projection),this.attributions_=l(e.attributions),this.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,this.loading=!1,this.state_=void 0!==e.state?e.state:a.a.READY,this.wrapX_=void 0!==e.wrapX&&e.wrapX}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return Object(r.abstract)()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=l(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(n.default);function l(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}e.default=s},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(92),o=i(1),a=i(5),s=i(76),l=i(52),u=i(42),c=i(146),h=i(21),d=i(17),p=function(t){function e(e,i,r,n,o){t.call(this),this.context_=e,this.pixelRatio_=i,this.extent_=r,this.transform_=n,this.viewRotation_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=0,this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=0,this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Object(d.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawImages_=function(t,e,i,r){if(this.image_){var n=Object(l.c)(t,e,i,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var c=0,h=n.length;c<h;c+=2){var p=n[c]-this.imageAnchorX_,f=n[c+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var g=p+this.imageAnchorX_,y=f+this.imageAnchorY_;Object(d.b)(a,g,y,this.imageScale_,this.imageScale_,u,-g,-y),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,p,f,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,i,r){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var n=Object(l.c)(t,e,i,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=r){var s=n[e]+this.textOffsetX_,u=n[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var c=Object(d.b)(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,c)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,i,r,n){var o=this.context_,a=Object(l.c)(t,e,i,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;n&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return n&&o.closePath(),i},e.prototype.drawRings_=function(t,e,i,r){for(var n=0,o=i.length;n<o;++n)e=this.moveToLineTo_(t,e,i[n],r,!0);return e},e.prototype.drawCircle=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=Object(s.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],n=Math.sqrt(i*i+r*r),a=this.context_;a.beginPath(),a.arc(e[0],e[1],n,0,2*Math.PI),this.fillState_&&a.fill(),this.strokeState_&&a.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case a.default.POINT:this.drawPoint(t);break;case a.default.LINE_STRING:this.drawLineString(t);break;case a.default.POLYGON:this.drawPolygon(t);break;case a.default.MULTI_POINT:this.drawMultiPoint(t);break;case a.default.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case a.default.MULTI_POLYGON:this.drawMultiPolygon(t);break;case a.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case a.default.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Object(o.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),i=0,r=e.length;i<r;++i)this.drawGeometry(e[i])},e.prototype.drawPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawMultiPoint=function(t){var e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)},e.prototype.drawLineString=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var r=t.getFlatMidpoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiLineString=function(t){var e=t.getExtent();if(Object(o.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var i=this.context_,r=t.getFlatCoordinates(),n=0,a=t.getEnds(),s=t.getStride();i.beginPath();for(var l=0,u=a.length;l<u;++l)n=this.moveToLineTo_(r,n,a[l],s,!1);i.stroke()}if(""!==this.text_){var c=t.getFlatMidpoints();this.drawText_(c,0,c.length,2)}}},e.prototype.drawPolygon=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var i=t.getFlatInteriorPoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(Object(o.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,n=t.getEndss(),a=t.getStride();e.beginPath();for(var s=0,l=n.length;s<l;++s){var u=n[s];r=this.drawRings_(i,r,u,a)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var c=t.getFlatInteriorPoints();this.drawText_(c,0,c.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=e.lineCap=t.lineCap),u.CANVAS_LINE_DASH&&(Object(r.b)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset=t.lineDashOffset)),i.lineJoin!=t.lineJoin&&(i.lineJoin=e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,u.CANVAS_LINE_DASH&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:h.defaultTextAlign;i?(i.font!=t.font&&(i.font=e.font=t.font),i.textAlign!=r&&(i.textAlign=e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var i=t.getColor();this.fillState_={fillStyle:Object(n.asColorLike)(i||h.defaultFillStyle)}}else this.fillState_=null;if(e){var r=e.getColor(),o=e.getLineCap(),a=e.getLineDash(),s=e.getLineDashOffset(),l=e.getLineJoin(),u=e.getWidth(),c=e.getMiterLimit();this.strokeState_={lineCap:void 0!==o?o:h.defaultLineCap,lineDash:a||h.defaultLineDash,lineDashOffset:s||h.defaultLineDashOffset,lineJoin:void 0!==l?l:h.defaultLineJoin,lineWidth:this.pixelRatio_*(void 0!==u?u:h.defaultLineWidth),miterLimit:void 0!==c?c:h.defaultMiterLimit,strokeStyle:Object(n.asColorLike)(r||h.defaultStrokeStyle)}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),i=t.getImage(1),r=t.getOrigin(),n=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=n[1],this.image_=i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=n[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var i=e.getColor();this.textFillState_={fillStyle:Object(n.asColorLike)(i||h.defaultFillStyle)}}else this.textFillState_=null;var r=t.getStroke();if(r){var o=r.getColor(),a=r.getLineCap(),s=r.getLineDash(),l=r.getLineDashOffset(),u=r.getLineJoin(),c=r.getWidth(),d=r.getMiterLimit();this.textStrokeState_={lineCap:void 0!==a?a:h.defaultLineCap,lineDash:s||h.defaultLineDash,lineDashOffset:l||h.defaultLineDashOffset,lineJoin:void 0!==u?u:h.defaultLineJoin,lineWidth:void 0!==c?c:h.defaultLineWidth,miterLimit:void 0!==d?d:h.defaultMiterLimit,strokeStyle:Object(n.asColorLike)(o||h.defaultStrokeStyle)}}else this.textStrokeState_=null;var p=t.getFont(),f=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),v=t.getRotation(),m=t.getScale(),_=t.getText(),b=t.getTextAlign(),S=t.getTextBaseline();this.textState_={font:void 0!==p?p:h.defaultFont,textAlign:void 0!==b?b:h.defaultTextAlign,textBaseline:void 0!==S?S:h.defaultTextBaseline},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==g?this.pixelRatio_*g:0,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0!==v?v:0,this.textScale_=this.pixelRatio_*(void 0!==m?m:1)}else this.text_=""},e}(c.default);e.default=p},function(t,e,i){"use strict";i.r(e);var r=i(81),n=i(59),o=function(t){function e(e){var i=e||{},r=void 0!==i.projection?i.projection:"EPSG:3857",o=void 0!==i.tileGrid?i.tileGrid:Object(n.createXYZ)({extent:Object(n.extentFromProjection)(r),maxZoom:i.maxZoom,minZoom:i.minZoom,tileSize:i.tileSize});t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:i.opaque,projection:r,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:i.tileLoadFunction,tilePixelRatio:i.tilePixelRatio,tileUrlFunction:i.tileUrlFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,attributionsCollapsible:i.attributionsCollapsible})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.default);e.default=o},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i(4);function n(t,e,i,n){var o=document.createElement("script"),a="olc_"+Object(r.getUid)(e);function s(){delete window[a],o.parentNode.removeChild(o)}o.async=!0,o.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+a;var l=setTimeout(function(){s(),i&&i()},1e4);window[a]=function(t){clearTimeout(l),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(o)}},function(t,e,i){"use strict";e.a={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Util=void 0;var r=s(i(125)),n=s(i(8)),o=s(i(18)),a=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,n.default)(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Util"}return(0,o.default)(t,[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==(void 0===t?"undefined":(0,r.default)(t))&&null!==t){var i=t;if(t instanceof Array){i=[];for(var n=0,o=t.length;n<o;n++)i[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var a in i={},t)t.hasOwnProperty(a)&&(i[a]=this.clone(t[a]));return i}return t}},{key:"mergeItem",value:function(t,e,i,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(i)&&("object"!=(0,r.default)(t[i])||o[Object.prototype.toString.call(t[i])]?!n&&i in t||(t[i]=e[i]):this.merge(t[i],e[i],n))}},{key:"merge",value:function(t,e,i){for(var r in e)this.mergeItem(t,e,r,i);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var i,r=this._canvas,n=this._pixelCtx,o=this._width,a=this._height,s=this._offsetX,l=this._offsetY;t+s>o&&(o=t+s+100,r.width=o,i=!0),e+l>a&&(a=e+l+100,r.height=a,i=!0),t<-s&&(o+=s=100*Math.ceil(-t/100),r.width=o,i=!0),e<-l&&(a+=l=100*Math.ceil(-e/100),r.height=a,i=!0),i&&n.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}},{key:"inherits",value:function(t,e){var i=t.prototype;function r(){}for(var n in r.prototype=e.prototype,t.prototype=new r,i)t.prototype[n]=i[n];t.constructor=t}}]),t}();e.Util=l,a.Zondy.LevelRenderer.Tool.Util=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CatalogService=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{};return i.baseUrl="igs/rest/mrcs",(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i))}return(0,a.default)(e,t),e}(i(143).ServiceBase);e.CatalogService=u,s.Zondy.Catalog.CatalogService=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{};return i.baseUrl="igs/rest/mrms",(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i))}return(0,a.default)(e,t),e}(i(143).ServiceBase);e.MapServiceBase=u,s.Zondy.Service.MapServiceBase=u},function(t,e,i){"use strict";i.r(e);var r=i(31),n=i(41),o=function(t){function e(e){t.call(this,{handleEvent:a});var i=e||{};this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.default);function a(t){var e=!1;if(t.type==r.default.DBLCLICK){var i=t.originalEvent,o=t.map,a=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_,l=o.getView();Object(n.zoomByDelta)(l,s,a,this.duration_),t.preventDefault(),e=!0}return!e}e.default=o},function(t,e,i){"use strict";i.r(e);var r=i(148),n=i(4),o=i(29),a=i(19);function s(t){return t}var l=i(25),u=i(12),c=i(124),h=i(28),d=i(78),p=i(23),f=i(26),g=i(56),y=i(1),v=i(5),m=i(34),_=i(11),b=i(9),S=i(49);i.d(e,"createCenterConstraint",function(){return x}),i.d(e,"createResolutionConstraint",function(){return E}),i.d(e,"createRotationConstraint",function(){return P}),i.d(e,"isNoopAnimation",function(){return j});var O=0,C=function(t){function e(e){t.call(this);var i=Object(_.assign)({},e);this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.updateAnimations_=this.updateAnimations_.bind(this),this.projection_=Object(b.createProjection)(i.projection,"EPSG:3857"),this.applyOptions_(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyOptions_=function(t){var e={};e[d.a.CENTER]=void 0!==t.center?t.center:null;var i=E(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=i.minZoom;var r=x(t),n=i.constraint,o=P(t);this.constraints_={center:r,resolution:n,rotation:o},void 0!==t.resolution?e[d.a.RESOLUTION]=t.resolution:void 0!==t.zoom&&(e[d.a.RESOLUTION]=this.constrainResolution(this.maxResolution_,t.zoom-this.minZoom_),this.resolutions_&&(e[d.a.RESOLUTION]=Object(a.a)(Number(this.getResolution()||e[d.a.RESOLUTION]),this.minResolution_,this.maxResolution_))),e[d.a.ROTATION]=void 0!==t.rotation?t.rotation:0,this.setProperties(e),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=Object(_.assign)({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenter(),e.rotation=this.getRotation(),Object(_.assign)({},e,t)},e.prototype.animate=function(t){var e,i=arguments,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenter(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&T(e,!0))}for(var o=Date.now(),s=this.getCenter().slice(),l=this.getResolution(),u=this.getRotation(),c=[],d=0;d<r;++d){var p=i[d],f={start:o,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||g.inAndOut};if(p.center&&(f.sourceCenter=s,f.targetCenter=p.center,s=f.targetCenter),void 0!==p.zoom?(f.sourceResolution=l,f.targetResolution=this.constrainResolution(this.maxResolution_,p.zoom-this.minZoom_,0),l=f.targetResolution):p.resolution&&(f.sourceResolution=l,f.targetResolution=p.resolution,l=f.targetResolution),void 0!==p.rotation){f.sourceRotation=u;var y=Object(a.d)(p.rotation-u+Math.PI,2*Math.PI)-Math.PI;f.targetRotation=u+y,u=f.targetRotation}f.callback=e,j(f)?f.complete=!0:o+=f.duration,c.push(f)}this.animations_.push(c),this.setHint(h.default.ANIMATING,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[h.default.ANIMATING]>0},e.prototype.getInteracting=function(){return this.hints_[h.default.INTERACTING]>0},e.prototype.cancelAnimations=function(){this.setHint(h.default.ANIMATING,-this.hints_[h.default.ANIMATING]);for(var t=0,e=this.animations_.length;t<e;++t){var i=this.animations_[t];i[0].callback&&T(i[0].callback,!1)}this.animations_.length=0},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,i=this.animations_.length-1;i>=0;--i){for(var r=this.animations_[i],n=!0,o=0,s=r.length;o<s;++o){var l=r[o];if(!l.complete){var u=t-l.start,c=l.duration>0?u/l.duration:1;c>=1?(l.complete=!0,c=1):n=!1;var p=l.easing(c);if(l.sourceCenter){var f=l.sourceCenter[0],g=l.sourceCenter[1],y=f+p*(l.targetCenter[0]-f),v=g+p*(l.targetCenter[1]-g);this.set(d.a.CENTER,[y,v])}if(l.sourceResolution&&l.targetResolution){var m=1===p?l.targetResolution:l.sourceResolution+p*(l.targetResolution-l.sourceResolution);l.anchor&&this.set(d.a.CENTER,this.calculateCenterZoom(m,l.anchor)),this.set(d.a.RESOLUTION,m)}if(void 0!==l.sourceRotation&&void 0!==l.targetRotation){var _=1===p?Object(a.d)(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+p*(l.targetRotation-l.sourceRotation);l.anchor&&this.set(d.a.CENTER,this.calculateCenterRotate(_,l.anchor)),this.set(d.a.ROTATION,_)}if(e=!0,!l.complete)break}}if(n){this.animations_[i]=null,this.setHint(h.default.ANIMATING,-1);var b=r[0].callback;b&&T(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_))}},e.prototype.calculateCenterRotate=function(t,e){var i,r=this.getCenter();return void 0!==r&&(i=[r[0]-e[0],r[1]-e[1]],Object(f.rotate)(i,t-this.getRotation()),Object(f.add)(i,e)),i},e.prototype.calculateCenterZoom=function(t,e){var i,r=this.getCenter(),n=this.getResolution();return void 0!==r&&void 0!==n&&(i=[e[0]-t*(e[0]-r[0])/n,e[1]-t*(e[1]-r[1])/n]),i},e.prototype.getSizeFromViewport_=function(){var t=[100,100],e='.ol-viewport[data-view="'+Object(n.getUid)(this)+'"]',i=document.querySelector(e);if(i){var r=getComputedStyle(i);t[0]=parseInt(r.width,10),t[1]=parseInt(r.height,10)}return t},e.prototype.constrainCenter=function(t){return this.constraints_.center(t)},e.prototype.constrainResolution=function(t,e,i){var r=e||0,n=i||0;return this.constraints_.resolution(t,r,n)},e.prototype.constrainRotation=function(t,e){var i=e||0;return this.constraints_.rotation(t,i)},e.prototype.getCenter=function(){return this.get(d.a.CENTER)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){var e=t||this.getSizeFromViewport_(),i=this.getCenter();Object(p.a)(i,1);var r=this.getResolution();Object(p.a)(void 0!==r,2);var n=this.getRotation();return Object(p.a)(void 0!==n,3),Object(y.getForViewAndSize)(i,r,n,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(d.a.RESOLUTION)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){var i=e||this.getSizeFromViewport_(),r=Object(y.getWidth)(t)/i[0],n=Object(y.getHeight)(t)/i[1];return Math.max(r,n)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return i/Math.pow(e,t*n)}},e.prototype.getRotation=function(){return this.get(d.a.ROTATION)},e.prototype.getValueForResolutionFunction=function(t){var e=t||2,i=this.maxResolution_,r=this.minResolution_,n=Math.log(i/r)/Math.log(e);return function(t){return Math.log(i/t)/Math.log(e)/n}},e.prototype.getState=function(t){var e=this.getCenter(),i=this.getProjection(),r=this.getResolution(),n=r/t,o=this.getRotation();return{center:[Math.round(e[0]/n)*n,Math.round(e[1]/n)*n],projection:void 0!==i?i:null,resolution:r,rotation:o,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,i,r=this.minZoom_||0;if(this.resolutions_){var n=Object(u.h)(this.resolutions_,t,1);r=n,e=this.resolutions_[n],i=n==this.resolutions_.length-1?2:e/this.resolutions_[n+1]}else e=this.maxResolution_,i=this.zoomFactor_;return r+Math.log(e/t)/Math.log(i)},e.prototype.getResolutionForZoom=function(t){return this.constrainResolution(this.maxResolution_,t-this.minZoom_,0)},e.prototype.fit=function(t,e){var i,r=e||{},n=r.size;n||(n=this.getSizeFromViewport_()),Object(p.a)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)?(Object(p.a)(!Object(y.isEmpty)(t),25),i=Object(m.fromExtent)(t)):t.getType()===v.default.CIRCLE?(t=t.getExtent(),(i=Object(m.fromExtent)(t)).rotate(this.getRotation(),Object(y.getCenter)(t))):i=t;var a,s=void 0!==r.padding?r.padding:[0,0,0,0],l=void 0===r.constrainResolution||r.constrainResolution,u=void 0!==r.nearest&&r.nearest;a=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.constrainResolution(this.maxResolution_,r.maxZoom-this.minZoom_,0):0;for(var c=i.getFlatCoordinates(),h=this.getRotation(),d=Math.cos(-h),f=Math.sin(-h),g=1/0,_=1/0,b=-1/0,S=-1/0,O=i.getStride(),C=0,x=c.length;C<x;C+=O){var E=c[C]*d-c[C+1]*f,P=c[C]*f+c[C+1]*d;g=Math.min(g,E),_=Math.min(_,P),b=Math.max(b,E),S=Math.max(S,P)}var j=this.getResolutionForExtent([g,_,b,S],[n[0]-s[1]-s[3],n[1]-s[0]-s[2]]);if(j=isNaN(j)?a:Math.max(j,a),l){var R=this.constrainResolution(j,0,0);!u&&R<j&&(R=this.constrainResolution(R,-1,0)),j=R}f=-f;var I=(g+b)/2,L=(_+S)/2,w=[(I+=(s[1]-s[3])/2*j)*d-(L+=(s[0]-s[2])/2*j)*f,L*d+I*f],A=r.callback?r.callback:o.c;void 0!==r.duration?this.animate({resolution:j,center:w,duration:r.duration,easing:r.easing},A):(this.setResolution(j),this.setCenter(w),T(A,!0))},e.prototype.centerOn=function(t,e,i){var r=this.getRotation(),n=Math.cos(-r),o=Math.sin(-r),a=t[0]*n-t[1]*o,s=t[1]*n+t[0]*o,l=this.getResolution(),u=(a+=(e[0]/2-i[0])*l)*n-(s+=(i[1]-e[1]/2)*l)*(o=-o),c=s*n+a*o;this.setCenter([u,c])},e.prototype.isDef=function(){return!!this.getCenter()&&void 0!==this.getResolution()},e.prototype.rotate=function(t,e){if(void 0!==e){var i=this.calculateCenterRotate(t,e);this.setCenter(i)}this.setRotation(t)},e.prototype.setCenter=function(t){this.set(d.a.CENTER,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.set(d.a.RESOLUTION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setRotation=function(t){this.set(d.a.ROTATION,t),this.getAnimating()&&this.cancelAnimations()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e}(l.default);function T(t,e){setTimeout(function(){t(e)},0)}function x(t){return void 0!==t.extent?function(t){return function(e){return e?[Object(a.a)(e[0],t[0],t[2]),Object(a.a)(e[1],t[1],t[3])]:void 0}}(t.extent):s}function E(t){var e,i,n,o=void 0!==t.minZoom?t.minZoom:O,s=void 0!==t.maxZoom?t.maxZoom:28,l=void 0!==t.zoomFactor?t.zoomFactor:2;if(void 0!==t.resolutions){var c=t.resolutions;i=c[o],n=void 0!==c[s]?c[s]:c[c.length-1],e=function(t){return function(e,i,r){if(void 0!==e){var n=Object(u.h)(t,e,r);n=Object(a.a)(n+i,0,t.length-1);var o=Math.floor(n);if(n!=o&&o<t.length-1){var s=t[o]/t[o+1];return t[o]/Math.pow(s,n-o)}return t[o]}}}(c)}else{var h=Object(b.createProjection)(t.projection,"EPSG:3857"),d=h.getExtent(),p=(d?Math.max(Object(y.getWidth)(d),Object(y.getHeight)(d)):360*b.METERS_PER_UNIT[S.default.DEGREES]/h.getMetersPerUnit())/r.b/Math.pow(2,O),f=p/Math.pow(2,28-O);void 0!==(i=t.maxResolution)?o=0:i=p/Math.pow(l,o),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,s):p/Math.pow(l,s):f),s=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,s-o),e=function(t,e,i){return function(r,n,o){if(void 0!==r){var a=-o/2+.5,s=Math.floor(Math.log(e/r)/Math.log(t)+a),l=Math.max(s+n,0);return void 0!==i&&(l=Math.min(l,i)),e/Math.pow(t,l)}}}(l,i,s-o)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}}function P(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?Object(c.b)():!1===e?c.d:"number"==typeof e?Object(c.a)(e):c.d}return c.c}function j(t){return!(t.sourceCenter&&t.targetCenter&&!Object(f.equals)(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}e.default=C},function(t,e,i){"use strict";var r=i(4),n=function(t){function e(e){var i="Assertion failed. See https://openlayers.org/en/"+("latest"===r.VERSION?r.VERSION:"v"+r.VERSION.split("-")[0])+"/doc/errors/#"+e+" for details.";t.call(this,i),this.code=e,this.name="AssertionError",this.message=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.a=n},function(t,e,i){"use strict";var r=i(16),n=i(3),o=i(10),a=function(t){function e(e,i){t.call(this,function(t){return e.apply(null,t)},function(t){return t[0].getKey()}),this.tileChangeCallback_=i,this.tilesLoading_=0,this.tilesLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enqueue=function(e){var i=t.prototype.enqueue.call(this,e);if(i){var r=e[0];Object(n.listen)(r,o.default.CHANGE,this.handleTileChange,this)}return i},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,i=e.getState();if(i===r.default.LOADED||i===r.default.ERROR||i===r.default.EMPTY||i===r.default.ABORT){Object(n.unlisten)(e,o.default.CHANGE,this.handleTileChange,this);var a=e.getKey();a in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[a],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var i,n,o,a=0,s=!1;this.tilesLoading_<t&&a<e&&this.getCount()>0;)o=(n=this.dequeue()[0]).getKey(),(i=n.getState())===r.default.ABORT?s=!0:i!==r.default.IDLE||o in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++a,n.load());0===a&&s&&this.tileChangeCallback_()},e}(i(69).b);e.a=a},function(t,e,i){"use strict";var r=i(173),n=i(46),o=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expireCache=function(t){for(;this.canExpireCache();){var e=this.peekLast(),i=e.tileCoord[0].toString();if(i in t&&t[i].contains(e.tileCoord))break;this.pop().dispose()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=this.peekFirstKey(),e=Object(n.fromKey)(t)[0];this.forEach(function(t){t.tileCoord[0]!==e&&(this.remove(Object(n.getKey)(t.tileCoord)),t.dispose())},this)}},e}(r.default);e.a=o},function(t,e,i){"use strict";i.r(e),i.d(e,"shared",function(){return a});var r=i(55),n=function(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32};function o(t,e,i){return e+":"+t+":"+(i?Object(r.asString)(i):"null")}n.prototype.clear=function(){this.cache_={},this.cacheSize_=0},n.prototype.expire=function(){if(this.cacheSize_>this.maxCacheSize_){var t=0;for(var e in this.cache_){var i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},n.prototype.get=function(t,e,i){var r=o(t,e,i);return r in this.cache_?this.cache_[r]:null},n.prototype.set=function(t,e,i,r){var n=o(t,e,i);this.cache_[n]=r,++this.cacheSize_},n.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e.default=n;var a=new n},function(t,e,i){"use strict";i.r(e);var r=i(85),n=i(157),o=i(50),a=i(28),s=i(12),l=i(1),u=i(257),c=i(11),h=i(228),d=i(260),p=i(17),f=function(t){function e(i){if(t.call(this,i),this.image_=null,this.imageTransform_=Object(p.c)(),this.skippedFeatures_=[],this.vectorRenderer_=null,i.getType()===o.a.VECTOR)for(var r=0,n=h.b.length;r<n;++r){var a=h.b[r];if(a!==e&&a.handles(i)){this.vectorRenderer_=new a(i);break}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.vectorRenderer_&&this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.getImageTransform=function(){return this.imageTransform_},e.prototype.prepareFrame=function(t,e){var i,o=t.pixelRatio,u=t.size,h=t.viewState,d=h.center,f=h.resolution,g=this.getLayer().getSource(),y=t.viewHints,v=this.vectorRenderer_,m=t.extent;if(v||void 0===e.extent||(m=Object(l.getIntersection)(m,e.extent)),!y[a.default.ANIMATING]&&!y[a.default.INTERACTING]&&!Object(l.isEmpty)(m)){var _=h.projection;if(!r.a){var b=g.getProjection();b&&(_=b)}var S=this.skippedFeatures_;if(v){var O=v.context,C=Object(c.assign)({},t,{size:[Object(l.getWidth)(m)/f,Object(l.getHeight)(m)/f],viewState:Object(c.assign)({},t.viewState,{rotation:0})}),T=Object.keys(C.skippedFeatureUids).sort();i=new n.a(m,f,o,O.canvas,function(t){!v.prepareFrame(C,e)||!v.replayGroupChanged&&Object(s.b)(S,T)||(O.canvas.width=C.size[0]*o,O.canvas.height=C.size[1]*o,v.compose(O,C,e),S=T,t())})}else i=g.getImage(m,f,o,_);i&&this.loadImage(i)&&(this.image_=i,this.skippedFeatures_=S)}if(this.image_){var x=(i=this.image_).getExtent(),E=i.getResolution(),P=i.getPixelRatio(),j=o*E/(f*P),R=Object(p.b)(this.imageTransform_,o*u[0]/2,o*u[1]/2,j,j,0,P*(x[0]-d[0])/E,P*(d[1]-x[3])/E);Object(p.b)(this.coordinateToCanvasPixelTransform,o*u[0]/2-R[4],o*u[1]/2-R[5],o/f,-o/f,0,-d[0],-d[1]),this.renderedResolution=E*o/P}return!!this.image_},e.prototype.forEachFeatureAtCoordinate=function(e,i,r,n){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,i,r,n):t.prototype.forEachFeatureAtCoordinate.call(this,e,i,r,n)},e}(d.a);f.handles=function(t){return t.getType()===o.a.IMAGE||t.getType()===o.a.VECTOR&&t.getRenderMode()===u.a.IMAGE},f.create=function(t,e){return new f(e)},e.default=f},function(t,e,i){"use strict";var r=i(4),n=i(33),o=i(108),a=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return o.a.JSON},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(s(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(s(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return Object(r.abstract)()},e.prototype.readFeaturesFromObject=function(t,e){return Object(r.abstract)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(s(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return Object(r.abstract)()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(s(t))},e.prototype.readProjectionFromObject=function(t){return Object(r.abstract)()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return Object(r.abstract)()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return Object(r.abstract)()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return Object(r.abstract)()},e}(n.default);function s(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}e.a=a},function(t,e,i){"use strict";i.r(e);var r=i(1),n=i(33),o=i(44),a=i(2),s=i(11),l=i(9),u=i(0),c=o.GMLNS+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",h={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},d=function(t){function e(e){var i=e||{};t.call(this,i),this.FEATURE_COLLECTION_PARSERS[o.GMLNS].featureMember=Object(u.makeArrayPusher)(this.readFeaturesInternal),this.schemaLocation=i.schemaLocation?i.schemaLocation:c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFlatCoordinates_=function(t,e){var i=Object(u.getAllTextContent)(t,!1).replace(/^\s*|\s*$/g,""),r=e[0].srsName,n="enu";if(r){var o=Object(l.get)(r);o&&(n=o.getAxisOrientation())}for(var a=i.trim().split(/\s+/),s=[],c=0,h=a.length;c<h;c++){var d=a[c].split(/,+/),p=parseFloat(d[0]),f=parseFloat(d[1]),g=3===d.length?parseFloat(d[2]):0;"en"===n.substr(0,2)?s.push(p,f,g):s.push(f,p,g)}return s},e.prototype.readBox_=function(t,e){var i=Object(u.pushParseAndPop)([null],this.BOX_PARSERS_,t,e,this);return Object(r.createOrUpdate)(i[1][0],i[1][1],i[1][3],i[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var i=Object(u.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);i&&e[e.length-1].push(i)},e.prototype.outerBoundaryIsParser_=function(t,e){var i=Object(u.pushParseAndPop)(void 0,this.RING_PARSERS,t,e,this);i&&(e[e.length-1][0]=i)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,i){var r,n=e[e.length-1],o=n.multiSurface,a=n.surface,s=n.multiCurve;return Array.isArray(t)?r="Envelope":"MultiPolygon"===(r=t.getType())&&!0===o?r="MultiSurface":"Polygon"===r&&!0===a?r="Surface":"MultiLineString"===r&&!0===s&&(r="MultiCurve"),Object(u.createElementNS)("http://www.opengis.net/gml",r)},e.prototype.writeFeatureElement=function(t,e,i){var r=e.getId();r&&t.setAttribute("fid",r);var n=i[i.length-1],o=n.featureNS,l=e.getGeometryName();n.serializers||(n.serializers={},n.serializers[o]={});var c=e.getProperties(),h=[],d=[];for(var p in c){var f=c[p];null!==f&&(h.push(p),d.push(f),p==l||"function"==typeof f.getSimplifiedGeometry?p in n.serializers[o]||(n.serializers[o][p]=Object(u.makeChildAppender)(this.writeGeometryElement,this)):p in n.serializers[o]||(n.serializers[o][p]=Object(u.makeChildAppender)(a.n)))}var g=Object(s.assign)({},n);g.node=t,Object(u.pushSerializeAndPop)(g,n.serializers,Object(u.makeSimpleNodeFactory)(void 0,o),d,i,h)},e.prototype.writeCurveOrLineString_=function(t,e,i){var r=i[i.length-1].srsName;if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)}else if("Curve"===t.nodeName){var o=Object(u.createElementNS)(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,i)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeCurveOrLineString_(r,e,i))},e.prototype.writeMultiCurveOrLineString_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();Object(u.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeGeometryElement=function(t,e,i){var r,o=i[i.length-1],a=Object(s.assign)({},o);a.node=t,r=Array.isArray(e)?o.dataProjection?Object(l.transformExtent)(e,o.featureProjection,o.dataProjection):e:Object(n.transformWithOptions)(e,!0,o),Object(u.pushSerializeAndPop)(a,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[r],i,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=Object(u.createElementNS)(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,i){for(var r=i[i.length-1],n=r.hasZ,o=r.srsName,s=e.getCoordinates(),l=s.length,u=new Array(l),c=0;c<l;++c){var h=s[c];u[c]=this.getCoords_(h,o,n)}Object(a.n)(t,u.join(" "))},e.prototype.writeCurveSegments_=function(t,e,i){var r=Object(u.createElementNS)(t.namespaceURI,"LineStringSegment");t.appendChild(r),this.writeCurveOrLineString_(r,e,i)},e.prototype.writeSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();Object(u.pushSerializeAndPop)({node:t,hasZ:n,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,i,void 0,this)}else if("Surface"===t.nodeName){var s=Object(u.createElementNS)(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,i)}},e.prototype.RING_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1],n=r.node,o=r.exteriorWritten;return void 0===o&&(r.exteriorWritten=!0),Object(u.createElementNS)(n.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,i){var r=Object(u.createElementNS)(t.namespaceURI,"PolygonPatch");t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i)},e.prototype.writeRing_=function(t,e,i){var r=Object(u.createElementNS)(t.namespaceURI,"LinearRing");t.appendChild(r),this.writeLinearRing_(r,e,i)},e.prototype.getCoords_=function(t,e,i){var r="enu";e&&(r=Object(l.get)(e).getAxisOrientation());var n="en"===r.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return i&&(n+=","+(t[2]||0)),n},e.prototype.writePoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s);var l=e.getCoordinates(),u=this.getCoords_(l,o,n);Object(a.n)(s,u)},e.prototype.writeMultiPoint_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();Object(u.pushSerializeAndPop)({node:t,hasZ:n,srsName:o},this.POINTMEMBER_SERIALIZERS_,Object(u.makeSimpleNodeFactory)("pointMember"),a,i,void 0,this)},e.prototype.writePointMember_=function(t,e,i){var r=Object(u.createElementNS)(t.namespaceURI,"Point");t.appendChild(r),this.writePoint_(r,e,i)},e.prototype.writeLinearRing_=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(n),this.writeCoordinates_(n,e,i)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,i){var r=i[i.length-1],n=r.hasZ,o=r.srsName,a=r.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();Object(u.pushSerializeAndPop)({node:t,hasZ:n,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,i,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,i){var r=this.GEOMETRY_NODE_FACTORY_(e,i);r&&(t.appendChild(r),this.writeSurfaceOrPolygon_(r,e,i))},e.prototype.writeEnvelope=function(t,e,i){var r=i[i.length-1].srsName;r&&t.setAttribute("srsName",r);var n=[e[0]+" "+e[1],e[2]+" "+e[3]];Object(u.pushSerializeAndPop)({node:t},this.ENVELOPE_SERIALIZERS_,u.OBJECT_PROPERTY_NODE_FACTORY,n,i,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,i){var r=e[e.length-1].node;return Object(u.createElementNS)("http://www.opengis.net/gml",h[r.nodeName])},e}(o.default);d.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Object(u.makeReplacer)(d.prototype.readFlatCoordinates_)}},d.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:d.prototype.innerBoundaryIsParser_,outerBoundaryIs:d.prototype.outerBoundaryIsParser_}},d.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Object(u.makeArrayPusher)(d.prototype.readFlatCoordinates_)}},d.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Object(u.makeReplacer)(o.default.prototype.readPoint),MultiPoint:Object(u.makeReplacer)(o.default.prototype.readMultiPoint),LineString:Object(u.makeReplacer)(o.default.prototype.readLineString),MultiLineString:Object(u.makeReplacer)(o.default.prototype.readMultiLineString),LinearRing:Object(u.makeReplacer)(o.default.prototype.readLinearRing),Polygon:Object(u.makeReplacer)(o.default.prototype.readPolygon),MultiPolygon:Object(u.makeReplacer)(o.default.prototype.readMultiPolygon),Box:Object(u.makeReplacer)(d.prototype.readBox_)}},d.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Object(u.makeChildAppender)(d.prototype.writeCurveOrLineString_),MultiCurve:Object(u.makeChildAppender)(d.prototype.writeMultiCurveOrLineString_),Point:Object(u.makeChildAppender)(d.prototype.writePoint_),MultiPoint:Object(u.makeChildAppender)(d.prototype.writeMultiPoint_),LineString:Object(u.makeChildAppender)(d.prototype.writeCurveOrLineString_),MultiLineString:Object(u.makeChildAppender)(d.prototype.writeMultiCurveOrLineString_),LinearRing:Object(u.makeChildAppender)(d.prototype.writeLinearRing_),Polygon:Object(u.makeChildAppender)(d.prototype.writeSurfaceOrPolygon_),MultiPolygon:Object(u.makeChildAppender)(d.prototype.writeMultiSurfaceOrPolygon_),Surface:Object(u.makeChildAppender)(d.prototype.writeSurfaceOrPolygon_),MultiSurface:Object(u.makeChildAppender)(d.prototype.writeMultiSurfaceOrPolygon_),Envelope:Object(u.makeChildAppender)(d.prototype.writeEnvelope)}},d.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Object(u.makeChildAppender)(d.prototype.writeLineStringOrCurveMember_),curveMember:Object(u.makeChildAppender)(d.prototype.writeLineStringOrCurveMember_)}},d.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Object(u.makeChildAppender)(d.prototype.writeRing_),innerBoundaryIs:Object(u.makeChildAppender)(d.prototype.writeRing_)}},d.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Object(u.makeChildAppender)(d.prototype.writePointMember_)}},d.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Object(u.makeChildAppender)(d.prototype.writeSurfaceOrPolygonMember_),polygonMember:Object(u.makeChildAppender)(d.prototype.writeSurfaceOrPolygonMember_)}},d.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Object(u.makeChildAppender)(a.n),upperCorner:Object(u.makeChildAppender)(a.n)}},e.default=d},function(t,e,i){"use strict";var r=i(4),n=i(33),o=i(108),a=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return o.a.TEXT},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(s(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return Object(r.abstract)()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(s(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return Object(r.abstract)()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(s(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return Object(r.abstract)()},e.prototype.readProjection=function(t){return this.readProjectionFromText(s(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return Object(r.abstract)()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return Object(r.abstract)()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return Object(r.abstract)()},e}(n.default);function s(t){return"string"==typeof t?t:""}e.a=a},function(t,e,i){"use strict";var r=function(t){function e(e,i,r,n){t.call(this,e),this.geometryName=i||"the_geom",this.geometry=r,this.srsName=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(135).a);e.a=r},function(t,e,i){"use strict";var r=i(0),n=function(){};n.prototype.read=function(t){if(t){if("string"==typeof t){var e=Object(r.parse)(t);return this.readFromDocument(e)}return Object(r.isDocument)(t)?this.readFromDocument(t):this.readFromNode(t)}return null},n.prototype.readFromDocument=function(t){},n.prototype.readFromNode=function(t){},e.a=n},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(27),o=i(23),a=i(55),s=i(3),l=i(10),u=i(97),c=i(24),h=i(106),d=i(187),p=function(t){function e(e,i,r,n,o,a){t.call(this),this.hitDetectionImage_=null,this.image_=e||new Image,null!==n&&(this.image_.crossOrigin=n),this.canvas_=a?document.createElement("canvas"):null,this.color_=a,this.imageListenerKeys_=null,this.imageState_=o,this.size_=r,this.src_=i,this.tainted_}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isTainted_=function(){if(void 0===this.tainted_&&this.imageState_===n.a.LOADED){this.tainted_=!1;var t=Object(c.createCanvasContext2D)(1,1);try{t.drawImage(this.image_,0,0),t.getImageData(0,0,1,1)}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(l.default.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=n.a.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=n.a.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],r=Object(c.createCanvasContext2D)(e,i);r.fillRect(0,0,e,i),this.hitDetectionImage_=r.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==n.a.IDLE){this.imageState_=n.a.LOADING,this.imageListenerKeys_=[Object(s.listenOnce)(this.image_,l.default.ERROR,this.handleImageError_,this),Object(s.listenOnce)(this.image_,l.default.LOAD,this.handleImageLoad_,this)];try{this.image_.src=this.src_}catch(t){this.handleImageError_()}}},e.prototype.replaceColor_=function(){if(this.color_&&!this.isTainted_()){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");t.drawImage(this.image_,0,0);for(var e=t.getImageData(0,0,this.image_.width,this.image_.height),i=e.data,r=this.color_[0]/255,n=this.color_[1]/255,o=this.color_[2]/255,a=0,s=i.length;a<s;a+=4)i[a]*=r,i[a+1]*=n,i[a+2]*=o;t.putImageData(e,0,0)}},e.prototype.unlistenImage_=function(){this.imageListenerKeys_.forEach(s.unlistenByKey),this.imageListenerKeys_=null},e}(h.a),f=i(79),g=function(t){function e(e){var i=e||{},s=void 0!==i.opacity?i.opacity:1,l=void 0!==i.rotation?i.rotation:0,c=void 0!==i.scale?i.scale:1,h=void 0!==i.rotateWithView&&i.rotateWithView;t.call(this,{opacity:s,rotation:l,scale:c,rotateWithView:h}),this.anchor_=void 0!==i.anchor?i.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==i.anchorOrigin?i.anchorOrigin:f.a.TOP_LEFT,this.anchorXUnits_=void 0!==i.anchorXUnits?i.anchorXUnits:u.a.FRACTION,this.anchorYUnits_=void 0!==i.anchorYUnits?i.anchorYUnits:u.a.FRACTION,this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null;var g=void 0!==i.img?i.img:null,y=void 0!==i.imgSize?i.imgSize:null,v=i.src;Object(o.a)(!(void 0!==v&&g),4),Object(o.a)(!g||g&&y,5),void 0!==v&&0!==v.length||!g||(v=g.src||Object(r.getUid)(g)),Object(o.a)(void 0!==v&&v.length>0,6);var m=void 0!==i.src?n.a.IDLE:n.a.LOADED;this.color_=void 0!==i.color?Object(a.asArray)(i.color):null,this.iconImage_=function(t,e,i,r,n,o){var a=d.shared.get(e,r,o);return a||(a=new p(t,e,i,r,n,o),d.shared.set(e,r,o,a)),a}(g,v,y,this.crossOrigin_,m,this.color_),this.offset_=void 0!==i.offset?i.offset:[0,0],this.offsetOrigin_=void 0!==i.offsetOrigin?i.offsetOrigin:f.a.TOP_LEFT,this.origin_=null,this.size_=void 0!==i.size?i.size:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==u.a.FRACTION||this.anchorYUnits_==u.a.FRACTION){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==u.a.FRACTION&&(t[0]*=e[0]),this.anchorYUnits_==u.a.FRACTION&&(t[1]*=e[1])}if(this.anchorOrigin_!=f.a.TOP_LEFT){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=f.a.TOP_RIGHT&&this.anchorOrigin_!=f.a.BOTTOM_RIGHT||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=f.a.BOTTOM_LEFT&&this.anchorOrigin_!=f.a.BOTTOM_RIGHT||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_;if(this.offsetOrigin_!=f.a.TOP_LEFT){var e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),this.offsetOrigin_!=f.a.TOP_RIGHT&&this.offsetOrigin_!=f.a.BOTTOM_RIGHT||(t[0]=i[0]-e[0]-t[0]),this.offsetOrigin_!=f.a.BOTTOM_LEFT&&this.offsetOrigin_!=f.a.BOTTOM_RIGHT||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t,e){return Object(s.listen)(this.iconImage_,l.default.CHANGE,t,e)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t,e){Object(s.unlisten)(this.iconImage_,l.default.CHANGE,t,e)},e}(i(224).default);e.default=g},function(t,e,i){var r=i(232);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,n){return t.call(e,i,r,n)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e){t.exports=!0},function(t,e){t.exports={}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Eventful=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this._handlers={},this.CLASS_NAME="Zondy.LevelRenderer.Eventful"}return(0,n.default)(t,[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,i){var r=this._handlers;return e&&t?(r[t]||(r[t]=[]),r[t].push({h:e,one:!0,ctx:i||this}),this):this}},{key:"bind",value:function(t,e,i){var r=this._handlers;return e&&t?(r[t]||(r[t]=[]),r[t].push({h:e,one:!1,ctx:i||this}),this):this}},{key:"unbind",value:function(t,e){var i=this._handlers;if(!t)return this._handlers={},this;if(e){if(i[t]){for(var r=[],n=0,o=i[t].length;n<o;n++)i[t][n].h!==e&&r.push(i[t][n]);i[t]=r}i[t]&&0===i[t].length&&delete i[t]}else delete i[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,i=e.length;i>3&&(e=Array.prototype.slice.call(e,1));for(var r=this._handlers[t],n=r.length,o=0;o<n;){switch(i){case 1:r[o].h.call(r[o].ctx);break;case 2:r[o].h.call(r[o].ctx,e[1]);break;case 3:r[o].h.call(r[o].ctx,e[1],e[2]);break;default:r[o].h.apply(r[o].ctx,e)}r[o].one?(r.splice(o,1),n--):o++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,i=e.length;i>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var r=e[e.length-1],n=this._handlers[t],o=n.length,a=0;a<o;){switch(i){case 1:n[a].h.call(r);break;case 2:n[a].h.call(r,e[1]);break;case 3:n[a].h.call(r,e[1],e[2]);break;default:n[a].h.apply(r,e)}n[a].one?(n.splice(a,1),o--):a++}}return this}}]),t}();e.Eventful=s,o.Zondy.LevelRenderer.Eventful=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeVector=void 0;var r=g(i(13)),n=g(i(8)),o=g(i(18)),a=g(i(14)),s=g(i(40)),l=g(i(15)),u=i(6),c=i(22),h=i(202),d=i(304),p=i(303),f=i(244);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,o,s,l){(0,n.default)(this,e);var u=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));if(!t.fGeom)return(0,a.default)(u);switch(u.dataBounds=t.bound,u.nodesClipPixel=2,u.isHoverAble=!0,u.isMultiHover=!0,u.isClickAble=!0,u.highlightStyle=null,u.shapeOptions={},u.style=o||{},u.CLASS_NAME="Zondy.Theme.ThemeVector",u.style=o||{},s&&(0,c.copyAttributesWithClip)(u,s,["shapeOptions","dataBounds"]),l&&(0,c.copyAttributesWithClip)(u.shapeOptions,l),t.fGeom,u.lonlat=[(u.dataBounds.xmin+u.dataBounds.xmax)/2,(u.dataBounds.ymin+u.dataBounds.ymax)/2],u.location=u.getLocalXY(u.lonlat),t.ftype){case 0:break;case 1:u.pointsToTF(t.fGeom.PntGeom);break;case 2:u.linesToTF(t.fGeom.LinGeom);break;case 3:u.regsToTF(t.fGeom.RegGeom)}return u}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"pointsToTF",value:function(t){if(!(null==t||t.length<=0)){t.components;for(var e=[],i=[],r=this.location,n=[],o=this.nodesClipPixel,a=0;a<t.length;a++){var s=t[a];if(i=[],e=this.getLocalXY([s.Dot.x,s.Dot.y]),i[0]=e[0]-r[0],i[1]=e[1]-r[1],n.length>0){var l=n[n.length-1];if(Math.abs(l[0]-i[0])<=o&&Math.abs(l[1]-i[1])<=o)continue}n.push(i);var u=new Object;u.r=6,(u=(0,c.copyAttributesWithClip)(u,this.style)).x=i[0],u.y=i[1];var h=new p.SmicPoint({style:u,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(h.highlightStyle=this.highlightStyle),h.refOriginalPosition=r,h.refDataID=this.data.FID,h.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,c.copyAttributesWithClip)(h,this.shapeOptions),this.shapes.push(h)}}}},{key:"linesToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.lineToTF(t[e])}},{key:"lineToTF",value:function(t){var e=[];if(null!=t.Line&&null!=t.Line.Arcs&&t.Line.Arcs.length>0)for(var i=t.Line.Arcs,r=0;r<i.length;r++)for(var n=i[r].Dots,o=0;o<n.length;o++)e.push([n[o].x,n[o].y]);if(!(e.length<=0)){var a=[],s=[],l=this.location,u=[],h=this.nodesClipPixel;for(r=0;r<e.length;r++){var p=e[r];if(s=[],a=this.getLocalXY(p),s[0]=a[0]-l[0],s[1]=a[1]-l[1],u.length>0){var f=u[u.length-1];if(Math.abs(f[0]-s[0])<=h&&Math.abs(f[1]-s[1])<=h)continue}u.push(s)}if(u.length<2)return null;var g=new Object;(g=(0,c.copyAttributesWithClip)(g,this.style,["pointList"])).pointList=u;var y=new d.SmicBrokenLine({style:g,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(y.highlightStyle=this.highlightStyle),y.refOriginalPosition=this.location,y.refDataID=this.data.FID,y.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&(0,c.copyAttributesWithClip)(y,this.shapeOptions),this.shapes.push(y)}}},{key:"regsToTF",value:function(t){if(!(null==t||t.length<=0))for(var e=0;e<t.length;e++)this.regToTF(t[e])}},{key:"regToTF",value:function(t){var e=t.Rings;if(!(null==e||e.length<=0)){for(var i=[],r=[],n=this.location,o=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<e.length;u++){if(0===u){if(o=[],null!=e[u]&&null!=e[u].Arcs&&e[u].Arcs.length>0)for(var h=e[u].Arcs,d=0;d<h.length;d++)for(var p=h[d].Dots,g=0;g<p.length;g++){if(r=[],i=this.getLocalXY([p[g].x,p[g].y]),r[0]=i[0]-n[0],r[1]=i[1]-n[1],o.length>0){var y=o[o.length-1];if(Math.abs(y[0]-r[0])<=l&&Math.abs(y[1]-r[1])<=l)continue}o.push(r)}}else if(a=[],null!=e[u]&&null!=e[u].Arcs&&e[u].Arcs.length>0)for(h=e[u].Arcs,d=0;d<h.length;d++)for(p=h[d].Dots,g=0;g<p.length;g++){if(r=[],i=this.getLocalXY([p[g].x,p[g].y]),r[0]=i[0]-n[0],r[1]=i[1]-n[1],a.length>0){var v=a[a.length-1];if(Math.abs(v[0]-r[0])<=l&&Math.abs(v[1]-r[1])<=l)continue}a.push(r)}a.length<2||s.push(a)}if(!(o.length<2)){var m={};(m=(0,c.copyAttributesWithClip)(m,this.style,["pointList"])).pointList=o;var _=new f.SmicPolygon({style:m,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(_.highlightStyle=this.highlightStyle),_.refOriginalPosition=this.location,_.refDataID=this.data.FID,_.isHoverByRefDataID=this.isMultiHover,s.length>0&&(_.holePolygonPointLists=s),this.shapeOptions&&(0,c.copyAttributesWithClip)(_,this.shapeOptions),this.shapes.push(_)}}}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,i=0,r=this.shapes.length;i<r;i++){var n=this.shapes[i];n.refOriginalPosition=t,e.addShape(n)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}]),e}(h.Theme);e.ThemeVector=y,u.Zondy.Theme.ThemeVector=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(22);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i){(0,r.default)(this,t),e&&i&&i.map&&i.renderer&&(this.id=(0,a.newGuid)(),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=i,this.CLASS_NAME="Zondy.Feature.Theme")}return(0,n.default)(t,[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}}]),t}();e.Theme=l,o.Zondy.Theme=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(18)),a=l(i(14)),s=l(i(15));function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,o,s,l){(0,n.default)(this,e);var u=l||{},c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,u));return c.xmin=t,c.xmax=o,c.ymin=i,c.ymax=s,c}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){void 0!==t&&null!==t&&(this.xmin=t[0],this.ymin=t[1],this.xmax=t[2],this.ymax=t[3])}},{key:"toString",value:function(){return this.xmin+","+this.ymin+","+this.xmax+","+this.ymax}},{key:"getGeometryType",value:function(){return"rect"}},{key:"convertToBound",value:function(){return[this.xmin,this.ymin,this.xmax,this.ymax]}},{key:"intersectsBounds",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),null===(e=e||{}).inclusive&&(e.inclusive=!0);var i=!1,r=this.xmin===t.xmax||this.xmax===t.xmin||this.ymax===t.ymin||this.ymin===t.ymax;if(e.inclusive||!r){var n=t.ymin>=this.ymin&&t.ymin<=this.ymax||this.ymin>=t.ymin&&this.ymin<=t.ymax,o=t.ymax>=this.ymin&&t.ymax<=this.ymax||this.ymax>t.ymin&&this.ymax<t.ymax,a=t.xmin>=this.xmin&&t.xmin<=this.xmax||this.xmin>=t.xmin&&this.xmin<=t.xmax,s=t.xmax>=this.xmin&&t.xmax<=this.xmax||this.xmax>=t.xmin&&this.xmax<=t.xmax;i=(n||o)&&(a||s)}return i}}]),e}(i(169).Tangram);e.Rectangle=u,Zondy.Object.Rectangle=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=void 0;var r=g(i(58)),n=g(i(13)),o=g(i(8)),a=g(i(18)),s=g(i(14)),l=g(i(15)),u=i(6),c=i(22),h=i(143),d=i(245),p=i(314),f=i(53);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var i=t||{};i.baseUrl="igs/rest/mrfs";var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.resultCallBack=void 0!==i.resultCallBack?i.resultCallBack:null,r.queryParam=void 0!==i.queryParam?i.queryParam:null,r.requestType=void 0!==i.requestType?i.requestType:"GET",r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"processResult",value:function(t){var e=new d.FeatureSet;(0,c.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"processGeoJsonResult",value:function(t){var e={};(0,c.copyExcluce)(e,t,"succeed"),this.resultCallBack(e)}},{key:"restQuery",value:function(t,e,i,n,o,a){this.resultCallBack=i;var s=new f.IgsServiceBase(t,{eventListeners:{scope:this,processCompleted:"geojson"!==a?this.processResult:this.processGeoJsonResult,processFailed:o}});"GET"===n?s.processAsync():s.processAsync({method:"POST",data:(0,r.default)(e),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"query",value:function(t,e,i){if(null!==this.queryParam){var r="";if(this.queryParam instanceof p.QueryParameter){r=this.getFullUrl();var n,o=null;"GET"===(n=i||(this.requestType?this.requestType:"GET")).toUpperCase()?(r+="?"+this.queryParam.getParameterURL(),r=encodeURI(r)):o=this.queryParam.getParameterObject(),this.restQuery(r,o,t,n,e,this.queryParam.resultFormat.toLowerCase())}}}}]),e}(h.ServiceBase);e.QueryServiceBase=y,u.Zondy.Service.QueryServiceBase=y},function(t,e,i){"use strict";i.r(e);var r=function(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0};r.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},r.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},r.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var i=e-3;i>0&&this.points_[i+2]>t;)i-=3;var r=this.points_[e+2]-this.points_[i+2];if(r<1e3/60)return!1;var n=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,n),this.initialVelocity_=Math.sqrt(n*n+o*o)/r,this.initialVelocity_>this.minVelocity_},r.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},r.prototype.getAngle=function(){return this.angle_},e.default=r},function(t,e,i){"use strict";i.r(e);var r=i(172),n=i(73),o=i(223),a=i(11),s=i(188),l=i(228),u=i(163),c=i(251),h=i(327),d=function(t){function e(e){(e=Object(a.assign)({},e)).controls||(e.controls=Object(n.a)()),e.interactions||(e.interactions=Object(o.defaults)()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new l.a(this);return t.registerLayerRenderers([s.default,u.default,c.default,h.default]),t},e}(r.default);e.default=d},function(t,e,i){"use strict";i.r(e);var r=i(3),n=i(10),o=i(75),a=i(37),s=i(56),l=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target});var o=void 0!==i.className?i.className:"ol-zoom",s=void 0!==i.delta?i.delta:1,l=void 0!==i.zoomInLabel?i.zoomInLabel:"+",u=void 0!==i.zoomOutLabel?i.zoomOutLabel:"âˆ’",c=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:"Zoom in",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:"Zoom out",d=document.createElement("button");d.className=o+"-in",d.setAttribute("type","button"),d.title=c,d.appendChild("string"==typeof l?document.createTextNode(l):l),Object(r.listen)(d,n.default.CLICK,this.handleClick_.bind(this,s));var p=document.createElement("button");p.className=o+"-out",p.setAttribute("type","button"),p.title=h,p.appendChild("string"==typeof u?document.createTextNode(u):u),Object(r.listen)(p,n.default.CLICK,this.handleClick_.bind(this,-s));var f=o+" "+a.e+" "+a.b,g=this.element;g.className=f,g.appendChild(d),g.appendChild(p),this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var i=e.getResolution();if(i){var r=e.constrainResolution(i,t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:r,duration:this.duration_,easing:s.easeOut})):e.setResolution(r)}}},e}(o.default);e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return u});var r=i(75),n=i(37),o=i(56),a=i(3),s=i(10),l=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||u,target:i.target});var r=void 0!==i.className?i.className:"ol-rotate",o=void 0!==i.label?i.label:"â‡§";this.label_=null,"string"==typeof o?(this.label_=document.createElement("span"),this.label_.className="ol-compass",this.label_.textContent=o):(this.label_=o,this.label_.classList.add("ol-compass"));var l=i.tipLabel?i.tipLabel:"Reset rotation",c=document.createElement("button");c.className=r+"-reset",c.setAttribute("type","button"),c.title=l,c.appendChild(this.label_),Object(a.listen)(c,s.default.CLICK,this.handleClick_,this);var h=r+" "+n.e+" "+n.b,d=this.element;d.className=h,d.appendChild(c),this.callResetNorth_=i.resetNorth?i.resetNorth:void 0,this.duration_=void 0!==i.duration?i.duration:250,this.autoHide_=void 0===i.autoHide||i.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(n.c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();t&&void 0!==t.getRotation()&&(this.duration_>0?t.animate({rotation:0,duration:this.duration_,easing:o.easeOut}):t.setRotation(0))},e}(r.default);function u(t){var e=t.frameState;if(e){var i=e.viewState.rotation;if(i!=this.rotation_){var r="rotate("+i+"rad)";if(this.autoHide_){var o=this.element.classList.contains(n.c);o||0!==i?o&&0!==i&&this.element.classList.remove(n.c):this.element.classList.add(n.c)}this.label_.style.msTransform=r,this.label_.style.webkitTransform=r,this.label_.style.transform=r}this.rotation_=i}}e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return h});var r=i(12),n=i(75),o=i(37),a=i(24),s=i(3),l=i(10),u=i(83),c=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||h,target:i.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===i.collapsed||i.collapsed,this.overrideCollapsible_=void 0!==i.collapsible,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var r=void 0!==i.className?i.className:"ol-attribution",n=void 0!==i.tipLabel?i.tipLabel:"Attributions",a=void 0!==i.collapseLabel?i.collapseLabel:"Â»";"string"==typeof a?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=a):this.collapseLabel_=a;var u=void 0!==i.label?i.label:"i";"string"==typeof u?(this.label_=document.createElement("span"),this.label_.textContent=u):this.label_=u;var c=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=n,d.appendChild(c),Object(s.listen)(d,l.default.CLICK,this.handleClick_,this);var p=r+" "+o.e+" "+o.b+(this.collapsed_&&this.collapsible_?" "+o.a:"")+(this.collapsible_?"":" ol-uncollapsible"),f=this.element;f.className=p,f.appendChild(this.ulElement_),f.appendChild(d),this.renderedAttributions_=[],this.renderedVisible_=!0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.collectSourceAttributions_=function(t){for(var e={},i=[],r=t.layerStatesArray,n=t.viewState.resolution,o=0,a=r.length;o<a;++o){var s=r[o];if(Object(u.visibleAtResolution)(s,n)){var l=s.layer.getSource();if(l){var c=l.getAttributions();if(c){var h=c(t);if(h)if(this.overrideCollapsible_||!1!==l.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var d=0,p=h.length;d<p;++d)h[d]in e||(i.push(h[d]),e[h[d]]=!0);else h in e||(i.push(h),e[h]=!0)}}}}return i},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Object(r.b)(e,this.renderedAttributions_)){Object(a.removeChildren)(this.ulElement_);for(var n=0,o=e.length;n<o;++n){var s=document.createElement("li");s.innerHTML=e[n],this.ulElement_.appendChild(s)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(o.a),this.collapsed_?Object(a.replaceNode)(this.collapseLabel_,this.label_):Object(a.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(n.default);function h(t){this.updateElement_(t.frameState)}e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(28),n=i(26),o=i(56),a=i(32),s=i(29),l=i(47),u=function(t){function e(e){t.call(this,{stopDown:s.a});var i=e||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1,this.condition_=i.condition?i.condition:a.noModifierKeys,this.noKinetic_=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().setHint(r.default.INTERACTING,1));var e=this.targetPointers,i=Object(l.centroid)(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){var o=this.lastCentroid[0]-i[0],a=i[1]-this.lastCentroid[1],s=t.map.getView(),u=[o,a];Object(n.scale)(u,s.getResolution()),Object(n.rotate)(u,s.getRotation()),Object(n.add)(u,s.getCenter()),u=s.constrainCenter(u),s.setCenter(u)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=e.length},e.prototype.handleUpEvent=function(t){var e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),s=i.getCenter(),l=e.getPixelFromCoordinate(s),u=e.getCoordinateFromPixel([l[0]-n*Math.cos(a),l[1]-n*Math.sin(a)]);i.animate({center:i.constrainCenter(u),duration:500,easing:o.easeOut})}return this.panning_&&(this.panning_=!1,i.setHint(r.default.INTERACTING,-1)),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.condition_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.setCenter(t.frameState.viewState.center),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(l.default);e.default=u},function(t,e,i){"use strict";i.r(e);var r=i(124),n=i(28),o=i(32),a=i(29),s=i(41),l=function(t){function e(e){var i=e||{};t.call(this,{stopDown:a.a}),this.condition_=i.condition?i.condition:o.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Object(o.mouseOnly)(t)){var e=t.map,i=e.getView();if(i.getConstraints().rotation!==r.c){var n=e.getSize(),a=t.pixel,l=Math.atan2(n[1]/2-a[1],a[0]-n[0]/2);if(void 0!==this.lastAngle_){var u=l-this.lastAngle_,c=i.getRotation();Object(s.rotateWithoutConstraints)(i,c-u)}this.lastAngle_=l}}},e.prototype.handleUpEvent=function(t){if(!Object(o.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(n.default.INTERACTING,-1);var i=e.getRotation();return Object(s.rotate)(e,i,void 0,this.duration_),!1},e.prototype.handleDownEvent=function(t){return!(!Object(o.mouseOnly)(t)||!Object(o.mouseActionButton)(t)||!this.condition_(t)||(t.map.getView().setHint(n.default.INTERACTING,1),this.lastAngle_=void 0,0))},e}(i(47).default);e.default=l},function(t,e,i){"use strict";i.r(e);var r=i(56),n=i(32),o=i(1),a=function(t){function e(e){var i=e||{},r=i.condition?i.condition:n.shiftKeyOnly;t.call(this,{condition:r,className:i.className||"ol-dragzoom",onBoxEnd:s}),this.duration_=void 0!==i.duration?i.duration:200,this.out_=void 0!==i.out&&i.out}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(220).default);function s(){var t=this.getMap(),e=t.getView(),i=t.getSize(),n=this.getGeometry().getExtent();if(this.out_){var a=e.calculateExtent(i),s=Object(o.createOrUpdateFromCoordinates)([t.getPixelFromCoordinate(Object(o.getBottomLeft)(n)),t.getPixelFromCoordinate(Object(o.getTopRight)(n))]),l=e.getResolutionForExtent(s,i);Object(o.scaleFromCenter)(a,1/l),n=a}var u=e.constrainResolution(e.getResolutionForExtent(n,i)),c=Object(o.getCenter)(n);c=e.constrainCenter(c),e.animate({resolution:u,center:c,duration:this.duration_,easing:r.easeOut})}e.default=a},function(t,e,i){"use strict";i.r(e);var r=i(10),n=i(32),o=i(41),a=function(t){function e(e){t.call(this,{handleEvent:s});var i=e||{};this.condition_=i.condition?i.condition:n.targetNotEditable,this.delta_=i.delta?i.delta:1,this.duration_=void 0!==i.duration?i.duration:100}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default);function s(t){var e=!1;if(t.type==r.default.KEYDOWN||t.type==r.default.KEYPRESS){var i=t.originalEvent.charCode;if(this.condition_(t)&&(i=="+".charCodeAt(0)||i=="-".charCodeAt(0))){var n=t.map,a=i=="+".charCodeAt(0)?this.delta_:-this.delta_,s=n.getView();Object(o.zoomByDelta)(s,a,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}e.default=a},function(t,e,i){"use strict";i.r(e),i.d(e,"Mode",function(){return c});var r=i(28),n=i(32),o=i(56),a=i(10),s=i(42),l=i(41),u=i(19),c={TRACKPAD:"trackpad",WHEEL:"wheel"},h=function(t){function e(e){var i=e||{};t.call(this,i),this.delta_=0,this.duration_=void 0!==i.duration?i.duration:250,this.timeout_=void 0!==i.timeout?i.timeout:80,this.useAnchor_=void 0===i.useAnchor||i.useAnchor,this.constrainResolution_=i.constrainResolution||!1,this.condition_=i.condition?i.condition:n.always,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.trackpadDeltaPerZoom_=300,this.trackpadZoomBuffer_=1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.decrementInteractingHint_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().setHint(r.default.INTERACTING,-1)},e.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;var e=t.type;if(e!==a.default.WHEEL&&e!==a.default.MOUSEWHEEL)return!0;t.preventDefault();var i,n=t.map,l=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==a.default.WHEEL?(i=l.deltaY,s.FIREFOX&&l.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=s.DEVICE_PIXEL_RATIO),l.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)):t.type==a.default.MOUSEWHEEL&&(i=-l.wheelDeltaY,s.SAFARI&&(i/=3)),0===i)return!1;var u=Date.now();if(void 0===this.startTime_&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(i)<4?c.TRACKPAD:c.WHEEL),this.mode_===c.TRACKPAD){var h=n.getView();this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):h.setHint(r.default.INTERACTING,1),this.trackpadTimeoutId_=setTimeout(this.decrementInteractingHint_.bind(this),this.trackpadEventGap_);var d=h.getResolution()*Math.pow(2,i/this.trackpadDeltaPerZoom_),p=h.getMinResolution(),f=h.getMaxResolution(),g=0;if(d<p?(d=Math.max(d,p/this.trackpadZoomBuffer_),g=1):d>f&&(d=Math.min(d,f*this.trackpadZoomBuffer_),g=-1),this.lastAnchor_){var y=h.calculateCenterZoom(d,this.lastAnchor_);h.setCenter(h.constrainCenter(y))}return h.setResolution(d),0===g&&this.constrainResolution_&&h.animate({resolution:h.constrainResolution(d,i>0?-1:1),easing:o.easeOut,anchor:this.lastAnchor_,duration:this.duration_}),g>0?h.animate({resolution:p,easing:o.easeOut,anchor:this.lastAnchor_,duration:500}):g<0&&h.animate({resolution:f,easing:o.easeOut,anchor:this.lastAnchor_,duration:500}),this.startTime_=u,!1}this.delta_+=i;var v=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),v),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var i=Object(u.a)(this.delta_,-1,1);Object(l.zoomByDelta)(e,-i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.delta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(l.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(28),n=i(29),o=i(41),a=i(47),s=i(124),l=function(t){function e(e){var i=e||{},r=i;r.stopDown||(r.stopDown=n.a),t.call(this,r),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==i.threshold?i.threshold:.3,this.duration_=void 0!==i.duration?i.duration:250}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=0,i=this.targetPointers[0],r=this.targetPointers[1],n=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){var l=n-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=n;var u=t.map,c=u.getView();if(c.getConstraints().rotation!==s.c){var h=u.getViewport().getBoundingClientRect(),d=Object(a.centroid)(this.targetPointers);if(d[0]-=h.left,d[1]-=h.top,this.anchor_=u.getCoordinateFromPixel(d),this.rotating_){var p=c.getRotation();u.render(),Object(o.rotateWithoutConstraints)(c,p+e,this.anchor_)}}},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();if(e.setHint(r.default.INTERACTING,-1),this.rotating_){var i=e.getRotation();Object(o.rotate)(e,i,this.anchor_,this.duration_)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().setHint(r.default.INTERACTING,1),!0}return!1},e}(a.default);e.default=l},function(t,e,i){"use strict";i.r(e);var r=i(28),n=i(29),o=i(41),a=i(47),s=function(t){function e(e){var i=e||{},r=i;r.stopDown||(r.stopDown=n.a),t.call(this,r),this.constrainResolution_=i.constrainResolution||!1,this.anchor_=null,this.duration_=void 0!==i.duration?i.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){var e=1,i=this.targetPointers[0],r=this.targetPointers[1],n=i.clientX-r.clientX,s=i.clientY-r.clientY,l=Math.sqrt(n*n+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/l),this.lastDistance_=l;var u=t.map,c=u.getView(),h=c.getResolution(),d=c.getMaxResolution(),p=c.getMinResolution(),f=h*e;f>d?(e=d/h,f=d):f<p&&(e=p/h,f=p),1!=e&&(this.lastScaleDelta_=e);var g=u.getViewport().getBoundingClientRect(),y=Object(a.centroid)(this.targetPointers);y[0]-=g.left,y[1]-=g.top,this.anchor_=u.getCoordinateFromPixel(y),u.render(),Object(o.zoomWithoutConstraints)(c,f,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView();e.setHint(r.default.INTERACTING,-1);var i=e.getResolution();if(this.constrainResolution_||i<e.getMinResolution()||i>e.getMaxResolution()){var n=this.lastScaleDelta_-1;Object(o.zoom)(e,i,this.anchor_,this.duration_,n)}return!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().setHint(r.default.INTERACTING,1),!0}return!1},e}(a.default);e.default=s},function(t,e,i){"use strict";i.r(e);var r=i(137),n=i(25),o=i(99),a=i(37),s=i(24),l=i(3),u=i(1),c={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},h=function(t){function e(e){t.call(this),this.options=e,this.id=e.id,this.insertFirst=void 0===e.insertFirst||e.insertFirst,this.stopEvent=void 0===e.stopEvent||e.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a.d,this.element.style.position="absolute",this.autoPan=void 0!==e.autoPan&&e.autoPan,this.autoPanAnimation=e.autoPanAnimation||{},this.autoPanMargin=void 0!==e.autoPanMargin?e.autoPanMargin:20,this.rendered={bottom_:"",left_:"",right_:"",top_:"",visible:!0},this.mapPostrenderListenerKey=null,Object(l.listen)(this,Object(n.getChangeEventType)(c.ELEMENT),this.handleElementChanged,this),Object(l.listen)(this,Object(n.getChangeEventType)(c.MAP),this.handleMapChanged,this),Object(l.listen)(this,Object(n.getChangeEventType)(c.OFFSET),this.handleOffsetChanged,this),Object(l.listen)(this,Object(n.getChangeEventType)(c.POSITION),this.handlePositionChanged,this),Object(l.listen)(this,Object(n.getChangeEventType)(c.POSITIONING),this.handlePositioningChanged,this),void 0!==e.element&&this.setElement(e.element),this.setOffset(void 0!==e.offset?e.offset:[0,0]),this.setPositioning(void 0!==e.positioning?e.positioning:o.a.TOP_LEFT),void 0!==e.position&&this.setPosition(e.position)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return this.get(c.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(c.MAP)},e.prototype.getOffset=function(){return this.get(c.OFFSET)},e.prototype.getPosition=function(){return this.get(c.POSITION)},e.prototype.getPositioning=function(){return this.get(c.POSITIONING)},e.prototype.handleElementChanged=function(){Object(s.removeChildren)(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(s.removeNode)(this.element),Object(l.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(l.listen)(t,r.a.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element)}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.get(c.POSITION)&&this.autoPan&&this.panIntoView()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(c.ELEMENT,t)},e.prototype.setMap=function(t){this.set(c.MAP,t)},e.prototype.setOffset=function(t){this.set(c.OFFSET,t)},e.prototype.setPosition=function(t){this.set(c.POSITION,t)},e.prototype.panIntoView=function(){var t=this.getMap();if(t&&t.getTargetElement()){var e=this.getRect(t.getTargetElement(),t.getSize()),i=this.getElement(),r=this.getRect(i,[Object(s.outerWidth)(i),Object(s.outerHeight)(i)]),n=this.autoPanMargin;if(!Object(u.containsExtent)(e,r)){var o=r[0]-e[0],a=e[2]-r[2],l=r[1]-e[1],c=e[3]-r[3],h=[0,0];if(o<0?h[0]=o-n:a<0&&(h[0]=Math.abs(a)+n),l<0?h[1]=l-n:c<0&&(h[1]=Math.abs(c)+n),0!==h[0]||0!==h[1]){var d=t.getView().getCenter(),p=t.getPixelFromCoordinate(d),f=[p[0]+h[0],p[1]+h[1]];t.getView().animate({center:t.getCoordinateFromPixel(f),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,n=i.top+window.pageYOffset;return[r,n,r+e[0],n+e[1]]},e.prototype.setPositioning=function(t){this.set(c.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,r=this.getOffset(),n=this.getPositioning();this.setVisible(!0);var a=r[0],s=r[1];if(n==o.a.BOTTOM_RIGHT||n==o.a.CENTER_RIGHT||n==o.a.TOP_RIGHT){""!==this.rendered.left_&&(this.rendered.left_=i.left="");var l=Math.round(e[0]-t[0]-a)+"px";this.rendered.right_!=l&&(this.rendered.right_=i.right=l)}else{""!==this.rendered.right_&&(this.rendered.right_=i.right=""),n!=o.a.BOTTOM_CENTER&&n!=o.a.CENTER_CENTER&&n!=o.a.TOP_CENTER||(a-=this.element.offsetWidth/2);var u=Math.round(t[0]+a)+"px";this.rendered.left_!=u&&(this.rendered.left_=i.left=u)}if(n==o.a.BOTTOM_LEFT||n==o.a.BOTTOM_CENTER||n==o.a.BOTTOM_RIGHT){""!==this.rendered.top_&&(this.rendered.top_=i.top="");var c=Math.round(e[1]-t[1]-s)+"px";this.rendered.bottom_!=c&&(this.rendered.bottom_=i.bottom=c)}else{""!==this.rendered.bottom_&&(this.rendered.bottom_=i.bottom=""),n!=o.a.CENTER_LEFT&&n!=o.a.CENTER_CENTER&&n!=o.a.CENTER_RIGHT||(s-=this.element.offsetHeight/2);var h=Math.round(t[1]+s)+"px";this.rendered.top_!=h&&(this.rendered.top_=i.top=h)}},e.prototype.getOptions=function(){return this.options},e}(n.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(98),o=i(16),a=[0,0,4096,4096],s=function(t){function e(e,i,r,n,o,a){t.call(this,e,i,a),this.consumers=0,this.extent_=null,this.format_=n,this.features_=null,this.loader_,this.projection_=null,this.replayGroups_={},this.tileLoadFunction_=o,this.url_=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.features_=null,this.replayGroups_={},this.state=o.default.ABORT,this.changed(),t.prototype.disposeInternal.call(this)},e.prototype.getExtent=function(){return this.extent_||a},e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getReplayGroup=function(t,e){return this.replayGroups_[Object(r.getUid)(t)+","+e]},e.prototype.load=function(){this.state==o.default.IDLE&&(this.setState(o.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_(null,NaN,null))},e.prototype.onLoad=function(t,e,i){this.setProjection(e),this.setFeatures(t),this.setExtent(i)},e.prototype.onError=function(){this.setState(o.default.ERROR)},e.prototype.setExtent=function(t){this.extent_=t},e.prototype.setFeatures=function(t){this.features_=t,this.setState(o.default.LOADED)},e.prototype.setProjection=function(t){this.projection_=t},e.prototype.setReplayGroup=function(t,e,i){this.replayGroups_[Object(r.getUid)(t)+","+e]=i},e.prototype.setLoader=function(t){this.loader_=t},e}(n.default);e.default=s},function(t,e,i){"use strict";i.r(e);var r=i(50),n=function(t){function e(e){var i=e||{};t.call(this,i),this.type=r.a.IMAGE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(83).default);n.prototype.getSource,e.default=n},function(t,e,i){"use strict";i.r(e);var r=i(35),n=i(32),o=i(29),a=i(47),s=i(134),l=i(34),u=function(t){function e(e){t.call(this),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,i=this.element_.style;i.left=Math.min(t[0],e[0])+"px",i.top=Math.min(t[1],e[1])+"px",i.width=Math.abs(e[0]-t[0])+"px",i.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=e.top=e.width=e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixel,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new l.default([i])},e.prototype.getGeometry=function(){return this.geometry_},e}(s.a),c=function(t){function e(e,i,r){t.call(this,e),this.coordinate=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(r.default),h=function(t){function e(e){t.call(this);var i=e||{};this.box_=new u(i.className||"ol-dragbox"),this.minArea_=void 0!==i.minArea?i.minArea:64,this.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:o.c,this.startPixel_=null,this.condition_=i.condition?i.condition:n.always,this.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:this.defaultBoxEndCondition}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.defaultBoxEndCondition=function(t,e,i){var r=i[0]-e[0],n=i[1]-e[1];return r*r+n*n>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){Object(n.mouseOnly)(t)&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new c("boxdrag",t.coordinate,t)))},e.prototype.handleUpEvent=function(t){return!Object(n.mouseOnly)(t)||(this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new c("boxend",t.coordinate,t))),!1)},e.prototype.handleDownEvent=function(t){return!(!Object(n.mouseOnly)(t)||!Object(n.mouseActionButton)(t)||!this.condition_(t)||(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new c("boxstart",t.coordinate,t)),0))},e}(a.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(26),n=i(10),o={LEFT:37,UP:38,RIGHT:39,DOWN:40},a=i(32),s=i(41),l=function(t){function e(e){t.call(this,{handleEvent:u});var i=e||{};this.defaultCondition_=function(t){return Object(a.noModifierKeys)(t)&&Object(a.targetNotEditable)(t)},this.condition_=void 0!==i.condition?i.condition:this.defaultCondition_,this.duration_=void 0!==i.duration?i.duration:100,this.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default);function u(t){var e=!1;if(t.type==n.default.KEYDOWN){var i=t.originalEvent.keyCode;if(this.condition_(t)&&(i==o.DOWN||i==o.LEFT||i==o.RIGHT||i==o.UP)){var a=t.map.getView(),l=a.getResolution()*this.pixelDelta_,u=0,c=0;i==o.DOWN?c=-l:i==o.LEFT?u=-l:i==o.RIGHT?u=l:c=l;var h=[u,c];Object(r.rotate)(h,a.getRotation()),Object(s.pan)(a,h,this.duration_),t.preventDefault(),e=!0}}return!e}e.default=l},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(25),o=i(74),a=i(19),s=i(11),l=function(t){function e(e){t.call(this);var i=Object(s.assign)({},e);i[o.a.OPACITY]=void 0!==e.opacity?e.opacity:1,i[o.a.VISIBLE]=void 0===e.visible||e.visible,i[o.a.Z_INDEX]=e.zIndex,i[o.a.MAX_RESOLUTION]=void 0!==e.maxResolution?e.maxResolution:1/0,i[o.a.MIN_RESOLUTION]=void 0!==e.minResolution?e.minResolution:0,this.setProperties(i),this.state_=null,this.type}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return this.type},e.prototype.getLayerState=function(){var t=this.state_||{layer:this,managed:!0};return t.opacity=Object(a.a)(this.getOpacity(),0,1),t.sourceState=this.getSourceState(),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=this.getZIndex()||0,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),this.state_=t,t},e.prototype.getLayersArray=function(t){return Object(r.abstract)()},e.prototype.getLayerStatesArray=function(t){return Object(r.abstract)()},e.prototype.getExtent=function(){return this.get(o.a.EXTENT)},e.prototype.getMaxResolution=function(){return this.get(o.a.MAX_RESOLUTION)},e.prototype.getMinResolution=function(){return this.get(o.a.MIN_RESOLUTION)},e.prototype.getOpacity=function(){return this.get(o.a.OPACITY)},e.prototype.getSourceState=function(){return Object(r.abstract)()},e.prototype.getVisible=function(){return this.get(o.a.VISIBLE)},e.prototype.getZIndex=function(){return this.get(o.a.Z_INDEX)},e.prototype.setExtent=function(t){this.set(o.a.EXTENT,t)},e.prototype.setMaxResolution=function(t){this.set(o.a.MAX_RESOLUTION,t)},e.prototype.setMinResolution=function(t){this.set(o.a.MIN_RESOLUTION,t)},e.prototype.setOpacity=function(t){this.set(o.a.OPACITY,t)},e.prototype.setVisible=function(t){this.set(o.a.VISIBLE,t)},e.prototype.setZIndex=function(t){this.set(o.a.Z_INDEX,t)},e}(n.default);e.default=l},function(t,e,i){"use strict";i.r(e),i.d(e,"defaults",function(){return E});var r=i(48),n=i(205),o=i(182),a=i(210),s=i(211),l=i(212),u=i(221),c=i(213),h=i(214),d=i(215),p=i(216),f=i(32);i.d(e,"DoubleClickZoom",function(){return o.default});var g=i(269);i.d(e,"DragAndDrop",function(){return g.default});var y=i(220);i.d(e,"DragBox",function(){return y.default}),i.d(e,"DragPan",function(){return a.default}),i.d(e,"DragRotate",function(){return s.default});var v=i(270);i.d(e,"DragRotateAndZoom",function(){return v.default}),i.d(e,"DragZoom",function(){return l.default});var m=i(271);i.d(e,"Draw",function(){return m.default});var _=i(272);i.d(e,"Extent",function(){return _.default});var b=i(41);i.d(e,"Interaction",function(){return b.default}),i.d(e,"KeyboardPan",function(){return u.default}),i.d(e,"KeyboardZoom",function(){return c.default});var S=i(273);i.d(e,"Modify",function(){return S.default}),i.d(e,"MouseWheelZoom",function(){return h.default}),i.d(e,"PinchRotate",function(){return d.default}),i.d(e,"PinchZoom",function(){return p.default});var O=i(47);i.d(e,"Pointer",function(){return O.default});var C=i(274);i.d(e,"Select",function(){return C.default});var T=i(275);i.d(e,"Snap",function(){return T.default});var x=i(276);function E(t){var e=t||{},i=new r.default,g=new n.default(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&i.push(new s.default),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&i.push(new o.default({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&i.push(new a.default({condition:e.onFocusOnly?f.focus:void 0,kinetic:g})),(void 0===e.pinchRotate||e.pinchRotate)&&i.push(new d.default),(void 0===e.pinchZoom||e.pinchZoom)&&i.push(new p.default({constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(i.push(new u.default),i.push(new c.default({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&i.push(new h.default({condition:e.onFocusOnly?f.focus:void 0,constrainResolution:e.constrainResolution,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&i.push(new l.default({duration:e.zoomDuration})),i}i.d(e,"Translate",function(){return x.default})},function(t,e,i){"use strict";i.r(e);var r=i(4),n=function(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale};n.prototype.clone=function(){return new n({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},n.prototype.getOpacity=function(){return this.opacity_},n.prototype.getRotateWithView=function(){return this.rotateWithView_},n.prototype.getRotation=function(){return this.rotation_},n.prototype.getScale=function(){return this.scale_},n.prototype.getSnapToPixel=function(){return!1},n.prototype.getAnchor=function(){return Object(r.abstract)()},n.prototype.getImage=function(t){return Object(r.abstract)()},n.prototype.getHitDetectionImage=function(t){return Object(r.abstract)()},n.prototype.getImageState=function(){return Object(r.abstract)()},n.prototype.getImageSize=function(){return Object(r.abstract)()},n.prototype.getHitDetectionImageSize=function(){return Object(r.abstract)()},n.prototype.getOrigin=function(){return Object(r.abstract)()},n.prototype.getSize=function(){return Object(r.abstract)()},n.prototype.setOpacity=function(t){this.opacity_=t},n.prototype.setRotateWithView=function(t){this.rotateWithView_=t},n.prototype.setRotation=function(t){this.rotation_=t},n.prototype.setScale=function(t){this.scale_=t},n.prototype.setSnapToPixel=function(t){},n.prototype.listenImageChange=function(t,e){return Object(r.abstract)()},n.prototype.load=function(){Object(r.abstract)()},n.prototype.unlistenImageChange=function(t,e){Object(r.abstract)()},e.default=n},function(t,e,i){"use strict";i.r(e),i.d(e,"loadFeaturesXhr",function(){return o}),i.d(e,"xhr",function(){return a});var r=i(29),n=i(108);function o(t,e,i,r){return function(o,a,s){var l=new XMLHttpRequest;l.open("GET","function"==typeof t?t(o,a,s):t,!0),e.getType()==n.a.ARRAY_BUFFER&&(l.responseType="arraybuffer"),l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){var o,a=e.getType();a==n.a.JSON||a==n.a.TEXT?o=l.responseText:a==n.a.XML?(o=l.responseXML)||(o=(new DOMParser).parseFromString(l.responseText,"application/xml")):a==n.a.ARRAY_BUFFER&&(o=l.response),o?i.call(this,e.readFeatures(o,{featureProjection:s}),e.readProjection(o),e.getLastExtent()):r.call(this)}else r.call(this)}.bind(this),l.onerror=function(){r.call(this)}.bind(this),l.send()}}function a(t,e){return o(t,e,function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)},r.c)}},function(t,e,i){"use strict";i.d(e,"b",function(){return p});var r=i(4),n=i(98),o=i(16),a=i(24),s=i(3),l=i(1),u=i(10),c=i(225),h=i(29),d=function(t){function e(i,r,n,a,c,d,p,f,g,y,v,m,_,b,S){if(t.call(this,i,r,{transition:0}),this.context_={},this.loader_,this.replayState_={},this.sourceTiles_=y,this.tileKeys=[],this.extent=null,this.sourceRevision_=n,this.wrappedTileCoord=d,this.loadListenerKeys_=[],this.sourceTileListenerKeys_=[],d){var O=this.extent=g.getTileCoordExtent(d),C=g.getResolution(S),T=f.getZForResolution(C),x=S!=i[0],E=0;if(f.forEachTileCoord(O,T,function(t){var e=Object(l.getIntersection)(O,f.getTileCoordExtent(t)),i=f.getExtent();if(i&&(e=Object(l.getIntersection)(e,i,e)),Object(l.getWidth)(e)/C>=.5&&Object(l.getHeight)(e)/C>=.5){++E;var r=t.toString(),n=y[r];if(!n&&!x){var h=p(t,v,m);n=y[r]=new _(t,void 0==h?o.default.EMPTY:o.default.IDLE,void 0==h?"":h,a,c),this.sourceTileListenerKeys_.push(Object(s.listen)(n,u.default.CHANGE,b))}!n||x&&n.getState()!=o.default.LOADED||(n.consumers++,this.tileKeys.push(r))}}.bind(this)),x&&E==this.tileKeys.length&&this.finishLoading_(),S<=i[0]&&this.state!=o.default.LOADED)for(;S>g.getMinZoom();){var P=new e(i,r,n,a,c,d,p,f,g,y,v,m,_,h.c,--S);if(P.state==o.default.LOADED){this.interimTile=P;break}}}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.state=o.default.ABORT,this.changed(),this.interimTile&&this.interimTile.dispose();for(var e=0,i=this.tileKeys.length;e<i;++e){var r=this.tileKeys[e],n=this.getTile(r);n.consumers--,0==n.consumers&&(delete this.sourceTiles_[r],n.dispose())}this.tileKeys.length=0,this.sourceTiles_=null,this.loadListenerKeys_.forEach(s.unlistenByKey),this.loadListenerKeys_.length=0,this.sourceTileListenerKeys_.forEach(s.unlistenByKey),this.sourceTileListenerKeys_.length=0,t.prototype.disposeInternal.call(this)},e.prototype.getContext=function(t){var e=Object(r.getUid)(t);return e in this.context_||(this.context_[e]=Object(a.createCanvasContext2D)()),this.context_[e]},e.prototype.getImage=function(t){return-1==this.getReplayState(t).renderedTileRevision?null:this.getContext(t).canvas},e.prototype.getReplayState=function(t){var e=Object(r.getUid)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedRevision:-1,renderedTileRevision:-1}),this.replayState_[e]},e.prototype.getKey=function(){return this.tileKeys.join("/")+"-"+this.sourceRevision_},e.prototype.getTile=function(t){return this.sourceTiles_[t]},e.prototype.load=function(){var t=0,e={};this.state==o.default.IDLE&&this.setState(o.default.LOADING),this.state==o.default.LOADING&&this.tileKeys.forEach(function(i){var n=this.getTile(i);if(n.state==o.default.IDLE&&(n.setLoader(this.loader_),n.load()),n.state==o.default.LOADING){var a=Object(s.listen)(n,u.default.CHANGE,function(i){var a=n.getState();if(a==o.default.LOADED||a==o.default.ERROR){var s=Object(r.getUid)(n);a==o.default.ERROR?e[s]=!0:(--t,delete e[s]),t-Object.keys(e).length==0&&this.finishLoading_()}}.bind(this));this.loadListenerKeys_.push(a),++t}}.bind(this)),t-Object.keys(e).length==0&&setTimeout(this.finishLoading_.bind(this),0)},e.prototype.finishLoading_=function(){for(var t=this.tileKeys.length,e=0,i=t-1;i>=0;--i){var r=this.getTile(this.tileKeys[i]).getState();r!=o.default.LOADED&&--t,r==o.default.EMPTY&&++e}t==this.tileKeys.length?(this.loadListenerKeys_.forEach(s.unlistenByKey),this.loadListenerKeys_.length=0,this.setState(o.default.LOADED)):this.setState(e==this.tileKeys.length?o.default.EMPTY:o.default.ERROR)},e}(n.default);function p(t,e){var i=Object(c.loadFeaturesXhr)(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(i)}e.a=d},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(16),o=i(90),a=i(128),s=i(46),l=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible}),this.generateTileUrlFunction_=!e.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,this.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(this):o.d,this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),e.tileUrlFunction&&this.setTileUrlFunction(e.tileUrlFunction,this.key_),this.tileLoadingKeys_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,i=t.target,o=Object(r.getUid)(i),s=i.getState();s==n.default.LOADING?(this.tileLoadingKeys_[o]=!0,e="tileloadstart"):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],e=s==n.default.ERROR?"tileloaderror":s==n.default.LOADED||s==n.default.ABORT?"tileloadend":void 0),void 0!=e&&this.dispatchEvent(new a.TileSourceEvent(e,i))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=this.urls=Object(o.c)(t);this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(Object(o.a)(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,i){var r=Object(s.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(a.default);e.default=l},function(t,e,i){"use strict";i.d(e,"b",function(){return f});var r=i(17),n=i(12),o=i(37),a=i(24),s=i(83),l=i(162),u=i(57),c=i(21),h=i(175),d=i(68),p=i(43),f=[],g=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.context_=Object(a.createCanvasContext2D)(),this.canvas_=this.context_.canvas,this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=o.e,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.renderedVisible_=!0,this.transform_=Object(r.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap(),r=this.context_;if(i.hasListener(t)){var n=e.extent,o=e.pixelRatio,a=e.viewState.rotation,s=this.getTransform(e),u=new h.default(r,o,n,s,a),c=new l.a(t,u,e,r,null);i.dispatchEvent(c)}},e.prototype.getTransform=function(t){var e=t.viewState,i=this.canvas_.width/2,n=this.canvas_.height/2,o=t.pixelRatio/e.resolution,a=-o,s=-e.rotation,l=-e.center[0],u=-e.center[1];return Object(r.b)(this.transform_,i,n,o,a,s,l,u)},e.prototype.renderFrame=function(t){if(t){var e=this.context_,i=t.pixelRatio,r=Math.round(t.size[0]*i),o=Math.round(t.size[1]*i);this.canvas_.width!=r||this.canvas_.height!=o?(this.canvas_.width=r,this.canvas_.height=o):e.clearRect(0,0,r,o);var a=t.viewState.rotation;this.calculateMatrices2D(t),this.dispatchRenderEvent(u.a.PRECOMPOSE,t);var l=t.layerStatesArray;Object(n.l)(l,d.sortByZIndex),a&&(e.save(),Object(c.rotateAtOffset)(e,a,r/2,o/2));var h,f,g=t.viewState.resolution;for(h=0,f=l.length;h<f;++h){var y=l[h],v=y.layer,m=this.getLayerRenderer(v);Object(s.visibleAtResolution)(y,g)&&y.sourceState==p.a.READY&&m.prepareFrame(t,y)&&m.composeFrame(t,y,e)}a&&e.restore(),this.dispatchRenderEvent(u.a.POSTCOMPOSE,t),this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)}else this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,i,n,o,a,l){var u,c,h=e.viewState.resolution,d=e.layerStatesArray,p=d.length,f=Object(r.a)(e.pixelToCoordinateTransform,t.slice());for(c=p-1;c>=0;--c){var g=d[c],y=g.layer;if(Object(s.visibleAtResolution)(g,h)&&a.call(l,y)&&(u=this.getLayerRenderer(y).forEachLayerAtCoordinate(f,e,i,n,o)))return u}},e.prototype.registerLayerRenderers=function(e){t.prototype.registerLayerRenderers.call(this,e);for(var i=0,r=e.length;i<r;++i){var o=e[i];Object(n.f)(f,o)||f.push(o)}},e}(d.default);e.a=g},function(t,e,i){"use strict";var r=i(12),n=i(24),o=i(1),a=i(52),s=i(11),l=i(263),u=i(30),c=i(4),h=i(92),d=i(86),p=i(5),f=i(91),g=i(255),y=i(19);function v(t,e,i,r,n,o,a,s){for(var l,u,c,h=[],d=t[e]>t[i-r],p=n.length,f=t[e],g=t[e+1],v=t[e+=r],m=t[e+1],_=0,b=Math.sqrt(Math.pow(v-f,2)+Math.pow(m-g,2)),S="",O=0,C=0;C<p;++C){u=d?p-C-1:C;var T=n.charAt(u),x=o(S=d?T+S:S+T)-O;O+=x;for(var E=a+x/2;e<i-r&&_+b<E;)f=v,g=m,v=t[e+=r],m=t[e+1],_+=b,b=Math.sqrt(Math.pow(v-f,2)+Math.pow(m-g,2));var P=E-_,j=Math.atan2(m-g,v-f);if(d&&(j+=j>0?-Math.PI:Math.PI),void 0!==c){var R=j-c;if(R+=R>Math.PI?-2*Math.PI:R<-Math.PI?2*Math.PI:0,Math.abs(R)>s)return null}var I=P/b,L=Object(y.c)(f,v,I),w=Object(y.c)(g,m,I);c==j?(d&&(l[0]=L,l[1]=w,l[2]=x/2),l[4]=S):(O=x,l=[L,w,x/2,j,S=T],d?h.unshift(l):h.push(l),c=j),a+=x}return h}var m=i(42),_=i(146),b=i(21),S={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},O=[S.FILL],C=[S.STROKE],T=[S.BEGIN_PATH],x=[S.CLOSE_PATH],E=S,P=i(77),j=i(17),R=Object(o.createEmpty)(),I=Object(j.c)(),L=function(t){function e(e,i,r,n,o,a){t.call(this),this.declutterTree=a,this.tolerance=e,this.maxExtent=i,this.overlaps=o,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=r,this.alignFill_,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.coordinateCache_={},this.renderedTransform_=Object(j.c)(),this.hitDetectionInstructions=[],this.pixelCoordinates_=null,this.state={},this.viewRotation_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replayTextBackground_=function(t,e,i,r,n,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},e.prototype.replayImage_=function(t,e,i,r,n,a,s,l,u,c,h,d,p,f,g,y,v,m){var _=v||m;e-=n*=p,i-=a*=p;var S,O,C,T,x=g+c>r.width?r.width-c:g,E=l+h>r.height?r.height-h:l,P=y[3]+x*p+y[1],L=y[0]+E*p+y[2],w=e-y[3],A=i-y[0];(_||0!==d)&&(S=[w,A],O=[w+P,A],C=[w+P,A+L],T=[w,A+L]);var M=null;if(0!==d){var F=e+n,k=i+a;M=Object(j.b)(I,F,k,1,1,d,-F,-k),Object(o.createOrUpdateEmpty)(R),Object(o.extendCoordinate)(R,Object(j.a)(I,S)),Object(o.extendCoordinate)(R,Object(j.a)(I,O)),Object(o.extendCoordinate)(R,Object(j.a)(I,C)),Object(o.extendCoordinate)(R,Object(j.a)(I,T))}else Object(o.createOrUpdate)(w,A,w+P,A+L,R);var N=t.canvas,D=m?m[2]*p/2:0,G=R[0]-D<=N.width&&R[2]+D>=0&&R[1]-D<=N.height&&R[3]+D>=0;if(f&&(e=Math.round(e),i=Math.round(i)),s){if(!G&&1==s[4])return;Object(o.extend)(s,R);var B=G?[t,M?M.slice(0):null,u,r,c,h,x,E,e,i,p]:null;B&&_&&B.push(v,m,S,O,C,T),s.push(B)}else G&&(_&&this.replayTextBackground_(t,S,O,C,T,v,m),Object(b.drawImage)(t,M,u,r,c,h,x,E,e,i,p))},e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})},e.prototype.appendFlatCoordinates=function(t,e,i,r,n,a){var s=this.coordinates.length,l=this.getBufferedMaxExtent();a&&(e+=r);var u,c,h,p=[t[e],t[e+1]],f=[NaN,NaN],g=!0;for(u=e+r;u<i;u+=r)f[0]=t[u],f[1]=t[u+1],(h=Object(o.coordinateRelationship)(l,f))!==c?(g&&(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1]),this.coordinates[s++]=f[0],this.coordinates[s++]=f[1],g=!1):h===d.a.INTERSECTING?(this.coordinates[s++]=f[0],this.coordinates[s++]=f[1],g=!1):g=!0,p[0]=f[0],p[1]=f[1],c=h;return(n&&g||u===e+r)&&(this.coordinates[s++]=p[0],this.coordinates[s++]=p[1]),s},e.prototype.drawCustomCoordinates_=function(t,e,i,r,n){for(var o=0,a=i.length;o<a;++o){var s=i[o],l=this.appendFlatCoordinates(t,e,s,r,!1,!1);n.push(l),e=s}return e},e.prototype.drawCustom=function(t,e,i){this.beginGeometry(t,e);var r,n,o,a,s,l=t.getType(),u=t.getStride(),c=this.coordinates.length;if(l==p.default.MULTI_POLYGON){r=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var d=0,g=h.length;d<g;++d){var y=[];s=this.drawCustomCoordinates_(r,s,h[d],u,y),a.push(y)}this.instructions.push([E.CUSTOM,c,a,t,i,f.c])}else l==p.default.POLYGON||l==p.default.MULTI_LINE_STRING?(o=[],r=l==p.default.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(r,0,t.getEnds(),u,o),this.instructions.push([E.CUSTOM,c,o,t,i,f.b])):l==p.default.LINE_STRING||l==p.default.MULTI_POINT?(r=t.getFlatCoordinates(),n=this.appendFlatCoordinates(r,0,r.length,u,!1,!1),this.instructions.push([E.CUSTOM,c,n,t,i,f.a])):l==p.default.POINT&&(r=t.getFlatCoordinates(),this.coordinates.push(r[0],r[1]),n=this.coordinates.length,this.instructions.push([E.CUSTOM,c,n,t,i]));this.endGeometry(t,e)},e.prototype.beginGeometry=function(t,e){this.beginGeometryInstruction1_=[E.BEGIN_GEOMETRY,e,0],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[E.BEGIN_GEOMETRY,e,0],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){},e.prototype.fill_=function(t){if(this.alignFill_){var e=Object(j.a)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.setTransform.apply(t,b.resetTransform)},e.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],m.CANVAS_LINE_DASH&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},e.prototype.renderDeclutter_=function(t,e){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(!this.declutterTree.collides(r)){this.declutterTree.insert(r);for(var n=5,a=t.length;n<a;++n){var s=t[n];s&&(s.length>11&&this.replayTextBackground_(s[0],s[13],s[14],s[15],s[16],s[11],s[12]),b.drawImage.apply(void 0,s))}}t.length=5,Object(o.createOrUpdateEmpty)(t)}}},e.prototype.replay_=function(t,e,i,n,l,u,h){var d;this.pixelCoordinates_&&Object(r.b)(e,this.renderedTransform_)?d=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),d=Object(a.c)(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),Object(j.i)(this.renderedTransform_,e));for(var p,f,y,m,_,S,O,C,T,x,R,I,L=!Object(s.isEmpty)(i),w=0,A=n.length,M=0,F=0,k=0,N=null,D=null,G=this.coordinateCache_,B=this.viewRotation_,U={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},V=this.instructions!=n||this.overlaps?0:200;w<A;){var W=n[w];switch(W[0]){case E.BEGIN_GEOMETRY:x=W[1],L&&i[Object(c.getUid)(x)]||!x.getGeometry()?w=W[2]:void 0===h||Object(o.intersects)(h,x.getGeometry().getExtent())?++w:w=W[2]+1;break;case E.BEGIN_PATH:F>V&&(this.fill_(t),F=0),k>V&&(t.stroke(),k=0),F||k||(t.beginPath(),m=_=NaN),++w;break;case E.CIRCLE:var Z=d[M=W[1]],z=d[M+1],H=d[M+2]-Z,Y=d[M+3]-z,X=Math.sqrt(H*H+Y*Y);t.moveTo(Z+X,z),t.arc(Z,z,X,0,2*Math.PI,!0),++w;break;case E.CLOSE_PATH:t.closePath(),++w;break;case E.CUSTOM:M=W[1],p=W[2];var q=W[3],K=W[4],J=6==W.length?W[5]:void 0;U.geometry=q,U.feature=x,w in G||(G[w]=[]);var Q=G[w];J?J(d,M,p,2,Q):(Q[0]=d[M],Q[1]=d[M+1],Q.length=2),K(Q,U),++w;break;case E.DRAW_IMAGE:M=W[1],p=W[2],T=W[3],f=W[4],y=W[5],C=u?null:W[6];var $=W[7],tt=W[8],et=W[9],it=W[10],rt=W[11],nt=W[12],ot=W[13],at=W[14],st=void 0,lt=void 0,ut=void 0;for(W.length>16?(st=W[15],lt=W[16],ut=W[17]):(st=b.defaultPadding,lt=ut=!1),rt&&(nt+=B);M<p;M+=2)this.replayImage_(t,d[M],d[M+1],T,f,y,C,$,tt,et,it,nt,ot,l,at,st,lt?N:null,ut?D:null);this.renderDeclutter_(C,x),++w;break;case E.DRAW_CHARS:var ct=W[1],ht=W[2],dt=W[3];C=u?null:W[4];var pt=W[5],ft=W[6],gt=W[7],yt=W[8],vt=W[9],mt=W[10],_t=W[11],bt=W[12],St=W[13],Ot=W[14],Ct=Object(g.a)(d,ct,ht,2),Tt=yt(bt);if(pt||Tt<=Ct){var xt=this.textStates[St].textAlign,Et=v(d,ct,ht,2,bt,yt,(Ct-Tt)*P.b[xt],gt);if(Et){var Pt=void 0,jt=void 0,Rt=void 0,It=void 0,Lt=void 0;if(mt)for(Pt=0,jt=Et.length;Pt<jt;++Pt)Rt=(Lt=Et[Pt])[4],It=this.getImage(Rt,St,"",mt),f=Lt[2]+_t,y=dt*It.height+2*(.5-dt)*_t-vt,this.replayImage_(t,Lt[0],Lt[1],It,f,y,C,It.height,1,0,0,Lt[3],Ot,!1,It.width,b.defaultPadding,null,null);if(ft)for(Pt=0,jt=Et.length;Pt<jt;++Pt)Rt=(Lt=Et[Pt])[4],It=this.getImage(Rt,St,ft,""),f=Lt[2],y=dt*It.height-vt,this.replayImage_(t,Lt[0],Lt[1],It,f,y,C,It.height,1,0,0,Lt[3],Ot,!1,It.width,b.defaultPadding,null,null)}}this.renderDeclutter_(C,x),++w;break;case E.END_GEOMETRY:if(void 0!==u){var wt=u(x=W[1]);if(wt)return wt}++w;break;case E.FILL:V?F++:this.fill_(t),++w;break;case E.MOVE_TO_LINE_TO:for(M=W[1],p=W[2],R=d[M],O=(I=d[M+1])+.5|0,(S=R+.5|0)===m&&O===_||(t.moveTo(R,I),m=S,_=O),M+=2;M<p;M+=2)S=(R=d[M])+.5|0,O=(I=d[M+1])+.5|0,M!=p-2&&S===m&&O===_||(t.lineTo(R,I),m=S,_=O);++w;break;case E.SET_FILL_STYLE:N=W,this.alignFill_=W[2],F&&(this.fill_(t),F=0,k&&(t.stroke(),k=0)),t.fillStyle=W[1],++w;break;case E.SET_STROKE_STYLE:D=W,k&&(t.stroke(),k=0),this.setStrokeStyle_(t,W),++w;break;case E.STROKE:V?k++:t.stroke(),++w;break;default:++w}}F&&this.fill_(t),k&&t.stroke()},e.prototype.replay=function(t,e,i,r,n){this.viewRotation_=i,this.replay_(t,e,r,this.instructions,n,void 0,void 0)},e.prototype.replayHitDetection=function(t,e,i,r,n,o){return this.viewRotation_=i,this.replay_(t,e,r,this.hitDetectionInstructions,!0,n,o)},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var i,n,o=e.length,a=-1;for(t=0;t<o;++t)(n=(i=e[t])[0])==E.END_GEOMETRY?a=t:n==E.BEGIN_GEOMETRY&&(i[2]=t,Object(r.k)(this.hitDetectionInstructions,a,t),a=-1)},e.prototype.setFillStrokeStyle=function(t,e){var i=this.state;if(t){var r=t.getColor();i.fillStyle=Object(h.asColorLike)(r||b.defaultFillStyle)}else i.fillStyle=void 0;if(e){var n=e.getColor();i.strokeStyle=Object(h.asColorLike)(n||b.defaultStrokeStyle);var o=e.getLineCap();i.lineCap=void 0!==o?o:b.defaultLineCap;var a=e.getLineDash();i.lineDash=a?a.slice():b.defaultLineDash;var s=e.getLineDashOffset();i.lineDashOffset=s||b.defaultLineDashOffset;var l=e.getLineJoin();i.lineJoin=void 0!==l?l:b.defaultLineJoin;var u=e.getWidth();i.lineWidth=void 0!==u?u:b.defaultLineWidth;var c=e.getMiterLimit();i.miterLimit=void 0!==c?c:b.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0},e.prototype.createFill=function(t,e){var i=t.fillStyle,r=[E.SET_FILL_STYLE,i];return"string"!=typeof i&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[E.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e,i){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t,i)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var i=t.strokeStyle,n=t.lineCap,o=t.lineDash,a=t.lineDashOffset,s=t.lineJoin,l=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||o!=t.currentLineDash&&!Object(r.b)(t.currentLineDash,o)||t.currentLineDashOffset!=a||t.currentLineJoin!=s||t.currentLineWidth!=l||t.currentMiterLimit!=u)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=o,t.currentLineDashOffset=a,t.currentLineJoin=s,t.currentLineWidth=l,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t,e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var i=[E.END_GEOMETRY,e];this.instructions.push(i),this.hitDetectionInstructions.push(i)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Object(o.clone)(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;Object(o.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(_.default),w=function(t){function e(e,i,r,n,o,a){t.call(this,e,i,r,n,o,a),this.declutterGroup_=null,this.hitDetectionImage_=null,this.image_=null,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,r){return this.appendFlatCoordinates(t,e,i,r,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([E.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([E.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,o=this.drawCoordinates_(i,0,i.length,r);this.instructions.push([E.DRAW_IMAGE,n,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([E.DRAW_IMAGE,n,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroup_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0},e.prototype.setImageStyle=function(t,e){var i=t.getAnchor(),r=t.getSize(),n=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=i[0],this.anchorY_=i[1],this.declutterGroup_=e,this.hitDetectionImage_=n,this.image_=o,this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=r[0]},e}(L),A=function(t){function e(e,i,r,n,o,a){t.call(this,e,i,r,n,o,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinates_=function(t,e,i,r){var n=this.coordinates.length,o=this.appendFlatCoordinates(t,e,i,r,!1,!1),a=[E.MOVE_TO_LINE_TO,n,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i},e.prototype.drawLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([E.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(C),this.endGeometry(t,e)}},e.prototype.drawMultiLineString=function(t,e){var i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0!==r&&void 0!==n){this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([E.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],T);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinates_(a,l,o[u],s);this.hitDetectionInstructions.push(C),this.endGeometry(t,e)}},e.prototype.finish=function(){var t=this.state;void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(C),this.reverseHitDetectionInstructions(),this.state=null},e.prototype.applyStroke=function(e){void 0!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(C),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(T)},e}(L),M=i(55),F=i(119),k=function(t){function e(e,i,r,n,o,a){t.call(this,e,i,r,n,o,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawFlatCoordinatess_=function(t,e,i,r){var n=this.state,o=void 0!==n.fillStyle,a=void 0!=n.strokeStyle,s=i.length;this.instructions.push(T),this.hitDetectionInstructions.push(T);for(var l=0;l<s;++l){var u=i[l],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,u,r,!0,!a),d=[E.MOVE_TO_LINE_TO,c,h];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(x),this.hitDetectionInstructions.push(x)),e=u}return o&&(this.instructions.push(O),this.hitDetectionInstructions.push(O)),a&&(this.instructions.push(C),this.hitDetectionInstructions.push(C)),e},e.prototype.drawCircle=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([E.SET_FILL_STYLE,Object(M.asString)(b.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([E.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var l=[E.CIRCLE,s];this.instructions.push(T,l),this.hitDetectionInstructions.push(T,l),this.hitDetectionInstructions.push(O),void 0!==i.fillStyle&&this.instructions.push(O),void 0!==i.strokeStyle&&(this.instructions.push(C),this.hitDetectionInstructions.push(C)),this.endGeometry(t,e)}},e.prototype.drawPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([E.SET_FILL_STYLE,Object(M.asString)(b.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([E.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(t,e)}},e.prototype.drawMultiPolygon=function(t,e){var i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0!==r||void 0!==n){this.setFillStrokeStyles_(t),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([E.SET_FILL_STYLE,Object(M.asString)(b.defaultFillStyle)]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([E.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),l=0,u=0,c=o.length;u<c;++u)l=this.drawFlatCoordinatess_(a,l,o[u],s);this.endGeometry(t,e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var t=this.tolerance;if(0!==t)for(var e=this.coordinates,i=0,r=e.length;i<r;++i)e[i]=Object(F.e)(e[i],t)},e.prototype.setFillStrokeStyles_=function(t){var e=this.state;void 0!==e.fillStyle&&this.updateFillStyle(e,this.createFill,t),void 0!==e.strokeStyle&&this.updateStrokeStyle(e,this.applyStroke)},e}(L);function N(t,e,i,r,n){var o,a,s,l,u,c,h,d,p,f=i,g=i,y=0,v=0,m=i;for(o=i;o<r;o+=n){var _=e[o],b=e[o+1];void 0!==l&&(d=_-l,p=b-u,s=Math.sqrt(d*d+p*p),void 0!==c&&(v+=a,Math.acos((c*d+h*p)/(a*s))>t&&(v>y&&(y=v,f=m,g=o),v=0,m=o-n)),a=s,c=d,h=p),l=_,u=b}return(v+=s)>y?[m,o]:[f,g]}var D=i(254),G=function(t){function e(e,i,r,n,o,a){t.call(this,e,i,r,n,o,a),this.declutterGroup_,this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.widths_={},b.labelCache.prune()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""!==this.text_&&n&&(i||r)){var a,s,l=this.coordinates.length,u=t.getType(),c=null,h=2,d=2;if(n.placement===D.a.LINE){if(!Object(o.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;var f;if(c=t.getFlatCoordinates(),d=t.getStride(),u==p.default.LINE_STRING)f=[c.length];else if(u==p.default.MULTI_LINE_STRING)f=t.getEnds();else if(u==p.default.POLYGON)f=t.getEnds().slice(0,1);else if(u==p.default.MULTI_POLYGON){var g=t.getEndss();for(f=[],a=0,s=g.length;a<s;++a)f.push(g[a][0])}this.beginGeometry(t,e);for(var y,v=n.textAlign,m=0,_=0,b=f.length;_<b;++_){if(void 0==v){var S=N(n.maxAngle,c,m,f[_],d);m=S[0],y=S[1]}else y=f[_];for(a=m;a<y;a+=d)this.coordinates.push(c[a],c[a+1]);h=this.coordinates.length,m=f[_],this.drawChars_(l,h,this.declutterGroup_),l=h}this.endGeometry(t,e)}else{var O=this.getImage(this.text_,this.textKey_,this.fillKey_,this.strokeKey_),C=O.width/this.pixelRatio;switch(u){case p.default.POINT:case p.default.MULTI_POINT:h=(c=t.getFlatCoordinates()).length;break;case p.default.LINE_STRING:c=t.getFlatMidpoint();break;case p.default.CIRCLE:c=t.getCenter();break;case p.default.MULTI_LINE_STRING:h=(c=t.getFlatMidpoints()).length;break;case p.default.POLYGON:if(c=t.getFlatInteriorPoint(),!n.overflow&&c[2]/this.resolution<C)return;d=3;break;case p.default.MULTI_POLYGON:var T=t.getFlatInteriorPoints();for(c=[],a=0,s=T.length;a<s;a+=3)(n.overflow||T[a+2]/this.resolution>=C)&&c.push(T[a],T[a+1]);if(0==(h=c.length))return}h=this.appendFlatCoordinates(c,0,h,d,!1,!1),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&(this.updateFillStyle(this.state,this.createFill,t),this.hitDetectionInstructions.push(this.createFill(this.state,t))),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e),this.drawTextImage_(O,l,h),this.endGeometry(t,e)}}},e.prototype.getImage=function(t,e,i,r){var o,a=r+e+t+i+this.pixelRatio;if(!b.labelCache.containsKey(a)){var s=r?this.strokeStates[r]||this.textStrokeState_:null,l=i?this.fillStates[i]||this.textFillState_:null,u=this.textStates[e]||this.textState_,c=this.pixelRatio,h=u.scale*c,d=P.b[u.textAlign||b.defaultTextAlign],p=r&&s.lineWidth?s.lineWidth:0,f=t.split("\n"),g=f.length,y=[],v=function(t,e,i){for(var r=e.length,n=0,o=0;o<r;++o){var a=Object(b.measureTextWidth)(t,e[o]);n=Math.max(n,a),i.push(a)}return n}(u.font,f,y),_=Object(b.measureTextHeight)(u.font),S=_*g,O=v+p,C=Object(n.createCanvasContext2D)(Math.ceil(O*h),Math.ceil((S+p)*h));o=C.canvas,b.labelCache.set(a,o),1!=h&&C.scale(h,h),C.font=u.font,r&&(C.strokeStyle=s.strokeStyle,C.lineWidth=p,C.lineCap=s.lineCap,C.lineJoin=s.lineJoin,C.miterLimit=s.miterLimit,m.CANVAS_LINE_DASH&&s.lineDash.length&&(C.setLineDash(s.lineDash),C.lineDashOffset=s.lineDashOffset)),i&&(C.fillStyle=l.fillStyle),C.textBaseline="middle",C.textAlign="center";var T,x=.5-d,E=d*o.width/h+x*p;if(r)for(T=0;T<g;++T)C.strokeText(f[T],E+x*y[T],.5*(p+_)+T*_);if(i)for(T=0;T<g;++T)C.fillText(f[T],E+x*y[T],.5*(p+_)+T*_)}return b.labelCache.get(a)},e.prototype.drawTextImage_=function(t,e,i){var r=this.textState_,n=this.textStrokeState_,o=this.pixelRatio,a=P.b[r.textAlign||b.defaultTextAlign],s=P.b[r.textBaseline],l=n&&n.lineWidth?n.lineWidth:0,u=a*t.width/o+2*(.5-a)*l,c=s*t.height/o+2*(.5-s)*l;this.instructions.push([E.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1,t.width,r.padding==b.defaultPadding?b.defaultPadding:r.padding.map(function(t){return t*o}),!!r.backgroundFill,!!r.backgroundStroke]),this.hitDetectionInstructions.push([E.DRAW_IMAGE,e,i,t,(u-this.textOffsetX_)*o,(c-this.textOffsetY_)*o,this.declutterGroup_,t.height,1,0,0,this.textRotateWithView_,this.textRotation_,1/o,t.width,r.padding,!!r.backgroundFill,!!r.backgroundStroke])},e.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,n=this.textState_,o=this.textFillState_,a=this.strokeKey_;r&&(a in this.strokeStates||(this.strokeStates[a]={strokeStyle:r.strokeStyle,lineCap:r.lineCap,lineDashOffset:r.lineDashOffset,lineWidth:r.lineWidth,lineJoin:r.lineJoin,miterLimit:r.miterLimit,lineDash:r.lineDash}));var s=this.textKey_;this.textKey_ in this.textStates||(this.textStates[this.textKey_]={font:n.font,textAlign:n.textAlign||b.defaultTextAlign,scale:n.scale});var l=this.fillKey_;o&&(l in this.fillStates||(this.fillStates[l]={fillStyle:o.fillStyle}));var u=this.pixelRatio,c=P.b[n.textBaseline],h=this.textOffsetY_*u,d=this.text_,p=n.font,f=n.scale,g=r?r.lineWidth*f/2:0,y=this.widths_[p];y||(this.widths_[p]=y={}),this.instructions.push([E.DRAW_CHARS,t,e,c,i,n.overflow,l,n.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(b.measureTextWidth)(p,t)),e*f*u},h,a,g*u,d,s,1]),this.hitDetectionInstructions.push([E.DRAW_CHARS,t,e,c,i,n.overflow,l,n.maxAngle,function(t){var e=y[t];return e||(e=y[t]=Object(b.measureTextWidth)(p,t)),e*f},h,a,g,d,s,1/u])},e.prototype.setTextStyle=function(t,e){var i,r,n;if(t){this.declutterGroup_=e;var o=t.getFill();o?((r=this.textFillState_)||(r=this.textFillState_={}),r.fillStyle=Object(h.asColorLike)(o.getColor()||b.defaultFillStyle)):r=this.textFillState_=null;var a=t.getStroke();if(a){(n=this.textStrokeState_)||(n=this.textStrokeState_={});var s=a.getLineDash(),l=a.getLineDashOffset(),u=a.getWidth(),d=a.getMiterLimit();n.lineCap=a.getLineCap()||b.defaultLineCap,n.lineDash=s?s.slice():b.defaultLineDash,n.lineDashOffset=void 0===l?b.defaultLineDashOffset:l,n.lineJoin=a.getLineJoin()||b.defaultLineJoin,n.lineWidth=void 0===u?b.defaultLineWidth:u,n.miterLimit=void 0===d?b.defaultMiterLimit:d,n.strokeStyle=Object(h.asColorLike)(a.getColor()||b.defaultStrokeStyle)}else n=this.textStrokeState_=null;i=this.textState_;var p=t.getFont()||b.defaultFont;Object(b.checkFont)(p);var f=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||b.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||b.defaultPadding,i.scale=void 0===f?1:f;var g=t.getOffsetX(),y=t.getOffsetY(),v=t.getRotateWithView(),m=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===g?0:g,this.textOffsetY_=void 0===y?0:y,this.textRotateWithView_=void 0!==v&&v,this.textRotation_=void 0===m?0:m,this.strokeKey_=n?("string"==typeof n.strokeStyle?n.strokeStyle:Object(c.getUid)(n.strokeStyle))+n.lineCap+n.lineDashOffset+"|"+n.lineWidth+n.lineJoin+n.miterLimit+"["+n.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+Object(c.getUid)(r.fillStyle):""}else this.text_=""},e}(L);i.d(e,"b",function(){return Z});var B={Circle:k,Default:L,Image:w,LineString:A,Polygon:k,Text:G},U=function(t){function e(e,i,r,o,a,s,l){t.call(this),this.declutterTree_=s,this.declutterGroup_=null,this.tolerance_=e,this.maxExtent_=i,this.overlaps_=a,this.pixelRatio_=o,this.resolution_=r,this.renderBuffer_=l,this.replaysByZIndex_={},this.hitDetectionContext_=Object(n.createCanvasContext2D)(1,1),this.hitDetectionTransform_=Object(j.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){var e=null;return this.declutterTree_&&(t?(e=this.declutterGroup_)[4]++:(e=this.declutterGroup_=Object(o.createEmpty)()).push(1)),e},e.prototype.clip=function(t,e){var i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()},e.prototype.hasReplays=function(t){for(var e in this.replaysByZIndex_)for(var i=this.replaysByZIndex_[e],r=0,n=t.length;r<n;++r)if(t[r]in i)return!0;return!1},e.prototype.finish=function(){for(var t in this.replaysByZIndex_){var e=this.replaysByZIndex_[t];for(var i in e)e[i].finish()}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,a,s,l){var c,h=2*(n=Math.round(n))+1,d=Object(j.b)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),p=this.hitDetectionContext_;p.canvas.width!==h||p.canvas.height!==h?(p.canvas.width=h,p.canvas.height=h):p.clearRect(0,0,h,h),void 0!==this.renderBuffer_&&(c=Object(o.createEmpty)(),Object(o.extendCoordinate)(c,t),Object(o.buffer)(c,e*(this.renderBuffer_+n),c));var f,g,y=function(t){if(void 0!==V[t])return V[t];for(var e=2*t+1,i=new Array(e),r=0;r<e;r++)i[r]=new Array(e);for(var n=t,o=0,a=0;n>=o;)W(i,t+n,t+o),W(i,t+o,t+n),W(i,t-o,t+n),W(i,t-n,t+o),W(i,t-n,t-o),W(i,t-o,t-n),W(i,t+o,t-n),W(i,t+n,t-o),2*((a+=1+2*++o)-n)+1>0&&(a+=1-2*(n-=1));return V[t]=i,i}(n);function v(t){for(var e=p.getImageData(0,0,h,h).data,i=0;i<h;i++)for(var r=0;r<h;r++)if(y[i][r]&&e[4*(r*h+i)+3]>0){var n=void 0;return(!f||g!=u.a.IMAGE&&g!=u.a.TEXT||-1!==f.indexOf(t))&&(n=s(t)),n||void p.clearRect(0,0,h,h)}}this.declutterTree_&&(f=this.declutterTree_.all().map(function(t){return t.value}));var m,_,b,S,O,C=Object.keys(this.replaysByZIndex_).map(Number);for(C.sort(r.i),m=C.length-1;m>=0;--m){var T=C[m].toString();for(b=this.replaysByZIndex_[T],_=P.a.length-1;_>=0;--_)if(void 0!==(S=b[g=P.a[_]]))if(!l||g!=u.a.IMAGE&&g!=u.a.TEXT){if(O=S.replayHitDetection(p,d,i,a,v,c))return O}else{var x=l[T];x?x.push(S,d.slice(0)):l[T]=[S,d.slice(0)]}}},e.prototype.getClipCoords=function(t){var e=this.maxExtent_,i=e[0],r=e[1],n=e[2],o=e[3],s=[i,r,i,o,n,o,n,r];return Object(a.c)(s,0,8,2,t,s),s},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];return void 0===n&&(n=new(0,B[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_,this.overlaps_,this.declutterTree_),r[e]=n),n},e.prototype.getReplays=function(){return this.replaysByZIndex_},e.prototype.isEmpty=function(){return Object(s.isEmpty)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,n,o,a,s){var l=Object.keys(this.replaysByZIndex_).map(Number);l.sort(r.i),t.save(),this.clip(t,e);var c,h,d,p,f,g,y=a||P.a;for(c=0,h=l.length;c<h;++c){var v=l[c].toString();for(f=this.replaysByZIndex_[v],d=0,p=y.length;d<p;++d){var m=y[d];if(void 0!==(g=f[m]))if(!s||m!=u.a.IMAGE&&m!=u.a.TEXT)g.replay(t,e,i,n,o);else{var _=s[v];_?_.push(g,e.slice(0)):s[v]=[g,e.slice(0)]}}}t.restore()},e}(l.a),V={0:[[!0]]};function W(t,e,i){var r,n=Math.floor(t.length/2);if(e>=n)for(r=n;r<e;r++)t[r][i]=!0;else if(e<n)for(r=e+1;r<n;r++)t[r][i]=!0}function Z(t,e,i,n){for(var o=Object.keys(t).map(Number).sort(r.i),a={},s=0,l=o.length;s<l;++s)for(var u=t[o[s].toString()],c=0,h=u.length;c<h;){var d=u[c++],p=u[c++];d.replay(e,p,i,a,n)}}e.a=U},function(t,e,i){"use strict";var r=i(3),n=i(106),o=i(42),a=i(61),s=i(164),l=i(160),u=["","unavailable","touch","pen","mouse"];function c(t){this.pointerMap[t.pointerId.toString()]=t;var e=this.prepareEvent_(t);this.dispatcher.down(e,t)}function h(t){var e=this.prepareEvent_(t);this.dispatcher.move(e,t)}function d(t){var e=this.prepareEvent_(t);this.dispatcher.up(e,t),this.cleanup(t.pointerId)}function p(t){var e=this.prepareEvent_(t);this.dispatcher.leaveOut(e,t)}function f(t){var e=this.prepareEvent_(t);this.dispatcher.enterOver(e,t)}function g(t){var e=this.prepareEvent_(t);this.dispatcher.cancel(e,t),this.cleanup(t.pointerId)}function y(t){var e=this.dispatcher.makeEvent("lostpointercapture",t,t);this.dispatcher.dispatchEvent(e)}function v(t){var e=this.dispatcher.makeEvent("gotpointercapture",t,t);this.dispatcher.dispatchEvent(e)}var m=function(t){function e(e){var i={MSPointerDown:c,MSPointerMove:h,MSPointerUp:d,MSPointerOut:p,MSPointerOver:f,MSPointerCancel:g,MSGotPointerCapture:v,MSLostPointerCapture:y};t.call(this,e,i),this.pointerMap=e.pointerMap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.prepareEvent_=function(t){var e=t;return"number"==typeof t.pointerType&&((e=this.dispatcher.cloneEvent(t,t)).pointerType=u[t.pointerType]),e},e.prototype.cleanup=function(t){delete this.pointerMap[t.toString()]},e}(l.a);function _(t){this.dispatcher.fireNativeEvent(t)}function b(t){this.dispatcher.fireNativeEvent(t)}function S(t){this.dispatcher.fireNativeEvent(t)}function O(t){this.dispatcher.fireNativeEvent(t)}function C(t){this.dispatcher.fireNativeEvent(t)}function T(t){this.dispatcher.fireNativeEvent(t)}function x(t){this.dispatcher.fireNativeEvent(t)}function E(t){this.dispatcher.fireNativeEvent(t)}var P=function(t){function e(e){var i={pointerdown:_,pointermove:b,pointerup:S,pointerout:O,pointerover:C,pointercancel:T,gotpointercapture:E,lostpointercapture:x};t.call(this,e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.a),j=!1,R=function(t){function e(e,i,r){t.call(this,e),this.originalEvent=i;var n=r||{};this.buttons=function(t){var e;if(t.buttons||j)e=t.buttons;else switch(t.which){case 1:e=1;break;case 2:e=4;break;case 3:e=2;break;default:e=0}return e}(n),this.pressure=function(t,e){return t.pressure?t.pressure:e?.5:0}(n,this.buttons),this.bubbles="bubbles"in n&&n.bubbles,this.cancelable="cancelable"in n&&n.cancelable,this.view="view"in n?n.view:null,this.detail="detail"in n?n.detail:null,this.screenX="screenX"in n?n.screenX:0,this.screenY="screenY"in n?n.screenY:0,this.clientX="clientX"in n?n.clientX:0,this.clientY="clientY"in n?n.clientY:0,this.ctrlKey="ctrlKey"in n&&n.ctrlKey,this.altKey="altKey"in n&&n.altKey,this.shiftKey="shiftKey"in n&&n.shiftKey,this.metaKey="metaKey"in n&&n.metaKey,this.button="button"in n?n.button:0,this.relatedTarget="relatedTarget"in n?n.relatedTarget:null,this.pointerId="pointerId"in n?n.pointerId:0,this.width="width"in n?n.width:0,this.height="height"in n?n.height:0,this.tiltX="tiltX"in n?n.tiltX:0,this.tiltY="tiltY"in n?n.tiltY:0,this.pointerType="pointerType"in n?n.pointerType:"",this.hwTimestamp="hwTimestamp"in n?n.hwTimestamp:0,this.isPrimary="isPrimary"in n&&n.isPrimary,i.preventDefault&&(this.preventDefault=function(){i.preventDefault()})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(35).default);!function(){try{var t=new MouseEvent("click",{buttons:1});j=1===t.buttons}catch(t){}}();var I=R,L=i(12);function w(t){this.vacuumTouches_(t),this.setPrimaryTouch_(t.changedTouches[0]),this.dedupSynthMouse_(t),this.clickCount_++,this.processTouches_(t,this.overDown_)}function A(t){this.processTouches_(t,this.moveOverOut_)}function M(t){this.dedupSynthMouse_(t),this.processTouches_(t,this.upOut_)}function F(t){this.processTouches_(t,this.cancelOut_)}var k=function(t){function e(e,i){var r={touchstart:w,touchmove:A,touchend:M,touchcancel:F};t.call(this,e,r),this.pointerMap=e.pointerMap,this.mouseSource=i,this.firstTouchId_=void 0,this.clickCount_=0,this.resetId_,this.dedupTimeout_=2500}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.isPrimaryTouch_=function(t){return this.firstTouchId_===t.identifier},e.prototype.setPrimaryTouch_=function(t){var e=Object.keys(this.pointerMap).length;(0===e||1===e&&s.a.toString()in this.pointerMap)&&(this.firstTouchId_=t.identifier,this.cancelResetClickCount_())},e.prototype.removePrimaryPointer_=function(t){t.isPrimary&&(this.firstTouchId_=void 0,this.resetClickCount_())},e.prototype.resetClickCount_=function(){this.resetId_=setTimeout(this.resetClickCountHandler_.bind(this),200)},e.prototype.resetClickCountHandler_=function(){this.clickCount_=0,this.resetId_=void 0},e.prototype.cancelResetClickCount_=function(){void 0!==this.resetId_&&clearTimeout(this.resetId_)},e.prototype.touchToPointer_=function(t,e){var i=this.dispatcher.cloneEvent(t,e);return i.pointerId=e.identifier+2,i.bubbles=!0,i.cancelable=!0,i.detail=this.clickCount_,i.button=0,i.buttons=1,i.width=e.radiusX||0,i.height=e.radiusY||0,i.pressure=e.force||.5,i.isPrimary=this.isPrimaryTouch_(e),i.pointerType="touch",i.clientX=e.clientX,i.clientY=e.clientY,i.screenX=e.screenX,i.screenY=e.screenY,i},e.prototype.processTouches_=function(t,e){var i=Array.prototype.slice.call(t.changedTouches),r=i.length;function n(){t.preventDefault()}for(var o=0;o<r;++o){var a=this.touchToPointer_(t,i[o]);a.preventDefault=n,e.call(this,t,a)}},e.prototype.findTouch_=function(t,e){for(var i=t.length,r=0;r<i;r++)if(t[r].identifier===e)return!0;return!1},e.prototype.vacuumTouches_=function(t){var e=t.touches,i=Object.keys(this.pointerMap),r=i.length;if(r>=e.length){for(var n=[],o=0;o<r;++o){var a=Number(i[o]),l=this.pointerMap[a];a==s.a||this.findTouch_(e,a-2)||n.push(l.out)}for(var u=0;u<n.length;++u)this.cancelOut_(t,n[u])}},e.prototype.overDown_=function(t,e){this.pointerMap[e.pointerId]={target:e.target,out:e,outTarget:e.target},this.dispatcher.over(e,t),this.dispatcher.enter(e,t),this.dispatcher.down(e,t)},e.prototype.moveOverOut_=function(t,e){var i=e,r=this.pointerMap[i.pointerId];if(r){var n=r.out,o=r.outTarget;this.dispatcher.move(i,t),n&&o!==i.target&&(n.relatedTarget=i.target,i.relatedTarget=o,n.target=o,i.target?(this.dispatcher.leaveOut(n,t),this.dispatcher.enterOver(i,t)):(i.target=o,i.relatedTarget=null,this.cancelOut_(t,i))),r.out=i,r.outTarget=i.target}},e.prototype.upOut_=function(t,e){this.dispatcher.up(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cancelOut_=function(t,e){this.dispatcher.cancel(e,t),this.dispatcher.out(e,t),this.dispatcher.leave(e,t),this.cleanUpPointer_(e)},e.prototype.cleanUpPointer_=function(t){delete this.pointerMap[t.pointerId],this.removePrimaryPointer_(t)},e.prototype.dedupSynthMouse_=function(t){var e=this.mouseSource.lastTouches,i=t.changedTouches[0];if(this.isPrimaryTouch_(i)){var r=[i.clientX,i.clientY];e.push(r),setTimeout(function(){Object(L.j)(e,r)},this.dedupTimeout_)}},e}(l.a),N=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]],D=function(t){function e(e){t.call(this),this.element_=e,this.pointerMap={},this.eventMap_={},this.eventSourceList_=[],this.registerSources()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.registerSources=function(){if(o.POINTER)this.registerSource("native",new P(this));else if(o.MSPOINTER)this.registerSource("ms",new m(this));else{var t=new s.c(this);this.registerSource("mouse",t),o.TOUCH&&this.registerSource("touch",new k(this,t))}this.register_()},e.prototype.registerSource=function(t,e){var i=e,r=i.getEvents();r&&(r.forEach(function(t){var e=i.getHandlerForEvent(t);e&&(this.eventMap_[t]=e.bind(i))}.bind(this)),this.eventSourceList_.push(i))},e.prototype.register_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.addEvents_(i.getEvents())}},e.prototype.unregister_=function(){for(var t=this.eventSourceList_.length,e=0;e<t;e++){var i=this.eventSourceList_[e];this.removeEvents_(i.getEvents())}},e.prototype.eventHandler_=function(t){var e=t.type,i=this.eventMap_[e];i&&i(t)},e.prototype.addEvents_=function(t){t.forEach(function(t){Object(r.listen)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.removeEvents_=function(t){t.forEach(function(t){Object(r.unlisten)(this.element_,t,this.eventHandler_,this)}.bind(this))},e.prototype.cloneEvent=function(t,e){for(var i={},r=0,n=N.length;r<n;r++){var o=N[r][0];i[o]=t[o]||e[o]||N[r][1]}return i},e.prototype.down=function(t,e){this.fireEvent(a.a.POINTERDOWN,t,e)},e.prototype.move=function(t,e){this.fireEvent(a.a.POINTERMOVE,t,e)},e.prototype.up=function(t,e){this.fireEvent(a.a.POINTERUP,t,e)},e.prototype.enter=function(t,e){t.bubbles=!1,this.fireEvent(a.a.POINTERENTER,t,e)},e.prototype.leave=function(t,e){t.bubbles=!1,this.fireEvent(a.a.POINTERLEAVE,t,e)},e.prototype.over=function(t,e){t.bubbles=!0,this.fireEvent(a.a.POINTEROVER,t,e)},e.prototype.out=function(t,e){t.bubbles=!0,this.fireEvent(a.a.POINTEROUT,t,e)},e.prototype.cancel=function(t,e){this.fireEvent(a.a.POINTERCANCEL,t,e)},e.prototype.leaveOut=function(t,e){this.out(t,e),this.contains_(t.target,t.relatedTarget)||this.leave(t,e)},e.prototype.enterOver=function(t,e){this.over(t,e),this.contains_(t.target,t.relatedTarget)||this.enter(t,e)},e.prototype.contains_=function(t,e){return!(!t||!e)&&t.contains(e)},e.prototype.makeEvent=function(t,e,i){return new I(t,i,e)},e.prototype.fireEvent=function(t,e,i){var r=this.makeEvent(t,e,i);this.dispatchEvent(r)},e.prototype.fireNativeEvent=function(t){var e=this.makeEvent(t.type,t,t);this.dispatchEvent(e)},e.prototype.wrapMouseEvent=function(t,e){return this.makeEvent(t,Object(s.d)(e,this),e)},e.prototype.disposeInternal=function(){this.unregister_(),t.prototype.disposeInternal.call(this)},e}(n.a);e.a=D},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return b});var r=i(48),n=i(206),o=i(137),a=i(94),s=i(25),l=i(122),u=i(217),c=i(99),h=i(78),d=i(75),p=i(26),f=i(37),g=i(24),y=i(3),v=i(10),m=i(1),_=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||b,target:i.target}),this.collapsed_=void 0===i.collapsed||i.collapsed,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var o=void 0!==i.className?i.className:"ol-overviewmap",a=void 0!==i.tipLabel?i.tipLabel:"Overview map",s=void 0!==i.collapseLabel?i.collapseLabel:"Â«";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;var l=void 0!==i.label?i.label:"Â»";"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l):this.label_=l;var h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,d=document.createElement("button");d.setAttribute("type","button"),d.title=a,d.appendChild(h),Object(y.listen)(d,v.default.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new n.default({controls:new r.default,interactions:new r.default,view:i.view});var p=this.ovmap_;i.layers&&i.layers.forEach(function(t){p.addLayer(t)}.bind(this));var g=document.createElement("div");g.className="ol-overviewmap-box",g.style.boxSizing="border-box",this.boxOverlay_=new u.default({position:[0,0],positioning:c.a.BOTTOM_LEFT,element:g}),this.ovmap_.addOverlay(this.boxOverlay_);var m=o+" "+f.e+" "+f.b+(this.collapsed_&&this.collapsible_?" "+f.a:"")+(this.collapsible_?"":" ol-uncollapsible"),_=this.element;_.className=m,_.appendChild(this.ovmapDiv_),_.appendChild(d);var S=this,O=this.boxOverlay_,C=this.boxOverlay_.getElement(),T=function(t){var e=function(t){return{clientX:t.clientX-C.offsetWidth/2,clientY:t.clientY+C.offsetHeight/2}}(t),i=p.getEventCoordinate(e);O.setPosition(i)},x=function(t){var e=p.getEventCoordinate(t);S.getMap().getView().setCenter(e),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",x)};C.addEventListener("mousedown",function(){window.addEventListener("mousemove",T),window.addEventListener("mouseup",x)})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var r=i.getView();r&&this.unbindView_(r),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(Object(y.listen)(e,l.a.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup());var n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===a.a.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},e.prototype.bindView_=function(t){Object(y.listen)(t,Object(s.getChangeEventType)(h.a.ROTATION),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(t){Object(y.unlisten)(t,Object(s.getChangeEventType)(h.a.ROTATION),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView().calculateExtent(i),n=e.getSize(),o=e.getView().calculateExtent(n),a=e.getPixelFromCoordinate(Object(m.getTopLeft)(r)),s=e.getPixelFromCoordinate(Object(m.getBottomRight)(r)),l=Math.abs(a[0]-s[0]),u=Math.abs(a[1]-s[1]),c=n[0],h=n[1];l<.1*c||u<.1*h||l>.75*c||u>.75*h?this.resetExtent_():Object(m.containsExtent)(o,r)||this.recenter_()}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),r=t.getView().calculateExtent(i),n=e.getView(),o=Math.log(7.5)/Math.LN2,a=1/(.1*Math.pow(2,o/2));Object(m.scaleFromCenter)(r,a),n.fit(r)},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenter(i.getCenter())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),r=t.getView(),n=e.getView(),o=r.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),l=r.calculateExtent(i),u=n.getResolution(),c=Object(m.getBottomLeft)(l),h=Object(m.getTopRight)(l),d=this.calculateCoordinateRotate_(o,c);a.setPosition(d),s&&(s.style.width=Math.abs((c[0]-h[0])/u)+"px",s.style.height=Math.abs((h[1]-c[1])/u)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var i,r=this.getMap().getView().getCenter();return r&&(i=[e[0]-r[0],e[1]-r[1]],Object(p.rotate)(i,t),Object(p.add)(i,r)),i},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(f.a),this.collapsed_?Object(g.replaceNode)(this.collapseLabel_,this.label_):Object(g.replaceNode)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),Object(y.listenOnce)(t,o.a.POSTRENDER,function(t){this.updateBox_()},this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(d.default);function b(t){this.validateExtent_(),this.updateBox_()}e.default=_},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,i){var r=i(133),n=i(80),o=i(196);t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],a={};a[t]=e(i),r(r.S+r.F*o(function(){i(1)}),"Object",a)}},function(t,e){var i=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+r).toString(36))}},function(t,e,i){var r=i(150).f,n=i(167),o=i(110)("toStringTag");t.exports=function(t,e,i){t&&!n(t=i?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GeoFeatureSource=void 0;var r=g(i(13)),n=g(i(8)),o=g(i(18)),a=g(i(14)),s=g(i(15)),l=i(6),u=i(366),c=i(22),h=i(104),d=i(201),p=i(245),f=i(203);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i){(0,n.default)(this,e);var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.cache=i.cache||{},o.cacheFields=i.cacheFields||[],o.style=i.style||{},o.maxCacheCount=i.maxCacheCount||0,o.isCustomSetMaxCacheCount=i.isCustomSetMaxCacheCount||!1,o.nodesClipPixel=i.nodesClipPixel||2,o.isHoverAble=i.isHoverAble||!1,o.isMultiHover=i.isMultiHover||!1,o.isClickAble=i.isClickAble||!0,o.highlightStyle=i.highlightStyle||null,o.isAllowFeatureStyle=i.isAllowFeatureStyle||!1,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.maxCacheCount=null,this.isCustomSetMaxCacheCount=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.cache=null,this.cacheFields=null,this.style=null,this.highlightStyle=null,this.isAllowFeatureStyle=null}},{key:"addFeatures",value:function(t){if(this.dispatchEvent({type:"beforefeaturesadded",value:{features:t}}),t instanceof p.FeatureSet){var e=null,i=t.AttStruct,r=t.SFEleArray;if(null!=r&&r.length>0)for(var n=0;n<r.length;n++){var o=r[n];if(null!=o.AttValue&&o.AttValue.length>0){e={};for(var a=0;a<o.AttValue.length;a++)e[i.FldName[a]]=o.AttValue[a];e.FID=o.FID}o.attributes=e,this.features.push(o)}}this.isCustomSetMaxCacheCount||(this.maxCacheCount=5*this.features.length),this.renderer&&this.changed()}},{key:"removeFeatures",value:function(t){this.clearCache(),u.ThemeSource.prototype.removeFeatures.apply(this,arguments)}},{key:"removeAllFeatures",value:function(){this.clearCache(),u.ThemeSource.prototype.removeAllFeatures.apply(this,arguments)}},{key:"redrawThematicFeatures",value:function(t){var e=this.renderer.getHoverOne(),i=null;e&&e.refDataID&&(i=e.refDataID),this.renderer.clearAll();for(var r=this.features,n=this.cache,o=this.cacheFields,a=this.map.getView().getZoom(),s=this.maxCacheCount,l=new f.Rectangle(t[0],t[1],t[2],t[3]),u=0,c=r.length;u<c;u++){var h=r[u],d=h.bound;if(!l||l.intersectsBounds(d)){var p,g=h.FID+"_zoom_"+a.toString();if(n[g])n[g].updateAndAddShapes();else{if((p=this.createThematicFeature(r[u])).getShapesCount()<1)continue;if(n[g]=p,o.push(g),o.length>s){var y=o[0];o.splice(0,1),delete n[y]}}}}if(this.renderer.render(),i&&this.isHoverAble&&this.isMultiHover){var v=this.getShapesByFeatureID(i);this.renderer.updateHoverShapes(v)}}},{key:"createThematicFeature",value:function(t){var e=(0,c.copyAttributesWithClip)(this.style),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=h.ShapeFactory.transformStyle(this.highlightStyle);for(var r=new d.ThemeVector(t,this,h.ShapeFactory.transformStyle(e),i),n=0;n<r.shapes.length;n++)this.renderer.addShape(r.shapes[n]);return r}},{key:"canvasFunctionInternal_",value:function(t,e,i,r,n){return u.ThemeSource.prototype.canvasFunctionInternal_.apply(this,arguments)}},{key:"clearCache",value:function(){this.cache={},this.cacheFields=[]}},{key:"clear",value:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()}},{key:"getCacheCount",value:function(){return this.cacheFields.length}},{key:"setMaxCacheCount",value:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)}},{key:"getShapesByFeatureID",value:function(t){var e=[],i=this.renderer.getAllShapes();if(!t)return i;for(var r=0,n=i.length;r<n;r++){var o=i[r];o.refDataID&&t===o.refDataID&&e.push(o)}return e}}]),e}(u.ThemeSource);e.GeoFeatureSource=y,l.Zondy.Source.GeoFeatureSource=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Transformable=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(117);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,r.default)(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="Zondy.LevelRenderer.Transformable",this.lookAt=function(){var t=a.SUtil.Util_vector.create();return function(e){this.transform||(this.transform=a.SUtil.Util_matrix.create());var i=this.transform;function r(t){return t>-5e-5&&t<5e-5}a.SUtil.Util_vector.sub(t,e,this.position),r(t[0])&&r(t[1])||(a.SUtil.Util_vector.normalize(t,t),i[2]=t[0]*this.scale[1],i[3]=t[1]*this.scale[1],i[0]=t[1]*this.scale[0],i[1]=-t[0]*this.scale[0],i[4]=this.position[0],i[5]=this.position[1],this.decomposeTransform())}}()}return(0,n.default)(t,[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||a.SUtil.Util_matrix.create();if(a.SUtil.Util_matrix.identity(e),this.needLocalTransform){if(n(this.scale[0])||n(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var i=n(t[0])||n(t[1]);i&&a.SUtil.Util_matrix.translate(e,e,t),a.SUtil.Util_matrix.scale(e,e,this.scale),i&&(t[0]=-t[0],t[1]=-t[1],a.SUtil.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var r=n(t[0])||n(t[1]);r&&a.SUtil.Util_matrix.translate(e,e,t),a.SUtil.Util_matrix.rotate(e,e,this.rotation[0]),r&&(t[0]=-t[0],t[1]=-t[1],a.SUtil.Util_matrix.translate(e,e,t))}}else 0!==this.rotation&&a.SUtil.Util_matrix.rotate(e,e,this.rotation);(n(this.position[0])||n(this.position[1]))&&a.SUtil.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?a.SUtil.Util_matrix.mul(this.transform,this.parent.transform,this.transform):a.SUtil.Util_matrix.copy(this.transform,this.parent.transform))}function n(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],i=this.position,r=this.scale,n=this.rotation;a(e-1)&&(e=Math.sqrt(e));var o=t[2]*t[2]+t[3]*t[3];a(o-1)&&(o=Math.sqrt(o)),i[0]=t[4],i[1]=t[5],r[0]=e,r[1]=o,r[2]=r[3]=0,n[0]=Math.atan2(-t[1]/o,t[0]/e),n[1]=n[2]=0}function a(t){return t>5e-5||t<-5e-5}}}]),t}();e.Transformable=l,o.Zondy.LevelRenderer.Transformable=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Curve=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(240);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,r.default)(this,t),this.vector=new a.Vector,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Curve"}return(0,n.default)(t,[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,i,r,n){var o=1-n;return o*o*(o*t+3*n*e)+n*n*(n*r+3*o*i)}},{key:"cubicDerivativeAt",value:function(t,e,i,r,n){var o=1-n;return 3*(((e-t)*o+2*(i-e)*n)*o+(r-i)*n*n)}},{key:"cubicRootAt",value:function(t,e,i,r,n,o){var a=r+3*(e-i)-t,s=3*(i-2*e+t),l=3*(e-t),u=t-n,c=s*s-3*a*l,h=s*l-9*a*u,d=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(h))if(this.isAroundZero(s))o[0]=0;else{var f=-l/s;f>=0&&f<=1&&(o[p++]=f)}else{var g=h*h-4*c*d;if(this.isAroundZero(g)){var y=h/c,v=-s/a+y,m=-y/2;v>=0&&v<=1&&(o[p++]=v),m>=0&&m<=1&&(o[p++]=m)}else if(g>0){var _=Math.sqrt(g),b=c*s+1.5*a*(-h+_),S=c*s+1.5*a*(-h-_),O=(-s-((b=b<0?-Math.pow(-b,this.ONE_THIRD):Math.pow(b,this.ONE_THIRD))+(S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))))/(3*a);O>=0&&O<=1&&(o[p++]=O)}else{var C=(2*c*s-3*a*h)/(2*Math.sqrt(c*c*c)),T=Math.acos(C)/3,x=Math.sqrt(c),E=Math.cos(T),P=(-s-2*x*E)/(3*a),j=(-s+x*(E+this.THREE_SQRT*Math.sin(T)))/(3*a),R=(-s+x*(E-this.THREE_SQRT*Math.sin(T)))/(3*a);P>=0&&P<=1&&(o[p++]=P),j>=0&&j<=1&&(o[p++]=j),R>=0&&R<=1&&(o[p++]=R)}}return p}},{key:"cubicExtrema",value:function(t,e,i,r,n){var o=6*i-12*e+6*t,a=9*e+3*r-3*t-9*i,s=3*e-3*t,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(o)){var u=-s/o;u>=0&&u<=1&&(n[l++]=u)}}else{var c=o*o-4*a*s;if(this.isAroundZero(c))n[0]=-o/(2*a);else if(c>0){var h=Math.sqrt(c),d=(-o+h)/(2*a),p=(-o-h)/(2*a);d>=0&&d<=1&&(n[l++]=d),p>=0&&p<=1&&(n[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(t,e,i,r,n,o){var a=(e-t)*n+t,s=(i-e)*n+e,l=(r-i)*n+i,u=(s-a)*n+a,c=(l-s)*n+s,h=(c-u)*n+u;o[0]=t,o[1]=a,o[2]=u,o[3]=h,o[4]=h,o[5]=c,o[6]=l,o[7]=r}},{key:"cubicProjectPoint",value:function(t,e,i,r,n,o,a,s,l,u,c){var h,d=this.vector.create(),p=this.vector.create(),f=this.vector.create(),g=.005,y=1/0;d[0]=l,d[1]=u;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(t,i,n,a,v),p[1]=this.cubicAt(e,r,o,s,v);var m=this.vector.distSquare(d,p);m<y&&(h=v,y=m)}y=1/0;for(var _=0;_<32&&!(g<this.EPSILON);_++){var b=h-g,S=h+g;p[0]=this.cubicAt(t,i,n,a,b),p[1]=this.cubicAt(e,r,o,s,b);var O=this.vector.distSquare(p,d);if(b>=0&&O<y)h=b,y=O;else{f[0]=this.cubicAt(t,i,n,a,S),f[1]=this.cubicAt(e,r,o,s,S);var C=this.vector.distSquare(f,d);S<=1&&C<y?(h=S,y=C):g*=.5}}return c&&(c[0]=this.cubicAt(t,i,n,a,h),c[1]=this.cubicAt(e,r,o,s,h)),Math.sqrt(y)}},{key:"quadraticAt",value:function(t,e,i,r){var n=1-r;return n*(n*t+2*r*e)+r*r*i}},{key:"quadraticDerivativeAt",value:function(t,e,i,r){return 2*((1-r)*(e-t)+r*(i-e))}},{key:"quadraticRootAt",value:function(t,e,i,r,n){var o=t-2*e+i,a=2*(e-t),s=t-r,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(n[l++]=u)}}else{var c=a*a-4*o*s;if(this.isAroundZero(c)){var h=-a/(2*o);h>=0&&h<=1&&(n[l++]=h)}else if(c>0){var d=Math.sqrt(c),p=(-a+d)/(2*o),f=(-a-d)/(2*o);p>=0&&p<=1&&(n[l++]=p),f>=0&&f<=1&&(n[l++]=f)}}return l}},{key:"quadraticExtremum",value:function(t,e,i){var r=t+i-2*e;return 0===r?.5:(t-e)/r}},{key:"quadraticProjectPoint",value:function(t,e,i,r,n,o,a,s,l){var u,c=this.vector.create(),h=this.vector.create(),d=this.vector.create(),p=.005,f=1/0;c[0]=a,c[1]=s;for(var g=0;g<1;g+=.05){h[0]=this.quadraticAt(t,i,n,g),h[1]=this.quadraticAt(e,r,o,g);var y=this.vector.distSquare(c,h);y<f&&(u=g,f=y)}f=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var m=u-p,_=u+p;h[0]=this.quadraticAt(t,i,n,m),h[1]=this.quadraticAt(e,r,o,m);var b=this.vector.distSquare(h,c);if(m>=0&&b<f)u=m,f=b;else{d[0]=this.quadraticAt(t,i,n,_),d[1]=this.quadraticAt(e,r,o,_);var S=this.vector.distSquare(d,c);_<=1&&S<f?(u=_,f=S):p*=.5}}return l&&(l[0]=this.quadraticAt(t,i,n,u),l[1]=this.quadraticAt(e,r,o,u)),Math.sqrt(f)}}]),t}();e.Curve=l,o.Zondy.LevelRenderer.Tool.Curve=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Vector"}return(0,n.default)(t,[{key:"create",value:function(t,e){var i=new(0,this.ArrayCtor)(2);return i[0]=t||0,i[1]=e||0,i}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,i){return t[0]=e,t[1]=i,t}},{key:"add",value:function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}},{key:"scaleAndAdd",value:function(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t}},{key:"sub",value:function(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}},{key:"div",value:function(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}},{key:"normalize",value:function(t,e){var i=this.len(e);return 0===i?(t[0]=0,t[1]=0):(t[0]=e[0]/i,t[1]=e[1]/i),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,i,r){return t[0]=e[0]+r*(i[0]-e[0]),t[1]=e[1]+r*(i[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,i){var r=e[0],n=e[1];return t[0]=i[0]*r+i[2]*n+i[4],t[1]=i[1]*r+i[3]*n+i[5],t}},{key:"min",value:function(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}},{key:"max",value:function(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}]),t}();e.Vector=s,o.Zondy.LevelRenderer.Tool.Vector=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,n.default)(this,e);var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.x=isNaN(t)?0:t,o.y=isNaN(i)?0:i,o.r=6,o.CLASS_NAME="Zondy.Feature.ShapeParameters.Point",o}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Point=h,u.Zondy.Feature.ShapeParameters.Point=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.pointList=t,i.holePolygonPointLists=null,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Polygon",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Polygon=h,u.Zondy.Feature.ShapeParameters.Polygon=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sector=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,s,l,u,c){(0,n.default)(this,e);var h=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u,c));return h.x=isNaN(t)?0:t,h.y=isNaN(i)?0:i,h.r=isNaN(o)?0:o,h.startAngle=isNaN(s)?0:s,h.endAngle=isNaN(l)?0:l,h.r0=isNaN(u)?0:u,h.clockWise=c,h.CLASS_NAME="Zondy.Feature.ShapeParameters.Sector",h}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Sector=h,u.Zondy.Feature.ShapeParameters.Sector=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPolygon=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(22),h=i(111),d=i(117);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicpolygon",i.holePolygonPointLists=null,i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPolygon",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.style;e&&(i=this.getHighlightStyle(i,this.highlightStyle||{})),t.save(),this.setContext(t,i),this.setTransform(t);var r=!1;"fill"!==i.brushType&&"both"!==i.brushType&&void 0!==i.brushType||(t.beginPath(),"dashed"===i.lineType||"dotted"===i.lineType||"dot"===i.lineType||"dash"===i.lineType||"dashot"===i.lineType||"longdash"===i.lineType||"longdashdot"===i.lineType?this.buildPath(t,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(t,i),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",i),t.fill(),this.setCtxGlobalAlpha(t,"reset",i)),i.lineWidth>0&&("stroke"===i.brushType||"both"===i.brushType)&&(r||(t.beginPath(),this.buildPath(t,i)),this.setCtxGlobalAlpha(t,"stroke",i),t.stroke(),this.setCtxGlobalAlpha(t,"reset",i)),this.drawText(t,i,this.style);var n=(0,c.cloneObject)(i);if(n.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var o=this.holePolygonPointLists,a=o.length,s=0;s<a;s++){var l=o[s];n.pointList=l,t.globalCompositeOperation="destination-out",r=!1,"fill"!==n.brushType&&"both"!==n.brushType&&void 0!==n.brushType||(t.beginPath(),"dashed"===n.lineType||"dotted"===n.lineType||"dot"===n.lineType||"dash"===n.lineType||"dashot"===n.lineType||"longdash"===n.lineType||"longdashdot"===n.lineType?this.buildPath(t,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(t,n),r=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",n),t.fill(),this.setCtxGlobalAlpha(t,"reset",n)),n.lineWidth>0&&("stroke"===n.brushType||"both"===n.brushType)?(r||(t.beginPath(),this.buildPath(t,n)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",n),t.stroke(),this.setCtxGlobalAlpha(t,"reset",n)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=e.pointList;if(!(r.length<2))if(e.smooth&&"spline"!==e.smooth){var n,o,a,s=d.SUtil.SUtil_smoothBezier(r,e.smooth,!0,e.smoothConstraint,i);t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var l=r.length,u=0;u<l;u++)n=s[2*u],o=s[2*u+1],a=[r[(u+1)%l][0]+i[0],r[(u+1)%l][1]+i[1]],t.bezierCurveTo(n[0],n[1],o[0],o[1],a[0],a[1])}else if("spline"===e.smooth&&(r=d.SUtil.SUtil_smoothSpline(r,!0,null,i)),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=c;var h=e.lineWidth||1,p=h,f=h;"dashed"===e.lineType&&(p*=5,f*=5,e.lineCap&&"butt"!==e.lineCap&&(p-=h,f+=h)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(p=1,f+=h),"dot"===e.lineType&&(f*=4,e.lineCap&&"butt"!==e.lineCap&&(p=1,f+=h)),"dash"===e.lineType&&(p*=4,f*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=h,f+=h)),"longdash"===e.lineType&&(p*=8,f*=4,e.lineCap&&"butt"!==e.lineCap&&(p-=h,f+=h)),t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var g=1;g<r.length;g++)d.SUtil.SUtil_dashedLineTo(t,r[g-1][0]+i[0],r[g-1][1]+i[1],r[g][0]+i[0],r[g][1]+i[1],h,[p,f]);d.SUtil.SUtil_dashedLineTo(t,r[r.length-1][0]+i[0],r[r.length-1][1]+i[1],r[0][0]+i[0],r[0][1]+i[1],h,[p,f])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var y=e._dashLength||(e.lineWidth||1)*("dashed"===e.lineType?5:1);e._dashLength=y;var v=e.lineWidth||1,m=v,_=v,b=v,S=v;"dashot"===e.lineType&&(m*=4,_*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,S+=v)),"longdashdot"===e.lineType&&(m*=8,_*=4,S*=4,e.lineCap&&"butt"!==e.lineCap&&(m-=v,_+=v,b=1,S+=v)),t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var O=1;O<r.length;O++)d.SUtil.SUtil_dashedLineTo(t,r[O-1][0]+i[0],r[O-1][1]+i[1],r[O][0]+i[0],r[O][1]+i[1],v,[m,_,b,S]);d.SUtil.SUtil_dashedLineTo(t,r[r.length-1][0]+i[0],r[r.length-1][1]+i[1],r[0][0]+i[0],r[0][1]+i[1],v,[m,_,b,S])}}else{t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var C=1;C<r.length;C++)t.lineTo(r[C][0]+i[0],r[C][1]+i[1]);t.lineTo(r[0][0]+i[0],r[0][1]+i[1])}}},{key:"getRect",value:function(t,e){var i;if(e?i=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),i=this.refOriginalPosition),t.__rect)return t.__rect;for(var r,n=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=t.pointList,u=0,c=l.length;u<c;u++)l[u][0]+i[0]<n&&(n=l[u][0]+i[0]),l[u][0]+i[0]>o&&(o=l[u][0]+i[0]),l[u][1]+i[1]<a&&(a=l[u][1]+i[1]),l[u][1]+i[1]>s&&(s=l[u][1]+i[1]);return r="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-r/2),y:Math.round(a-r/2),width:o-n+r,height:s-a+r},t.__rect}}]),e}(h.Shape);e.SmicPolygon=f,u.Zondy.LevelRenderer.SmicPolygon=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureSet=void 0;var r=i(6),n=i(22),o=(i(246),i(390)),a=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.TotalCount=void 0!==e.TotalCount&&null!==e.TotalCount?e.TotalCount:0,this.AttStruct=void 0!==e.AttStruct&&null!==e.AttStruct?e.AttStruct:null,this.SFEleArray=void 0!==e.SFEleArray&&null!==e.SFEleArray?e.SFEleArray:new Array};a.prototype.clear=function(){this.AttStruct=null,this.SFEleArray=new Array},a.prototype.addFeature=function(t){t instanceof Array?this.SFEleArray.concat(t):this.SFEleArray.push(t)},a.prototype.getFeaturesLength=function(){return this.SFEleArray instanceof Array?this.SFEleArray.length:0},a.prototype.getFeatureByIndex=function(t){if(t>=this.getFeaturesLength())return null;var e=this.SFEleArray[t];return e instanceof o.Feature?e:new o.Feature(this.SFEleArray[t])},a.prototype.getAttType=function(t){var e;return null==this.AttStruct?null:null==(e="number"==typeof t?t:this.getAttIndexByAttName(t))?null:this.AttStruct.FldType[e]},a.prototype.getAttIndexByAttName=function(t){if(null==this.AttStruct)return null;if(null==this.AttStruct.FldName)return null;for(var e=this.AttStruct.FldName.length,i=0;i<e;i++)if(this.AttStruct.FldName[i]==t)return i;return null},a.prototype.getAttNameByIndex=function(t){return null==this.AttStruct?null:null==this.AttStruct.FldName?null:this.AttStruct.FldName.length<=t?null:this.AttStruct.FldName[t]},e.FeatureSet=a,r.Zondy.Object.FeatureSet=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttStruct=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.FldNumber=void 0!==e.FldNumber?e.FldNumber:0,this.FldName=void 0!==e.FldName?e.FldName:null,this.FldType=void 0!==e.FldType?e.FldType:null};e.CAttStruct=o,r.Zondy.Object.CAttStruct=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGraphicBase=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(22);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,r.default)(this,t);var i=void 0!==e?e:{};(0,a.extend)(this,i),this.GID=void 0!==i.GID&&null!==i.GID?i.GID:0}return(0,n.default)(t,[{key:"setGID",value:function(t){void 0!==t&&null!==t&&(this.GID=t)}}]),t}();e.FeatureGraphicBase=l,o.Zondy.Object.FeatureGraphicBase=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLineInfo=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.LinStyleID=void 0!==e.LinStyleID&&null!==e.LinStyleID?e.LinStyleID:1,this.LinStyleID2=void 0!==e.LinStyleID2&&null!==e.LinStyleID2?e.LinStyleID2:0,this.LinWidth=void 0!==e.LinWidth&&null!==e.LinWidth?e.LinWidth:1,this.Xscale=void 0!==e.Xscale&&null!==e.Xscale?e.Xscale:1,this.Yscale=void 0!==e.Yscale&&null!==e.Yscale?e.Yscale:1};e.CLineInfo=o,r.Zondy.Object.CLineInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.desInfo=void 0!==i.desInfo?i.desInfo:null,a.attOptType=void 0!==i.attOptType?i.attOptType:1,a.infoOptType=void 0!==i.infoOptType?i.infoOptType:1,a.overType=void 0!==i.overType?i.overType:3,a.tolerance=void 0!==i.tolerance?i.tolerance:1e-4,a.isCleanNode=void 0!==i.isCleanNode&&i.isCleanNode,a.isLabelPnt=void 0!==i.isLabelPnt&&i.isLabelPnt,a.isValidReg=void 0!==i.isValidReg&&i.isValidReg,a}return(0,a.default)(e,t),e}(i(144).AnalysisBase);e.ClipBase=u,s.Zondy.Service.ClipBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPntInfo=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.FillFlg=void 0!==e.FillFlg?e.FillFlg:0,this.Height=void 0!==e.Height?e.Height:0,this.Width=void 0!==e.Width?e.Width:0,this.OutClr=void 0!==e.OutClr?e.OutClr:[0,0,0],this.SymID=void 0!==e.SymID?e.SymID:0,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CPntInfo=o,r.Zondy.Object.Theme.CPntInfo=o},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(50),o=i(28),a=i(24),s=i(3),l=i(10),u=i(71),c=i.n(u),h=i(1),d=i(57),p=i(21),f=i(229),g=i(261),y=i(60),v=function(t){function e(e){t.call(this,e),this.declutterTree_=e.getDeclutter()?c()(9,void 0):null,this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(h.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.context=Object(a.createCanvasContext2D)(),Object(s.listen)(p.labelCache,l.default.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(s.unlisten)(p.labelCache,l.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.compose=function(t,e,i){var r=e.extent,n=e.pixelRatio,a=i.managed?e.skippedFeatureUids:{},s=e.viewState,l=s.projection,u=s.rotation,c=l.getExtent(),f=this.getLayer().getSource(),g=this.getTransform(e,0),y=i.extent,v=void 0!==y;v&&this.clip(t,e,y);var m=this.replayGroup_;if(m&&!m.isEmpty()){this.declutterTree_&&this.declutterTree_.clear();var _,b=this.getLayer(),S=0,O=0,C=1!==i.opacity,T=b.hasListener(d.a.RENDER);if(C||T){var x=t.canvas.width,E=t.canvas.height;if(u){var P=Math.round(Math.sqrt(x*x+E*E));S=(P-x)/2,O=(P-E)/2,x=E=P}this.context.canvas.width=x,this.context.canvas.height=E,_=this.context}else _=t;var j=_.globalAlpha;C||(_.globalAlpha=i.opacity),_!=t&&_.translate(S,O);var R=e.viewHints,I=!(R[o.default.ANIMATING]||R[o.default.INTERACTING]),L=e.size[0]*n,w=e.size[1]*n;if(Object(p.rotateAtOffset)(_,-u,L/2,w/2),m.replay(_,g,u,a,I),f.getWrapX()&&l.canWrapX()&&!Object(h.containsExtent)(c,r)){for(var A,M=r[0],F=Object(h.getWidth)(c),k=0;M<c[0];)A=F*--k,g=this.getTransform(e,A),m.replay(_,g,u,a,I),M+=F;for(k=0,M=r[2];M>c[2];)A=F*++k,g=this.getTransform(e,A),m.replay(_,g,u,a,I),M-=F}if(Object(p.rotateAtOffset)(_,u,L/2,w/2),T&&this.dispatchRenderEvent(_,e,g),_!=t){if(C){var N=t.globalAlpha;t.globalAlpha=i.opacity,t.drawImage(_.canvas,-S,-O),t.globalAlpha=N}else t.drawImage(_.canvas,-S,-O);_.translate(-S,-O)}C||(_.globalAlpha=j)}v&&t.restore()},e.prototype.composeFrame=function(t,e,i){var r=this.getTransform(t,0);this.preCompose(i,t,r),this.compose(i,t,e),this.postCompose(i,t,e,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,o){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,i,{},function(t){var e=Object(r.getUid)(t);if(!(e in u))return u[e]=!0,n.call(o,t,l)},null)}},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e){var i=this.getLayer(),r=i.getSource(),n=t.viewHints[o.default.ANIMATING],a=t.viewHints[o.default.INTERACTING],s=i.getUpdateWhileAnimating(),l=i.getUpdateWhileInteracting();if(!this.dirty_&&!s&&n||!l&&a)return!0;var u=t.extent,c=t.viewState,d=c.projection,p=c.resolution,g=t.pixelRatio,v=i.getRevision(),m=i.getRenderBuffer(),_=i.getRenderOrder();void 0===_&&(_=y.a);var b=Object(h.buffer)(u,m*p),S=c.projection.getExtent();if(r.getWrapX()&&c.projection.canWrapX()&&!Object(h.containsExtent)(S,t.extent)){var O=Object(h.getWidth)(S),C=Math.max(Object(h.getWidth)(b)/2,O);b[0]=S[0]-C,b[2]=S[2]+C}if(!this.dirty_&&this.renderedResolution_==p&&this.renderedRevision_==v&&this.renderedRenderOrder_==_&&Object(h.containsExtent)(this.renderedExtent_,b))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var T=new f.a(Object(y.c)(p,g),b,p,g,r.getOverlaps(),this.declutterTree_,i.getRenderBuffer());r.loadFeatures(b,p,d);var x=function(t){var e,r=t.getStyleFunction()||i.getStyleFunction();if(r&&(e=r(t,p)),e){var n=this.renderFeature(t,p,g,e,T);this.dirty_=this.dirty_||n}}.bind(this);if(_){var E=[];r.forEachFeatureInExtent(b,function(t){E.push(t)}),E.sort(_);for(var P=0,j=E.length;P<j;++P)x(E[P])}else r.forEachFeatureInExtent(b,x);return T.finish(),this.renderedResolution_=p,this.renderedRevision_=v,this.renderedRenderOrder_=_,this.renderedExtent_=b,this.replayGroup_=T,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=Object(y.d)(n,t,r[a],Object(y.b)(e,i),this.handleStyleImageChange_,this)||o;else o=Object(y.d)(n,t,r,Object(y.b)(e,i),this.handleStyleImageChange_,this);return o},e}(g.a);v.handles=function(t){return t.getType()===n.a.VECTOR},v.create=function(t,e){return new v(e)},e.default=v},function(t,e,i){"use strict";var r=i(42),n=i(31),o=i(115),a=i(3),s=i(106),l=i(61),u=i(230),c=function(t){function e(e,i){t.call(this),this.map_=e,this.clickTimeoutId_,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=i?i*r.DEVICE_PIXEL_RATIO:r.DEVICE_PIXEL_RATIO,this.down_=null;var n=this.map_.getViewport();this.activePointers_=0,this.trackedTouches_={},this.pointerEventHandler_=new u.a(n),this.documentPointerEventHandler_=null,this.pointerdownListenerKey_=Object(a.listen)(this.pointerEventHandler_,l.a.POINTERDOWN,this.handlePointerDown_,this),this.relayedListenerKey_=Object(a.listen)(this.pointerEventHandler_,l.a.POINTERMOVE,this.relayEvent_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.emulateClick_=function(t){var e=new o.default(n.default.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new o.default(n.default.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new o.default(n.default.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==n.default.POINTERUP||e.type==n.default.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==n.default.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new o.default(n.default.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null,this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new o.default(n.default.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&(this.documentPointerEventHandler_=new u.a(document),this.dragListenerKeys_.push(Object(a.listen)(this.documentPointerEventHandler_,n.default.POINTERMOVE,this.handlePointerMove_,this),Object(a.listen)(this.documentPointerEventHandler_,n.default.POINTERUP,this.handlePointerUp_,this),Object(a.listen)(this.pointerEventHandler_,n.default.POINTERCANCEL,this.handlePointerUp_,this)))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new o.default(n.default.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}t.preventDefault()},e.prototype.relayEvent_=function(t){var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new o.default(t.type,this.map_,t,e))},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(Object(a.unlistenByKey)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.pointerdownListenerKey_&&(Object(a.unlistenByKey)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(a.unlistenByKey),this.dragListenerKeys_.length=0,this.documentPointerEventHandler_&&(this.documentPointerEventHandler_.dispose(),this.documentPointerEventHandler_=null),this.pointerEventHandler_&&(this.pointerEventHandler_.dispose(),this.pointerEventHandler_=null),t.prototype.disposeInternal.call(this)},e}(s.a);e.a=c},function(t,e,i){"use strict";function r(t,e,i,r,n,o){for(var a,s=[t[e],t[e+1]],l=[];e+r<i;e+=r){if(l[0]=t[e+r],l[1]=t[e+r+1],a=n.call(o,s,l))return a;s[0]=l[0],s[1]=l[1]}return!1}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";e.a={POINT:"point",LINE:"line"}},function(t,e,i){"use strict";function r(t,e,i,r){for(var n=t[e],o=t[e+1],a=0,s=e+r;s<i;s+=r){var l=t[s],u=t[s+1];a+=Math.sqrt((l-n)*(l-n)+(u-o)*(u-o)),n=l,o=u}return a}i.d(e,"a",function(){return r})},function(t,e,i){"use strict";i.r(e);var r=i(1),n=i(5),o=i(76),a=i(87),s=function(t){function e(e,i,r){if(t.call(this),void 0!==r&&void 0===i)this.setFlatCoordinates(r,e);else{var n=i||0;this.setCenterAndRadius(e,n,r)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,r){var n=this.flatCoordinates,o=t-n[0],a=e-n[1],s=o*o+a*a;if(s<r){if(0===s)for(var l=0;l<this.stride;++l)i[l]=n[l];else{var u=this.getRadius()/Math.sqrt(s);i[0]=n[0]+u*o,i[1]=n[1]+u*a;for(var c=2;c<this.stride;++c)i[c]=n[c]}return i.length=this.stride,s}return r},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,r=t-i[0],n=e-i[1];return r*r+n*n<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(r.createOrUpdate)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return n.default.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(r.intersects)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]||Object(r.forEachCorner)(t,this.intersectsCoordinate,this)}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(var n=1;n<e;++n)r[e+n]=t[n];this.setFlatCoordinates(this.layout,r),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var r=this.flatCoordinates,n=Object(a.deflateCoordinate)(r,0,t,this.stride);r[n++]=r[0]+e;for(var o=1,s=this.stride;o<s;++o)r[n++]=r[o];r.length=n,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(o.default);s.prototype.transform,e.default=s},function(t,e,i){"use strict";e.a={IMAGE:"image",VECTOR:"vector"}},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e){var i=e||{};t.call(this,{points:1/0,fill:i.fill,radius:i.radius,stroke:i.stroke,atlasManager:i.atlasManager})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render_(this.atlasManager_)},e}(i(325).default);e.default=r},function(t,e,i){"use strict";i.d(e,"a",function(){return n});var r=i(1);function n(t,e,i,n){for(var o=[],a=Object(r.createEmpty)(),s=0,l=i.length;s<l;++s){var u=i[s];a=Object(r.createOrUpdateFromFlatCoordinates)(t,e,u[0],n),o.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=u[u.length-1]}return o}},function(t,e,i){"use strict";var r=i(4),n=i(26),o=i(24),a=i(1),s=i(261),l=i(17),u=function(t){function e(e){t.call(this,e),this.coordinateToCanvasPixelTransform=Object(l.c)(),this.hitCanvasContext_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.preCompose(i,t);var r=this.getImage();if(r){var n=e.extent,o=void 0!==n&&!Object(a.containsExtent)(n,t.extent)&&Object(a.intersects)(n,t.extent);o&&this.clip(i,t,n);var s=this.getImageTransform(),l=i.globalAlpha;i.globalAlpha=e.opacity;var u=s[4],c=s[5],h=r.width*s[0],d=r.height*s[3];h>=.5&&d>=.5&&i.drawImage(r,0,0,+r.width,+r.height,Math.round(u),Math.round(c),Math.round(h),Math.round(d)),i.globalAlpha=l,o&&i.restore()}this.postCompose(i,t,e)},e.prototype.getImage=function(){return Object(r.abstract)()},e.prototype.getImageTransform=function(){return Object(r.abstract)()},e.prototype.forEachLayerAtCoordinate=function(t,e,i,r,a){if(this.getImage()){var s=Object(l.a)(this.coordinateToCanvasPixelTransform,t.slice());Object(n.scale)(s,e.viewState.resolution/this.renderedResolution),this.hitCanvasContext_||(this.hitCanvasContext_=Object(o.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.getImage(),s[0],s[1],1,1,0,0,1,1);var u=this.hitCanvasContext_.getImageData(0,0,1,1).data;return u[3]>0?r.call(a,this.getLayer(),u):void 0}},e}(s.a);e.a=u},function(t,e,i){"use strict";var r=i(4),n=i(1),o=i(29),a=i(162),s=i(57),l=i(21),u=i(175),c=i(262),h=i(17),d=function(t){function e(e){t.call(this,e),this.renderedResolution,this.transform_=Object(h.c)()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clip=function(t,e,i){var r=e.pixelRatio,o=e.size[0]*r,a=e.size[1]*r,s=e.viewState.rotation,u=Object(n.getTopLeft)(i),c=Object(n.getTopRight)(i),d=Object(n.getBottomRight)(i),p=Object(n.getBottomLeft)(i);Object(h.a)(e.coordinateToPixelTransform,u),Object(h.a)(e.coordinateToPixelTransform,c),Object(h.a)(e.coordinateToPixelTransform,d),Object(h.a)(e.coordinateToPixelTransform,p),t.save(),Object(l.rotateAtOffset)(t,-s,o/2,a/2),t.beginPath(),t.moveTo(u[0]*r,u[1]*r),t.lineTo(c[0]*r,c[1]*r),t.lineTo(d[0]*r,d[1]*r),t.lineTo(p[0]*r,p[1]*r),t.clip(),Object(l.rotateAtOffset)(t,s,o/2,a/2)},e.prototype.dispatchComposeEvent_=function(t,e,i,r){var n=this.getLayer();if(n.hasListener(t)){var o=i.size[0]*i.pixelRatio,s=i.size[1]*i.pixelRatio,c=i.viewState.rotation;Object(l.rotateAtOffset)(e,-c,o/2,s/2);var h=void 0!==r?r:this.getTransform(i,0),d=new u.default(e,i.pixelRatio,i.extent,h,i.viewState.rotation),p=new a.a(t,d,i,e,null);n.dispatchEvent(p),Object(l.rotateAtOffset)(e,c,o/2,s/2)}},e.prototype.forEachLayerAtCoordinate=function(t,e,i,r,n){return this.forEachFeatureAtCoordinate(t,e,i,o.b)?r.call(n,this.getLayer(),null):void 0},e.prototype.postCompose=function(t,e,i,r){this.dispatchComposeEvent_(s.a.POSTCOMPOSE,t,e,r)},e.prototype.preCompose=function(t,e,i){this.dispatchComposeEvent_(s.a.PRECOMPOSE,t,e,i)},e.prototype.dispatchRenderEvent=function(t,e,i){this.dispatchComposeEvent_(s.a.RENDER,t,e,i)},e.prototype.getTransform=function(t,e){var i=t.viewState,r=t.pixelRatio,n=r*t.size[0]/2,o=r*t.size[1]/2,a=r/i.resolution,s=-a,l=-i.rotation,u=-i.center[0]+e,c=-i.center[1];return Object(h.b)(this.transform_,n,o,a,s,l,u,c)},e.prototype.composeFrame=function(t,e,i){Object(r.abstract)()},e.prototype.prepareFrame=function(t,e){return Object(r.abstract)()},e}(c.a);e.a=d},function(t,e,i){"use strict";var r=i(4),n=i(27),o=i(155),a=i(16),s=i(3),l=i(10),u=i(43),c=function(t){function e(e){t.call(this),this.layer_=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLoadedTileFinder=function(t,e,i){return function(r,n){return t.forEachLoadedTile(e,r,n,function(t){i[r]||(i[r]={}),i[r][t.tileCoord.toString()]=t})}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r){},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleImageChange_=function(t){t.target.getState()===n.a.LOADED&&this.renderIfReadyAndVisible()},e.prototype.hasFeatureAtCoordinate=function(t,e){return!1},e.prototype.loadImage=function(t){var e=t.getState();return e!=n.a.LOADED&&e!=n.a.ERROR&&Object(s.listen)(t,l.default.CHANGE,this.handleImageChange_,this),e==n.a.IDLE&&(t.load(),e=t.getState()),e==n.a.LOADED},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==u.a.READY&&this.changed()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var i=function(t,e,i){var n=Object(r.getUid)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}},e.prototype.updateUsedTiles=function(t,e,i,n){var o=Object(r.getUid)(e),a=i.toString();o in t?a in t[o]?t[o][a].extend(n):t[o][a]=n:(t[o]={},t[o][a]=n)},e.prototype.manageTilePyramid=function(t,e,i,n,o,s,l,u,c,h){var d=Object(r.getUid)(e);d in t.wantedTiles||(t.wantedTiles[d]={});var p,f,g,y,v,m,_=t.wantedTiles[d],b=t.tileQueue;for(m=i.getMinZoom();m<=l;++m)for(f=i.getTileRangeForExtentAndZ(s,m,f),g=i.getResolution(m),y=f.minX;y<=f.maxX;++y)for(v=f.minY;v<=f.maxY;++v)l-m<=u?((p=e.getTile(m,y,v,n,o)).getState()==a.default.IDLE&&(_[p.getKey()]=!0,b.isKeyQueued(p.getKey())||b.enqueue([p,d,i.getTileCoordCenter(p.tileCoord),g])),void 0!==c&&c.call(h,p)):e.useTile(m,y,v,o)},e}(o.default);e.a=c},function(t,e,i){"use strict";var r=i(4),n=function(){};n.prototype.getReplay=function(t,e){return Object(r.abstract)()},n.prototype.isEmpty=function(){return Object(r.abstract)()},n.prototype.addDeclutter=function(t){return Object(r.abstract)()},e.a=n},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(1),o=i(5),a=i(259),s=i(65),l=i(64),u=i(9),c=i(52),h=i(17),d=Object(h.c)(),p=function(t,e,i,r,n){this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r};p.prototype.get=function(t){return this.properties_[t]},p.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===o.default.POINT?Object(n.createOrUpdateFromCoordinate)(this.flatCoordinates_):Object(n.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},p.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Object(n.getCenter)(this.getExtent());this.flatInteriorPoints_=Object(s.a)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},p.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Object(a.a)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=Object(s.b)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},p.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Object(l.a)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},p.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,i=this.ends_,n=0,o=i.length;n<o;++n){var a=i[n],s=Object(l.a)(t,e,a,2,.5);Object(r.c)(this.flatMidpoints_,s),e=a}}return this.flatMidpoints_},p.prototype.getId=function(){return this.id_},p.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},p.prototype.getGeometry=function(){return this},p.prototype.getSimplifiedGeometry=function(t){return this},p.prototype.getProperties=function(){return this.properties_},p.prototype.getStride=function(){return 2},p.prototype.getStyleFunction=function(){},p.prototype.getType=function(){return this.type_},p.prototype.transform=function(t,e){var i=(t=Object(u.get)(t)).getExtent(),r=t.getWorldExtent(),o=Object(n.getHeight)(r)/Object(n.getHeight)(i);Object(h.b)(d,r[0],r[3],o,-o,0,0,0),Object(c.c)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,d,this.flatCoordinates_)},p.prototype.getEnds=p.prototype.getEndss=function(){return this.ends_},p.prototype.getFlatCoordinates=p.prototype.getOrientedFlatCoordinates,e.default=p},function(t,e,i){"use strict";var r=i(23),n=function(t){function e(e,i){t.call(this,e),this.conditions=i,Object(r.a)(this.conditions.length>=2,57)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(135).a);e.a=n},function(t,e,i){"use strict";var r=i(1),n=i(19),o=i(9),a=function(t,e,i,n,a){this.sourceProj_=t,this.targetProj_=e;var s={},l=Object(o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return s[e]||(s[e]=l(t)),s[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Object(r.getWidth)(n)==Object(r.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Object(r.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Object(r.getWidth)(this.targetProj_.getExtent()):null;var u=Object(r.getTopLeft)(i),c=Object(r.getTopRight)(i),h=Object(r.getBottomRight)(i),d=Object(r.getBottomLeft)(i),p=this.transformInv_(u),f=this.transformInv_(c),g=this.transformInv_(h),y=this.transformInv_(d);if(this.addQuad_(u,c,h,d,p,f,g,y,10),this.wrapsXInSource_){var v=1/0;this.triangles_.forEach(function(t,e,i){v=Math.min(v,t.source[0][0],t.source[1][0],t.source[2][0])}),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-v>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-v>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-v>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-v>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var i=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-i<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}s={}};a.prototype.addTriangle_=function(t,e,i,r,n,o){this.triangles_.push({source:[r,n,o],target:[t,e,i]})},a.prototype.addQuad_=function(t,e,i,o,a,s,l,u,c){var h=Object(r.boundingExtent)([a,s,l,u]),d=this.sourceWorldWidth_?Object(r.getWidth)(h)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var y=Object(r.boundingExtent)([t,e,i,o]);g=Object(r.getWidth)(y)/this.targetWorldWidth_>.25||g}!f&&this.sourceProj_.isGlobal()&&d&&(g=d>.25||g)}if(g||!this.maxSourceExtent_||Object(r.intersects)(h,this.maxSourceExtent_)){if(!(g||isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(u[0])&&isFinite(u[1]))){if(!(c>0))return;g=!0}if(c>0){if(!g){var v,m=[(t[0]+i[0])/2,(t[1]+i[1])/2],_=this.transformInv_(m);v=f?(Object(n.d)(a[0],p)+Object(n.d)(l[0],p))/2-Object(n.d)(_[0],p):(a[0]+l[0])/2-_[0];var b=(a[1]+l[1])/2-_[1];g=v*v+b*b>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){var S=[(e[0]+i[0])/2,(e[1]+i[1])/2],O=this.transformInv_(S),C=[(o[0]+t[0])/2,(o[1]+t[1])/2],T=this.transformInv_(C);this.addQuad_(t,e,S,C,a,s,O,T,c-1),this.addQuad_(C,S,i,o,T,O,l,u,c-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],E=this.transformInv_(x),P=[(i[0]+o[0])/2,(i[1]+o[1])/2],j=this.transformInv_(P);this.addQuad_(t,x,P,o,a,E,j,u,c-1),this.addQuad_(x,e,i,P,E,s,l,j,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,i,o,a,l,u),this.addTriangle_(t,e,i,a,s,l)}},a.prototype.calculateSourceExtent=function(){var t=Object(r.createEmpty)();return this.triangles_.forEach(function(e,i,n){var o=e.source;Object(r.extendCoordinate)(t,o[0]),Object(r.extendCoordinate)(t,o[1]),Object(r.extendCoordinate)(t,o[2])}),t},a.prototype.getTriangles=function(){return this.triangles_},e.a=a},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e){t.call(this,"And",Array.prototype.slice.call(arguments))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(265).a),n=i(331),o=i(332),a=i(344),s=i(335),l=i(339),u=i(340),c=i(333),h=i(342),d=i(343),p=i(341),f=i(337),g=i(338),y=i(330),v=i(336),m=i(329),_=i(334);function b(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(r,e))}function S(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(m.default,e))}function O(t){return new y.default(t)}function C(t,e,i){return new n.default(t,e,i)}function T(t,e,i){return new o.default(t,e,i)}function x(t,e,i){return new c.default(t,e,i)}function E(t,e,i){return new _.default(t,e,i)}function P(t,e,i){return new s.default(t,e,i)}function j(t,e,i){return new v.default(t,e,i)}function R(t,e){return new f.default(t,e)}function I(t,e){return new g.default(t,e)}function L(t,e){return new l.default(t,e)}function w(t,e){return new u.default(t,e)}function A(t){return new p.default(t)}function M(t,e,i){return new h.default(t,e,i)}function F(t,e,i,r,n,o){return new d.default(t,e,i,r,n,o)}function k(t,e,i){return new a.default(t,e,i)}i.d(e,"and",function(){return b}),i.d(e,"or",function(){return S}),i.d(e,"not",function(){return O}),i.d(e,"bbox",function(){return C}),i.d(e,"contains",function(){return T}),i.d(e,"intersects",function(){return x}),i.d(e,"within",function(){return E}),i.d(e,"equalTo",function(){return P}),i.d(e,"notEqualTo",function(){return j}),i.d(e,"lessThan",function(){return R}),i.d(e,"lessThanOrEqualTo",function(){return I}),i.d(e,"greaterThan",function(){return L}),i.d(e,"greaterThanOrEqualTo",function(){return w}),i.d(e,"isNull",function(){return A}),i.d(e,"between",function(){return M}),i.d(e,"like",function(){return F}),i.d(e,"during",function(){return k})},function(t,e,i){"use strict";i.r(e);var r=i(25),n=i(3),o=i(35),a=i(10),s=i(34),l=i(42),u=i(19),c=i(9),h={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},d=function(t){function e(e){t.call(this,a.default.ERROR),this.code=e.code,this.message=e.message}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default),p=function(t){function e(e){t.call(this);var i=e||{};this.position_=null,this.transform_=c.identityTransform,this.watchId_=void 0,Object(n.listen)(this,Object(r.getChangeEventType)(h.PROJECTION),this.handleProjectionChanged_,this),Object(n.listen)(this,Object(r.getChangeEventType)(h.TRACKING),this.handleTrackingChanged_,this),void 0!==i.projection&&this.setProjection(i.projection),void 0!==i.trackingOptions&&this.setTrackingOptions(i.trackingOptions),this.setTracking(void 0!==i.tracking&&i.tracking)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Object(c.getTransformFromProjections)(Object(c.get)("EPSG:4326"),t),this.position_&&this.set(h.POSITION,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if(l.GEOLOCATION){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(h.ACCURACY,e.accuracy),this.set(h.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(h.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(h.HEADING,null===e.heading?void 0:Object(u.j)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(h.POSITION,i),this.set(h.SPEED,null===e.speed?void 0:e.speed);var r=Object(s.circular)(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(h.ACCURACY_GEOMETRY,r),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new d(t))},e.prototype.getAccuracy=function(){return this.get(h.ACCURACY)},e.prototype.getAccuracyGeometry=function(){return this.get(h.ACCURACY_GEOMETRY)||null},e.prototype.getAltitude=function(){return this.get(h.ALTITUDE)},e.prototype.getAltitudeAccuracy=function(){return this.get(h.ALTITUDE_ACCURACY)},e.prototype.getHeading=function(){return this.get(h.HEADING)},e.prototype.getPosition=function(){return this.get(h.POSITION)},e.prototype.getProjection=function(){return this.get(h.PROJECTION)},e.prototype.getSpeed=function(){return this.get(h.SPEED)},e.prototype.getTracking=function(){return this.get(h.TRACKING)},e.prototype.getTrackingOptions=function(){return this.get(h.TRACKING_OPTIONS)},e.prototype.setProjection=function(t){this.set(h.PROJECTION,Object(c.get)(t))},e.prototype.setTracking=function(t){this.set(h.TRACKING,t)},e.prototype.setTrackingOptions=function(t){this.set(h.TRACKING_OPTIONS,t)},e}(r.default);e.default=p},function(t,e,i){"use strict";i.r(e);var r=i(29),n=i(3),o=i(35),a=i(10),s=i(41),l=i(9),u=function(t){function e(e,i,r,n){t.call(this,e),this.features=r,this.file=i,this.projection=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(o.default),c=function(t){function e(e){var i=e||{};t.call(this,{handleEvent:r.b}),this.formatConstructors_=i.formatConstructors?i.formatConstructors:[],this.projection_=i.projection?Object(l.get)(i.projection):null,this.dropListenKeys_=null,this.source_=i.source||null,this.target=i.target?i.target:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleResult_=function(t,e){var i=e.target.result,r=this.getMap(),n=this.projection_;n||(n=r.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,l=o.length;s<l;++s){var c=new o[s];if((a=this.tryReadFeatures_(c,i,{featureProjection:n}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new u("addfeatures",t,a,n))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[Object(n.listen)(e,a.default.DROP,h,this),Object(n.listen)(e,a.default.DRAGENTER,d,this),Object(n.listen)(e,a.default.DRAGOVER,d,this),Object(n.listen)(e,a.default.DROP,d,this)]}},e.prototype.setActive=function(e){t.prototype.setActive.call(this,e),e?this.registerListeners_():this.unregisterListeners_()},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,i){try{return t.readFeatures(e,i)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(n.unlistenByKey),this.dropListenKeys_=null)},e}(s.default);function h(t){for(var e=t.dataTransfer.files,i=0,r=e.length;i<r;++i){var n=e.item(i),o=new FileReader;o.addEventListener(a.default.LOAD,this.handleResult_.bind(this,n)),o.readAsText(n)}}function d(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(124),n=i(28),o=i(32),a=i(41),s=function(t){function e(e){var i=e||{};t.call(this,i),this.condition_=i.condition?i.condition:o.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==i.duration?i.duration:400}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDragEvent=function(t){if(Object(o.mouseOnly)(t)){var e=t.map,i=e.getSize(),n=t.pixel,s=n[0]-i[0]/2,l=i[1]/2-n[1],u=Math.atan2(l,s),c=Math.sqrt(s*s+l*l),h=e.getView();if(h.getConstraints().rotation!==r.c&&void 0!==this.lastAngle_){var d=u-this.lastAngle_;Object(a.rotateWithoutConstraints)(h,h.getRotation()-d)}if(this.lastAngle_=u,void 0!==this.lastMagnitude_){var p=this.lastMagnitude_*(h.getResolution()/c);Object(a.zoomWithoutConstraints)(h,p)}void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/c),this.lastMagnitude_=c}},e.prototype.handleUpEvent=function(t){if(!Object(o.mouseOnly)(t))return!0;var e=t.map.getView();e.setHint(n.default.INTERACTING,-1);var i=this.lastScaleDelta_-1;return Object(a.rotate)(e,e.getRotation()),Object(a.zoom)(e,e.getResolution(),void 0,this.duration_,i),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!Object(o.mouseOnly)(t)&&!!this.condition_(t)&&(t.map.getView().setHint(n.default.INTERACTING,1),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(i(47).default);e.default=s},function(t,e,i){"use strict";i.r(e),i.d(e,"createRegularPolygon",function(){return w}),i.d(e,"createBox",function(){return A});var r=i(10),n=i(36),o=i(31),a=i(115),s=i(25),l=i(26),u=i(3),c=i(35),h=i(32),d=i(1),p=i(29),f=i(256),g=i(5),y=i(39),v=i(54),m=i(82),_=i(88),b=i(164),S=i(38),O=i(34),C=i(47),T=i(67),x=i(100),E=i(114),P=i(84),j={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},R="drawstart",I=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(c.default),L=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=p.a),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===g.default.POINT||t===g.default.MULTI_POINT?e=j.POINT:t===g.default.LINE_STRING||t===g.default.MULTI_LINE_STRING?e=j.LINE_STRING:t===g.default.POLYGON||t===g.default.MULTI_POLYGON?e=j.POLYGON:t===g.default.CIRCLE&&(e=j.CIRCLE),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===j.POLYGON?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:p.b;var r=e.geometryFunction;if(!r)if(this.type_===g.default.CIRCLE)r=function(t,e){var i=e||new f.default([NaN,NaN]),r=Object(l.squaredDistance)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(r)),i};else{var n,o=this.mode_;o===j.POINT?n=S.default:o===j.LINE_STRING?n=y.default:o===j.POLYGON&&(n=O.default),r=function(t,e){var i=e;return i?o===j.POLYGON?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new n(t),i}}this.geometryFunction_=r,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new x.default({source:new E.default({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:function(){var t=Object(P.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:h.noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=h.always:this.freehandCondition_=e.freehandCondition?e.freehandCondition:h.shiftKeyOnly,Object(u.listen)(this,Object(s.getChangeEventType)(T.a.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===r.default.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==j.POINT&&this.freehandCondition_(e);var i=e.type===o.default.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===o.default.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===o.default.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),n=!1):this.freehand_&&e.type===o.default.POINTERDOWN?n=!1:i?(n=e.type===o.default.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):(e.pointerEvent.pointerType==b.b||e.type===o.default.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===o.default.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.default(o.default.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===j.CIRCLE;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===j.POINT&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,r=e[0]-i[0],n=e[1]-i[1],o=r*r+n*n;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,r=[this.finishCoordinate_];if(this.mode_===j.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===j.POLYGON){var n=this.sketchCoords_;i=n[0].length>this.minPoints_,r=[n[0][0],n[0][n[0].length-2]]}if(i)for(var o=t.map,a=0,s=r.length;a<s;a++){var l=r[a],u=o.getPixelFromCoordinate(l),c=t.pixel,h=c[0]-u[0],d=c[1]-u[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+d*d)<=p){this.finishCoordinate_=l;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new n.default(new S.default(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===j.POINT?this.sketchCoords_=e.slice():this.mode_===j.POLYGON?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new n.default(new y.default(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new n.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new I(R,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r,o=t.coordinate,a=this.sketchFeature_.getGeometry();if(this.mode_===j.POINT?i=this.sketchCoords_:this.mode_===j.POLYGON?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(o=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=o[0],i[1]=o[1],this.geometryFunction_(this.sketchCoords_,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(o),a.getType()==g.default.POLYGON&&this.mode_!==j.POLYGON){this.sketchLine_||(this.sketchLine_=new n.default);var s=a.getLinearRing(0);(r=this.sketchLine_.getGeometry())?(r.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),r.changed()):(r=new y.default(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(r))}else this.sketchLineCoords_&&(r=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,r=t.coordinate,n=this.sketchFeature_.getGeometry();this.mode_===j.LINE_STRING?(this.finishCoordinate_=r.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),this.geometryFunction_(i,n)):this.mode_===j.POLYGON&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(r.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===j.LINE_STRING?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===j.POLYGON&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===j.LINE_STRING?(e.pop(),this.geometryFunction_(e,i)):this.mode_===j.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===g.default.MULTI_POINT?t.setGeometry(new m.default([e])):this.type_===g.default.MULTI_LINE_STRING?t.setGeometry(new v.default([e])):this.type_===g.default.MULTI_POLYGON&&t.setGeometry(new _.default([e])),this.dispatchEvent(new I("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new I(R,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(C.default);function w(t,e){return function(i,r){var n=i[0],o=i[1],a=Math.sqrt(Object(l.squaredDistance)(n,o)),s=r||Object(O.fromCircle)(new f.default(n),t),u=e;if(!e){var c=o[0]-n[0],h=o[1]-n[1];u=Math.atan(h/c)-(c<0?Math.PI:0)}return Object(O.makeRegular)(s,n,a,u),s}}function A(){return function(t,e){var i=Object(d.boundingExtent)(t),r=[[Object(d.getBottomLeft)(i),Object(d.getBottomRight)(i),Object(d.getTopRight)(i),Object(d.getTopLeft)(i),Object(d.getBottomLeft)(i)]],n=e;return n?n.setCoordinates(r):n=new O.default(r),n}}e.default=L},function(t,e,i){"use strict";i.r(e);var r=i(36),n=i(31),o=i(26),a=i(35),s=i(1),l=i(5),u=i(38),c=i(34),h=i(47),d=i(100),p=i(114),f=i(84),g={EXTENTCHANGED:"extentchanged"},y=function(t){function e(e){t.call(this,g.EXTENTCHANGED),this.extent=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),v=function(t){function e(e){var i=e||{};t.call(this,i),this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,e||(e={}),this.extentOverlay_=new d.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:function(){var t=Object(f.createEditingStyle)();return function(e,i){return t[l.default.POLYGON]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new d.default({source:new p.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:function(){var t=Object(f.createEditingStyle)();return function(e,i){return t[l.default.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&this.setExtent(e.extent)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.snapToVertex_=function(t,e){var i=e.getCoordinateFromPixel(t),r=this.getExtent();if(r){var n=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);n.sort(function(t,e){return Object(o.squaredDistanceToSegment)(i,t)-Object(o.squaredDistanceToSegment)(i,e)});var a=n[0],s=Object(o.closestOnSegment)(i,a),l=e.getPixelFromCoordinate(s);if(Object(o.distance)(t,l)<=this.pixelTolerance_){var u=e.getPixelFromCoordinate(a[0]),c=e.getPixelFromCoordinate(a[1]),h=Object(o.squaredDistance)(l,u),d=Object(o.squaredDistance)(l,c),p=Math.sqrt(Math.min(h,d));return this.snappedToVertex_=p<=this.pixelTolerance_,this.snappedToVertex_&&(s=h>d?a[1]:a[0]),s}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,i=t.map,r=this.snapToVertex_(e,i);r||(r=i.getCoordinateFromPixel(e)),this.createOrUpdatePointerFeature_(r)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(Object(c.fromExtent)(t)):e.setGeometry(void 0):(e=t?new r.default(Object(c.fromExtent)(t)):new r.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new r.default(new u.default(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=n.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,i=t.map,r=this.getExtent(),n=this.snapToVertex_(e,i),o=function(t){var e=null,i=null;return t[0]==r[0]?e=r[2]:t[0]==r[2]&&(e=r[0]),t[1]==r[1]?i=r[3]:t[1]==r[3]&&(i=r[1]),null!==e&&null!==i?[e,i]:null};if(n&&r){var a=n[0]==r[0]||n[0]==r[2]?n[0]:null,s=n[1]==r[1]||n[1]==r[3]?n[1]:null;null!==a&&null!==s?this.pointerHandler_=m(o(n)):null!==a?this.pointerHandler_=_(o([a,r[1]]),o([a,r[3]])):null!==s&&(this.pointerHandler_=_(o([r[0],s]),o([r[2],s])))}else n=i.getCoordinateFromPixel(e),this.setExtent([n[0],n[1],n[0],n[1]]),this.pointerHandler_=m(n);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtent();return e&&0!==Object(s.getArea)(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new y(this.extent_))},e}(h.default);function m(t){return function(e){return Object(s.boundingExtent)([t,e])}}function _(t,e){return t[0]==e[0]?function(i){return Object(s.boundingExtent)([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return Object(s.boundingExtent)([t,[e[0],i[1]]])}:null}e.default=v},function(t,e,i){"use strict";i.r(e),i.d(e,"ModifyEvent",function(){return x});var r=i(4),n=i(48),o=i(51),a=i(36),s=i(31),l=i(12),u=i(26),c=i(3),h=i(35),d=i(10),p=i(32),f=i(1),g=i(5),y=i(38),v=i(47),m=i(100),_=i(114),b=i(109),S=i(123),O=i(84),C=1,T="modifyend",x=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.mapBrowserEvent=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.default),E=function(t){function e(e){var i;if(t.call(this,e),this.condition_=e.condition?e.condition:p.primaryAction,this.defaultDeleteCondition_=function(t){return Object(p.altKeyOnly)(t)&&Object(p.singleClick)(t)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:p.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.modified_=!1,this.rBush_=new S.default,this.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new m.default({source:new _.default({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:function(){var t=Object(O.createEditingStyle)();return function(e,i){return t[g.default.POINT]}}(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,Circle:this.writeCircleGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_},this.source_=null,e.source?(this.source_=e.source,i=new n.default(this.source_.getFeatures()),Object(c.listen)(this.source_,b.a.ADDFEATURE,this.handleSourceAdd_,this),Object(c.listen)(this.source_,b.a.REMOVEFEATURE,this.handleSourceRemove_,this)):i=e.features,!i)throw new Error("The modify interaction requires features or a source");this.features_=i,this.features_.forEach(this.addFeature_.bind(this)),Object(c.listen)(this.features_,o.default.ADD,this.handleFeatureAdd_,this),Object(c.listen)(this.features_,o.default.REMOVE,this.handleFeatureRemove_,this),this.lastPointerEvent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature_=function(t){var e=t.getGeometry();e&&e.getType()in this.SEGMENT_WRITERS_&&this.SEGMENT_WRITERS_[e.getType()].call(this,t,e);var i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),Object(c.listen)(t,d.default.CHANGE,this.handleFeatureChange_,this)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new x("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),Object(c.unlisten)(t,d.default.CHANGE,this.handleFeatureChange_,this)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach(function(e){t===e.feature&&i.push(e)});for(var r=i.length-1;r>=0;--r)e.remove(i[r])},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],a={feature:t,geometry:e,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),a={feature:t,geometry:e,index:r,segment:o};this.rBush_.insert(Object(f.boundingExtent)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[r],index:a,segment:l};this.rBush_.insert(Object(f.boundingExtent)(l),u)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],a=0,s=o.length-1;a<s;++a){var l=o.slice(a,a+2),u={feature:t,geometry:e,depth:[r],index:a,segment:l};this.rBush_.insert(Object(f.boundingExtent)(l),u)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],a=0,s=o.length;a<s;++a)for(var l=o[a],u=0,c=l.length-1;u<c;++u){var h=l.slice(u,u+2),d={feature:t,geometry:e,depth:[a,r],index:u,segment:h};this.rBush_.insert(Object(f.boundingExtent)(h),d)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),r={feature:t,geometry:e,index:0,segment:[i,i]},n={feature:t,geometry:e,index:C,segment:[i,i]},o=[r,n];r.featureSegments=n.featureSegments=o,this.rBush_.insert(Object(f.createOrUpdateFromCoordinate)(i),r),this.rBush_.insert(e.getExtent(),n)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r)this.SEGMENT_WRITERS_[i[r].getType()].call(this,t,i[r])},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new a.default(new y.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=s.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=s.default.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==s.default.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){for(var n=this.dragSegments_[i],o=n[0],a=o.depth,s=o.geometry,l=void 0,c=o.segment,h=n[1];e.length<s.getStride();)e.push(c[h][e.length]);switch(s.getType()){case g.default.POINT:l=e,c[0]=c[1]=e;break;case g.default.MULTI_POINT:(l=s.getCoordinates())[o.index]=e,c[0]=c[1]=e;break;case g.default.LINE_STRING:(l=s.getCoordinates())[o.index+h]=e,c[h]=e;break;case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(l=s.getCoordinates())[a[0]][o.index+h]=e,c[h]=e;break;case g.default.MULTI_POLYGON:(l=s.getCoordinates())[a[1]][a[0]][o.index+h]=e,c[h]=e;break;case g.default.CIRCLE:c[0]=c[1]=e,0===o.index?(this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1):(this.changingFeature_=!0,s.setRadius(Object(u.distance)(s.getCenter(),e)),this.changingFeature_=!1)}l&&this.setGeometryCoordinates_(s,l)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;this.handlePointerAtPixel_(t.pixel,t.map);var e=t.map.getCoordinateFromPixel(t.pixel);this.dragSegments_.length=0,this.modified_=!1;var i=this.vertexFeature_;if(i){var n=[],o=i.getGeometry().getCoordinates(),a=Object(f.boundingExtent)([o]),s=this.rBush_.getInExtent(a),l={};s.sort(P);for(var c=0,h=s.length;c<h;++c){var d=s[c],p=d.segment,y=Object(r.getUid)(d.feature),v=d.depth;if(v&&(y+="-"+v.join("-")),l[y]||(l[y]=new Array(2)),d.geometry.getType()===g.default.CIRCLE&&d.index===C){var m=R(e,d);Object(u.equals)(m,o)&&!l[y][0]&&(this.dragSegments_.push([d,0]),l[y][0]=d)}else if(Object(u.equals)(p[0],o)&&!l[y][0])this.dragSegments_.push([d,0]),l[y][0]=d;else if(Object(u.equals)(p[1],o)&&!l[y][1]){if((d.geometry.getType()===g.default.LINE_STRING||d.geometry.getType()===g.default.MULTI_LINE_STRING)&&l[y][0]&&0===l[y][0].index)continue;this.dragSegments_.push([d,1]),l[y][1]=d}else this.insertVertexCondition_(t)&&Object(r.getUid)(p)in this.vertexSegments_&&!l[y][0]&&!l[y][1]&&n.push([d,o])}n.length&&this.willModifyFeatures_(t);for(var _=n.length-1;_>=0;--_)this.insertVertex_.apply(this,n[_])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],r=i.geometry;if(r.getType()===g.default.CIRCLE){var n=r.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=o.segment[1]=n,a.segment[0]=a.segment[1]=n,this.rBush_.update(Object(f.createOrUpdateFromCoordinate)(n),o),this.rBush_.update(r.getExtent(),a)}else this.rBush_.update(Object(f.boundingExtent)(i.segment),i)}return this.modified_&&(this.dispatchEvent(new x(T,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map)},e.prototype.handlePointerAtPixel_=function(t,e){var i=e.getCoordinateFromPixel(t),n=Object(f.buffer)(Object(f.createOrUpdateFromCoordinate)(i),e.getView().getResolution()*this.pixelTolerance_),o=this.rBush_.getInExtent(n);if(o.length>0){o.sort(function(t,e){return j(i,t)-j(i,e)});var a=o[0],s=a.segment,l=R(i,a),c=e.getPixelFromCoordinate(l),h=Object(u.distance)(t,c);if(h<=this.pixelTolerance_){var d={};if(a.geometry.getType()===g.default.CIRCLE&&a.index===C)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(l);else{var p=e.getPixelFromCoordinate(s[0]),y=e.getPixelFromCoordinate(s[1]),v=Object(u.squaredDistance)(c,p),m=Object(u.squaredDistance)(c,y);h=Math.sqrt(Math.min(v,m)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(l=v>m?s[1]:s[0]),this.createOrUpdateVertexFeature_(l);for(var _=1,b=o.length;_<b;++_){var S=o[_].segment;if(!(Object(u.equals)(s[0],S[0])&&Object(u.equals)(s[1],S[1])||Object(u.equals)(s[0],S[1])&&Object(u.equals)(s[1],S[0])))break;d[Object(r.getUid)(S)]=!0}}return d[Object(r.getUid)(s)]=!0,void(this.vertexSegments_=d)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var i,r=t.segment,n=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case g.default.MULTI_LINE_STRING:case g.default.POLYGON:(i=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case g.default.MULTI_POLYGON:(i=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case g.default.LINE_STRING:(i=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var l=this.rBush_;l.remove(t),this.updateSegmentIndices_(o,s,a,1);var u={segment:[r[0],e],feature:n,geometry:o,depth:a,index:s};l.insert(Object(f.boundingExtent)(u.segment),u),this.dragSegments_.push([u,1]);var c={segment:[e,r[1]],feature:n,geometry:o,depth:a,index:s+1};l.insert(Object(f.boundingExtent)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s.default.POINTERDRAG){var t=this.lastPointerEvent_;return this.willModifyFeatures_(t),this.removeVertex_(),this.dispatchEvent(new x(T,this.features_,t)),this.modified_=!1,!0}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,o,a,s,l,u,c,h,d=this.dragSegments_,p={},y=!1;for(o=d.length-1;o>=0;--o)c=(i=d[o])[0],h=Object(r.getUid)(c.feature),c.depth&&(h+="-"+c.depth.join("-")),h in p||(p[h]={}),0===i[1]?(p[h].right=c,p[h].index=c.index):1==i[1]&&(p[h].left=c,p[h].index=c.index+1);for(h in p){switch(u=p[h].right,s=p[h].left,l=(a=p[h].index)-1,c=void 0!==s?s:u,l<0&&(l=0),t=e=(n=c.geometry).getCoordinates(),y=!1,n.getType()){case g.default.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(a,1),y=!0);break;case g.default.LINE_STRING:e.length>2&&(e.splice(a,1),y=!0);break;case g.default.MULTI_POLYGON:t=t[c.depth[1]];case g.default.POLYGON:(t=t[c.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),y=!0,0===a&&(t.pop(),t.push(t[0]),l=t.length-1))}if(y){this.setGeometryCoordinates_(n,e);var v=[];if(void 0!==s&&(this.rBush_.remove(s),v.push(s.segment[0])),void 0!==u&&(this.rBush_.remove(u),v.push(u.segment[1])),void 0!==s&&void 0!==u){var m={depth:c.depth,feature:c.feature,geometry:c.geometry,index:l,segment:v};this.rBush_.insert(Object(f.boundingExtent)(m.segment),m)}this.updateSegmentIndices_(n,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),d.length=0}}return y},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,r){this.rBush_.forEachInExtent(t.getExtent(),function(n){n.geometry===t&&(void 0===i||void 0===n.depth||Object(l.b)(n.depth,i))&&n.index>e&&(n.index+=r)})},e}(v.default);function P(t,e){return t.index-e.index}function j(t,e){var i=e.geometry;if(i.getType()===g.default.CIRCLE){var r=i;if(e.index===C){var n=Object(u.squaredDistance)(r.getCenter(),t),o=Math.sqrt(n)-r.getRadius();return o*o}}return Object(u.squaredDistanceToSegment)(t,e.segment)}function R(t,e){var i=e.geometry;return i.getType()===g.default.CIRCLE&&e.index===C?i.getClosestPoint(t):Object(u.closestOnSegment)(t,e.segment)}e.default=E},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(51),o=i(12),a=i(3),s=i(35),l=i(32),u=i(29),c=i(5),h=i(41),d=i(100),p=i(11),f=i(114),g=i(84),y={SELECT:"select"},v=function(t){function e(e,i,r,n){t.call(this,e),this.selected=i,this.deselected=r,this.mapBrowserEvent=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(s.default),m=function(t){function e(e){t.call(this,{handleEvent:_});var i=e||{};this.condition_=i.condition?i.condition:l.singleClick,this.addCondition_=i.addCondition?i.addCondition:l.never,this.removeCondition_=i.removeCondition?i.removeCondition:l.never,this.toggleCondition_=i.toggleCondition?i.toggleCondition:l.shiftKeyOnly,this.multi_=!!i.multi&&i.multi,this.filter_=i.filter?i.filter:u.b,this.hitTolerance_=i.hitTolerance?i.hitTolerance:0;var r,s=new d.default({source:new f.default({useSpatialIndex:!1,features:i.features,wrapX:i.wrapX}),style:i.style?i.style:function(){var t=Object(g.createEditingStyle)();return Object(o.c)(t[c.default.POLYGON],t[c.default.LINE_STRING]),Object(o.c)(t[c.default.GEOMETRY_COLLECTION],t[c.default.LINE_STRING]),function(e,i){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(this.featureOverlay_=s,i.layers)if("function"==typeof i.layers)r=i.layers;else{var h=i.layers;r=function(t){return Object(o.f)(h,t)}}else r=u.b;this.layerFilter_=r,this.featureLayerAssociation_={};var p=this.getFeatures();Object(a.listen)(p,n.default.ADD,this.addFeature_,this),Object(a.listen)(p,n.default.REMOVE,this.removeFeature_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[Object(r.getUid)(t)]=e},e.prototype.getFeatures=function(){return this.featureOverlay_.getSource().getFeaturesCollection()},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[Object(r.getUid)(t)]},e.prototype.getOverlay=function(){return this.featureOverlay_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap(),r=this.getFeatures();i&&r.forEach(i.unskipFeature.bind(i)),t.prototype.setMap.call(this,e),this.featureOverlay_.setMap(e),e&&r.forEach(e.skipFeature.bind(e))},e.prototype.addFeature_=function(t){var e=this.getMap();e&&e.skipFeature(t.element)},e.prototype.removeFeature_=function(t){var e=this.getMap();e&&e.unskipFeature(t.element)},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[Object(r.getUid)(t)]},e}(h.default);function _(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),n=!e&&!i&&!r,a=t.map,s=this.getFeatures(),u=[],c=[];if(n){Object(p.clear)(this.featureLayerAssociation_),a.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return c.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var h=s.getLength()-1;h>=0;--h){var d=s.item(h),f=c.indexOf(d);f>-1?c.splice(f,1):(s.remove(d),u.push(d))}0!==c.length&&s.extend(c)}else{a.forEachFeatureAtPixel(t.pixel,function(t,n){if(this.filter_(t,n))return!e&&!r||Object(o.f)(s.getArray(),t)?(i||r)&&Object(o.f)(s.getArray(),t)&&(u.push(t),this.removeFeatureLayerAssociation_(t)):(c.push(t),this.addFeatureLayerAssociation_(t,n)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var g=u.length-1;g>=0;--g)s.remove(u[g]);s.extend(c)}return(c.length>0||u.length>0)&&this.dispatchEvent(new v(y.SELECT,c,u,t)),Object(l.pointerMove)(t)}e.default=m},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(51),o=i(26),a=i(3),s=i(10),l=i(1),u=i(29),c=i(5),h=i(34),d=i(47),p=i(11),f=i(109),g=i(123);function y(t){return t.feature?t.feature:t.element?t.element:void 0}var v=function(t){function e(e){var i=e||{},r=i;r.handleDownEvent||(r.handleDownEvent=u.b),r.stopDown||(r.stopDown=u.a),t.call(this,r),this.source_=i.source?i.source:null,this.vertex_=void 0===i.vertex||i.vertex,this.edge_=void 0===i.edge||i.edge,this.features_=i.features?i.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelCoordinate_=null,this.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,this.sortByDistance_=function(t,e){return Object(o.squaredDistanceToSegment)(this.pixelCoordinate_,t.segment)-Object(o.squaredDistanceToSegment)(this.pixelCoordinate_,e.segment)}.bind(this),this.rBush_=new g.default,this.SEGMENT_WRITERS_={Point:this.writePointGeometry_,LineString:this.writeLineStringGeometry_,LinearRing:this.writeLineStringGeometry_,Polygon:this.writePolygonGeometry_,MultiPoint:this.writeMultiPointGeometry_,MultiLineString:this.writeMultiLineStringGeometry_,MultiPolygon:this.writeMultiPolygonGeometry_,GeometryCollection:this.writeGeometryCollectionGeometry_,Circle:this.writeCircleGeometry_}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t,e){var i=void 0===e||e,n=Object(r.getUid)(t),o=t.getGeometry();if(o){var u=this.SEGMENT_WRITERS_[o.getType()];u&&(this.indexedFeaturesExtents_[n]=o.getExtent(Object(l.createEmpty)()),u.call(this,t,o))}i&&(this.featureChangeListenerKeys_[n]=Object(a.listen)(t,s.default.CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=y(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=y(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=Object(r.getUid)(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(p.getValues)(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,n=Object(r.getUid)(t),o=this.indexedFeaturesExtents_[n];if(o){var s=this.rBush_,l=[];s.forEachInExtent(o,function(e){t===e.feature&&l.push(e)});for(var u=l.length-1;u>=0;--u)s.remove(l[u])}i&&(Object(a.unlistenByKey)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var i=this.getMap(),r=this.featuresListenerKeys_,o=this.getFeatures_();i&&(r.forEach(a.unlistenByKey),r.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?r.push(Object(a.listen)(this.features_,n.default.ADD,this.handleFeatureAdd_,this),Object(a.listen)(this.features_,n.default.REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(Object(a.listen)(this.source_,f.a.ADDFEATURE,this.handleFeatureAdd_,this),Object(a.listen)(this.source_,f.a.REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var r=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),a=Object(l.boundingExtent)([r,n]),s=this.rBush_.getInExtent(a);this.vertex_&&!this.edge_&&(s=s.filter(function(t){return t.feature.getGeometry().getType()!==c.default.CIRCLE}));var u,h,d,p,f=!1,g=null,y=null;if(s.length>0){this.pixelCoordinate_=e,s.sort(this.sortByDistance_);var v=s[0].segment,m=s[0].feature.getGeometry().getType()===c.default.CIRCLE;this.vertex_&&!this.edge_?(u=i.getPixelFromCoordinate(v[0]),h=i.getPixelFromCoordinate(v[1]),d=Object(o.squaredDistance)(t,u),p=Object(o.squaredDistance)(t,h),Math.sqrt(Math.min(d,p))<=this.pixelTolerance_&&(f=!0,g=d>p?v[1]:v[0],y=i.getPixelFromCoordinate(g))):this.edge_&&(g=m?Object(o.closestOnCircle)(e,s[0].feature.getGeometry()):Object(o.closestOnSegment)(e,v),y=i.getPixelFromCoordinate(g),Object(o.distance)(t,y)<=this.pixelTolerance_&&(f=!0,this.vertex_&&!m&&(u=i.getPixelFromCoordinate(v[0]),h=i.getPixelFromCoordinate(v[1]),d=Object(o.squaredDistance)(y,u),p=Object(o.squaredDistance)(y,h),Math.sqrt(Math.min(d,p))<=this.pixelTolerance_&&(g=d>p?v[1]:v[0],y=i.getPixelFromCoordinate(g))))),f&&(y=[Math.round(y[0]),Math.round(y[1])])}return{snapped:f,vertex:g,vertexPixel:y}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){for(var i=Object(h.fromCircle)(e).getCoordinates()[0],r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),a={feature:t,segment:o};this.rBush_.insert(Object(l.boundingExtent)(o),a)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),r=0;r<i.length;++r){var n=this.SEGMENT_WRITERS_[i[r].getType()];n&&n.call(this,t,i[r])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length-1;r<n;++r){var o=i.slice(r,r+2),a={feature:t,segment:o};this.rBush_.insert(Object(l.boundingExtent)(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),c={feature:t,segment:u};this.rBush_.insert(Object(l.boundingExtent)(u),c)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r){var o=i[r],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],a=0,s=o.length;a<s;++a)for(var u=o[a],c=0,h=u.length-1;c<h;++c){var d=u.slice(c,c+2),p={feature:t,segment:d};this.rBush_.insert(Object(l.boundingExtent)(d),p)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),r={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),r)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),r=0,n=i.length;r<n;++r)for(var o=i[r],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),c={feature:t,segment:u};this.rBush_.insert(Object(l.boundingExtent)(u),c)}},e}(d.default);e.default=v},function(t,e,i){"use strict";i.r(e),i.d(e,"TranslateEvent",function(){return h});var r=i(48),n=i(25),o=i(3),a=i(35),s=i(29),l=i(12),u=i(47),c=i(67),h=function(t){function e(e,i,r){t.call(this,e),this.features=i,this.coordinate=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(a.default),d=function(t){function e(e){var i,r=e||{};if(t.call(this,r),this.lastCoordinate_=null,this.features_=void 0!==r.features?r.features:null,r.layers)if("function"==typeof r.layers)i=r.layers;else{var a=r.layers;i=function(t){return Object(l.f)(a,t)}}else i=s.b;this.layerFilter_=i,this.hitTolerance_=r.hitTolerance?r.hitTolerance:0,this.lastFeature_=null,Object(o.listen)(this,Object(n.getChangeEventType)(c.a.ACTIVE),this.handleActiveChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new r.default([this.lastFeature_]);return this.dispatchEvent(new h("translatestart",e,t.coordinate)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new r.default([this.lastFeature_]);return this.dispatchEvent(new h("translateend",e,t.coordinate)),!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,i=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],o=this.features_||new r.default([this.lastFeature_]);o.forEach(function(t){var e=t.getGeometry();e.translate(i,n),t.setGeometry(e)}),this.lastCoordinate_=e,this.dispatchEvent(new h("translating",o,e))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t){if(!this.features_||Object(l.f)(this.features_.getArray(),t))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var i=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(i)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),i=this.getActive();e&&i||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(u.default);e.default=d},function(t,e,i){"use strict";i.r(e);var r=i(75),n=i(37),o=i(24),a=i(3),s=i(10),l=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}(),u=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target}),this.cssClassName_=void 0!==i.className?i.className:"ol-full-screen";var r=void 0!==i.label?i.label:"â¤¢";this.labelNode_="string"==typeof r?document.createTextNode(r):r;var o=void 0!==i.labelActive?i.labelActive:"Ã—";this.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,this.button_=document.createElement("button");var l=i.tipLabel?i.tipLabel:"Toggle full-screen";this.setClassName_(this.button_,h()),this.button_.setAttribute("type","button"),this.button_.title=l,this.button_.appendChild(this.labelNode_),Object(a.listen)(this.button_,s.default.CLICK,this.handleClick_,this);var u=this.cssClassName_+" "+n.e+" "+n.b+" "+(c()?"":n.f),d=this.element;d.className=u,d.appendChild(this.button_),this.keys_=void 0!==i.keys&&i.keys,this.source_=i.source}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(c()){var t,e=this.getMap();e&&(h()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:e.getTargetElement(),this.keys_?function(t){t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen():d(t)}(t):d(t)))}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();h()?(this.setClassName_(this.button_,!0),Object(o.replaceNode)(this.labelActiveNode_,this.labelNode_)):(this.setClassName_(this.button_,!1),Object(o.replaceNode)(this.labelNode_,this.labelActiveNode_)),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var i=this.cssClassName_+"-true",r=this.cssClassName_+"-false",n=e?i:r;t.classList.remove(i),t.classList.remove(r),t.classList.add(n)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&this.listenerKeys.push(Object(a.listen)(document,l(),this.handleFullScreenChange_,this))},e}(r.default);function c(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function h(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function d(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return c});var r=i(3),n=i(10),o=i(25),a=i(75),s=i(9),l="projection",u=function(t){function e(e){var i=e||{},n=document.createElement("div");n.className=void 0!==i.className?i.className:"ol-mouse-position",t.call(this,{element:n,render:i.render||c,target:i.target}),Object(r.listen)(this,Object(o.getChangeEventType)(l),this.handleProjectionChanged_,this),i.coordinateFormat&&this.setCoordinateFormat(i.coordinateFormat),i.projection&&this.setProjection(i.projection),this.undefinedHTML_=void 0!==i.undefinedHTML?i.undefinedHTML:"&#160;",this.renderOnMouseOut_=!!this.undefinedHTML_,this.renderedHTML_=n.innerHTML,this.mapProjection_=null,this.transform_=null,this.lastMouseMovePixel_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get(l)},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.lastMouseMovePixel_=e.getEventPixel(t),this.updateHTML_(this.lastMouseMovePixel_)},e.prototype.handleMouseOut=function(t){this.updateHTML_(null),this.lastMouseMovePixel_=null},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var i=e.getViewport();this.listenerKeys.push(Object(r.listen)(i,n.default.MOUSEMOVE,this.handleMouseMove,this),Object(r.listen)(i,n.default.TOUCHSTART,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(Object(r.listen)(i,n.default.MOUSEOUT,this.handleMouseOut,this),Object(r.listen)(i,n.default.TOUCHEND,this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set(l,Object(s.get)(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var i=this.getProjection();this.transform_=i?Object(s.getTransformFromProjections)(this.mapProjection_,i):s.identityTransform}var r=this.getMap().getCoordinateFromPixel(t);if(r){this.transform_(r,r);var n=this.getCoordinateFormat();e=n?n(r):r.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(a.default);function c(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}e.default=u},function(t,e,i){"use strict";i.r(e),i.d(e,"Units",function(){return h}),i.d(e,"render",function(){return f});var r=i(25),n=i(23),o=i(75),a=i(37),s=i(3),l=i(9),u=i(49),c="units",h={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"},d=[1,2,5],p=function(t){function e(e){var i=e||{},n=void 0!==i.className?i.className:"ol-scale-line";t.call(this,{element:document.createElement("div"),render:i.render||f,target:i.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+a.e,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==i.minWidth?i.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",Object(s.listen)(this,Object(r.getChangeEventType)(c),this.handleUnitsChanged_,this),this.setUnits(i.units||h.METRIC)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getUnits=function(){return this.get(c)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(c,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,r=this.getUnits(),o=r==h.DEGREES?u.default.DEGREES:u.default.METERS,a=Object(l.getPointResolution)(i,t.resolution,e,o);i.getUnits()!=u.default.DEGREES&&i.getMetersPerUnit()&&o==u.default.METERS&&(a*=i.getMetersPerUnit());var s=this.minWidth_*a,c="";if(r==h.DEGREES){var p=l.METERS_PER_UNIT[u.default.DEGREES];i.getUnits()==u.default.DEGREES?s*=p:a/=p,s<p/60?(c="â€³",a*=3600):s<p?(c="â€²",a*=60):c="Â°"}else r==h.IMPERIAL?s<.9144?(c="in",a/=.0254):s<1609.344?(c="ft",a/=.3048):(c="mi",a/=1609.344):r==h.NAUTICAL?(a/=1852,c="nm"):r==h.METRIC?s<.001?(c="Î¼m",a*=1e6):s<1?(c="mm",a*=1e3):s<1e3?c="m":(c="km",a/=1e3):r==h.US?s<.9144?(c="in",a*=39.37):s<1609.344?(c="ft",a/=.30480061):(c="mi",a/=1609.3472):Object(n.a)(!1,33);for(var f,g,y=3*Math.floor(Math.log(this.minWidth_*a)/Math.log(10));;){if(f=d[(y%3+3)%3]*Math.pow(10,Math.floor(y/3)),g=Math.round(f/a),isNaN(g))return this.element.style.display="none",void(this.renderedVisible_=!1);if(g>=this.minWidth_)break;++y}var v=f+" "+c;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e}(o.default);function f(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}e.default=p},function(t,e,i){"use strict";i.r(e),i.d(e,"render",function(){return g});var r=i(28),n=i(75),o=i(37),a=i(56),s=i(3),l=i(35),u=i(10),c=i(19),h=i(61),d=i(230),p={VERTICAL:0,HORIZONTAL:1},f=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||g}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=p.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.previousX_,this.previousY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==i.duration?i.duration:200;var r=void 0!==i.className?i.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=r+"-thumb "+o.e;var a=this.element;a.className=r+" "+o.e+" "+o.b,a.appendChild(n),this.dragger_=new d.a(a),Object(s.listen)(this.dragger_,h.a.POINTERDOWN,this.handleDraggerStart_,this),Object(s.listen)(this.dragger_,h.a.POINTERMOVE,this.handleDraggerDrag_,this),Object(s.listen)(this.dragger_,h.a.POINTERUP,this.handleDraggerEnd_,this),Object(s.listen)(a,u.default.CLICK,this.handleContainerClick_,this),Object(s.listen)(n,u.default.CLICK,l.stopPropagation)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.dragger_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,i=t.offsetHeight,r=t.firstElementChild,n=getComputedStyle(r),o=r.offsetWidth+parseFloat(n.marginRight)+parseFloat(n.marginLeft),a=r.offsetHeight+parseFloat(n.marginTop)+parseFloat(n.marginBottom);this.thumbSize_=[o,a],e>i?(this.direction_=p.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=p.VERTICAL,this.heightLimit_=i-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),r=this.getResolutionForPosition_(i);e.animate({resolution:e.constrainResolution(r),duration:this.duration_,easing:a.easeOut})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.originalEvent.target===this.element.firstElementChild&&(this.getMap().getView().setHint(r.default.INTERACTING,1),this.previousX_=t.clientX,this.previousY_=t.clientY,this.dragging_=!0,0===this.dragListenerKeys_.length)){var e=this.handleDraggerDrag_,i=this.handleDraggerEnd_;this.dragListenerKeys_.push(Object(s.listen)(document,u.default.MOUSEMOVE,e,this),Object(s.listen)(document,h.a.POINTERMOVE,e,this),Object(s.listen)(document,u.default.MOUSEUP,i,this),Object(s.listen)(document,h.a.POINTERUP,i,this))}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=this.element.firstElementChild,i=t.clientX-this.previousX_+parseFloat(e.style.left),r=t.clientY-this.previousY_+parseFloat(e.style.top),n=this.getRelativePosition_(i,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_),this.setThumbPosition_(this.currentResolution_),this.previousX_=t.clientX,this.previousY_=t.clientY}},e.prototype.handleDraggerEnd_=function(t){if(this.dragging_){var e=this.getMap().getView();e.setHint(r.default.INTERACTING,-1),e.animate({resolution:e.constrainResolution(this.currentResolution_),duration:this.duration_,easing:a.easeOut}),this.dragging_=!1,this.previousX_=void 0,this.previousY_=void 0,this.dragListenerKeys_.forEach(s.unlistenByKey),this.dragListenerKeys_.length=0}},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==p.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){var i;return i=this.direction_===p.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,Object(c.a)(i,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return 1-this.getMap().getView().getValueForResolutionFunction()(t)},e}(n.default);function g(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;e!==this.currentResolution_&&(this.currentResolution_=e,this.setThumbPosition_(e))}}e.default=f},function(t,e,i){"use strict";i.r(e);var r=i(3),n=i(10),o=i(75),a=i(37),s=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),target:i.target}),this.extent=i.extent?i.extent:null;var o=void 0!==i.className?i.className:"ol-zoom-extent",s=void 0!==i.label?i.label:"E",l=void 0!==i.tipLabel?i.tipLabel:"Fit to extent",u=document.createElement("button");u.setAttribute("type","button"),u.title=l,u.appendChild("string"==typeof s?document.createTextNode(s):s),Object(r.listen)(u,n.default.CLICK,this.handleClick_,this);var c=o+" "+a.e+" "+a.b,h=this.element;h.className=c,h.appendChild(u)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fit(e)},e}(o.default);e.default=s},function(t,e,i){"use strict";i.r(e);var r=i(157),n=i(1),o=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions,state:i.state}),this.canvasFunction_=i.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageInternal=function(t,e,i,o){e=this.findNearestResolution(e);var a=this.canvas_;if(a&&this.renderedRevision_==this.getRevision()&&a.getResolution()==e&&a.getPixelRatio()==i&&Object(n.containsExtent)(a.getExtent(),t))return a;t=t.slice(),Object(n.scaleFromCenter)(t,this.ratio_);var s=[Object(n.getWidth)(t)/e*i,Object(n.getHeight)(t)/e*i],l=this.canvasFunction_.call(this,t,e,i,s,o);return l&&(a=new r.a(t,e,i,l)),this.canvas_=a,this.renderedRevision_=this.getRevision(),a},e}(i(89).default);e.default=o},function(t,e,i){t.exports={default:i(494),__esModule:!0}},function(t,e,i){var r=i(141),n=i(103).document,o=r(n)&&r(n.createElement);t.exports=function(t){return o?n.createElement(t):{}}},function(t,e,i){var r=i(141);t.exports=function(t,e){if(!r(t))return t;var i,n;if(e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;if("function"==typeof(i=t.valueOf)&&!r(n=i.call(t)))return n;if(!e&&"function"==typeof(i=t.toString)&&!r(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,i){var r=i(288),n=i(233),o=i(168),a=i(285),s=i(167),l=i(348),u=Object.getOwnPropertyDescriptor;e.f=i(151)?u:function(t,e){if(t=o(t),e=a(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return n(!r.f.call(t,e),t[e])}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var r=i(80),n=i(103),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:i(198)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){e.f=i(110)},function(t,e,i){var r=i(103),n=i(80),o=i(198),a=i(290),s=i(150).f;t.exports=function(t){var e=n.Symbol||(n.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,i){var r=i(353),n=i(295);t.exports=Object.keys||function(t){return r(t,n)}},function(t,e){var i=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:i)(t)}},function(t,e,i){var r=i(289)("keys"),n=i(235);t.exports=function(t){return r[t]||(r[t]=n(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var r=i(286);t.exports=function(t){return Object(r(t))}},function(t,e,i){var r=i(140),n=i(505),o=i(295),a=i(294)("IE_PROTO"),s=function(){},l=function(){var t,e=i(284)("iframe"),r=o.length;for(e.style.display="none",i(356).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;r--;)delete l.prototype[o[r]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(s.prototype=r(t),i=new s,s.prototype=null,i[a]=t):i=l(),void 0===e?i:n(i,e)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(179);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,r.default)(this,t),this.util=new a.Util,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Color"}return(0,n.default)(t,[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,i,r,n,o,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(t,e,i,r,n,o),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(t,e,i,r,n){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var a=this._ctx.createLinearGradient(t,e,i,r),s=0,l=n.length;s<l;s++)a.addColorStop(n[s][0],n[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(t,e,i){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var r=[],n=((e=this.getData(e))[0]-t[0])/i,o=(e[1]-t[1])/i,a=(e[2]-t[2])/i,s=(e[3]-t[3])/i,l=0,u=t[0],c=t[1],h=t[2],d=t[3];l<i;l++)r[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(h),[0,255]),d.toFixed(4)-0],"rgba"),u+=n,c+=o,h+=a,d+=s;return u=e[0],c=e[1],h=e[2],d=e[3],r[l]=this.toColor([u,c,h,d],"rgba"),r}},{key:"getGradientColors",value:function(t,e){var i=[],r=t.length;if(void 0===e&&(e=20),1===r)i=this.getStepColors(t[0],t[0],e);else if(r>1)for(var n=0,o=r-1;n<o;n++){var a=this.getStepColors(t[n],t[n+1],e);n<o-1&&a.pop(),i=i.concat(a)}return i}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var i=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=i[0],t[2]=i[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],i=0;return t.replace(/[\d.]+/g,function(t){i<3?t|=0:t=+t,e[i++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var i=this.getData(t),r=i[3];return void 0===r&&(r=1),t.indexOf("hsb")>-1?i=this._HSV_2_RGB(i):t.indexOf("hsl")>-1&&(i=this._HSL_2_RGB(i)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?i=this._RGB_2_HSB(i):e.indexOf("hsl")>-1&&(i=this._RGB_2_HSL(i)),i[3]=r,this.toColor(i,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,i=(240&t)<<4,r=15&t;t="#"+((1<<24)+(e<<4)+e+(i<<4)+i+(r<<4)+r).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var i=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var r=this.getData(t),n=0;n<3;n++)r[n]=1===i?r[n]*(1-e)|0:(255-r[n])*e+r[n]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,i){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===i&&(i=.5);for(var r=2*(i=1-this.adjust(i,[0,1]))-1,n=this.getData(this.toRGBA(t)),o=this.getData(this.toRGBA(e)),a=n[3]-o[3],s=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=n[c]*s+o[c]*l;var h=n[3]*i+o[3]*(1-i);return h=Math.max(0,Math.min(1,h)),1===n[3]&&1===o[3]?this.toColor(u,"rgb"):(u[3]=h,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var i,r,n=(e=this.normalize(e)).match(this.colorRegExp);if(null===n)throw new Error("The color format error");var o,a=[];if(n[2])o=[(i=n[2].replace("#","").split(""))[0]+i[1],i[2]+i[3],i[4]+i[5]],a=this.map(o,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(n[4]){var s=n[4].split(",");r=s[3],o=s.slice(0,3),a=this.map(o,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}else if(n[5]||n[6]){var l=(n[5]||n[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],h=l[2];r=l[3],(a=this.map([c,h],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(u),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}return a}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var i=this.getData(this.toRGBA(t));return i[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(i,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var i=t?t.length:0,r=0;r<i;r++)t[r]=e(t[r]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,i,r,n=t[0],o=t[1],a=t[2];if(0===o)e=255*a,i=255*a,r=255*a;else{var s=6*n;6===s&&(s=0);var l=0|s,u=a*(1-o),c=a*(1-o*(s-l)),h=a*(1-o*(1-(s-l))),d=0,p=0,f=0;0===l?(d=a,p=h,f=u):1===l?(d=c,p=a,f=u):2===l?(d=u,p=a,f=h):3===l?(d=u,p=c,f=a):4===l?(d=h,p=u,f=a):(d=a,p=u,f=c),e=255*d,i=255*p,r=255*f}return[e,i,r]}},{key:"_HSL_2_RGB",value:function(t){var e,i,r,n=t[0],o=t[1],a=t[2];if(0===o)e=255*a,i=255*a,r=255*a;else{var s,l=2*a-(s=a<.5?a*(1+o):a+o-o*a);e=255*this._HUE_2_RGB(l,s,n+1/3),i=255*this._HUE_2_RGB(l,s,n),r=255*this._HUE_2_RGB(l,s,n-1/3)}return[e,i,r]}},{key:"_HUE_2_RGB",value:function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?t+6*(e-t)*i:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,i,r=t[0]/255,n=t[1]/255,o=t[2]/255,a=Math.min(r,n,o),s=Math.max(r,n,o),l=s-a,u=s;if(0===l)e=0,i=0;else{i=l/s;var c=((s-r)/6+l/2)/l,h=((s-n)/6+l/2)/l,d=((s-o)/6+l/2)/l;r===s?e=d-h:n===s?e=1/3+c-d:o===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,i*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,i,r=t[0]/255,n=t[1]/255,o=t[2]/255,a=Math.min(r,n,o),s=Math.max(r,n,o),l=s-a,u=(s+a)/2;if(0===l)e=0,i=0;else{i=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,h=((s-n)/6+l/2)/l,d=((s-o)/6+l/2)/l;r===s?e=d-h:n===s?e=1/3+c-d:o===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,i*=100,u*=100]}}]),t}();e.Color=l,o.Zondy.LevelRenderer.Tool.Color=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Config=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(8)),n=i(6),o=function t(){(0,r.default)(this,t)};o.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},o.catchBrushException=!1,o.debugMode=0,e.Config=o,n.Zondy.LevelRenderer.Config=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicImage=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicimage",i._imageCache={},i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicImage",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,this._imageCache=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,i,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,o=this.style||{};i&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(e._refreshTimeout),e._needsRefresh.push(s),e._refreshTimeout=setTimeout(function(){r&&r(e._needsRefresh),e._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"===a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!==a.readyState)return}else if(!a.complete)return;var u=o.width||a.width,c=o.height||a.height,h=o.x+n[0],d=o.y+n[1];if(!a.width||!a.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var p=o.sx+n[0]||0,f=o.sy+n[1]||0;t.drawImage(a,p,f,o.sWidth,o.sHeight,h,d,u,c)}else if(o.sx&&o.sy){var g=o.sx+n[0],y=o.sy+n[1],v=u-g,m=c-y;t.drawImage(a,g,y,v,m,h,d,u,c)}else t.drawImage(a,h,d,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}]),e}(i(111).Shape);h._needsRefresh=[],h._refreshTimeout=null,e.SmicImage=h,u.Zondy.LevelRenderer.SmicImage=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.pointList=t,i.CLASS_NAME="Zondy.Feature.ShapeParameters.Line",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.pointList=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Line=h,u.Zondy.Feature.ShapeParameters.Line=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o){(0,n.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o));return s.x=isNaN(t)?0:t,s.y=isNaN(i)?0:i,s.r=isNaN(o)?0:o,s.CLASS_NAME="Zondy.Feature.ShapeParameters.Circle",s}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Circle=h,u.Zondy.Feature.ShapeParameters.Circle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicPoint=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicpoint",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicPoint",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;t.arc(e.x+i[0],e.y+i[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}]),e}(i(111).Shape);e.SmicPoint=h,u.Zondy.LevelRenderer.SmicPoint=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicBrokenLine=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(111),h=i(244),d=i(117);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.brushTypeOnly="stroke",i.textPosition="end",i.type="smicbroken-line",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicBrokenLine",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=e.pointList;if(!(r.length<2)){var n=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var o,a,s,l=d.SUtil.SUtil_smoothBezier(r,e.smooth,!1,e.smoothConstraint,i);t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var u=0;u<n-1;u++)o=l[2*u],a=l[2*u+1],s=[r[u+1][0]+i[0],r[u+1][1]+i[1]],t.bezierCurveTo(o[0],o[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(n=(r=d.SUtil.SUtil_smoothSpline(r,null,null,i)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,h=c,p=c;"dashed"===e.lineType&&(h*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=c,p+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=c),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=c)),"dash"===e.lineType&&(h*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,p+=c)),"longdash"===e.lineType&&(h*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=c,p+=c)),t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var f=1;f<n;f++)d.SUtil.SUtil_dashedLineTo(t,r[f-1][0]+i[0],r[f-1][1]+i[1],r[f][0]+i[0],r[f][1]+i[1],c,[h,p])}else if("dashot"===e.lineType||"longdashdot"===e.lineType){var g=e.lineWidth||1,y=g,v=g,m=g,_=g;"dashot"===e.lineType&&(y*=4,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=g,v+=g,m=1,_+=g)),"longdashdot"===e.lineType&&(y*=8,v*=4,_*=4,e.lineCap&&"butt"!==e.lineCap&&(y-=g,v+=g,m=1,_+=g)),g=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var b=1;b<n;b++)d.SUtil.SUtil_dashedLineTo(t,r[b-1][0]+i[0],r[b-1][1]+i[1],r[b][0]+i[0],r[b][1]+i[1],g,[y,v,m,_])}}else{t.moveTo(r[0][0]+i[0],r[0][1]+i[1]);for(var S=1;S<n;S++)t.lineTo(r[S][0]+i[0],r[S][1]+i[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return h.SmicPolygon.prototype.getRect.apply(this,[t,e])}}]),e}(c.Shape);e.SmicBrokenLine=f,u.Zondy.LevelRenderer.SmicBrokenLine=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GPoint=void 0;var r=h(i(13)),n=h(i(8)),o=h(i(18)),a=h(i(14)),s=h(i(15)),l=i(6),u=i(247),c=i(118);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i,o){(0,n.default)(this,e);var s=o||{},l=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,s));return void 0!==t&&null!==t&&void 0!==i&&null!==i&&(l.Dot=new c.Point2D(t,i)),l}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setDot",value:function(t){this.Dot=void 0!==t&&null!==t?t:null}}]),e}(u.FeatureGraphicBase);e.GPoint=d,l.Zondy.Object.GPoint=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLine=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(6),u=i(247);function c(t){return t&&t.__esModule?t:{default:t}}i(307);var h=function(t){function e(t,i){(0,n.default)(this,e);var o=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,o));return s.Line=void 0!==t&&null!==t?t:null,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setLine",value:function(t){this.Line=void 0!==t&&null!==t?t:null}}]),e}(u.FeatureGraphicBase);e.GLine=h,l.Zondy.Object.GLine=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnyLine=void 0;var r=i(6),n=i(22),o=function(t,e){var i=void 0!==e?e:{};(0,n.extend)(this,i),this.Arcs=void 0!==t&&null!==t?t:null};e.AnyLine=o,r.Zondy.Object.AnyLine=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GRegion=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(6),u=i(247);function c(t){return t&&t.__esModule?t:{default:t}}i(307);var h=function(t){function e(t,i){(0,n.default)(this,e);var o=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,o));return s.Rings=void 0!==t&&null!==t&&Array.isArray(t)?t:null,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setRings",value:function(t){this.Rings=void 0!==t&&null!==t?t:null}}]),e}(u.FeatureGraphicBase);e.GRegion=h,l.Zondy.Object.GRegion=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CPointInfo=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Angle=void 0!==e.Angle&&null!==e.Angle?e.Angle:1,this.Color=void 0!==e.Color&&null!==e.Color?e.Color:1,this.SymHeight=void 0!==e.SymHeight&&null!==e.SymHeight?e.SymHeight:1,this.SymID=void 0!==e.SymID&&null!==e.SymID?e.SymID:1,this.SymWidth=void 0!==e.SymWidth&&null!==e.SymWidth?e.SymWidth:1};e.CPointInfo=o,r.Zondy.Object.CPointInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegionInfo=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.EndColor=void 0!==e.EndColor&&null!==e.EndColor?e.EndColor:1,this.FillColor=void 0!==e.FillColor&&null!==e.FillColor?e.FillColor:1,this.FillMode=void 0!==e.FillMode&&null!==e.FillMode?e.FillMode:0,this.OutPenWidth=void 0!==e.OutPenWidth&&null!==e.OutPenWidth?e.OutPenWidth:1,this.PatAngle=void 0!==e.PatAngle&&null!==e.PatAngle?e.PatAngle:1,this.PatColor=void 0!==e.PatColor&&null!==e.PatColor?e.PatColor:1,this.PatHeight=void 0!==e.PatHeight&&null!==e.PatHeight?e.PatHeight:1,this.PatID=void 0!==e.PatID&&null!==e.PatID?e.PatID:1,this.PatWidth=void 0!==e.PatWidth&&null!==e.PatWidth?e.PatWidth:1};e.CRegionInfo=o,r.Zondy.Object.CRegionInfo=o},function(t,e,i){var r,n,o,a=i(195),s=i(581),l=i(356),u=i(284),c=i(103),h=c.process,d=c.setImmediate,p=c.clearImmediate,f=c.MessageChannel,g=c.Dispatch,y=0,v={},m=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},_=function(t){m.call(t.data)};d&&p||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return v[++y]=function(){s("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete v[t]},"process"==i(197)(h)?r=function(t){h.nextTick(a(m,t,1))}:g&&g.now?r=function(t){g.now(a(m,t,1))}:f?(o=(n=new f).port2,n.port1.onmessage=_,r=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",_,!1)):r="onreadystatechange"in u("script")?function(t){l.appendChild(u("script")).onreadystatechange=function(){l.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,i){"use strict";var r=i(232);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,r){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=r}),this.resolve=r(e),this.reject=r(i)}(t)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditServiceBase=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(143),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.guid=void 0!==i.guid?i.guid:(0,u.newGuid)(),a.baseUrl="igs/rest/mrfs",a.f=void 0!==i.f?i.f:"json",a}return(0,a.default)(e,t),e}(l.ServiceBase);e.EditServiceBase=h,s.Zondy.Service.EditServiceBase=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameter=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(6),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{};return(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i))}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getParameterURL",value:function(){var t="page="+this.pageIndex.toString();return t+="&pageCount="+this.recordNumber.toString(),t+="&f="+this.resultFormat,this.geometry&&(t+="&geometry="+this.geometry.toString(),t+="&geometryType="+this.geometry.getGeometryType()),this.struct&&(t+="&structs="+(0,u.toJSON)(this.struct)),this.where&&(t+="&where="+this.where),this.rule&&(t+="&rule="+(0,u.toJSON)(this.rule)),this.objectIds&&(t+="&objectIds="+this.objectIds),this.orderField&&(t+="&orderField="+this.orderField),this.isAsc&&(t+="&isAsc="+this.isAsc),this.proj&&(t+="&srsIds="+this.proj),t+"&cursorType="+this.cursorType}},{key:"getParameterObject",value:function(){var t={};return t.f=this.resultFormat,null!==this.struct&&(t.structs=this.struct.toJSON()),null!==this.objectIds?(t.objectIds=this.objectIds,t):(t.page=this.pageIndex.toString(),t.pageCount=this.recordNumber.toString(),null!==this.geometry&&(t.geometry=this.geometry.toString(),t.geometryType=this.geometry.getGeometryType()),null!==this.where&&(t.where=this.where),null!==this.rule&&(t.rule=this.rule.toJSON()),null!==this.orderField&&(t.orderField=this.orderField),null!==this.isAsc&&(t.isAsc=this.isAsc),t.cursorType=this.cursorType,t)}}]),e}(i(422).QueryParameterBase);e.QueryParameter=h,l.Zondy.Service.QueryParameter=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureStruct=void 0;var r=i(6),n=i(22),o=function(t){var e=t||{};(0,n.extend)(this,e),this.IncludeAttribute=void 0===e.IncludeAttribute||"boolean"!=typeof e.IncludeAttribute||e.IncludeAttribute,this.IncludeGeometry=void 0!==e.IncludeGeometry&&"boolean"==typeof e.IncludeGeometry&&e.IncludeGeometry,this.IncludeWebGraphic=void 0!==e.IncludeWebGraphic&&"boolean"==typeof e.IncludeWebGraphic&&e.IncludeWebGraphic};o.prototype.toJSON=function(){return(0,n.toJSON)(this)},e.QueryFeatureStruct=o,r.Zondy.Service.QueryFeatureStruct=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.srcInfo=void 0!==i.srcInfo?i.srcInfo:null,a.desInfo=void 0!==i.desInfo?i.desInfo:null,a.idstr=void 0!==i.idstr?i.idstr:"",a.angleType=void 0!==i.angleType?i.angleType:0,a.isDissolve=void 0===i.isDissolve||i.isDissolve,a.isDynPrj=void 0!==i.isDynPrj&&i.isDynPrj,a}return(0,a.default)(e,t),e}(i(144).AnalysisBase);e.ClassBufferBase=u,s.Zondy.Service.ClassBufferBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.sfGeometryXML=void 0!==i.sfGeometryXML?i.sfGeometryXML:null,a.attStrctXML=void 0!==i.attStrctXML?i.attStrctXML:null,a.attRowsXML=void 0!==i.attRowsXML?i.attRowsXML:null,a.traceRadius=void 0!==i.traceRadius?i.traceRadius:1e-4,a.resultName=void 0!==i.resultName?i.resultName:null,a.inFormat=void 0!==i.inFormat?i.inFormat:"json",a}return(0,a.default)(e,t),e}(i(144).AnalysisBase);e.FeatureBuffBase=u,s.Zondy.Service.FeatureBuffBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.srcInfo1=void 0!==i.srcInfo1?i.srcInfo1:null,a.desInfo=void 0!==i.desInfo?i.desInfo:null,a.attOptType=void 0!==i.attOptType?i.attOptType:1,a.infoOptType=void 0!==i.infoOptType?i.infoOptType:1,a.overType=void 0!==i.overType?i.overType:3,a.isCleanNode=void 0!==i.isCleanNode&&i.isCleanNode,a.isLabelPnt=void 0!==i.isLabelPnt&&i.isLabelPnt,a.isValidReg=void 0!==i.isValidReg&&i.isValidReg,a.isReCalculate=void 0===i.isReCalculate||i.isReCalculate,a.radius=void 0!==i.radius?i.radius:.001,a}return(0,a.default)(e,t),e}(i(144).AnalysisBase);e.OverlayBase=u,s.Zondy.Service.OverlayBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBase=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.clsName=void 0!==i.clsName?i.clsName:null,a.desClsName=void 0!==i.desClsName?i.desClsName:null,a.resultName=void 0!==i.resultName?i.resultName:null,a}return(0,a.default)(e,t),e}(i(144).AnalysisBase);e.ProjectBase=u,s.Zondy.Service.ProjectBase=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalServiceBase=void 0;var r=f(i(58)),n=f(i(13)),o=f(i(8)),a=f(i(18)),s=f(i(14)),l=f(i(15)),u=i(6),c=i(170),h=(i(118),i(53)),d=i(321),p=i(322);function f(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.dots=void 0!==i.dots?i.dots:null,r.projectInfo=void 0!==i.projectInfo?i.projectInfo:null,r.projectInfoBySRSID=void 0!==i.projectInfoBySRSID?i.projectInfoBySRSID:null,r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"execute",value:function(t,e,i){t instanceof d.CProjectParam&&(this.projectInfo=t),t instanceof p.CProjectBySRSID&&(this.projectInfoBySrsID=t);var n={};n.Dots=this.dots,n.ProjectInfo=this.projectInfo,n.ProjectInfoBySrsID=this.projectInfoBySrsID;var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(n),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.CalServiceBase=g,u.Zondy.Service.CalServiceBase=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectParam=void 0;var r=i(6),n=i(22),o=function(t){var e=t||{};(0,n.extend)(this,e),this.ProjAngleUnit=void 0!==e.ProjAngleUnit?e.ProjAngleUnit:0,this.ProjLat=void 0!==e.ProjLat?e.ProjLat:0,this.ProjLat1=void 0!==e.ProjLat1?e.ProjLat1:0,this.ProjLat2=void 0!==e.ProjLat2?e.ProjLat2:0,this.ProjLon=void 0!==e.ProjLon?e.ProjLon:0,this.ProjRate=void 0!==e.ProjRate?e.ProjRate:0,this.ProjType=void 0!==e.ProjType?e.ProjType:0,this.ProjTypeID=void 0!==e.ProjTypeID?e.ProjTypeID:0,this.ProjUnit=void 0!==e.ProjUnit?e.ProjUnit:0,this.ProjZoneNO=void 0!==e.ProjZoneNO?e.ProjZoneNO:0,this.ProjZoneType=void 0!==e.ProjZoneType?e.ProjZoneType:0,this.SphereID=void 0!==e.SphereID?e.SphereID:0};e.CProjectParam=o,r.Zondy.Service.CProjectParam=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CProjectBySRSID=void 0;var r=i(6),n=(i(404),function(t,e){this.DesSrsID=t,this.GdbInfo=e});e.CProjectBySRSID=n,r.Zondy.Service.CProjectBySRSID=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfoAttribute=void 0;var r=i(6),n=function(t,e){this.name=void 0!==t?t:null,this.Value=void 0!==e?e:null};e.FolderInfoAttribute=n,r.Zondy.Object.Theme.FolderInfoAttribute=n},function(t,e,i){"use strict";i.r(e);var r=i(26),n=i(3),o=i(1),a=i(20),s=i(39),l=i(38),u=i(19),c=i(9);function h(t,e,i){for(var r,n,o,a,s,l,c=[],h=t(0),d=t(1),p=e(h),f=e(d),g=[d,h],y=[f,p],v=[1,0],m={},_=1e5;--_>0&&v.length>0;)o=v.pop(),h=g.pop(),p=y.pop(),(l=o.toString())in m||(c.push(p[0],p[1]),m[l]=!0),a=v.pop(),d=g.pop(),f=y.pop(),n=e(r=t(s=(o+a)/2)),Object(u.h)(n[0],n[1],p[0],p[1],f[0],f[1])<i?(c.push(f[0],f[1]),m[l=a.toString()]=!0):(v.push(a,s,s,o),y.push(f,n,n,p),g.push(d,r,r,h));return c}var d=i(57),p=i(101),f=i(96),g=i(66),y=new f.default({color:"rgba(0,0,0,0.2)"}),v=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],m=function(t){var e=t||{};this.map_=null,this.postcomposeListenerKey_=null,this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxLatP_=1/0,this.maxLonP_=1/0,this.minLatP_=-1/0,this.minLonP_=-1/0,this.targetSize_=void 0!==e.targetSize?e.targetSize:100,this.maxLines_=void 0!==e.maxLines?e.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==e.strokeStyle?e.strokeStyle:y,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,1==e.showLabels&&(this.lonLabelFormatter_=void 0==e.lonLabelFormatter?r.degreesToStringHDMS.bind(this,"EW"):e.lonLabelFormatter,this.latLabelFormatter_=void 0==e.latLabelFormatter?r.degreesToStringHDMS.bind(this,"NS"):e.latLabelFormatter,this.lonLabelPosition_=void 0==e.lonLabelPosition?0:e.lonLabelPosition,this.latLabelPosition_=void 0==e.latLabelPosition?1:e.latLabelPosition,this.lonLabelStyle_=void 0!==e.lonLabelStyle?e.lonLabelStyle:new g.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new p.default({color:"rgba(0,0,0,1)"}),stroke:new f.default({color:"rgba(255,255,255,1)",width:3})}),this.latLabelStyle_=void 0!==e.latLabelStyle?e.latLabelStyle:new g.default({font:"12px Calibri,sans-serif",textAlign:"end",fill:new p.default({color:"rgba(0,0,0,1)"}),stroke:new f.default({color:"rgba(255,255,255,1)",width:3})}),this.meridiansLabels_=[],this.parallelsLabels_=[]),this.intervals_=void 0!==e.intervals?e.intervals:v,this.setMap(void 0!==e.map?e.map:null)};m.prototype.addMeridian_=function(t,e,i,r,n,a){var s=this.getMeridian_(t,e,i,r,a);if(Object(o.intersects)(s.getExtent(),n)){if(this.meridiansLabels_){var l=this.getMeridianPoint_(s,n,a);this.meridiansLabels_[a]={geom:l,text:this.lonLabelFormatter_(t)}}this.meridians_[a++]=s}return a},m.prototype.getMeridianPoint_=function(t,e,i){var r,n=t.getFlatCoordinates(),o=Math.max(e[1],n[1]),a=Math.min(e[3],n[n.length-1]),s=Object(u.a)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,a),c=[n[0],s];return i in this.meridiansLabels_?(r=this.meridiansLabels_[i].geom).setCoordinates(c):r=new l.default(c),r},m.prototype.addParallel_=function(t,e,i,r,n,a){var s=this.getParallel_(t,e,i,r,a);if(Object(o.intersects)(s.getExtent(),n)){if(this.parallelsLabels_){var l=this.getParallelPoint_(s,n,a);this.parallelsLabels_[a]={geom:l,text:this.latLabelFormatter_(t)}}this.parallels_[a++]=s}return a},m.prototype.getParallelPoint_=function(t,e,i){var r,n=t.getFlatCoordinates(),o=Math.max(e[0],n[0]),a=Math.min(e[2],n[n.length-2]),s=[Object(u.a)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,a),n[1]];return i in this.parallelsLabels_?(r=this.parallelsLabels_[i].geom).setCoordinates(s):r=new l.default(s),r},m.prototype.createGraticule_=function(t,e,i,r){var n=this.getInterval_(i);if(-1==n)return this.meridians_.length=this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o,a,s,l,h=this.toLonLatTransform_(e),d=h[0],p=h[1],f=this.maxLines_,g=[Math.max(t[0],this.minLonP_),Math.max(t[1],this.minLatP_),Math.min(t[2],this.maxLonP_),Math.min(t[3],this.maxLatP_)],y=(g=Object(c.transformExtent)(g,this.projection_,"EPSG:4326"))[3],v=g[2],m=g[1],_=g[0];for(d=Math.floor(d/n)*n,l=Object(u.a)(d,this.minLon_,this.maxLon_),a=this.addMeridian_(l,m,y,r,t,0),o=0;l!=this.minLon_&&o++<f;)l=Math.max(l-n,this.minLon_),a=this.addMeridian_(l,m,y,r,t,a);for(l=Object(u.a)(d,this.minLon_,this.maxLon_),o=0;l!=this.maxLon_&&o++<f;)l=Math.min(l+n,this.maxLon_),a=this.addMeridian_(l,m,y,r,t,a);for(this.meridians_.length=a,this.meridiansLabels_&&(this.meridiansLabels_.length=a),p=Math.floor(p/n)*n,s=Object(u.a)(p,this.minLat_,this.maxLat_),a=this.addParallel_(s,_,v,r,t,0),o=0;s!=this.minLat_&&o++<f;)s=Math.max(s-n,this.minLat_),a=this.addParallel_(s,_,v,r,t,a);for(s=Object(u.a)(p,this.minLat_,this.maxLat_),o=0;s!=this.maxLat_&&o++<f;)s=Math.min(s+n,this.maxLat_),a=this.addParallel_(s,_,v,r,t,a);this.parallels_.length=a,this.parallelsLabels_&&(this.parallelsLabels_.length=a)},m.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1],r=-1,n=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,l=this.intervals_.length;s<l;++s){var u=this.intervals_[s]/2;if(o[0]=e-u,o[1]=i-u,a[0]=e+u,a[1]=i+u,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=n)break;r=this.intervals_[s]}return r},m.prototype.getMap=function(){return this.map_},m.prototype.getMeridian_=function(t,e,i,r,n){var o=function(t,e,i,r,n){var o=Object(c.get)("EPSG:4326");return h(function(r){return[t,e+(i-e)*r]},Object(c.getTransform)(o,r),n)}(t,e,i,this.projection_,r),l=this.meridians_[n];return l?(l.setFlatCoordinates(a.default.XY,o),l.changed()):l=this.meridians_[n]=new s.default(o,a.default.XY),l},m.prototype.getMeridians=function(){return this.meridians_},m.prototype.getParallel_=function(t,e,i,r,n){var o=function(t,e,i,r,n){var o=Object(c.get)("EPSG:4326");return h(function(r){return[e+(i-e)*r,t]},Object(c.getTransform)(o,r),n)}(t,e,i,this.projection_,r),l=this.parallels_[n];return l?(l.setFlatCoordinates(a.default.XY,o),l.changed()):l=new s.default(o,a.default.XY),l},m.prototype.getParallels=function(){return this.parallels_},m.prototype.handlePostCompose_=function(t){var e,i,r,n,o=t.vectorContext,a=t.frameState,s=a.extent,l=a.viewState,u=l.center,h=l.projection,d=l.resolution,p=a.pixelRatio,f=d*d/(4*p*p);for((!this.projection_||!Object(c.equivalent)(this.projection_,h))&&this.updateProjectionInfo_(h),this.createGraticule_(s,u,d,f),o.setFillStrokeStyle(null,this.strokeStyle_),e=0,i=this.meridians_.length;e<i;++e)r=this.meridians_[e],o.drawGeometry(r);for(e=0,i=this.parallels_.length;e<i;++e)r=this.parallels_[e],o.drawGeometry(r);if(this.meridiansLabels_)for(e=0,i=this.meridiansLabels_.length;e<i;++e)n=this.meridiansLabels_[e],this.lonLabelStyle_.setText(n.text),o.setTextStyle(this.lonLabelStyle_),o.drawGeometry(n.geom);if(this.parallelsLabels_)for(e=0,i=this.parallelsLabels_.length;e<i;++e)n=this.parallelsLabels_[e],this.latLabelStyle_.setText(n.text),o.setTextStyle(this.latLabelStyle_),o.drawGeometry(n.geom)},m.prototype.updateProjectionInfo_=function(t){var e=Object(c.get)("EPSG:4326"),i=t.getWorldExtent(),r=Object(c.transformExtent)(i,e,t);this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0],this.maxLatP_=r[3],this.maxLonP_=r[2],this.minLatP_=r[1],this.minLonP_=r[0],this.fromLonLatTransform_=Object(c.getTransform)(e,t),this.toLonLatTransform_=Object(c.getTransform)(t,e),this.projectionCenterLonLat_=this.toLonLatTransform_(Object(o.getCenter)(t.getExtent())),this.projection_=t},m.prototype.setMap=function(t){this.map_&&(Object(n.unlistenByKey)(this.postcomposeListenerKey_),this.postcomposeListenerKey_=null,this.map_.render()),t&&(this.postcomposeListenerKey_=Object(n.listen)(t,d.a.POSTCOMPOSE,this.handlePostCompose_,this),t.render()),this.map_=t},e.default=m},function(t,e,i){"use strict";i.r(e);var r=i(55),n=i(92),o=i(24),a=i(42),s=i(27),l=i(21),u=function(t){function e(e){var i=void 0!==e.rotateWithView&&e.rotateWithView;t.call(this,{opacity:1,rotateWithView:i,rotation:void 0!==e.rotation?e.rotation:0,scale:1}),this.checksums_=null,this.canvas_=null,this.hitDetectionCanvas_=null,this.fill_=void 0!==e.fill?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=void 0!==e.radius?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=void 0!==e.angle?e.angle:0,this.stroke_=void 0!==e.stroke?e.stroke:null,this.anchor_=null,this.size_=null,this.imageSize_=null,this.hitDetectionImageSize_=null,this.atlasManager_=e.atlasManager,this.render_(this.atlasManager_)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),atlasManager:this.atlasManager_});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return s.a.LOADED},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t,e){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t,e){},e.prototype.render_=function(t){var e,i,r="",s="",u=0,c=null,h=0,d=0;this.stroke_&&(null===(i=this.stroke_.getColor())&&(i=l.defaultStrokeStyle),i=Object(n.asColorLike)(i),void 0===(d=this.stroke_.getWidth())&&(d=l.defaultLineWidth),c=this.stroke_.getLineDash(),h=this.stroke_.getLineDashOffset(),a.CANVAS_LINE_DASH||(c=null,h=0),void 0===(s=this.stroke_.getLineJoin())&&(s=l.defaultLineJoin),void 0===(r=this.stroke_.getLineCap())&&(r=l.defaultLineCap),void 0===(u=this.stroke_.getMiterLimit())&&(u=l.defaultMiterLimit));var p=2*(this.radius_+d)+1,f={strokeStyle:i,strokeWidth:d,size:p,lineCap:r,lineDash:c,lineDashOffset:h,lineJoin:s,miterLimit:u};if(void 0===t){var g=Object(o.createCanvasContext2D)(p,p);this.canvas_=g.canvas,e=p=this.canvas_.width,this.draw_(f,g,0,0),this.createHitDetectionCanvas_(f)}else{p=Math.round(p);var y,v=!this.fill_;v&&(y=this.drawHitDetectionCanvas_.bind(this,f));var m=this.getChecksum(),_=t.add(m,p,p,this.draw_.bind(this,f),y);this.canvas_=_.image,this.origin_=[_.offsetX,_.offsetY],e=_.image.width,v?(this.hitDetectionCanvas_=_.hitImage,this.hitDetectionImageSize_=[_.hitImage.width,_.hitImage.height]):(this.hitDetectionCanvas_=this.canvas_,this.hitDetectionImageSize_=[e,e])}this.anchor_=[p/2,p/2],this.size_=[p,p],this.imageSize_=[e,e]},e.prototype.draw_=function(t,e,i,r){var o,a,s;e.setTransform(1,0,0,1,0,0),e.translate(i,r),e.beginPath();var u=this.points_;if(u===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(u*=2),o=0;o<=u;o++)a=2*o*Math.PI/u-Math.PI/2+this.angle_,s=o%2==0?this.radius_:c,e.lineTo(t.size/2+s*Math.cos(a),t.size/2+s*Math.sin(a))}if(this.fill_){var h=this.fill_.getColor();null===h&&(h=l.defaultFillStyle),e.fillStyle=Object(n.asColorLike)(h),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.fill_)this.hitDetectionCanvas_=this.canvas_;else{var e=Object(o.createCanvasContext2D)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e,0,0)}},e.prototype.drawHitDetectionCanvas_=function(t,e,i,n){e.setTransform(1,0,0,1,0,0),e.translate(i,n),e.beginPath();var o=this.points_;if(o===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var a,s,u,c=void 0!==this.radius2_?this.radius2_:this.radius_;for(c!==this.radius_&&(o*=2),a=0;a<=o;a++)u=2*a*Math.PI/o-Math.PI/2+this.angle_,s=a%2==0?this.radius_:c,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle=Object(r.asString)(l.defaultFillStyle),e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e.prototype.getChecksum=function(){var t=this.stroke_?this.stroke_.getChecksum():"-",e=this.fill_?this.fill_.getChecksum():"-";if(!this.checksums_||t!=this.checksums_[1]||e!=this.checksums_[2]||this.radius_!=this.checksums_[3]||this.radius2_!=this.checksums_[4]||this.angle_!=this.checksums_[5]||this.points_!=this.checksums_[6]){var i="r"+t+e+(void 0!==this.radius_?this.radius_.toString():"-")+(void 0!==this.radius2_?this.radius2_.toString():"-")+(void 0!==this.angle_?this.angle_.toString():"-")+(void 0!==this.points_?this.points_.toString():"-");this.checksums_=[i,t,e,this.radius_,this.radius2_,this.angle_,this.points_]}return this.checksums_[0]},e}(i(224).default);e.default=u},function(t,e,i){"use strict";function r(t,e){return[[-1/0,-1/0,1/0,1/0]]}function n(t,e){return[t]}function o(t){return function(e,i){var r=t.getZForResolution(i),n=t.getTileRangeForExtentAndZ(e,r),o=[],a=[r,0,0];for(a[1]=n.minX;a[1]<=n.maxX;++a[1])for(a[2]=n.minY;a[2]<=n.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}}i.r(e),i.d(e,"all",function(){return r}),i.d(e,"bbox",function(){return n}),i.d(e,"tile",function(){return o})},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(50),o=i(16),a=i(28),s=i(24),l=i(3),u=i(10),c=i(71),h=i.n(c),d=i(1),p=i(132),f=i(9),g=i(49),y=i(30),v=i(21),m=i(229),_=i(77),b=i(163),S=i(60),O=i(17),C={image:[y.a.POLYGON,y.a.CIRCLE,y.a.LINE_STRING,y.a.IMAGE,y.a.TEXT],hybrid:[y.a.POLYGON,y.a.LINE_STRING]},T={image:[y.a.DEFAULT],hybrid:[y.a.IMAGE,y.a.TEXT,y.a.DEFAULT],vector:_.a},x=function(t){function e(e){t.call(this,e,!0),this.declutterTree_=e.getDeclutter()?h()(9,void 0):null,this.dirty_=!1,this.renderedLayerRevision_,this.tmpTransform_=Object(O.c)();var i=e.getRenderMode();this.zDirection=i===p.a.VECTOR?1:0,i!==p.a.VECTOR&&(this.context=Object(s.createCanvasContext2D)()),Object(l.listen)(v.labelCache,u.default.CLEAR,this.handleFontsChanged_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){Object(l.unlisten)(v.labelCache,u.default.CLEAR,this.handleFontsChanged_,this),t.prototype.disposeInternal.call(this)},e.prototype.getTile=function(e,i,r,n,a){var s=t.prototype.getTile.call(this,e,i,r,n,a);return s.getState()===o.default.LOADED&&(this.createReplayGroup_(s,n,a),this.context&&this.renderTileImage_(s,n,a)),s},e.prototype.getTileImage=function(t){var e=this.getLayer();return t.getImage(e)},e.prototype.prepareFrame=function(e,i){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e,i)},e.prototype.createReplayGroup_=function(t,e,i){var r=this,n=this.getLayer(),a=n.getRevision(),s=n.getRenderOrder()||null,l=t.getReplayState(n);if(l.dirty||l.renderedRevision!=a||l.renderedRenderOrder!=s){for(var u=n.getSource(),c=u.getTileGrid(),h=u.getTileGridForProjection(i).getResolution(t.tileCoord[0]),p=t.extent,y=function(a,y){var v=t.getTile(t.tileKeys[a]);if(v.getState()==o.default.LOADED){var _=v.tileCoord,b=c.getTileCoordExtent(_),O=Object(d.getIntersection)(p,b),C=Object(d.equals)(b,O)?null:Object(d.buffer)(O,n.getRenderBuffer()*h,r.tmpExtent),T=v.getProjection(),x=!1;Object(f.equivalent)(i,T)||(x=!0,v.setProjection(i)),l.dirty=!1;var E=new m.a(0,O,h,e,u.getOverlaps(),r.declutterTree_,n.getRenderBuffer()),P=Object(S.b)(h,e),j=function(t){var e,i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,h)),e){var r=this.renderFeature(t,P,e,E);this.dirty_=this.dirty_||r,l.dirty=l.dirty||r}},R=v.getFeatures();s&&s!==l.renderedRenderOrder&&R.sort(s);for(var I=0,L=R.length;I<L;++I){var w=R[I];x&&(T.getUnits()==g.default.TILE_PIXELS&&(T.setWorldExtent(b),T.setExtent(v.getExtent())),w.getGeometry().transform(T,i)),C&&!Object(d.intersects)(C,w.getGeometry().getExtent())||j.call(r,w)}E.finish(),v.setReplayGroup(n,t.tileCoord.toString(),E)}},v=0,_=t.tileKeys.length;v<_;++v)y(v);l.renderedRevision=a,l.renderedRenderOrder=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,n,a){var s=e.viewState.resolution,l=e.viewState.rotation;i=void 0==i?0:i;var u,c,h,p,f=this.getLayer(),g={},y=this.renderedTiles;for(h=0,p=y.length;h<p;++h){var v=y[h];if(u=Object(d.buffer)(v.extent,i*s,u),Object(d.containsCoordinate)(u,t))for(var m=0,_=v.tileKeys.length;m<_;++m){var b=v.getTile(v.tileKeys[m]);if(b.getState()==o.default.LOADED){var S=b.getReplayGroup(f,v.tileCoord.toString());c=c||S.forEachFeatureAtCoordinate(t,s,l,i,{},function(t){var e=Object(r.getUid)(t);if(!(e in g))return g[e]=!0,n.call(a,t,f)},null)}}}return c},e.prototype.getReplayTransform_=function(t,e){var i=this.getLayer().getSource().getTileGrid(),r=t.tileCoord,n=i.getResolution(r[0]),o=e.viewState,a=e.pixelRatio,s=o.resolution/a,l=i.getTileCoordExtent(r,this.tmpExtent),u=o.center,c=Object(d.getTopLeft)(l),h=e.size,p=Math.round(a*h[0]/2),f=Math.round(a*h[1]/2);return Object(O.b)(this.tmpTransform_,p,f,n/s,n/s,o.rotation,(c[0]-u[0])/n,(u[1]-c[1])/n)},e.prototype.handleFontsChanged_=function(t){var e=this.getLayer();e.getVisible()&&void 0!==this.renderedLayerRevision_&&e.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.postCompose=function(e,i,r){var n=this.getLayer(),s=n.getRenderMode();if(s!=p.a.IMAGE){var l,u,c=n.getDeclutter()?{}:null,h=n.getSource(),d=T[s],f=i.pixelRatio,g=i.viewState.rotation,y=i.size;g&&(l=Math.round(f*y[0]/2),u=Math.round(f*y[1]/2),Object(v.rotateAtOffset)(e,-g,l,u)),c&&this.declutterTree_.clear();for(var _=i.viewHints,b=!(_[a.default.ANIMATING]||_[a.default.INTERACTING]),S=this.renderedTiles,O=h.getTileGridForProjection(i.viewState.projection),C=[],x=[],E=S.length-1;E>=0;--E){var P=S[E];if(P.getState()!=o.default.ABORT)for(var j=P.tileCoord,R=O.getTileCoordExtent(j,this.tmpExtent)[0]-P.extent[0],I=void 0,L=0,w=P.tileKeys.length;L<w;++L){var A=P.getTile(P.tileKeys[L]);if(A.getState()==o.default.LOADED){var M=A.getReplayGroup(n,j.toString());if(M&&M.hasReplays(d)){I||(I=this.getTransform(i,R));var F=A.tileCoord[0],k=M.getClipCoords(I);e.save(),e.globalAlpha=r.opacity;for(var N=0,D=C.length;N<D;++N){var G=C[N];F<x[N]&&(e.beginPath(),e.moveTo(k[0],k[1]),e.lineTo(k[2],k[3]),e.lineTo(k[4],k[5]),e.lineTo(k[6],k[7]),e.moveTo(G[6],G[7]),e.lineTo(G[4],G[5]),e.lineTo(G[2],G[3]),e.lineTo(G[0],G[1]),e.clip())}M.replay(e,I,g,{},b,d,c),e.restore(),C.push(k),x.push(F)}}}}c&&Object(m.b)(c,e,g,b),g&&Object(v.rotateAtOffset)(e,g,l,u)}t.prototype.postCompose.call(this,e,i,r)},e.prototype.renderFeature=function(t,e,i,r){if(!i)return!1;var n=!1;if(Array.isArray(i))for(var o=0,a=i.length;o<a;++o)n=Object(S.d)(r,t,i[o],e,this.handleStyleImageChange_,this)||n;else n=Object(S.d)(r,t,i,e,this.handleStyleImageChange_,this);return n},e.prototype.renderTileImage_=function(t,e,i){var r=this.getLayer(),n=t.getReplayState(r),a=r.getRevision(),s=C[r.getRenderMode()];if(s&&n.renderedTileRevision!==a){n.renderedTileRevision=a;var l=t.wrappedTileCoord,u=l[0],c=r.getSource(),h=c.getTileGridForProjection(i),d=h.getResolution(u),p=t.getContext(r),f=c.getTilePixelSize(u,e,i);p.canvas.width=f[0],p.canvas.height=f[1];for(var g=h.getTileCoordExtent(l,this.tmpExtent),y=0,v=t.tileKeys.length;y<v;++y){var m=t.getTile(t.tileKeys[y]);if(m.getState()==o.default.LOADED){var _=e/d,b=Object(O.f)(this.tmpTransform_);Object(O.h)(b,_,-_),Object(O.j)(b,-g[0],-g[3]),m.getReplayGroup(r,t.tileCoord.toString()).replay(p,b,0,{},!0,s)}}}},e}(b.default);x.handles=function(t){return t.getType()===n.a.VECTOR_TILE},x.create=function(t,e){return new x(e)},e.default=x},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(48),o=i(51),a=i(25),s=i(122),l=i(23),u=i(3),c=i(10),h=i(1),d=i(222),p=i(11),f=i(43),g={LAYERS:"layers"},y=function(t){function e(e){var i=e||{},r=Object(p.assign)({},i);delete r.layers;var o=i.layers;t.call(this,r),this.layersListenerKeys_=[],this.listenerKeys_={},Object(u.listen)(this,Object(a.getChangeEventType)(g.LAYERS),this.handleLayersChanged_,this),o?Array.isArray(o)?o=new n.default(o.slice(),{unique:!0}):Object(l.a)("function"==typeof o.getArray,43):o=new n.default(void 0,{unique:!0}),this.setLayers(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(u.unlistenByKey),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(Object(u.listen)(t,o.default.ADD,this.handleLayersAdd_,this),Object(u.listen)(t,o.default.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(u.unlistenByKey);Object(p.clear)(this.listenerKeys_);for(var i=t.getArray(),n=0,a=i.length;n<a;n++){var l=i[n];this.listenerKeys_[Object(r.getUid)(l)]=[Object(u.listen)(l,s.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(u.listen)(l,c.default.CHANGE,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[Object(r.getUid)(e)]=[Object(u.listen)(e,s.a.PROPERTYCHANGE,this.handleLayerChange_,this),Object(u.listen)(e,c.default.CHANGE,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=t.element,i=Object(r.getUid)(e);this.listenerKeys_[i].forEach(u.unlistenByKey),delete this.listenerKeys_[i],this.changed()},e.prototype.getLayers=function(){return this.get(g.LAYERS)},e.prototype.setLayers=function(t){this.set(g.LAYERS,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach(function(t){t.getLayersArray(e)}),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],i=e.length;this.getLayers().forEach(function(t){t.getLayerStatesArray(e)});for(var r=this.getLayerState(),n=i,o=e.length;n<o;n++){var a=e[n];a.opacity*=r.opacity,a.visible=a.visible&&r.visible,a.maxResolution=Math.min(a.maxResolution,r.maxResolution),a.minResolution=Math.max(a.minResolution,r.minResolution),void 0!==r.extent&&(void 0!==a.extent?a.extent=Object(h.getIntersection)(a.extent,r.extent):a.extent=r.extent)}return e},e.prototype.getSourceState=function(){return f.a.READY},e}(d.default);e.default=y},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e){t.call(this,"Or",Array.prototype.slice.call(arguments))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(265).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e){t.call(this,"Not"),this.condition=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(135).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"BBOX"),this.geometryName=e,this.extent=i,this.srsName=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(135).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"Contains",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(192).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"Intersects",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(192).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"Within",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(192).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"PropertyIsEqualTo",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(121).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"PropertyIsNotEqualTo",e,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(121).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i){t.call(this,"PropertyIsLessThan",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(121).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i){t.call(this,"PropertyIsLessThanOrEqualTo",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(121).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i){t.call(this,"PropertyIsGreaterThan",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(121).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i){t.call(this,"PropertyIsGreaterThanOrEqualTo",e,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(121).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e){t.call(this,"PropertyIsNull",e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(136).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"PropertyIsBetween",e),this.lowerBoundary=i,this.upperBoundary=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(136).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r,n,o,a){t.call(this,"PropertyIsLike",e),this.pattern=i,this.wildCard=void 0!==r?r:"*",this.singleChar=void 0!==n?n:".",this.escapeChar=void 0!==o?o:"!",this.matchCase=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(136).a);e.default=r},function(t,e,i){"use strict";i.r(e);var r=function(t){function e(e,i,r){t.call(this,"During",e),this.begin=i,this.end=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(136).a);e.default=r},function(t,e,i){"use strict";i.r(e),i.d(e,"ATTRIBUTION",function(){return r});var r='&#169; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.',n=function(t){function e(e){var i,n=e||{};i=void 0!==n.attributions?n.attributions:[r];var o=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",a=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";t.call(this,{attributions:i,cacheSize:n.cacheSize,crossOrigin:o,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:a,wrapX:n.wrapX,attributionsCollapsible:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(i(176).default);e.default=n},function(t,e,i){"use strict";i.r(e),i.d(e,"createFromCapabilitiesMatrixSet",function(){return a});var r=i(12),n=i(9),o=function(t){function e(e){t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(i(105).default);function a(t,e,i){var a=[],s=[],l=[],u=[],c=[],h=void 0!==i?i:[],d=t.SupportedCRS,p=Object(n.get)(d.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(n.get)(d),f=p.getMetersPerUnit(),g="ne"==p.getAxisOrientation().substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(e){if(!(h.length>0)||Object(r.d)(h,function(i){return e.Identifier==i.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===i.TileMatrix})){s.push(e.Identifier);var i=28e-5*e.ScaleDenominator/f,n=e.TileWidth,o=e.TileHeight;g?l.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):l.push(e.TopLeftCorner),a.push(i),u.push(n==o?n:[n,o]),c.push([e.MatrixWidth,-e.MatrixHeight])}}),new o({extent:e,origins:l,resolutions:a,matrixIds:s,tileSizes:u,sizes:c})}e.default=o},function(t,e,i){"use strict";i.r(e);var r=i(209);i.d(e,"Attribution",function(){return r.default});var n=i(75);i.d(e,"Control",function(){return n.default});var o=i(277);i.d(e,"FullScreen",function(){return o.default});var a=i(278);i.d(e,"MousePosition",function(){return a.default});var s=i(231);i.d(e,"OverviewMap",function(){return s.default});var l=i(208);i.d(e,"Rotate",function(){return l.default});var u=i(279);i.d(e,"ScaleLine",function(){return u.default});var c=i(207);i.d(e,"Zoom",function(){return c.default});var h=i(280);i.d(e,"ZoomSlider",function(){return h.default});var d=i(281);i.d(e,"ZoomToExtent",function(){return d.default});var p=i(73);i.d(e,"defaults",function(){return p.a})},function(t,e,i){t.exports=!i(151)&&!i(196)(function(){return 7!=Object.defineProperty(i(284)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){t.exports={default:i(496),__esModule:!0}},function(t,e,i){"use strict";var r=i(103),n=i(167),o=i(151),a=i(133),s=i(351),l=i(352).KEY,u=i(196),c=i(289),h=i(236),d=i(235),p=i(110),f=i(290),g=i(291),y=i(501),v=i(504),m=i(140),_=i(141),b=i(296),S=i(168),O=i(285),C=i(233),T=i(297),x=i(357),E=i(287),P=i(355),j=i(150),R=i(292),I=E.f,L=j.f,w=x.f,A=r.Symbol,M=r.JSON,F=M&&M.stringify,k=p("_hidden"),N=p("toPrimitive"),D={}.propertyIsEnumerable,G=c("symbol-registry"),B=c("symbols"),U=c("op-symbols"),V=Object.prototype,W="function"==typeof A&&!!P.f,Z=r.QObject,z=!Z||!Z.prototype||!Z.prototype.findChild,H=o&&u(function(){return 7!=T(L({},"a",{get:function(){return L(this,"a",{value:7}).a}})).a})?function(t,e,i){var r=I(V,e);r&&delete V[e],L(t,e,i),r&&t!==V&&L(V,e,r)}:L,Y=function(t){var e=B[t]=T(A.prototype);return e._k=t,e},X=W&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},q=function(t,e,i){return t===V&&q(U,e,i),m(t),e=O(e,!0),m(i),n(B,e)?(i.enumerable?(n(t,k)&&t[k][e]&&(t[k][e]=!1),i=T(i,{enumerable:C(0,!1)})):(n(t,k)||L(t,k,C(1,{})),t[k][e]=!0),H(t,e,i)):L(t,e,i)},K=function(t,e){m(t);for(var i,r=y(e=S(e)),n=0,o=r.length;o>n;)q(t,i=r[n++],e[i]);return t},J=function(t){var e=D.call(this,t=O(t,!0));return!(this===V&&n(B,t)&&!n(U,t))&&(!(e||!n(this,t)||!n(B,t)||n(this,k)&&this[k][t])||e)},Q=function(t,e){if(t=S(t),e=O(e,!0),t!==V||!n(B,e)||n(U,e)){var i=I(t,e);return!i||!n(B,e)||n(t,k)&&t[k][e]||(i.enumerable=!0),i}},$=function(t){for(var e,i=w(S(t)),r=[],o=0;i.length>o;)n(B,e=i[o++])||e==k||e==l||r.push(e);return r},tt=function(t){for(var e,i=t===V,r=w(i?U:S(t)),o=[],a=0;r.length>a;)!n(B,e=r[a++])||i&&!n(V,e)||o.push(B[e]);return o};W||(s((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===V&&e.call(U,i),n(this,k)&&n(this[k],t)&&(this[k][t]=!1),H(this,t,C(1,i))};return o&&z&&H(V,t,{configurable:!0,set:e}),Y(t)}).prototype,"toString",function(){return this._k}),E.f=Q,j.f=q,i(358).f=x.f=$,i(288).f=J,P.f=tt,o&&!i(198)&&s(V,"propertyIsEnumerable",J,!0),f.f=function(t){return Y(p(t))}),a(a.G+a.W+a.F*!W,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)p(et[it++]);for(var rt=R(p.store),nt=0;rt.length>nt;)g(rt[nt++]);a(a.S+a.F*!W,"Symbol",{for:function(t){return n(G,t+="")?G[t]:G[t]=A(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in G)if(G[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!W,"Object",{create:function(t,e){return void 0===e?T(t):K(T(t),e)},defineProperty:q,defineProperties:K,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var ot=u(function(){P.f(1)});a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return P.f(b(t))}}),M&&a(a.S+a.F*(!W||u(function(){var t=A();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){for(var e,i,r=[t],n=1;arguments.length>n;)r.push(arguments[n++]);if(i=e=r[1],(_(e)||void 0!==t)&&!X(t))return v(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!X(e))return e}),r[1]=e,F.apply(M,r)}}),A.prototype[N]||i(166)(A.prototype,N,A.prototype.valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,i){t.exports=i(166)},function(t,e,i){var r=i(235)("meta"),n=i(141),o=i(167),a=i(150).f,s=0,l=Object.isExtensible||function(){return!0},u=!i(196)(function(){return l(Object.preventExtensions({}))}),c=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return u&&h.NEED&&l(t)&&!o(t,r)&&c(t),t}}},function(t,e,i){var r=i(167),n=i(168),o=i(502)(!1),a=i(294)("IE_PROTO");t.exports=function(t,e){var i,s=n(t),l=0,u=[];for(i in s)i!=a&&r(s,i)&&u.push(i);for(;e.length>l;)r(s,i=e[l++])&&(~o(u,i)||u.push(i));return u}},function(t,e,i){var r=i(293),n=Math.min;t.exports=function(t){return t>0?n(r(t),9007199254740991):0}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var r=i(103).document;t.exports=r&&r.documentElement},function(t,e,i){var r=i(168),n=i(358).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return n(t)}catch(t){return a.slice()}}(t):n(r(t))}},function(t,e,i){var r=i(353),n=i(295).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},function(t,e,i){t.exports={default:i(506),__esModule:!0}},function(t,e,i){"use strict";var r=i(510)(!0);i(361)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=r(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";var r=i(198),n=i(133),o=i(351),a=i(166),s=i(199),l=i(511),u=i(236),c=i(362),h=i(110)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,i,f,g,y,v){l(i,e,f);var m,_,b,S=function(t){if(!d&&t in x)return x[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},O=e+" Iterator",C="values"==g,T=!1,x=t.prototype,E=x[h]||x["@@iterator"]||g&&x[g],P=E||S(g),j=g?C?S("entries"):P:void 0,R="Array"==e&&x.entries||E;if(R&&(b=c(R.call(new t)))!==Object.prototype&&b.next&&(u(b,O,!0),r||"function"==typeof b[h]||a(b,h,p)),C&&E&&"values"!==E.name&&(T=!0,P=function(){return E.call(this)}),r&&!v||!d&&!T&&x[h]||a(x,h,P),s[e]=P,s[O]=p,g)if(m={values:C?P:S("values"),keys:y?P:S("keys"),entries:j},v)for(_ in m)_ in x||o(x,_,m[_]);else n(n.P+n.F*(d||T),e,m);return m}},function(t,e,i){var r=i(167),n=i(296),o=i(294)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=n(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,i){i(512);for(var r=i(103),n=i(166),o=i(199),a=i(110)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],h=c&&c.prototype;h&&!h[a]&&n(h,a,u),o[u]=o.Array}},function(t,e){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CacheTileLayer=e.CacheTileLayerSource=void 0;var r=i(6),n=i(22),o=h(i(81)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=h(i(105)),l=i(4),u=i(11),c=h(i(154));function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=t||{};o.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,r=[-180,-90,180,90];null!=i&&(r=i.getExtent()),this.extent=void 0!==e.extent?e.extent:r,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=void 0!==e.resolutions?e.resolutions:this.getResolutions(),this.origin=void 0!==e.origin?e.origin:a.getTopLeft(this.extent),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.guid=void 0!==e.guid?e.guid:(0,n.newGuid)(),this.cache=!0,this.tileGrid=new s.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,l.inherits)(d,o.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=a.getWidth(this.extent),e=a.getHeight(this.extent);this.maxResolution=(t>=e?t:e)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},d.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var n;this.cache=!0,n=""===this.domain?this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name+"?f="+this.f+"&cache="+this.cache+"&guid="+this.guid+"&level={z}&col={x}&row={y}&w="+this.tileSize+"&h="+this.tileSize:this.domain+"/igs/rest/mrms/docs/"+this.name+"?f="+this.f+"&cache="+this.cache+"&guid="+this.guid+"&level={z}&col={x}&row={y}&w="+this.tileSize+"&h="+this.tileSize;var o=t[0],a=t[1],s=-(t[2]+1);if(!(a>=Math.pow(2,o)||s>=Math.pow(2,o)))return n.replace("{x}",a.toString()).replace("{y}",s.toString()).replace("{z}",o.toString())},e.CacheTileLayerSource=d,r.Zondy.Source.CacheTileLayerSource=d;var p=function(t,e,i){var r=i||{};(0,u.assign)(r,{layerName:t}),(0,u.assign)(r,{name:e}),r.source=r.source?r.source:new d(r);var n=(0,u.assign)({},r);n.maxResolution=1/0,c.default.call(this,n),(0,u.assign)(this,r)};(0,l.inherits)(p,c.default),e.CacheTileLayer=p,r.Zondy.Map.CacheTileLayer=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeSource=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(15)),l=i(6),u=d(i(282)),c=i(367),h=i(22);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i){(0,n.default)(this,e),i=i||{};var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,{canvasFunction:s,logo:i.logo,projection:i.projection,ratio:i.ratio,resolutions:i.resolutions,state:i.state}));function s(t,e,i,r,n){var o=r[0]*i,a=r[1]*i;if(this.context||(this.context=(0,h.createCanvasContext2D)(o,a)),!this.features)return this.context.canvas;this.pixelRatio=i;var s=this.map.getSize()[0]*i,l=this.map.getSize()[1]*i;this.offset=[(o-s)/2/i,(a-l)/2/i],this.notFirst||(this.redrawThematicFeatures(t),this.notFirst=!0),this.div.id=this.id,this.div.className="themeLayer",this.div.style.width=o+"px",this.div.style.height=a+"px",this.map.getViewport().appendChild(this.div),this.renderer.resize(),this.map.getViewport().removeChild(this.div),this.themeCanvas=this.renderer.painter.root.getElementsByTagName("canvas")[0],this.themeCanvas.width=o,this.themeCanvas.height=a,this.themeCanvas.style.width=o+"px",this.themeCanvas.style.height=a+"px",this.themeCanvas.getContext("2d").clearRect(0,0,o,a);var u=this.renderer.painter._layers.hover.ctx.canvas,c=(0,h.createCanvasContext2D)(o,a);c.drawImage(u,0,0,u.width,u.height,0,0,o,a),this.redrawThematicFeatures(t);var d=this.context.canvas;return this.context.clearRect(0,0,d.width,d.height),d.width=o,d.height=a,d.style.width=o+"px",d.style.height=a+"px",this.context.drawImage(this.themeCanvas,0,0,o,a,0,0,o,a),this.context.drawImage(c.canvas,0,0,o,a,0,0,o,a),this.context.canvas}o.id=i.id||"themeLayer_",o.canvasFunctionInternal_=s,o.EVENT_TYPES=["loadstart","loadend","loadcancel","visibilitychanged","move","moveend","added","removed","tileloaded","beforefeaturesadded","featuresadded","featuresremoved"],o.features=[],o.TFEvents=i.TFEvents||[],o.map=i.map;var l=o.map.getSize();return o.div=document.createElement("div"),o.map.getViewport().appendChild(o.div),o.div.style.width=l[0]+"px",o.div.style.height=l[1]+"px",o.setOpacity(i.opacity),o.levelRenderer=new c.LevelRenderer,o.movingOffset=[0,0],o.renderer=o.levelRenderer.init(o.div),o.map.getViewport().removeChild(o.div),o.renderer.clear(),o.addTFEvents(),o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.EVENT_TYPES=null,this.isBaseLayer=null,this.TFEvents=null,this.destroyFeatures(),this.features=null,this.renderer&&this.renderer.dispose(),this.renderer=null,this.levelRenderer=null,this.movingOffset=null,this.currentMousePosition=null}},{key:"destroyFeatures",value:function(t){void 0===t&&(t=this.features),t&&(this.removeFeatures(t),t=null)}},{key:"setOpacity",value:function(t){if(t!==this.opacity){this.opacity=t;var e=this.div;(0,h.modifyDOMElement)(e,null,null,null,null,null,null,t),null!==this.map&&this.dispatchEvent({type:"changelayer",value:{layer:this,property:"opacity"}})}}},{key:"addFeatures",value:function(t){}},{key:"removeFeatures",value:function(t){if(t&&0!==t.length){if(t===this.features)return this.removeAllFeatures();(0,h.isArray)(t)||(t=[t]);for(var e=[],i=t.length-1;i>=0;i--){var r=t[i],n=(0,h.indexOf)(this.features,r);-1!==n?this.features.splice(n,1):e.push(r)}for(var o=[],a=0,s=this.features.length;a<s;a++)r=this.features[a],o.push(r);this.features=[],this.addFeatures(o),this.renderer&&this.redrawThematicFeatures(this.map.getView().calculateExtent());var l=0===e.length;this.dispatchEvent({type:"featuresremoved",value:{features:e,succeed:l}})}}},{key:"removeAllFeatures",value:function(){this.renderer&&this.renderer.clear(),this.features=[],this.dispatchEvent({type:"featuresremoved",value:{features:[],succeed:!0}})}},{key:"getFeatures",value:function(){for(var t=this.features.length,e=new Array(t),i=0;i<t;++i)e[i]=this.features[i];return e}},{key:"getFeatureBy",value:function(t,e){var i=null;for(var r in this.features)if(this.features[r][t]===e){i=this.features[r];break}return i}},{key:"getFeatureById",value:function(t){return this.getFeatureBy("FID",t)}},{key:"getFeaturesByAttribute",value:function(t,e){var i,r=[];for(var n in this.features)(i=this.features[n])&&i.attributes&&i.attributes[t]===e&&r.push(i);return r}},{key:"redrawThematicFeatures",value:function(t){}},{key:"on",value:function(t,e){var i=e;if(this.renderer)this.renderer.on(t,i);else{var r=[];r.push(t),r.push(i),this.TFEvents.push(r)}}},{key:"fire",value:function(t,e){if(this.offset){e=e.originalEvent;var i=this.getX(e),r=this.getY(e),n=-this.map.getView().getRotation(),o=this.map.getPixelFromCoordinate(this.map.getView().getCenter()),a=this.scale([i,r],o,this.pixelRatio),s=this.rotate(a,n,o),l=[s[0]+this.offset[0],s[1]+this.offset[1]],u=document.createEvent("Event");u.initEvent("pointermove",!0,!0),u.offsetX=l[0],u.offsetY=l[1],u.layerX=l[0],u.layerY=l[1],u.clientX=l[0],u.clientY=l[1],u.x=i,u.y=r,"click"===t&&this.renderer.handler._clickHandler(u),"dblclick"===t&&this.renderer.handler._dblclickHandler(u),"onmousewheel"===t&&this.renderer.handler._mousewheelHandler(u),"mousemove"===t&&(this.renderer.handler._mousemoveHandler(u),this.changed()),"onmouseout"===t&&this.renderer.handler._mouseoutHandler(u),"onmousedown"===t&&this.renderer.handler._mousedownHandler(u),"onmouseup"===t&&this.renderer.handler._mouseupHandler(u)}}},{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"un",value:function(t,e){var i=e;if(this.renderer)this.renderer.un(t,i);else{for(var r=this.TFEvents,n=r.length,o=[],a=0;a<n;a++){var s=r[a];s[0]===t&&s[1]===i||o.push(s)}this.TFEvents=o}}},{key:"addTFEvents",value:function(){for(var t=this.TFEvents,e=t.length,i=0;i<e;i++)this.renderer.on(t[i][0],t[i][1])}},{key:"getLocalXY",value:function(t){var e,i=this.map;(0,h.isArray)(t)&&(e=i.getPixelFromCoordinate(t));var r=-i.getView().getRotation(),n=i.getPixelFromCoordinate(i.getView().getCenter()),o=e;return this.pixelRatio&&(o=this.scale(e,n,this.pixelRatio)),e&&n&&(o=this.rotate(o,r,n)),this.offset&&o?[o[0]+this.offset[0],o[1]+this.offset[1]]:o}},{key:"rotate",value:function(t,e,i){return[Math.cos(e)*(t[0]-i[0])-Math.sin(e)*(t[1]-i[1])+i[0],Math.sin(e)*(t[0]-i[0])+Math.cos(e)*(t[1]-i[1])+i[1]]}},{key:"scale",value:function(t,e,i){return[(t[0]-e[0])*i+e[0],(t[1]-e[1])*i+e[1]]}}]),e}(u.default);e.ThemeSource=p,l.Zondy.Source.ThemeSource=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LevelRenderer=void 0;var r=l(i(8)),n=l(i(18)),o=i(6),a=i(22),s=i(368);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,r.default)(this,t),t._instances={},t.Tool={},this.CLASS_NAME="Zondy.LevelRenderer"}return(0,n.default)(t,[{key:"destroy",value:function(){this.dispose()}},{key:"init",value:function(e){var i=new s.Render((0,a.newGuid)(),e);return t._instances[i.id]=i,i}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var i in t._instances)t._instances[i].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}]),t}();e.LevelRenderer=u,o.Zondy.LevelRenderer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Render=void 0;var r=h(i(8)),n=h(i(18)),o=i(6),a=i(22),s=i(369),l=i(378),u=i(379),c=i(380);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,i){(0,r.default)(this,t),this.id=e,this.storage=new s.Storage,this.painter=new l.Painter(i,this.storage),this.handler=new u.Handler(i,this.storage,this.painter),this.animatingElements=[],this.animation=new c.Animation({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="Zondy.LevelRenderer.Render"}return(0,n.default)(t,[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,i){if("string"==typeof t&&(t=this.storage.get(t)),t){var r;if(e){for(var n=e.split("."),o=t,s=0,l=n.length;s<l;s++)o&&(o=o[n[s]]);o&&(r=o)}else r=t;if(!r)return;var u=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&u.push(t),t.__aniCount++,this.animation.animate(r,{loop:i}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(0,a.indexOf)(u,t);u.splice(e,1)}})}}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,i){return this.painter.toDataURL(t,e,i)}},{key:"shapeToImage",value:function(t,e,i){var r=(0,a.newGuid)();return this.painter.shapeToImage(r,t,e,i)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}],[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var i=0,r=e.length;i<r;i++)t.storage.mod(e[i].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}]),t}();e.Render=d,o.Zondy.LevelRenderer.Render=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Storage=void 0;var r=l(i(8)),n=l(i(18)),o=i(6),a=i(22),s=i(370);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,r.default)(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="Zondy.LevelRenderer.Storage"}return(0,n.default)(t,[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(e||(e={hover:!1,normal:"down",update:!1}),e.hover)for(var i=0,r=this._hoverElements.length;i<r;i++){var n=this._hoverElements[i];if(n.updateTransform(),t(n))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var o=this._shapeList.length;o--;)if(t(this._shapeList[o]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(t(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var i=[],r=this._hoverElements.length,n=0;n<r;n++){i.push(this._hoverElements[n]);var o=this._hoverElements[n].hoverConnect;if(o)for(var a,s=0,l=(o=o instanceof Array?o:[o]).length;s<l;s++)(a=o[s].id?o[s]:this.get(o[s]))&&i.push(a)}if(i.sort(t.shapeCompareFunc),e)for(var u=0,c=i.length;u<c;u++)i[u].updateTransform();return i}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,i=0;i<e;i++){var r=this._roots[i];this._updateAndAddShape(r)}this._shapeList.length=this._shapeListOffset;for(var n=this._shapeList.length,o=0;o<n;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"===t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var i=0;i<t._children.length;i++){var r=t._children[i];r.__dirty=t.__dirty||r.__dirty,this._updateAndAddShape(r,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var i=this._elements[t];if(i&&(i.modSelf(),e))if(e.parent||e._storage||e.__startClip){var r={};for(var n in e)"parent"!==n&&"_storage"!==n&&"__startClip"!==n&&e.hasOwnProperty(n)&&(r[n]=e[n]);(0,a.merge)(i,r,!0)}else(0,a.merge)(i,e,!0);return this}},{key:"drift",value:function(t,e,i){var r=this._elements[t];return r&&(r.needTransform=!0,"horizontal"===r.draggable?i=0:"vertical"===r.draggable&&(e=0),(!r.ondrift||r.ondrift&&!r.ondrift(e,i))&&r.drift(e,i)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof s.Group&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var i=this._roots[e];i instanceof s.Group&&i.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var r=t.length,n=0;n<r;n++)this.delRoot(t[n]);else{var o;o="string"==typeof t?this._elements[t]:t;var l=(0,a.indexOf)(this._roots,o);l>=0&&(this.delFromMap(o.id),this._roots.splice(l,1),o instanceof s.Group&&o.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof s.Group&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof s.Group&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}],[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}]),t}();e.Storage=u,o.Zondy.LevelRenderer.Storage=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Group=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(22),h=i(200),d=i(238);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return t=t||{},i.id=null,i.type="group",i.clipShape=null,i._children=[],i._storage=null,i.__dirty=!0,i.ignore=!1,(0,c.extend)(i,t),i.id=i.id||(0,c.newGuid)(),i.CLASS_NAME="Zondy.LevelRenderer.Group",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!==this&&t.parent!==this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof e&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var i=(0,c.indexOf)(this._children,t);this._children.splice(i,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof e&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var i=!!e,r=0;r<this._children.length;r++){var n=this._children[r];i?t.call(e,n):t(n)}}},{key:"traverse",value:function(t,e){for(var i=!!e,r=0;r<this._children.length;r++){var n=this._children[r];i?t.call(e,n):t(n),"group"===n.type&&n.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.addToMap(i),"group"===i.type&&i.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var i=this._children[e];t.delFromMap(i.id),"group"===i.type&&i.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}]),e}((0,c.mixin)(h.Eventful,d.Transformable));e.Group=f,u.Zondy.LevelRenderer.Group=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Area=void 0;var r=l(i(8)),n=l(i(18)),o=i(6),a=i(179),s=i(239);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,r.default)(this,t),this.util=new a.Util,this.curve=new s.Curve,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="Zondy.LevelRenderer.Tool.Area"}return(0,n.default)(t,[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,i,r){if(!e||!t)return!1;var n=t.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(t,e,i,r);if(void 0!==o)return o;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,i,r);switch(n){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"===e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,i,r,a);case"rose":return this.isInsideCircle(e,i,r,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,i,r){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,i,r):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,i,r);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,i,r);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,i,r);case"smicbroken-line":var n=i,o=r;return t.refOriginalPosition&&(n=i-t.refOriginalPosition[0],o=r-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,n,o);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,i,r);case"smicring":var a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideRing(a,s,e.r0,e.r,i,r);case"circle":return this.isInsideCircle(e.x,e.y,e.r,i,r);case"smicpoint":var l=i,u=r;return t.refOriginalPosition&&(l=i-t.refOriginalPosition[0],u=r-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,l,u);case"sector":var c=e.startAngle*Math.PI/180,h=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,h=-h),this.isInsideSector(e.x,e.y,e.r0,e.r,c,h,!e.clockWise,i,r);case"smicsector":var d=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(d=-d,p=-p);var f=e.x,g=e.y;return t.refOriginalPosition&&(f=e.x+t.refOriginalPosition[0],g=e.y+t.refOriginalPosition[1]),this.isInsideSector(f,g,e.r0,e.r,d,p,!e.clockWise,i,r);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,i,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,i,r);case"smicpolygon":var y=i,v=r;if(t.refOriginalPosition&&(y=i-t.refOriginalPosition[0],v=r-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,y,v),_=t.holePolygonPointLists,b=!1,S=0,O=_.length;S<O;S++){var C=_[S];!0===this.isInsidePolygon(C,y,v)&&(b=!0)}return!0===m&&!1===b}return this.isInsidePolygon(e.pointList,y,v);case"text":var T=e.__rect||t.getRect(e);return this.isInsideRect(T.x,T.y,T.width,T.height,i,r);case"smictext":var x=t.getTextBackground(e);return this.isInsidePolygon(x,i,r);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,i,r);case"smicimage":var E=e.x,P=e.y;return t.refOriginalPosition&&(E=e.x+t.refOriginalPosition[0],P=e.y+t.refOriginalPosition[1]),this.isInsideRect(E,P,e.width,e.height,i,r)}}},{key:"_buildPathMethod",value:function(t,e,i,r,n){return e.beginPath(),t.buildPath(e,i),e.closePath(),e.isPointInPath(r,n)}},{key:"isOutside",value:function(t,e,i,r){return!this.isInside(t,e,i,r)}},{key:"isInsideLine",value:function(t,e,i,r,n,o,a){if(0===n)return!1;var s,l=Math.max(n,5);if(a>e+l&&a>r+l||a<e-l&&a<r-l||o>t+l&&o>i+l||o<t-l&&o<i-l)return!1;if(t===i)return Math.abs(o-t)<=l/2;var u=(s=(e-r)/(t-i))*o-a+(t*r-i*e)/(t-i);return u*u/(s*s+1)<=l/2*l/2}},{key:"isInsideCubicStroke",value:function(t,e,i,r,n,o,a,s,l,u,c){if(0===l)return!1;var h=Math.max(l,5);return!(c>e+h&&c>r+h&&c>o+h&&c>s+h||c<e-h&&c<r-h&&c<o-h&&c<s-h||u>t+h&&u>i+h&&u>n+h&&u>a+h||u<t-h&&u<i-h&&u<n-h&&u<a-h)&&this.curve.cubicProjectPoint(t,e,i,r,n,o,a,s,u,c,null)<=h/2}},{key:"isInsideQuadraticStroke",value:function(t,e,i,r,n,o,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>e+u&&l>r+u&&l>o+u||l<e-u&&l<r-u&&l<o-u||s>t+u&&s>i+u&&s>n+u||s<t-u&&s<i-u&&s<n-u)&&this.curve.quadraticProjectPoint(t,e,i,r,n,o,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(t,e,i,r,n,o,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,l-=e;var h=Math.sqrt(s*s+l*l);if(h-c>i||h+c<i)return!1;if(Math.abs(r-n)>=u)return!0;if(o){var d=r;r=this.normalizeRadian(n),n=this.normalizeRadian(d)}else r=this.normalizeRadian(r),n=this.normalizeRadian(n);r>n&&(n+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),p>=r&&p<=n||p+u>=r&&p+u<=n}},{key:"isInsideBrokenLine",value:function(t,e,i,r){for(var n=Math.max(e,10),o=0,a=t.length-1;o<a;o++){var s=t[o][0],l=t[o][1],u=t[o+1][0],c=t[o+1][1];if(this.isInsideLine(s,l,u,c,n,i,r))return!0}return!1}},{key:"isInsideRing",value:function(t,e,i,r,n,o){var a=(n-t)*(n-t)+(o-e)*(o-e);return a<r*r&&a>i*i}},{key:"isInsideRect",value:function(t,e,i,r,n,o){return n>=t&&n<=t+i&&o>=e&&o<=e+r}},{key:"isInsideCircle",value:function(t,e,i,r,n){return(r-t)*(r-t)+(n-e)*(n-e)<i*i}},{key:"isInsideSector",value:function(t,e,i,r,n,o,a,s,l){return this.isInsideArcStroke(t,e,(i+r)/2,n,o,a,r-i,s,l)}},{key:"isInsidePolygon",value:function(t,e,i){for(var r=t.length,n=0,o=0,a=r-1;o<r;o++){var s=t[a][0],l=t[a][1],u=t[o][0],c=t[o][1];n+=this.windingLine(s,l,u,c,e,i),a=o}return 0!==n}},{key:"windingLine",value:function(t,e,i,r,n,o){return o>e&&o>r||o<e&&o<r?0:r==e?0:(o-e)/(r-e)*(i-t)+t>n?r<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,i,r,n,o,a,s,l,u){var c=this.curve,h=this.roots,d=this.extrema;if(u>e&&u>r&&u>o&&u>s||u<e&&u<r&&u<o&&u<s)return 0;var p=c.cubicRootAt(e,r,o,s,u,h);if(0===p)return 0;for(var f,g,y=0,v=-1,m=0;m<p;m++){var _=h[m];c.cubicAt(t,i,n,a,_)<l||(v<0&&(v=c.cubicExtrema(e,r,o,s,d),d[1]<d[0]&&v>1&&this.swapExtrema(),f=c.cubicAt(e,r,o,s,d[0]),v>1&&(g=c.cubicAt(e,r,o,s,d[1]))),2===v?_<d[0]?y+=f<e?1:-1:_<d[1]?y+=g<f?1:-1:y+=s<g?1:-1:_<d[0]?y+=f<e?1:-1:y+=s<f?1:-1)}return y}},{key:"windingQuadratic",value:function(t,e,i,r,n,o,a,s){var l=this.curve,u=this.roots;if(s>e&&s>r&&s>o||s<e&&s<r&&s<o)return 0;var c=l.quadraticRootAt(e,r,o,s,u);if(0===c)return 0;var h=l.quadraticExtremum(e,r,o);if(h>=0&&h<=1){for(var d=0,p=l.quadraticAt(e,r,o,h),f=0;f<c;f++)l.quadraticAt(t,i,n,u[f])>a||(u[f]<h?d+=p<e?1:-1:d+=o<p?1:-1);return d}return l.quadraticAt(t,i,n,u[0])>a?0:o<e?1:-1}},{key:"windingArc",value:function(t,e,i,r,n,o,a,s){var l=this.roots,u=this.PI2;if((s-=e)>i||s<-i)return 0;var c=Math.sqrt(i*i-s*s);if(l[0]=-c,l[1]=c,Math.abs(r-n)>=u){r=0,n=u;var h=o?1:-1;return a>=l[0]+t&&a<=l[1]+t?h:0}if(o){var d=r;r=this.normalizeRadian(n),n=this.normalizeRadian(d)}else r=this.normalizeRadian(r),n=this.normalizeRadian(n);r>n&&(n+=u);for(var p=0,f=0;f<2;f++){var g=l[f];if(g+t>a){var y=Math.atan2(s,g),v=o?1:-1;y<0&&(y=u+y),(y>=r&&y<=n||y+u>=r&&y+u<=n)&&(y>Math.PI/2&&y<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(t,e,i,r,n){for(var o=0,a=0,s=0,l=0,u=0,c=!0,h=!0,d="stroke"===(i=i||"fill")||"both"===i,p="fill"===i||"both"===i,f=0;f<t.length;f++){var g=t[f],y=g.points;if(c||"M"===g.command){if(f>0&&(p&&(o+=this.windingLine(a,s,l,u,r,n)),0!==o))return!0;l=y[y.length-2],u=y[y.length-1],c=!1,h&&"A"!==g.command&&(h=!1,a=l,s=u)}switch(g.command){case"M":a=y[0],s=y[1];break;case"L":if(d&&this.isInsideLine(a,s,y[0],y[1],e,r,n))return!0;p&&(o+=this.windingLine(a,s,y[0],y[1],r,n)),a=y[0],s=y[1];break;case"C":if(d&&this.isInsideCubicStroke(a,s,y[0],y[1],y[2],y[3],y[4],y[5],e,r,n))return!0;p&&(o+=this.windingCubic(a,s,y[0],y[1],y[2],y[3],y[4],y[5],r,n)),a=y[4],s=y[5];break;case"Q":if(d&&this.isInsideQuadraticStroke(a,s,y[0],y[1],y[2],y[3],e,r,n))return!0;p&&(o+=this.windingQuadratic(a,s,y[0],y[1],y[2],y[3],r,n)),a=y[2],s=y[3];break;case"A":var v=y[0],m=y[1],_=y[2],b=y[3],S=y[4],O=y[5],C=Math.cos(S)*_+v,T=Math.sin(S)*b+m;h?(h=!1,l=C,u=T):o+=this.windingLine(a,s,C,T);var x=(r-v)*b/_+v;if(d&&this.isInsideArcStroke(v,m,b,S,S+O,1-y[7],e,x,n))return!0;p&&(o+=this.windingArc(v,m,b,S,S+O,1-y[7],x,n)),a=Math.cos(S+O)*_+v,s=Math.sin(S+O)*b+m;break;case"z":if(d&&this.isInsideLine(a,s,l,u,e,r,n))return!0;c=!0}}return p&&(o+=this.windingLine(a,s,l,u,r,n)),0!==o}},{key:"getTextWidth",value:function(t,e){var i=t+":"+e;if(this._textWidthCache[i])return this._textWidthCache[i];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var r=0,n=0,o=(t=(t+"").split("\n")).length;n<o;n++)r=Math.max(this._ctx.measureText(t[n]).width,r);return this._ctx.restore(),this._textWidthCache[i]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(t,e){var i=t+":"+e;if(this._textHeightCache[i])return this._textHeightCache[i];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[i]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}]),t}();e.Area=u,o.Zondy.LevelRenderer.Tool.Area=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputeBoundingBox=void 0;var r=l(i(8)),n=l(i(18)),o=i(6),a=i(239),s=i(240);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(){(0,r.default)(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="Zondy.LevelRenderer.Tool.ComputeBoundingBox"}return(0,n.default)(t,[{key:"computeBoundingBox",value:function(t,e,i){if(0!==t.length){for(var r=t[0][0],n=t[0][0],o=t[0][1],a=t[0][1],s=1;s<t.length;s++){var l=t[s];l[0]<r&&(r=l[0]),l[0]>n&&(n=l[0]),l[1]<o&&(o=l[1]),l[1]>a&&(a=l[1])}e[0]=r,e[1]=o,i[0]=n,i[1]=a}}},{key:"cubeBezier",value:function(t,e,i,r,n,o){var s=new a.Curve,l=[];s.cubicExtrema(t[0],e[0],i[0],r[0],l);for(var u=0;u<l.length;u++)l[u]=s.cubicAt(t[0],e[0],i[0],r[0],l[u]);var c=[];s.cubicExtrema(t[1],e[1],i[1],r[1],c);for(var h=0;h<c.length;h++)c[h]=s.cubicAt(t[1],e[1],i[1],r[1],c[h]);l.push(t[0],r[0]),c.push(t[1],r[1]);var d=Math.min.apply(null,l),p=Math.max.apply(null,l),f=Math.min.apply(null,c),g=Math.max.apply(null,c);n[0]=d,n[1]=f,o[0]=p,o[1]=g}},{key:"quadraticBezier",value:function(t,e,i,r,n){var o=new a.Curve,s=o.quadraticExtremum(t[0],e[0],i[0]),l=o.quadraticExtremum(t[1],e[1],i[1]),u=1-(s=Math.max(Math.min(s,1),0)),c=1-(l=Math.max(Math.min(l,1),0)),h=u*u*t[0]+2*u*s*e[0]+s*s*i[0],d=u*u*t[1]+2*u*s*e[1]+s*s*i[1],p=c*c*t[0]+2*c*l*e[0]+l*l*i[0],f=c*c*t[1]+2*c*l*e[1]+l*l*i[1];r[0]=Math.min(t[0],i[0],h,p),r[1]=Math.min(t[1],i[1],d,f),n[0]=Math.max(t[0],i[0],h,p),n[1]=Math.max(t[1],i[1],d,f)}},{key:"arc",value:function(t,e,i,r,n,o,a,l){var u=new s.Vector,c=u.create(),h=u.create(),d=u.create();if(c[0]=Math.cos(r)*i+t,c[1]=Math.sin(r)*i+e,h[0]=Math.cos(n)*i+t,h[1]=Math.sin(n)*i+e,u.min(a,c,h),u.max(l,c,h),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(n%=2*Math.PI)<0&&(n+=2*Math.PI),r>n&&!o?n+=2*Math.PI:r<n&&o&&(r+=2*Math.PI),o){var p=n;n=r,r=p}for(var f=0;f<n;f+=Math.PI/2)f>r&&(d[0]=Math.cos(f)*i+t,d[1]=Math.sin(f)*i+e,u.min(a,d,a),u.max(l,d,l))}}]),t}();e.ComputeBoundingBox=u,o.Zondy.LevelRenderer.Tool.ComputeBoundingBox=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Env=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Env";var e=this;return function(t){var i=e.os={},r=e.browser={},n=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),h=t.match(/Kindle\/([\d.]+)/),d=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),f=t.match(/(BB10).*Version\/([\d.]+)/),g=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),y=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),m=t.match(/Firefox\/([\d.]+)/),_=t.match(/MSIE ([\d.]+)/),b=n&&t.match(/Mobile\//)&&!v,S=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v;return(r.webkit=!!n)&&(r.version=n[1]),o&&(i.android=!0,i.version=o[2]),l&&!s&&(i.ios=i.iphone=!0,i.version=l[2].replace(/_/g,".")),a&&(i.ios=i.ipad=!0,i.version=a[2].replace(/_/g,".")),s&&(i.ios=i.ipod=!0,i.version=s[3]?s[3].replace(/_/g,"."):null),u&&(i.webos=!0,i.version=u[2]),c&&(i.touchpad=!0),p&&(i.blackberry=!0,i.version=p[2]),f&&(i.bb10=!0,i.version=f[2]),g&&(i.rimtabletos=!0,i.version=g[2]),y&&(r.playbook=!0),h&&(i.kindle=!0,i.version=h[1]),d&&(r.silk=!0,r.version=d[1]),!d&&i.android&&t.match(/Kindle Fire/)&&(r.silk=!0),v&&(r.chrome=!0,r.version=v[1]),m&&(r.firefox=!0,r.version=m[1]),_&&(r.ie=!0,r.version=_[1]),b&&(t.match(/Safari/)||i.ios)&&(r.safari=!0),S&&(r.webview=!0),_&&(r.ie=!0,r.version=_[1]),i.tablet=!!(a||y||o&&!t.match(/Mobile/)||m&&t.match(/Tablet/)||_&&!t.match(/Phone/)&&t.match(/Touch/)),i.phone=!(i.tablet||i.ipod||!(o||l||u||p||f||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||m&&t.match(/Mobile/)||_&&t.match(/Touch/))),{browser:r,os:i,canvasSupported:!!document.createElement("canvas").getContext}}(navigator.userAgent)}return(0,n.default)(t,[{key:"destory",value:function(){return!0}}]),t}();e.Env=s,o.Zondy.LevelRenderer.Tool.Env=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Event=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="Zondy.LevelRenderer.Tool.Event"}return(0,n.default)(t,[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}]),t}();e.Event=s,o.Zondy.LevelRenderer.Tool.Event=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Http=void 0;var r=s(i(125)),n=s(i(8)),o=s(i(18)),a=i(6);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){(0,n.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Tool.Http"}return(0,o.default)(t,[{key:"get",value:function(t,e,i){if("object"===(void 0===t?"undefined":(0,r.default)(t))){var n=t;t=n.url,e=n.onsuccess,i=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4===o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):i&&i(),o.onreadystatechange=new Function,o=null)},o.send(null)}}]),t}();e.Http=l,a.Zondy.LevelRenderer.Tool.Http=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Math=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Math"}return(0,n.default)(t,[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}]),t}();e.Math=s,o.Zondy.LevelRenderer.Tool.Math=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="Zondy.LevelRenderer.Tool.Matrix"}return(0,n.default)(t,[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,i){return t[0]=e[0]*i[0]+e[2]*i[1],t[1]=e[1]*i[0]+e[3]*i[1],t[2]=e[0]*i[2]+e[2]*i[3],t[3]=e[1]*i[2]+e[3]*i[3],t[4]=e[0]*i[4]+e[2]*i[5]+e[4],t[5]=e[1]*i[4]+e[3]*i[5]+e[5],t}},{key:"translate",value:function(t,e,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+i[0],t[5]=e[5]+i[1],t}},{key:"rotate",value:function(t,e,i){var r=e[0],n=e[2],o=e[4],a=e[1],s=e[3],l=e[5],u=Math.sin(i),c=Math.cos(i);return t[0]=r*c+a*u,t[1]=-r*u+a*c,t[2]=n*c+s*u,t[3]=-n*u+c*s,t[4]=c*o+u*l,t[5]=c*l-u*o,t}},{key:"scale",value:function(t,e,i){var r=i[0],n=i[1];return t[0]=e[0]*r,t[1]=e[1]*n,t[2]=e[2]*r,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*n,t}},{key:"invert",value:function(t,e){var i=e[0],r=e[2],n=e[4],o=e[1],a=e[3],s=e[5],l=i*a-o*r;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-r*l,t[3]=i*l,t[4]=(r*s-a*n)*l,t[5]=(o*n-i*s)*l,t):null}},{key:"mulVector",value:function(t,e,i){var r=e[0],n=e[2],o=e[4],a=e[1],s=e[3],l=e[5];return t[0]=i[0]*r+i[1]*n+o,t[1]=i[0]*a+i[1]*s+l,t}}]),t}();e.Matrix=s,o.Zondy.LevelRenderer.Tool.Matrix=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PaintLayer=e.Painter=void 0;var r=g(i(13)),n=g(i(14)),o=g(i(15)),a=g(i(8)),s=g(i(18)),l=i(6),u=i(22),c=i(179),h=i(238),d=i(299),p=i(117),f=i(300);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(){function t(e,i){(0,a.default)(this,t),this.root=e,this.storage=i,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="Zondy.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");this._domRoot=r,r.style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",this.root.appendChild(r),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom((0,u.newGuid)(),"div",this),r.appendChild(this._bgDom),this._bgDom.onselectstart=s,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var n=new v((0,u.newGuid)(),this);this._layers.hover=n,r.appendChild(n.dom),n.initContext(),n.dom.onselectstart=s,n.dom.style["-webkit-user-select"]="none",n.dom.style["user-select"]="none",n.dom.style["-webkit-touch-callout"]="none";var o=this;function s(){return!1}this.updatePainter=function(t,e){o.refreshShapes(t,e)}}return(0,s.default)(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var i=this.storage.getShapeList(!0);return this._paintList(i,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var i,r,n;for(var o in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var a=[],s=0,l=t.length;s<l;s++){var u=t[s];if(r!==u.zlevel&&(i&&i.needTransform&&n.restore(),n=(i=this.getLayer(u.zlevel)).ctx,r=u.zlevel,i.unusedCount=0,(i.dirty||e)&&i.clear(),i.needTransform&&(n.save(),i.setTransform(n))),n&&u.__startClip){var c=u.__startClip;if(n.save(),c.needTransform){var h=c.transform;p.SUtil.Util_matrix.invert(a,h),n.transform(h[0],h[1],h[2],h[3],h[4],h[5])}if(n.beginPath(),c.buildPath(n,c.style),n.clip(),c.needTransform){var f=a;n.transform(f[0],f[1],f[2],f[3],f[4],f[5])}}if((i&&i.dirty||e)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(n,!1)))if(d.Config.catchBrushException)try{u.brush(n,!1,this.updatePainter)}catch(t){}else u.brush(n,!1,this.updatePainter);n&&u.__stopClip&&n.restore(),u.__dirty=!1}for(var g in n&&i&&i.needTransform&&n.restore(),this._layers)if("hover"!==g){var y=this._layers[g];y.dirty=!1,1===y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var i=this._zlevelList.length,r=null,n=-1;if(i>0&&t>this._zlevelList[0]){for(n=0;n<i-1&&!(this._zlevelList[n]<t&&this._zlevelList[n+1]>t);n++);r=this._layers[this._zlevelList[n]]}this._zlevelList.splice(n+1,0,t),e=new v((0,u.newGuid)(),this);var o=r?r.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(e.dom,o.nextSibling):o.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new c.Util).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,i={};for(var r in e)"hover"!==r&&(i[r]=e[r].elCount,e[r].elCount=0);for(var n=0;n<t.length;n++){var o=t[n],a=e[o.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=o.__dirty}}for(var s in e)"hover"!==s&&i[s]!==e[s].elCount&&(e[s].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var i=0,r=t.length;i<r;i++){var n=t[i];this.storage.mod(n.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!==t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new c.Util).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var i=this._layers[t];i&&(new c.Util).merge(i,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new c.Util).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,i=t.length;e<i;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),i=this._getHeight();if(t.style.display="",this._width!==e||i!==this._height){for(var r in this._width=e,this._height=i,t.style.width=e+"px",t.style.height=i+"px",this._layers)this._layers[r].resize(e,i);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,i,r){var n=t.createDom((0,u.newGuid)(),"canvas",this);this._bgDom.appendChild(n);var o=n.getContext("2d");1!==t.devicePixelRatio&&o.scale(t.devicePixelRatio,t.devicePixelRatio),o.fillStyle=i||"#fff",o.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),o.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(o,!1)))if(d.Config.catchBrushException)try{t.brush(o,!1,a.updatePainter)}catch(t){}else t.brush(o,!1,a.updatePainter)},{normal:"up",update:!0});var s=n.toDataURL(e,r);return o=null,this._bgDom.removeChild(n),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var i=this.getLayer(t.zlevel);if(i.needTransform&&(e.save(),i.setTransform(e)),d.Config.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(t){}else t.brush(e,!0,this.updatePainter);i.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,i,r,n){var o=document.createElement("canvas"),a=o.getContext("2d"),s=n||window.devicePixelRatio||1;o.style.width=i+"px",o.style.height=r+"px",o.setAttribute("width",i*s),o.setAttribute("height",r*s),a.clearRect(0,0,i*s,r*s);var l={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var u=new f.SmicImage({id:t,style:{x:0,y:0,image:o}});return null!=l.position&&(u.position=e.position=l.position),null!=l.rotation&&(u.rotation=e.rotation=l.rotation),null!=l.scale&&(u.scale=e.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(i,r,n,o){return e._shapeToImage(i,r,n,o,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,i,r){var n=document.createElement(i),o=r._width,a=r._height;return n.style.position="absolute",n.style.left=0,n.style.top=0,n.style.width=o+"px",n.style.height=a+"px",n.setAttribute("width",o*t.devicePixelRatio),n.setAttribute("height",a*t.devicePixelRatio),n.setAttribute("id",e),n}}]),t}(),v=function(t){function e(t,i){(0,a.default)(this,e);var o=(0,n.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.dom=null,o.domBack=null,o.ctxBack=null,o.painter=i,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=y.createDom((0,u.newGuid)(),"canvas",i),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="Zondy.LevelRenderer.Painter.Layer",o}return(0,o.default)(e,t),(0,s.default)(e,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,h.Transformable.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!==y.devicePixelRatio&&this.ctx.scale(y.devicePixelRatio,y.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=y.createDom((0,u.newGuid)(),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!==y.devicePixelRatio&&this.ctxBack.scale(y.devicePixelRatio,y.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*y.devicePixelRatio),this.dom.setAttribute("height",e*y.devicePixelRatio),1!==y.devicePixelRatio&&this.ctx.scale(y.devicePixelRatio,y.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*y.devicePixelRatio),this.domBack.setAttribute("height",e*y.devicePixelRatio),1!==y.devicePixelRatio&&this.ctxBack.scale(y.devicePixelRatio,y.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,i=t.width,r=t.height,n=this.clearColor,o=this.motionBlur,a=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,i/y.devicePixelRatio,r/y.devicePixelRatio)),n?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,i/y.devicePixelRatio,r/y.devicePixelRatio),e.restore()):e.clearRect(0,0,i/y.devicePixelRatio,r/y.devicePixelRatio),o){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,i/y.devicePixelRatio,r/y.devicePixelRatio),e.restore()}}}]),e}(h.Transformable);e.Painter=y,l.Zondy.LevelRenderer.Painter=y,e.PaintLayer=v,l.Zondy.LevelRenderer.PaintLayer=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Handler=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(15)),l=i(6),u=i(200),c=i(299),h=i(117);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o){(0,n.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o));s.root=t,s.storage=i,s.painter=o,s._lastX=0,s._lastY=0,s._mouseX=0,s._mouseY=0,s._findHover=null,s._domHover=null,s._findHover=function(t,e){return function(t,i,r){return function(t,e,i){var r=this;if(r._draggingTarget&&r._draggingTarget.id===t.id||t.isSilent())return!1;var n=r._event;if(t.isCover(e,i)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var o=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=r.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&o===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&r.storage.addHover(c):r.storage.addHover(c))}}}else r.storage.addHover(t);for(var h=t.parent;h;){if(h.clipShape&&!h.clipShape.isCover(r._mouseX,r._mouseY))return!1;h=h.parent}return r._lastHover!==t&&(r._processOutShape(n),r._processDragLeave(n),r._lastHover=t,r._processDragEnter(n)),r._processOverShape(n),r._processDragOver(n),r._hasfound=1,!0}return!1}.call(e,t,i,r)}}(0,s),s._domHover=o.getDomHover(),s.CLASS_NAME="Zondy.LevelRenderer.Handler";var l={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(c.Config.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,c.Config.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,c.Config.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,i=this.painter.getLayers(),r=!1;for(var n in i)if("hover"!==n){var o=i[n],a=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var s=o.__zoom;s*=e,e=(s=Math.max(Math.min(o.maxZoom,s),o.minZoom))/o.__zoom,o.__zoom=s,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),o.scale[0]*=e,o.scale[1]*=e,o.dirty=!0,r=!0}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=h.SUtil.Util_event.getX(t),this._mouseY=h.SUtil.Util_event.getY(t);var e=this._mouseX-this._lastX,i=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!==this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,i),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var n=this.painter.getLayers(),o=!1;for(var a in n)if("hover"!==a){var s=n[a];s.panable&&(r="move",s.position[0]+=e,s.position[1]+=i,o=!0,s.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!==this.root)for(;e&&9!==e.nodeType;){if(e===this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(c.Config.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2===this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&h.SUtil.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<c.Config.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<c.Config.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&h.SUtil.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(i){return t.call(e,i)}}return function(t){for(var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],i=e.length;i--;){var r=e[i];t["_"+r+"Handler"]=u(l[r],t)}}(s),window.addEventListener?(window.addEventListener("resize",s._resizeHandler),h.SUtil.Util_env.os.tablet||h.SUtil.Util_env.os.phone?(t.addEventListener("touchstart",s._touchstartHandler),t.addEventListener("touchmove",s._touchmoveHandler),t.addEventListener("touchend",s._touchendHandler)):(t.addEventListener("click",s._clickHandler),t.addEventListener("dblclick",s._dblclickHandler),t.addEventListener("mousewheel",s._mousewheelHandler),t.addEventListener("mousemove",s._mousemoveHandler),t.addEventListener("mousedown",s._mousedownHandler),t.addEventListener("mouseup",s._mouseupHandler)),t.addEventListener("DOMMouseScroll",s._mousewheelHandler),t.addEventListener("mouseout",s._mouseoutHandler)):(window.attachEvent("onresize",s._resizeHandler),t.attachEvent("onclick",s._clickHandler),t.ondblclick=s._dblclickHandler,t.attachEvent("onmousewheel",s._mousewheelHandler),t.attachEvent("onmousemove",s._mousemoveHandler),t.attachEvent("onmouseout",s._mouseoutHandler),t.attachEvent("onmousedown",s._mousedownHandler),t.attachEvent("onmouseup",s._mouseupHandler)),s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,u.Eventful.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var i=c.Config.EVENT;switch(t){case i.RESIZE:case i.CLICK:case i.DBLCLICK:case i.MOUSEWHEEL:case i.MOUSEMOVE:case i.MOUSEDOWN:case i.MOUSEUP:case i.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),h.SUtil.Util_env.os.tablet||h.SUtil.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget===e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var i=e;this._draggingTarget=i,this._isDragging=1,i.invisible=!0,this.storage.mod(i.id),this._dispatchAgency(i,c.Config.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,c.Config.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,c.Config.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,c.Config.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,c.Config.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,i,r){var n="on"+e,o={type:e,event:i,target:t,cancelBubble:!1},a=t;for(r&&(o.dragged=r);a&&(a[n]&&(o.cancelBubble=a[n](o)),a.dispatch(e,o),a=a.parent,!o.cancelBubble););t?o.cancelBubble||this.dispatch(e,o):r||this.dispatch(e,{type:e,event:i})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=h.SUtil.Util_matrix.create(),i=this.storage.getShapeList(),r=[0,0],n=i.length-1;n>=0;n--){var o=i[n];if(void 0!==o.zlevel&&(t=this.painter.getLayer(o.zlevel,t),r[0]=this._mouseX,r[1]=this._mouseY,t.needTransform&&(h.SUtil.Util_matrix.invert(e,t.transform),h.SUtil.Util_vector.applyTransform(r,r,e))),this._findHover(o,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var i=0;!this._lastHover&&i<e.length;i++){var r=e[i];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var i="touchend"!==t.type?t.targetTouches[0]:t.changedTouches[0];if(i){var r=this.root.getBoundingClientRect();t.zrenderX=i.clientX-r.left,t.zrenderY=i.clientY-r.top}}else{var n=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;n&&n!==this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+n.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+n.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}]),e}(u.Eventful);e.Handler=p,l.Zondy.LevelRenderer.Handler=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Animator=e.Animation=void 0;var r=g(i(125)),n=g(i(13)),o=g(i(8)),a=g(i(18)),s=g(i(14)),l=g(i(15)),u=i(6),c=i(22),h=i(179),d=i(200),p=i(381),f=i(117);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t){(0,o.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,t));return t=t||{},i.stage={},i.onframe=function(){},i._clips=[],i._running=!1,i._time=0,(0,c.extend)(i,t),i.CLASS_NAME="Zondy.LevelRenderer.Animation",i}return(0,l.default)(e,t),(0,a.default)(e,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new h.Util).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,i=this._clips,r=i.length,n=[],o=[],a=0;a<r;a++){var s=i[a],l=s.step(t);l&&(n.push(l),o.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<r;)i[u]._needsRemove?(i[u]=i[r-1],i.pop(),r--):u++;r=n.length;for(var c=0;c<r;c++)o[c].fire(n[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function i(){e._running&&(e._update(),t(i))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var i=new v(t,(e=e||{}).loop,e.getter,e.setter);return i.animation=this,i}}],[{key:"_interpolateNumber",value:function(t,e,i){return(e-t)*i+t}},{key:"_interpolateArray",value:function(t,i,r,n,o){var a=t.length;if(1===o)for(var s=0;s<a;s++)n[s]=e._interpolateNumber(t[s],i[s],r);else for(var l=t[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)n[u][c]=e._interpolateNumber(t[u][c],i[u][c],r)}},{key:"_isArrayLike",value:function(t){switch(void 0===t?"undefined":(0,r.default)(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,i,r,n,o,a,s,l,u){var c=t.length;if(1===u)for(var h=0;h<c;h++)l[h]=e._catmullRomInterpolate(t[h],i[h],r[h],n[h],o,a,s);else for(var d=t[0].length,p=0;p<c;p++)for(var f=0;f<d;f++)l[p][f]=e._catmullRomInterpolate(t[p][f],i[p][f],r[p][f],n[p][f],o,a,s)}},{key:"_catmullRomInterpolate",value:function(t,e,i,r,n,o,a){var s=.5*(i-t),l=.5*(r-e);return(2*(e-i)+s+l)*a+(-3*(e-i)-2*s-l)*o+s*n+e}},{key:"_cloneValue",value:function(t){var i=Array.prototype.slice;if(e._isArrayLike(t)){var r=t.length;if(e._isArrayLike(t[0])){for(var n=[],o=0;o<r;o++)n.push(i.call(t[o]));return n}return i.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),e}(d.Eventful),v=function(){function t(e,i,r,n){(0,o.default)(this,t),this._tracks={},this._target=e,this._loop=i||!1,this._getter=r||function(t,e){return t[e]},this._setter=n||function(t,e,i){t[e]=i},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="Zondy.LevelRenderer.Animation.Animator"}return(0,a.default)(t,[{key:"when",value:function(t,e){for(var i in e)this._tracks[i]||(this._tracks[i]=[],0!==t&&this._tracks[i].push({time:0,value:y._cloneValue(this._getter(this._target,i))})),this._tracks[i].push({time:parseInt(t,10),value:e[i]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,i=this._setter,r=this._getter,n=e._onframeList.length,o="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,i=0;i<t;i++)e._doneList[i].call(e)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,h=y._isArrayLike(c),d=!1,g=h&&y._isArrayLike(c[0])?2:1;s.sort(function(t,e){return t.time-e.time});for(var v=s[u-1].time,m=[],_=[],b=0;b<u;b++){m.push(s[b].time/v);var S=s[b].value;"string"==typeof S&&(0===(S=f.SUtil.Util_color.toArray(S)).length&&(S[0]=S[1]=S[2]=0,S[3]=1),d=!0),_.push(S)}var O,C,T,x,E,P,j,R=0,I=0;if(d)var L=[0,0,0,0];var w=new p.Clip({target:e._target,life:v,loop:e._loop,delay:e._delay,onframe:function(t,a){if(a<I){for(O=Math.min(R+1,u-1),C=O;C>=0&&!(m[C]<=a);C--);C=Math.min(C,u-2)}else{for(C=R;C<u&&!(m[C]>a);C++);C=Math.min(C-1,u-2)}R=C,I=a;var s=m[C+1]-m[C];if(0!==s){if(T=(a-m[C])/s,o)if(E=_[C],x=_[0===C?C:C-1],P=_[C>u-2?u-1:C+1],j=_[C>u-3?u-1:C+2],h)y._catmullRomInterpolateArray(x,E,P,j,T,T*T,T*T*T,r(t,l),g);else{var c;c=d?y.rgba2String(L):y._catmullRomInterpolate(x,E,P,j,T,T*T,T*T*T),i(t,l,c)}else if(h)y._interpolateArray(_[C],_[C+1],T,r(t,l),g);else{var p=void 0;d?(y._interpolateArray(_[C],_[C+1],T,L,1),p=y.rgba2String(L)):p=y._interpolateNumber(_[C],_[C+1],T),i(t,l,p)}for(C=0;C<n;C++)e._onframeList[C](t,a)}},ondestroy:a});t&&"spline"!==t&&(w.easing=t),e._clipList.push(w),e._clipCount++,e.animation.add(w)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();e.Animation=y,u.Zondy.LevelRenderer.Animation=y,e.Animator=v,u.Zondy.LevelRenderer.Animation.Animator=v},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=void 0;var r=s(i(8)),n=s(i(18)),o=i(6),a=i(382);function s(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e){(0,r.default)(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="Zondy.LevelRenderer.Animation.Clip"}return(0,n.default)(t,[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new a.Easing,i=(t-this._startTime)/this._life;if(!(i<0)){i=Math.min(i,1);var r="string"==typeof this.easing?e[this.easing]:this.easing,n="function"==typeof r?r(i):i;return this.fire("frame",n),1===i?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var i=0,r=this._targetPool.length;i<r;i++)this["on"+t]&&this["on"+t](this._targetPool[i],e)}}]),t}();e.Clip=l,o.Zondy.LevelRenderer.Animation.Clip=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0;var r=a(i(8)),n=a(i(18)),o=i(6);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(){(0,r.default)(this,t),this.CLASS_NAME="Zondy.LevelRenderer.Animation.Easing"}return(0,n.default)(t,[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,i=.1;return 0===t?0:1===t?1:(!i||i<1?(i=1,e=.1):e=.4*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?i*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}]),t}();e.Easing=s,o.Zondy.LevelRenderer.Animation.Easing=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rectangle=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,s){(0,n.default)(this,e);var l=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s));return l.x=isNaN(t)?0:t,l.y=isNaN(t)?0:i,l.width=isNaN(o)?0:o,l.height=isNaN(s)?0:s,l.CLASS_NAME="Zondy.Feature.ShapeParameters.Rectangle",l}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Rectangle=h,u.Zondy.Feature.ShapeParameters.Rectangle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Label=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o){(0,n.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o));return s.x=t,s.y=i,s.text=o,s.CLASS_NAME="Zondy.Feature.ShapeParameters.Label",s}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Label=h,u.Zondy.Feature.ShapeParameters.Label=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Image=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,s,l,u,c,h,d){(0,n.default)(this,e);var p=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u,c,h,d));return p.x=t,p.y=i,p.image=o,p.width=s,p.height=l,p.sx=u,p.sy=c,p.sWidth=h,p.sHeight=d,p.CLASS_NAME="Zondy.Feature.ShapeParameters.Image",p}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}}]),e}(i(142).ShapeParameters);e.Image=h,u.Zondy.Feature.ShapeParameters.Image=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicText=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(111),h=i(117);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smictext",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.SmicText",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=this.style;if(e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r.textFont&&(t.font=r.textFont),t.textAlign=r.textAlign||"start",t.textBaseline=r.textBaseline||"middle";var n,o=(r.text+"").split("\n"),a=h.SUtil.Util_area.getTextHeight("ZH",r.textFont),s=this.getRectNoRotation(r),l=r.x+i[0];n="top"===r.textBaseline?s.y:"bottom"===r.textBaseline?s.y+a:s.y+a/2;for(var u=r.x+i[0],c=r.y+i[1],d=0,p=o.length;d<p;d++){switch(r.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=r.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"===r.textBaseline?r.maxWidth?t.strokeText(o[d],0,a*d,r.maxWidth):t.strokeText(o[d],0,a*d):"bottom"===r.textBaseline?r.maxWidth?t.strokeText(o[d],0,a*(d+1)-s.height,r.maxWidth):t.strokeText(o[d],0,a*(d+1)-s.height):r.maxWidth?t.strokeText(o[d],0,a*(d+1)-s.height/2-a/2,r.maxWidth):t.strokeText(o[d],0,a*(d+1)-s.height/2-a/2),t.restore()):r.maxWidth?t.strokeText(o[d],l,n,r.maxWidth):t.strokeText(o[d],l,n),this.setCtxGlobalAlpha(t,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"===r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],0,a*d,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],0,a*d,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],0,a*d),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],0,a*d),this.setCtxGlobalAlpha(t,"reset",r)):"bottom"===r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],0,a*(d+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],0,a*(d+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],0,a*(d+1)-s.height),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],0,a*(d+1)-s.height),this.setCtxGlobalAlpha(t,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],0,a*(d+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],0,a*(d+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],0,a*(d+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],0,a*(d+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",r)),t.restore()):r.maxWidth?(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],l,n,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],l,n,r.maxWidth),this.setCtxGlobalAlpha(t,"reset",r)):(this.setCtxGlobalAlpha(t,"fill",r),t.fillText(o[d],l,n),this.setCtxGlobalAlpha(t,"reset",r),this.setCtxGlobalAlpha(t,"stroke",r),t.strokeText(o[d],l,n),this.setCtxGlobalAlpha(t,"reset",r));break;default:this.setCtxGlobalAlpha(t,"fill",r),r.textRotation&&0!==r.textRotation?(t.save(),t.translate(u,c),t.rotate(r.textRotation*Math.PI/180),"top"===r.textBaseline?r.maxWidth?t.fillText(o[d],0,a*d,r.maxWidth):t.fillText(o[d],0,a*d):"bottom"===r.textBaseline?r.maxWidth?t.fillText(o[d],0,a*(d+1)-s.height,r.maxWidth):t.fillText(o[d],0,a*(d+1)-s.height):r.maxWidth?t.fillText(o[d],0,a*(d+1)-s.height/2-a/2,r.maxWidth):t.fillText(o[d],0,a*(d+1)-s.height/2-a/2),t.restore()):r.maxWidth?t.fillText(o[d],l,n,r.maxWidth):t.fillText(o[d],l,n),this.setCtxGlobalAlpha(t,"reset",r)}n+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,i,r,n,o=this.getTextBackground(t,!0),a=0,s=o.length;a<s;a++){var l=o[a];0===a?(e=l[0],r=l[0],i=l[1],n=l[1]):(l[0]<e&&(e=l[0]),l[0]>r&&(r=l[0]),l[1]<i&&(i=l[1]),l[1]>n&&(n=l[1]))}return t.__rect={x:e,y:i,width:r-e,height:n-i},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition,r=h.SUtil.Util_area.getTextHeight("ZH",t.textFont),n=h.SUtil.Util_area.getTextWidth(t.text,t.textFont),o=h.SUtil.Util_area.getTextHeight(t.text,t.textFont),a=t.x+i[0];"end"===t.textAlign||"right"===t.textAlign?a-=n:"center"===t.textAlign&&(a-=n/2),e="top"===t.textBaseline?t.y+i[1]:"bottom"===t.textBaseline?t.y+i[1]-o:t.y+i[1]-o/2;var s,l=!1;if(t.maxWidth){var u=parseInt(t.maxWidth);u<n&&(s=n,l=!0,n=u),a=t.x+i[0],"end"===t.textAlign||"right"===t.textAlign?a-=n:"center"===t.textAlign&&(a-=n/2)}return t.textFont&&t.textFont.toLowerCase().indexOf("italic")>-1&&(n+=s&&!0===l?r/3*(n/s):r/3),{x:a,y:e,width:n,height:o}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;if((!e||!1===e)&&t.__textBackground)return t.__textBackground;var r=this.getRectNoRotation(t),n=t.x+i[0],o=t.y+i[1],a=[];if(t.textRotation&&0!==t.textRotation){var s=t.textRotation,l=this.getRotatedLocation(r.x,r.y,n,o,s),u=this.getRotatedLocation(r.x+r.width,r.y,n,o,s),c=this.getRotatedLocation(r.x+r.width,r.y+r.height,n,o,s),h=this.getRotatedLocation(r.x,r.y+r.height,n,o,s);a.push(l),a.push(u),a.push(c),a.push(h)}else{var d=[r.x,r.y],p=[r.x+r.width,r.y],f=[r.x+r.width,r.y+r.height],g=[r.x,r.y+r.height];a.push(d),a.push(p),a.push(f),a.push(g)}return t.__textBackground=a,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,i,r,n){var o,a,s=new Array;return e=-e,r=-r,n=-n,o=(t-i)*Math.cos(n/180*Math.PI)-(e-r)*Math.sin(n/180*Math.PI)+i,a=(t-i)*Math.sin(n/180*Math.PI)+(e-r)*Math.cos(n/180*Math.PI)+r,s[0]=o,s[1]=-a,s}}]),e}(c.Shape);e.SmicText=p,u.Zondy.LevelRenderer.SmicText=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicCircle=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smiccircle",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.SmicCircle",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=e.x+i[0],n=e.y+i[1];return t.moveTo(r+e.r,n),t.arc(r,n,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition,r=t.x+i[0],n=t.y+i[1],o=t.r;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(r-o-e/2),y:Math.round(n-o-e/2),width:2*o+e,height:2*o+e},t.__rect}}]),e}(i(111).Shape);e.SmicCircle=h,u.Zondy.LevelRenderer.SmicCircle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRectangle=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicrectangle",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRectangle",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i,r,n,o,a,s=this.refOriginalPosition,l=e.x+s[0],u=e.y+s[1],c=e.width,h=e.height,d=e.radius;"number"==typeof d?i=r=n=o=d:d instanceof Array?1===d.length?i=r=n=o=d[0]:2===d.length?(i=n=d[0],r=o=d[1]):3===d.length?(i=d[0],r=o=d[1],n=d[2]):(i=d[0],r=d[1],n=d[2],o=d[3]):i=r=n=o=0,i+r>c&&(i*=c/(a=i+r),r*=c/a),n+o>c&&(n*=c/(a=n+o),o*=c/a),r+n>h&&(r*=h/(a=r+n),n*=h/a),i+o>h&&(i*=h/(a=i+o),o*=h/a),t.moveTo(l+i,u),t.lineTo(l+c-r,u),0!==r&&t.quadraticCurveTo(l+c,u,l+c,u+r),t.lineTo(l+c,u+h-n),0!==n&&t.quadraticCurveTo(l+c,u+h,l+c-n,u+h),t.lineTo(l+o,u+h),0!==o&&t.quadraticCurveTo(l,u+h,l,u+h-o),t.lineTo(l,u+i),0!==i&&t.quadraticCurveTo(l,u,l+i,u)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+i[0],e.y+i[1]),t.lineTo(e.x+i[0]+e.width,e.y+i[1]),t.lineTo(e.x+i[0]+e.width,e.y+i[1]+e.height),t.lineTo(e.x+i[0],e.y+i[1]+e.height),t.lineTo(e.x+i[0],e.y+i[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-e/2),y:Math.round(t.y+i[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}]),e}(i(111).Shape);e.SmicRectangle=h,u.Zondy.LevelRenderer.SmicRectangle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicSector=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(111),h=i(117);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicsector",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicSector",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=e.x+i[0],n=e.y+i[1],o=e.r0||0,a=e.r,s=e.startAngle,l=e.endAngle,u=e.clockWise||!1;s=h.SUtil.Util_math.degreeToRadian(s),l=h.SUtil.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=h.SUtil.Util_math.cos(s),d=h.SUtil.Util_math.sin(s);t.moveTo(c*o+r,d*o+n),t.lineTo(c*a+r,d*a+n),t.arc(r,n,a,s,l,!u),t.lineTo(h.SUtil.Util_math.cos(l)*o+r,h.SUtil.Util_math.sin(l)*o+n),0!==o&&t.arc(r,n,o,l,s,u),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,i=h.SUtil.Util_vector.create(),r=h.SUtil.Util_vector.create(),n=h.SUtil.Util_vector.create(),o=h.SUtil.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],l=t.r0||0,u=t.r,c=h.SUtil.Util_math.degreeToRadian(t.startAngle),d=h.SUtil.Util_math.degreeToRadian(t.endAngle),p=t.clockWise;return p||(c=-c,d=-d),l>1?h.SUtil.Util_computeBoundingBox.arc(a,s,l,c,d,!p,i,n):(i[0]=n[0]=a,i[1]=n[1]=s),h.SUtil.Util_computeBoundingBox.arc(a,s,u,c,d,!p,r,o),h.SUtil.Util_vector.min(i,i,r),h.SUtil.Util_vector.max(n,n,o),t.__rect={x:i[0],y:i[1],width:n[0]-i[0],height:n[1]-i[1]},t.__rect}}]),e}(c.Shape);e.SmicSector=p,u.Zondy.LevelRenderer.SmicSector=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Feature=void 0;var r=i(6),n=i(22),o=i(203),a=(i(391),i(112),i(392)),s=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.AttValue=void 0!==e.AttValue&&null!==e.AttValue?e.AttValue:null,this.FID=void 0!==e.FID&&null!==e.FID?e.FID:0,this.bound=void 0!==e.bound&&null!==e.bound?e.bound:null,this.fGeom=void 0!==e.fGeom&&null!==e.fGeom?e.fGeom:null,this.ftype=void 0!==e.ftype&&null!==e.ftype?e.ftype:0,this.GraphicInfo=void 0!==e.GraphicInfo&&null!==e.GraphicInfo?e.GraphicInfo:null};s.prototype.getAttValue=function(t){if(null===this.AttValue)return null;var e=this.AttValue.length;return"number"==typeof t?t>=e?null:this.AttValue[t]:void 0},s.prototype.getGraphicInfo=function(){return null===this.GraphicInfo?null:new a.WebGraphicsInfo(this.GraphicInfo)},s.prototype.getAttValueArray=function(){return this.AttValue},s.prototype.getRectBound=function(){var t=this.bound;return null!==t?new o.Rectangle(t):t},s.prototype.getGeometry=function(){return this.fGeom},s.prototype.getFID=function(){return this.FID},s.prototype.setAttValues=function(t){this.AttValue=t},s.prototype.setBound=function(t){var e=null;"string"==typeof t&&(e=new o.Rectangle(t)),t instanceof String&&(e=new o.Rectangle(t)),t instanceof o.Rectangle&&(e=t),t instanceof ol.extent&&(e=new o.Rectangle).setByOL(t),this.bound=e},s.prototype.setFID=function(t){this.FID=t},s.prototype.setFType=function(t){this.ftype=t},s.prototype.destroy=function(){this.AttValue=null,this.FID=null,this.bound=null,this.fGeom=null,this.ftype=null,this.GraphicInfo=null},e.Feature=s,r.Zondy.Object.Feature=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureGeometry=void 0;var r=i(6),n=i(22),o=(i(305),i(306),i(308),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.PntGeom=void 0!==e.PntGeom&&null!==e.PntGeom?e.PntGeom:null,this.LinGeom=void 0!==e.LinGeom&&null!==e.LinGeom?e.LinGeom:null,this.RegGeom=void 0!==e.RegGeom&&null!==e.RegGeom?e.RegGeom:null});o.prototype.setPntGeom=function(t){this.PntGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setLine=function(t){this.LinGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},o.prototype.setRegGeom=function(t){this.RegGeom=void 0!==t&&null!==t&&Array.isArray(t)?t:null},e.FeatureGeometry=o,r.Zondy.Object.FeatureGeometry=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebGraphicsInfo=void 0;var r=i(6),n=i(22),o=(i(112),i(309),i(248),i(310),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.InfoType=void 0!==e.InfoType&&null!==e.InfoType?e.InfoType:0,this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.WebGraphicsInfo=o,r.Zondy.Object.WebGraphicsInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=void 0;var r=i(548),n=i(549),o=i(550),a=i(152),s=i(551),l=i(552),u=i(553),c=i(394),h=i(554),d=i(201),p=i(395),f=i(555);e.Bar=r.Bar,e.Bar3D=n.Bar3D,e.OverlayCircle=o.Circle,e.Graph=a.Graph,e.Line=s.Line,e.Pie=l.Pie,e.OverlayPoint=u.Point,e.RankSymbol=c.RankSymbol,e.Ring=h.Ring,e.ThemeVector=d.ThemeVector,e.ShapeFactory=p.ShapeFactory,e.ShapeParameters=p.ShapeParameters,e.FeatureCircle=p.FeatureCircle,e.Image=p.Image,e.Label=p.Label,e.FeatureLine=p.FeatureLine,e.Point=p.Point,e.FeaturePolygon=p.FeaturePolygon,e.FeatureRectangle=p.FeatureRectangle,e.Sector=p.Sector,e.FeatureTheme=p.FeatureTheme,e.LevelRenderer=f.LevelRenderer,e.Render=f.Render,e.Animation=f.Animation,e.Animator=f.Animator,e.Area=f.Area,e.Clip=f.Clip,e.Color=f.Color,e.ComputeBoundingBox=f.ComputeBoundingBox,e.Config=f.Config,e.LevelRendererCurve=f.LevelRendererCurve,e.Easing=f.Easing,e.Env=f.Env,e.LevelRendererEvent=f.LevelRendererEvent,e.Eventful=f.Eventful,e.Group=f.Group,e.Handler=f.Handler,e.Http=f.Http,e.Math=f.Math,e.Matrix=f.Matrix,e.Painter=f.Painter,e.PaintLayer=f.PaintLayer,e.Shape=f.Shape,e.SmicBrokenLine=f.SmicBrokenLine,e.SmicCircle=f.SmicCircle,e.SmicEllipse=f.SmicEllipse,e.SmicImage=f.SmicImage,e.SmicIsogon=f.SmicIsogon,e.SmicPoint=f.SmicPoint,e.SmicPolygon=f.SmicPolygon,e.SmicRectangle=f.SmicRectangle,e.SmicRing=f.SmicRing,e.SmicSector=f.SmicSector,e.SmicStar=f.SmicStar,e.SmicText=f.SmicText,e.Storage=f.Storage,e.Transformable=f.Transformable,e.Util=f.Util,e.LevelRendererVector=f.LevelRendererVector,e.SUtil=f.SUtil},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbol=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.setting=null,s&&s.codomain&&(c.setting=s,c.DVBCodomain=c.setting.codomain),c.CLASS_NAME="Zondy.Theme.RankSymbol",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.setting=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,i=this.height,r=this.location;this.origonPoint=[r[0]-e/2,r[1]-i/2];var n=this.origonPoint;this.chartBox=[n[0],n[1]+i,n[0]+e,n[1]];var o=this.chartBox,a=this.DVBParameter;this.dataViewBox=[o[0]+a[0],o[1]-a[1],o[2]-a[2],o[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3]||(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-n[0],this.DVBOrigonPoint[1]-n[1]],0))}}]),e}(i(152).Graph);e.RankSymbol=h,u.Zondy.Theme.RankSymbol=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=void 0;var r=i(104),n=i(142),o=i(302),a=i(385),s=i(384),l=i(301),u=i(241),c=i(242),h=i(383),d=i(243),p=i(202);e.ShapeFactory=r.ShapeFactory,e.ShapeParameters=n.ShapeParameters,e.FeatureCircle=o.Circle,e.Image=a.Image,e.Label=s.Label,e.FeatureLine=l.Line,e.Point=u.Point,e.FeaturePolygon=c.Polygon,e.FeatureRectangle=h.Rectangle,e.Sector=d.Sector,e.FeatureTheme=p.Theme},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphThemeSource=void 0;var r=g(i(13)),n=g(i(8)),o=g(i(18)),a=g(i(14)),s=g(i(40)),l=g(i(15)),u=i(6),c=i(366),h=i(202),d=i(118),p=i(245),f=i(203);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,o){(0,n.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,o));return s.chartsSetting=o.chartsSetting||{},s.themeFields=o.themeFields||null,s.overlayWeightField=o.overlayWeightField||null,s.isOverLay=o.isOverLay||!0,s.charts=o.charts||[],s.cache=o.cache||{},s.chartsType=i,s.options={calGravity:o.calGravity||!0},s}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){c.ThemeSource.prototype.destroy.apply(this,arguments),this.chartsType=null,this.chartsSetting=null,this.themeFields=null,this.overlayWeightField=null,this.isOverLay=null,this.options={fitZoom:-1},this.charts=null,this.cache=null}},{key:"setChartsType",value:function(t){this.chartsType=t,this.redraw()}},{key:"addFeatures",value:function(t){if(this.dispatchEvent({type:"beforefeaturesadded",value:{features:t}}),t instanceof p.FeatureSet){var e=null,i=t.AttStruct,r=t.SFEleArray;if(null!=r&&r.length>0)for(var n=0;n<r.length;n++){var o=r[n];if(null!=o.AttValue&&o.AttValue.length>0){e={};for(var a=0;a<o.AttValue.length;a++)e[i.FldName[a]]=o.AttValue[a];e.FID=o.FID}o.attributes=e,this.features.push(o)}}this.renderer&&this.changed()}},{key:"redrawThematicFeatures",value:function(t){this.renderer.clearAll();for(var e=this.features,i=new f.Rectangle(t[0],t[1],t[2],t[3]),r=0,n=e.length;r<n;r++){var o=e[r],a=o.bound;if(!i||i.intersectsBounds(a)){var s=this.cache,l=o.id;if(!s[l]){s[l]=l;var u=this.createThematicFeature(o);u&&this.overlayWeightField&&o.attributes[this.overlayWeightField]&&!isNaN(o.attributes[this.overlayWeightField])&&(u.__overlayWeight=o.attributes[this.overlayWeightField]),u&&this.charts.push(u)}}}this.drawCharts()}},{key:"createThematicFeature",value:function(t){var e;return h.Theme[this.chartsType]&&this.themeFields&&this.chartsSetting&&(e=new h.Theme[this.chartsType](t,this,this.themeFields,this.chartsSetting,null,this.options)),!!e&&(e.assembleShapes(),e)}},{key:"drawCharts",value:function(){if(this.renderer){var t=this.charts;if(this.overlayWeightField&&t.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0}),this.isOverLay){var e=[],i=this.map.getView().calculateExtent(),r=this.getLocalXY([i[0],i[3]]),n=this.getLocalXY([i[2],i[1]]),o=new f.Rectangle;o.xmin=Math.min(parseFloat(r[0]),parseFloat(n[0])),o.xmax=Math.max(parseFloat(r[0]),parseFloat(n[0])),o.ymin=Math.min(parseFloat(r[1]),parseFloat(n[1])),o.ymax=Math.max(parseFloat(r[1]),parseFloat(n[1]));for(var a=0,s=t.length;a<s;a++){var l=t[a],u=l.resetLocation(),c=l.chartBounds,h=[{x:c.xmin,y:c.ymin},{x:c.xmin,y:c.ymax},{x:c.xmax,y:c.ymax},{x:c.xmax,y:c.ymin},{x:c.xmin,y:c.ymin}];if(!o||this.isChartInMap(o,h)){var d=!1;if(0!==a)for(var p=0;p<e.length;p++)if(this.isQuadrilateralOverLap(h,e[p])){d=!0;break}if(!d){e.push(h);for(var g=l.shapes,y=0,v=g.length;y<v;y++)g[y].refOriginalPosition=u,this.renderer.addShape(g[y])}}}}else for(var m=0,_=t.length;m<_;m++)for(var b=t[m],S=b.resetLocation(),O=b.shapes,C=0,T=O.length;C<T;C++)O[C].refOriginalPosition=S,this.renderer.addShape(O[C]);this.renderer.render()}}},{key:"getShapesByFeatureID",value:function(t){var e=[],i=this.renderer.getAllShapes();if(!t)return i;for(var r=0,n=i.length;r<n;r++){var o=i[r];o.refDataID&&t===o.refDataID&&e.push(o)}return e}},{key:"isQuadrilateralOverLap",value:function(t,e){var i=t.length,r=e.length;if(5!==i||5!==r)return null;for(var n=!1,o=0;o<i;o++)if(this.isPointInPoly(t[o],e)){n=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(e[a],t)){n=!0;break}for(var s=0;s<i-1&&!n;s++)for(var l=0;l<r-1;l++)if("Zondy.Object.Point2D"===this.lineIntersection(t[s],t[s+1],e[l],e[l+1]).CLASS_NAME){n=!0;break}return n}},{key:"lineIntersection",value:function(t,e,i,r){var n,o,a=null,s=(r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x),l=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),u=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==u)o=l/u,a=(n=s/u)>=0&&o<=1&&n<=1&&o>=0?new d.Point2D(t.x+n*(e.x-t.x),t.y+n*(e.y-t.y)):"No Intersection";else if(0===s&&0===l){var c=Math.max(t.y,e.y),h=Math.min(t.y,e.y),p=Math.max(t.x,e.x),f=Math.min(t.x,e.x);a=(i.y>=h&&i.y<=c||r.y>=h&&r.y<=c)&&i.x>=f&&i.x<=p||r.x>=f&&r.x<=p?"Coincident":"Parallel"}else a="Parallel";return a}},{key:"isPointInPoly",value:function(t,e){for(var i=!1,r=-1,n=e.length,o=n-1;++r<n;o=r)(e[r].y<=t.y&&t.y<e[o].y||e[o].y<=t.y&&t.y<e[r].y)&&t.x<(e[o].x-e[r].x)*(t.y-e[r].y)/(e[o].y-e[r].y)+e[r].x&&(i=!i);return i}},{key:"isChartInMap",value:function(t,e){for(var i=t,r=!1,n=0,o=e.length;n<o;n++){var a=e[n];if(a.x>=i.xmin&&a.x<=i.xmax&&a.y>=i.ymin&&a.y<=i.ymax){r=!0;break}}return r}},{key:"clearCache",value:function(){this.cache={},this.charts=[]}},{key:"removeFeatures",value:function(t){this.clearCache(),(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"removeFeatures",this).call(this,t)}},{key:"removeAllFeatures",value:function(){this.clearCache(),(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"removeAllFeatures",this).call(this)}},{key:"redraw",value:function(){return this.clearCache(),!!this.renderer&&(this.redrawThematicFeatures(this.map.getView().calculateExtent()),!0)}},{key:"clear",value:function(){this.renderer&&(this.renderer.clearAll(),this.renderer.refresh()),this.removeAllFeatures(),this.clearCache()}},{key:"canvasFunctionInternal_",value:function(t,e,i,r,n){return c.ThemeSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(c.ThemeSource);e.GraphThemeSource=y,u.Zondy.Source.GraphThemeSource=y},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynShowStyle=void 0;var r=i(6),n=i(22),o=(i(398),i(112),i(248),i(309),i(310),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Alpha=void 0!==e.Alpha?e.Alpha:0,this.BugSpare=void 0!==e.BugSpare&&e.BugSpare,this.CustomRender=void 0!==e.CustomRender&&e.CustomRender,this.CustomRenderPath=void 0!==e.CustomRenderPath?e.CustomRenderPath:null,this.DirectionLineClr=void 0!==e.DirectionLineClr?e.DirectionLineClr:0,this.DynNoteFlag=void 0!==e.DynNoteFlag&&e.DynNoteFlag,this.DynNoteInfo=void 0!==e.DynNoteInfo?e.DynNoteInfo:null,this.IsShowArc=void 0!==e.IsShowArc?e.IsShowArc:0,this.ISShowLineDirection=void 0!==e.ISShowLineDirection&&e.ISShowLineDirection,this.LineInfo=void 0!==e.LineInfo?e.LineInfo:null,this.MaxScale=void 0!==e.MaxScale?e.MaxScale:0,this.MinScale=void 0!==e.MinScale?e.MinScale:0,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.SpareLineInfo=void 0!==e.SpareLineInfo?e.SpareLineInfo:null,this.SparePointInfo=void 0!==e.SparePointInfo?e.SparePointInfo:null,this.SpareRegInfo=void 0!==e.SpareRegInfo?e.SpareRegInfo:null,this.SymbleScale=void 0!==e.SymbleScale?e.SymbleScale:0});e.DynShowStyle=o,r.Zondy.Object.DynShowStyle=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDynNoteInfo=void 0;var r=i(6),n=i(22),o=i(112),a=(i(399),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Angle=void 0!==e.Angle?e.Angle:0,this.Backclr=void 0!==e.Backclr?e.Backclr:0,this.Backexp=void 0!==e.Backexp?e.Backexp:0,this.Bold=void 0!==e.Bold?e.Bold:0,this.FieldName=void 0!==e.FieldName?e.FieldName:null,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.FontColor=void 0!==e.FontColor?e.FontColor:0,this.FontSize=void 0!==e.FontSize?e.FontSize:0,this.FontStyle=void 0!==e.FontStyle?e.FontStyle:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:o.FontShape.Positive,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0!==e.IsHzpl&&e.IsHzpl,this.IsOvprnt=void 0!==e.IsOvprnt&&e.IsOvprnt,this.LabelLevel=void 0!==e.LabelLevel?e.LabelLevel:0,this.LableType=void 0!==e.LableType?e.LableType:null,this.Offsetx=void 0!==e.Offsetx?e.Offsetx:0,this.Offsety=void 0!==e.Offsety?e.Offsety:0,this.Space=void 0!==e.Space?e.Space:0,this.StrikeThrough=void 0!==e.StrikeThrough?e.StrikeThrough:0,this.UnderLine=void 0!==e.UnderLine?e.UnderLine:0});e.CDynNoteInfo=a,r.Zondy.Object.CDynNoteInfo=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynNoteLableType=void 0;var r=i(6),n=i(22),o=(i(400),i(401),i(402),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.PntInfo=void 0!==e.PntInfo&&null!==e.PntInfo?e.PntInfo:null,this.LinInfo=void 0!==e.LinInfo&&null!==e.LinInfo?e.LinInfo:null,this.RegInfo=void 0!==e.RegInfo&&null!==e.RegInfo?e.RegInfo:null});e.DynNoteLableType=o,r.Zondy.Object.DynNoteLableType=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LablePntInfo=void 0;var r=i(6),n=i(22),o=(i(112),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Ang=void 0!==e.Ang&&null!==e.Ang?e.Ang:null,this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.Distance=void 0!==e.Distance&&null!==e.Distance?e.Distance:0,this.EightDirLableType=void 0!==e.EightDirLableType&&null!==e.EightDirLableType?e.EightDirLableType:null,this.PntType=void 0!==e.PntType&&null!==e.PntType?e.PntType:0});e.LablePntInfo=o,r.Zondy.Object.LablePntInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelLinInfo=void 0;var r=i(6),n=i(22),o=(i(112),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.DistFromLine=void 0!==e.DistFromLine&&null!==e.DistFromLine?e.DistFromLine:0,this.FromLineConstrain=void 0!==e.FromLineConstrain&&null!==e.FromLineConstrain?e.FromLineConstrain:0,this.Interval=void 0!==e.Interval&&null!==e.Interval?e.Interval:0,this.LinType=void 0!==e.LinType&&null!==e.LinType?e.LinType:0,this.Repeat=void 0!==e.Repeat&&null!==e.Repeat?e.Repeat:0,this.SpreadType=void 0!==e.SpreadType&&null!==e.SpreadType?e.SpreadType:null});e.LabelLinInfo=o,r.Zondy.Object.LabelLinInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelRegInfo=void 0;var r=i(6),n=i(22),o=(i(112),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.ClientOutLabel=void 0!==e.ClientOutLabel&&null!==e.ClientOutLabel&&e.ClientOutLabel,this.LabelMiniRegion=void 0!==e.LabelMiniRegion&&null!==e.LabelMiniRegion?e.LabelMiniRegion:0,this.MayPlaceOutside=void 0!==e.MayPlaceOutside&&null!==e.MayPlaceOutside?e.MayPlaceOutside:0,this.MiniRegionArea=void 0!==e.MiniRegionArea&&null!==e.MiniRegionArea?e.MiniRegionArea:0,this.Offset=void 0!==e.Offset&&null!==e.Offset?e.Offset:0,this.RegType=void 0!==e.RegType&&null!==e.RegType?e.RegType:0});e.LabelRegInfo=o,r.Zondy.Object.LabelRegInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyleExtend=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.Index=void 0!==e.Index?e.Index:0,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag};e.CDisplayStyleExtend=o,r.Zondy.Object.CDisplayStyleExtend=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGDBInfo=void 0;var r=i(6),n=function(t){var e=t||{};this.GDBSvrName=void 0!==e.ServerName?e.ServerName:null,this.GDBName=void 0!==e.GDBName?e.GDBName:null,this.User=void 0!==e.User?e.User:null,this.Password=void 0!==e.Password?e.Password:null};e.CGDBInfo=n,r.Zondy.Object.CGDBInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Polygon=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(169),u=i(118);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,n.default)(this,e);var o=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,o));return s.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getLinearRing(0).getCoordinates(),i=e.length,r=0;r<i;r++)this.pointArr[r]=new u.Point2D(e[r][0],e[r][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t="",e=0;e<this.pointArr.length;e++)t+=this.pointArr[e].x+","+this.pointArr[e].y+",";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"polygon"}}]),e}(l.Tangram);e.Polygon=h,Zondy.Object.Polygon=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourNoteParam=void 0;var r=i(6),n=function(t){var e=void 0!=t?t:{};this.IsClipLine=void 0==e.IsClipLine||e.IsClipLine,this.isXYScaleOut=void 0!=e.isXYScaleOut&&e.isXYScaleOut,this.NoteDirection=void 0!=e.NoteDirection?e.NoteDirection:1,this.LineWidth=void 0!=e.LineWidth?e.LineWidth:.05,this.MaxAngle=void 0!=e.MaxAngle?e.MaxAngle:90,this.MinDist=void 0!=e.MinDist?e.MinDist:10,this.IsAbs=void 0!=e.IsAbs&&e.IsAbs,this.IsComma=void 0!=e.IsComma&&e.IsComma,this.DigitNum=void 0!=e.DigitNum?e.DigitNum:0,this.FormatNo=void 0!=e.FormatNo?e.FormatNo:0,this.LogFlag=void 0!=e.LogFlag?e.LogFlag:0,this.Prefix=void 0!=e.Prefix?e.Prefix:"",this.Suffix=void 0!=e.Suffix?e.Suffix:"",this.ColorNo=void 0!=e.ColorNo?e.ColorNo:0,this.FixSize=void 0!=e.FixSize?e.FixSize:.01,this.FontNo=void 0!=e.FontNo?e.FontNo:0};e.ContourNoteParam=n,r.Zondy.Object.ContourAnalyse.ContourNoteParam=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourParam=void 0;var r=i(6),n=(i(406),i(408),i(409),function(t){var e=void 0!=t?t:{};this.IsSmoothLine=void 0!=e.IsSmoothLine&&e.IsSmoothLine,this.SmoothGrade=void 0!=e.SmoothGrade?e.SmoothGrade:1,this.IsMakeReg=void 0!=e.IsMakeReg&&e.IsMakeReg,this.IsMakeNote=void 0!=e.IsMakeNote&&e.IsMakeNote,this.IsMakeSLin=void 0!=e.IsMakeSLin&&e.IsMakeSLin,this.MapWay=void 0!=e.MapWay?e.MapWay:1,this.FrameWidth=void 0!=e.FrameWidth?e.FrameWidth:1,this.FrameHeight=void 0!=e.FrameHeight?e.FrameHeight:1,this.IsDrawColorScl=void 0!=e.IsDrawColorScl&&e.IsDrawColorScl,this.IsSaveEdge=void 0!=e.IsSaveEdge&&e.IsSaveEdge,this.NoteParam=void 0!=e.NoteParam?e.NoteParam:null,this.SlopLineParam=void 0!=e.SlopLineParam?e.SlopLineParam:null,this.ZValues=void 0!=e.ZValues?e.ZValues:null});e.ContourParam=n,r.Zondy.Object.ContourAnalyse.ContourParam=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=void 0;var r=i(6),n=function(t){var e=void 0!=t?t:{};this.XScale=void 0!=e.XScale?e.XScale:2,this.YScale=void 0!=e.YScale?e.YScale:10,this.LineType=void 0!=e.LineType?e.LineType:0,this.SubLineType=void 0!=e.SubLineType?e.SubLineType:0};e.SlopLineParam=n,r.Zondy.Object.ContourAnalyse.SlopLineParam=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourZValue=void 0;var r=i(6),n=(i(248),i(410),function(t){var e=void 0!=t?t:{};this.ZValue=void 0!=e.ZValue?e.ZValue:1,this.LineInfo=void 0!=e.LineInfo?e.LineInfo:null,this.RegInfo=void 0!=e.RegInfo?e.RegInfo:null,this.IsOutputNote=void 0!=e.IsOutputNote&&e.IsOutputNote});e.ContourZValue=n,r.Zondy.Object.ContourAnalyse.ContourZValue=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourRegionInfo=void 0;var r=i(6),n=function(t){var e=void 0!=t?t:{};this.PatID=void 0!=e.PatID?e.PatID:0,this.FillMode=void 0!=e.FillMode?e.FillMode:0,this.FillColor=void 0!=e.FillColor?e.FillColor:1,this.PatHeight=void 0!=e.PatHeight?e.PatHeight:1,this.PatWidth=void 0!=e.PatWidth?e.PatWidth:1,this.PatAngle=void 0!=e.PatAngle?e.PatAngle:1,this.PatColor=void 0!=e.PatColor?e.PatColor:1,this.OutPenWidth=void 0!=e.OutPenWidth?e.OutPenWidth:1,this.OverMethod=void 0!=e.OverMethod?e.OverMethod:0};e.ContourRegionInfo=n,r.Zondy.Object.ContourAnalyse.ContourRegionInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MeshingParam=void 0;var r=i(6),n=function(t){var e=void 0!=t?t:{};this.SfClsURL=void 0!=e.SfClsURL?e.SfClsURL:null,this.FieldName=void 0!=e.FieldName?e.FieldName:null,this.XCellNum=void 0!=e.XCellNum?e.XCellNum:200,this.Bound=void 0!=e.Bound?e.Bound:null};e.MeshingParam=n,r.Zondy.Object.ContourAnalyse.MeshingParam=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommonServiceBase=void 0;var r=c(i(8)),n=c(i(18)),o=i(6),a=i(22),s=i(413),l=i(414),u=i(415);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i){(0,r.default)(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,(0,a.isArray)(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),(i=i||{})&&(0,a.extend)(this,i),n.isInTheSameDomain=(0,a.isInTheSameDomain)(n.url),n.events=new s.Events(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners)}return(0,n.default)(t,[{key:"destroy",value:function(){var t=this;(0,a.isArray)(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.options=null,t._processSuccess=null,t._processFailed=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=this;t.url=t.url||e.url,t.isInTheSameDomain=e.isInTheSameDomain,e.calculatePollingTimes(),e._processSuccess=t.success,e._processFailed=t.failure,t.scope=e,t.success=e.getUrlCompleted,t.failure=e.getUrlFailed,e.options=t,e._commit(e.options)}},{key:"getUrlCompleted",value:function(t){this._processSuccess(t)}},{key:"getUrlFailed",value:function(t){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(t)}},{key:"ajaxPolling",value:function(){var t=this,e=t.options.url,i=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;t.index=parseInt(Math.random()*t.length),t.url=t.urls[t.index],e=e.replace(i,i.exec(t.url)[0]),t.options.url=e,t.options.isInTheSameDomain=(0,a.isInTheSameDomain)(e),t._commit(t.options)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"serviceProcessCompleted",value:function(t){t=(0,a.transformResult)(t),this.events.triggerEvent("processCompleted",{result:t})}},{key:"serviceProcessFailed",value:function(t){var e=(t=(0,a.transformResult)(t)).error||t;this.events.triggerEvent("processFailed",{error:e})}},{key:"_commit",value:function(t){"POST"!==t.method&&"PUT"!==t.method||(t.params&&(t.url=(0,a.urlAppend)(t.url,(0,a.getParameterString)(t.params||{}))),t.params=t.data),u.FetchRequest.commit(t.method,t.url,t.params,{headers:t.headers,withCredentials:t.withCredentials,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json()}).then(function(e){var i=null;"string"!=typeof e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()?"string"==typeof e&&(i=(new l.JSONFormat).read(e)):(i={},"true"===e.toLowerCase()?i.succeed=!0:i.error=!0),(!i&&isNaN(i)||i.error)&&(i=i&&i.error?{error:i.error}:{error:!0}),i.error?(t.scope?(0,a.bind)(t.failure,t.scope):t.failure)(i):(isNaN(i)||(i={value:i}),"string"==typeof i&&(i={value:i}),"[object Array]"!==Object.prototype.toString.call(i)?i.succeed=void 0===i.succeed||i.succeed:i={value:i,succeed:!0},(t.scope?(0,a.bind)(t.success,t.scope):t.success)(i))})}}]),t}();e.CommonServiceBase=h,o.Zondy.Service.CommonServiceBase=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Events=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(125)),n=i(22),o=function(t,e,i,r){if(this.listeners={},this.object=t,this.eventTypes=[],this.extensions={},this.extensionCount={},(0,n.extend)(this,r),null!=i)for(var o=0,a=i.length;o<a;o++)this.addEventType(i[o])};o.prototype.destroy=function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.listeners=null,this.object=null,this.eventTypes=null},o.prototype.addEventType=function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])},o.prototype.on=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])},o.prototype.register=function(t,e,i,a){if(t in o&&!this.extensions[t]&&(this.extensions[t]=new o[t](this)),null!=i&&-1!==(0,n.indexOf)(this.eventTypes,t)){null==e&&(e=this.object);var s=this.listeners[t];s||(s=[],this.listeners[t]=s,this.extensionCount[t]=0);var l={obj:e,func:i};a?(s.splice(this.extensionCount[t],0,l),"object"===(void 0===a?"undefined":(0,r.default)(a))&&a.extension&&this.extensionCount[t]++):s.push(l)}},o.prototype.registerPriority=function(t,e,i){this.register(t,e,i,!0)},o.prototype.un=function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])},o.prototype.unregister=function(t,e,i){null==e&&(e=this.object);var r=this.listeners[t];if(null!=r)for(var n=0,o=r.length;n<o;n++)if(r[n].obj===e&&r[n].func===i){r.splice(n,1);break}},o.prototype.remove=function(t){null!=this.listeners[t]&&(this.listeners[t]=[])},o.prototype.triggerEvent=function(t,e){var i=this.listeners[t];if(i&&0!=i.length){var r;null==e&&(e={}),e.object=this.object,e.type||(e.type=t);for(var n=0,o=(i=i.slice()).length;n<o;n++){var a=i[n];if(void 0!=(r=a.func.apply(a.obj,[e.result]))&&0==r)break}return r}},e.Events=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=void 0;var r=a(i(125)),n=a(i(58)),o=i(22);function a(t){return t&&t.__esModule?t:{default:t}}var s=function(t){this.data=null,this.keepData=!1,this.indent="    ",this.space=" ",this.newline="\n",this.level=0,this.pretty=!1,this.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof n.default),(0,o.extend)(this,t),this.options=t,this.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,i,r,n=["{"];this.level+=1;var o=!1;for(e in t)t.hasOwnProperty(e)&&(i=this.write.apply(this,[e,this.pretty]),r=this.write.apply(this,[t[e],this.pretty]),null!=i&&null!=r&&(o&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),r),o=!0));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"}"),n.join("")},array:function(t){var e,i=["["];this.level+=1;for(var r=0,n=t.length;r<n;++r)null!=(e=this.write.apply(this,[t[r],this.pretty]))&&(r>0&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"]"),i.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,i){var r=e[i];return r||(r=i.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}}};s.prototype.read=function(t,e){var i;if(this.nativeJSON)try{i=JSON.parse(t,e)}catch(t){}return this.keepData&&(this.data=i),i},s.prototype.write=function(t,e){this.pretty=!!e;var i=null,o=void 0===t?"undefined":(0,r.default)(t);if(this.serialize[o])try{i=!this.pretty&&this.nativeJSON?(0,n.default)(t):this.serialize[o].apply(this,[t])}catch(t){Console.error("Trouble serializing: "+t)}return i},s.prototype.writeIndent=function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")},s.prototype.writeNewline=function(){return this.pretty?this.newline:""},s.prototype.writeSpace=function(){return this.pretty?this.space:""},e.JSONFormat=s,Zondy.Service.JSONFormat=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FetchRequest=e.RequestTimeout=e.CORS=void 0;var r=a(i(125)),n=a(i(416)),o=a(i(58));function a(t){return t&&t.__esModule?t:{default:t}}i(22),i(589),i(594);var s=window.fetch,l=Zondy.CORS=Zondy.CORS||window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,u=Zondy.RequestTimeout=Zondy.RequestTimeout||45e3,c=Zondy.FetchRequest={commit:function(t,e,i,r){switch(t=t?t.toUpperCase():t){case"GET":return this._get(e,i,r);case"POST":return this._post(e,i,r);case"PUT":return this._put(e,i,r);case"DELETE":return this._delete(e,i,r);default:return this._get(e,i,r)}},_get:function(t,e,i){return i=i||{},t=this._processUrl(t,i),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")-1),e,i):this._fetch(t,e,i,"GET")},_delete:function(t,e,i){return i=i||{},t=this._processUrl(t,i),t=Zondy.Util.urlAppend(t,this._getParameterString(e||{})),!this.urlIsLong(t)&&l?this._fetch(t,e,i,"DELETE"):this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")-1),e,i)},_post:function(t,e,i){return i=i||{},this._fetch(this._processUrl(t,i),e,i,"POST")},_put:function(t,e,i){return i=i||{},this._fetch(this._processUrl(t,i),e,i,"PUT")},urlIsLong:function(t){for(var e=0,i=null,r=0,n=t.length;r<n;r++)(i=t.charCodeAt(r))<127?e++:128<=i&&i<=2047?e+=2:2048<=i&&i<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,i,r){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof i&&(i=(0,o.default)(i)),this._post(e,i,r)},_processUrl:function(t,e){return this._isMVTRequest(t)?t:(e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t)},_fetch:function(t,e,i,r){return(i=i||{}).headers=i.headers||{},i.headers["Content-Type"]||(i.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),i.timeout?this._timeout(i.timeout,s(t,{method:r,headers:i.headers,body:"PUT"===r||"POST"===r?e:void 0,credentials:i.withCredentials?"include":"omit",mode:"cors",timeout:u}).then(function(t){return t})):s(t,{method:r,body:"PUT"===r||"POST"===r?e:void 0,headers:i.headers,credentials:i.withCredentials?"include":"omit",mode:"cors",timeout:u}).then(function(t){return t})},_timeout:function(t,e){return new n.default(function(i,r){setTimeout(function(){r(new Error("timeout"))},t),e.then(i,r)})},_getParameterString:function(t){var e=[];for(var i in t){var n=t[i];if(null!=n&&"function"!=typeof n){var o;if("object"===(void 0===n?"undefined":(0,r.default)(n))&&n.constructor===Array){for(var a,s=[],l=0,u=n.length;l<u;l++)a=n[l],s.push(encodeURIComponent(null===a||void 0===a?"":a));o="["+s.join(",")+"]"}else o=encodeURIComponent(n);e.push(encodeURIComponent(i)+"="+o)}}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};e.CORS=l,e.RequestTimeout=u,e.FetchRequest=c,Zondy.Service.FetchRequest=c,Zondy.Service.CORS=l,Zondy.Service.RequestTimeout=u},function(t,e,i){t.exports={default:i(574),__esModule:!0}},function(t,e,i){var r=i(197),n=i(110)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),n))?i:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,i){var r=i(140),n=i(232),o=i(110)("species");t.exports=function(t,e){var i,a=r(t).constructor;return void 0===a||void 0==(i=r(a)[o])?e:n(i)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var r=i(140),n=i(141),o=i(312);t.exports=function(t,e){if(r(t),n(e)&&e.constructor===t)return e;var i=o.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GDBInfo=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(180),u=i(53);function c(t){return t&&t.__esModule?t:{default:t}}i(22);var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.serverName=void 0!==i.serverName?i.serverName:null,o.gdbName=void 0!==i.gdbName?i.gdbName:null,o.dsName=void 0!==i.dsName?i.dsName:null,o.rcsName=void 0!==i.rcsName?i.rcsName:null,o.User=void 0!==i.User?i.User:null,o.Password=void 0!==i.Password?i.Password:null,o.containAll=void 0===i.containAll||i.containAll,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getServerList",value:function(t,e){this.partUrl="datasource?f=json";var i=this.getFullUrl();new u.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getGDBList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"?f=json":i.partUrl="datasource/"+i.serverName+"?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ds?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ds?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRcsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rcs?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rcs?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectList",value:function(t,e){var i=this;i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"?f=json";var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getProjectInfo",value:function(t,e,i){var r=this;r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?f=json";var n=r.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}},{key:"AttachGDB",value:function(t,e,i){var r=this;if(null!==r.serverName&&null!==r.gdbName&&null!==t){r.partUrl="gdb/attach/"+r.gdbName+"?gdbSvrName="+r.serverName+"&path="+t+"&f=json",null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var n=r.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}}},{key:"DetachGDB",value:function(t,e){var i=this;if(null!==i.serverName&&null!==i.gdbName){i.partUrl="gdb/detach/"+i.gdbName+"?gdbSvrName="+i.serverName,null!==i.User&&null!==i.Password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}},{key:"CreateGDB",value:function(t,e,i){var r=this;if(null!==r.serverName&&null!==r.gdbName&&("mapgislocal"!==r.serverName.toLowerCase()||null!==t)){r.partUrl="gdb/creat/"+r.gdbName+"?gdbSvrName="+r.serverName+"&path="+t+"&f=json",null!==r.User&&null!==r.Password&&(r.partUrl+="&gdbUserName="+r.User+"&gdbPwd="+r.Password);var n=r.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}}},{key:"DeleteGDB",value:function(t,e){var i=this;if(null!==i.serverName&&null!==i.gdbName){i.partUrl="gdb/delete/"+i.gdbName+"?gdbSvrName="+i.serverName,null!==i.User&&null!==i.Password&&(i.partUrl+="&gdbUserName="+i.User+"&gdbPwd="+i.Password);var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(l.CatalogService);e.GDBInfo=h,Zondy.Catalog.GDBInfo=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryParameterBase=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(8)),n=i(6),o=i(22),a=i(315);i(423);var s=function t(e){(0,r.default)(this,t);var i=e||{};(0,o.extend)(this,i),this.geometry=void 0!==i.geometry?i.geometry:null,this.where=void 0!==i.where?i.where:null,this.rule=void 0!==i.rule?i.rule:null,this.objectIds=void 0!==i.objectIds?i.objectIds:null,this.pageIndex=void 0!==i.pageIndex?i.pageIndex:0,this.recordNumber=void 0!==i.recordNumber?i.recordNumber:20,this.resultFormat=void 0!==i.resultFormat?i.resultFormat:"json",this.struct=void 0!==i.struct?i.struct:new a.QueryFeatureStruct,this.orderField=void 0!==i.orderField?i.orderField:null,this.isAsc=void 0!==i.isAsc&&i.isAsc,this.cursorType=void 0!==i.cursorType?i.cursorType:"forward"};e.QueryParameterBase=s,n.Zondy.Service.QueryParameterBase=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryFeatureRule=void 0;var r=i(6),n=i(22),o=function(t){var e=t||{};(0,n.extend)(this,e),this.CompareRectOnly=void 0!==e.CompareRectOnly&&"boolean"==typeof e.CompareRectOnly&&e.CompareRectOnly,this.EnableDisplayCondition=void 0!==e.EnableDisplayCondition&&"boolean"==typeof e.EnableDisplayCondition&&e.EnableDisplayCondition,this.MustInside=void 0!==e.MustInside&&"boolean"==typeof e.MustInside&&e.MustInside,this.Intersect=void 0!==e.Intersect&&"boolean"==typeof e.Intersect&&e.Intersect};o.prototype.toJSON=function(){return(0,n.toJSON)(this)},e.QueryFeatureRule=o,r.Zondy.Service.QueryFeatureRule=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQueryParameter=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.geometry=void 0!==e.geometry?e.geometry:null,this.geometryType=void 0!==e.geometryType?e.geometryType:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json",this.nearDis=void 0!==e.nearDis?e.nearDis:1e-4};o.prototype.getParameterURL=function(){var t="";return t+="?f="+this.resultFormat,(t+="&geometryType="+this.geometryType)+"&nearDis="+this.nearDis},e.MultiGeoQueryParameter=o,r.Zondy.Service.MultiGeoQueryParameter=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQueryParameter=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.objectIds=void 0!==e.objectIds?e.objectIds:null,this.where=void 0!==e.where?e.where:null,this.resultFormat=void 0!==e.resultFormat?e.resultFormat:"json"};o.prototype.getParameterURL=function(){var t="";return t+="&f="+this.resultFormat,null!==this.objectIds?t+="&objectIds="+this.objectIds:null!==this.where&&(t+="&where="+this.where),t},e.ObjClsQueryParameter=o,r.Zondy.Service.ObjClsQueryParameter=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=i(170),h=i(53);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.points=void 0!==i.points?i.points:"",r.dx=void 0!==i.dx?i.dx:"",r.dy=void 0!==i.dy?i.dy:"",r.dz=void 0!==i.dz?i.dz:"",r.m=void 0!==i.m?i.m:"",r.wx=void 0!==i.wx?i.wx:"",r.wy=void 0!==i.wy?i.wy:"",r.wz=void 0!==i.wz?i.wz:"",r.srcsrsname=void 0!==i.srcsrsname?i.srcsrsname:"",r.dessrsname=void 0!==i.dessrsname?i.dessrsname:"",r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"coordinateTrans",value:function(t,e,i){var n={};null!==i&&"POST"===i.toUpperCase()?(n.paraValues="",this.partUrl="geomservice/transcoordinate?points="+this.points+"&dx="+this.dx+"&dy="+this.dy+"&dz="+this.dz+"&m="+this.m+"&wx="+this.wx+"&wy="+this.wy+"&wz="+this.wz+"&srcsrsname="+this.srcsrsname+"&dessrsname="+this.dessrsname):(n=this,this.partUrl="geomservice/transcoordinate");var o=this.getFullUrl(),a=new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:t,processFailed:e}});null!==i&&"POST"===i.toUpperCase()?a.processAsync({method:"POST",data:(0,r.default)(n)}):a.processAsync()}}]),e}(c.GeometryAnalysisBase);e.CoordinateElpTrans=p,u.Zondy.Service.CoordinateTransform=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAllOtherDataItemInfoSource=void 0;var r=i(6),n={DefaultThemeInfo:1,DataItemIntrinsicInfo:2};e.CAllOtherDataItemInfoSource=n,r.Zondy.Object.Theme.CAllOtherDataItemInfoSource=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAnnInfo=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Ovprnt?e.Ovprnt:0,this.BackClr=void 0!==e.BackClr?e.BackClr:0,this.BackExp=void 0!==e.BackExp?e.BackExp:0,this.Chnt=void 0!==e.Chnt?e.Chnt:0,this.Color=void 0!==e.Color?e.Color:0,this.FontAngle=void 0!==e.FontAngle?e.FontAngle:0,this.Height=void 0!==e.Height?e.Height:0,this.Ifnt=void 0!==e.Ifnt?e.Ifnt:0,this.Ifnx=void 0!==e.Ifnx?e.Ifnx:0,this.IsFilled=void 0!==e.IsFilled&&e.IsFilled,this.IsHzpl=void 0===e.IsHzpl||e.IsHzpl,this.OffsetX=void 0!==e.OffsetX?e.OffsetX:0,this.OffsetY=void 0!==e.OffsetY?e.OffsetY:0,this.Space=void 0!==e.Space?e.Space:0,this.Width=void 0!==e.Width?e.Width:0};e.CAnnInfo=o,r.Zondy.Object.Theme.CAnnInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartLabelFormat=void 0;var r=i(6),n={Unknown:0,Value:1,Percent:2};e.CChartLabelFormat=n,r.Zondy.Object.Theme.CChartLabelFormat=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartTheme=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(126),u=i(431);function c(t){return t&&t.__esModule?t:{default:t}}i(432),i(435);var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.ChartType=void 0!==i.ChartType?i.ChartType:u.CChartType.Bar,a.ChartThemeInfoArr=void 0!==i.ChartThemeInfoArr?i.ChartThemeInfoArr:null,a.RepresentInfo=void 0!==i.RepresentInfo?i.RepresentInfo:null,a.Type="CChartTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CChartTheme=h,s.Zondy.Object.Theme.CChartTheme=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartType=void 0;var r=i(6),n={Unknown:0,Bar:1,Bar3D:2,Pie:3,Pie3D:4,Line:5,Line3D:6,Point:7};e.CChartType=n,r.Zondy.Object.Theme.CChartType=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeInfo=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{},s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.Expression=void 0!==t?t:"",s}return(0,a.default)(e,t),e}(i(153).CThemeInfo);e.CChartThemeInfo=u,s.Zondy.Object.Theme.CChartThemeInfo=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLinInfo=void 0;var r=i(6),n=i(22),o=i(112),a=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.AdjustFlg=void 0!==e.AdjustFlg?e.AdjustFlg:o.CLinAdjustType.Adjust,this.HeadType=void 0!==e.HeadType?e.HeadType:o.CLinHeadType.Round,this.JointType=void 0!==e.JointType?e.JointType:o.CLinJointType.Round,this.LinStyID=void 0!==e.LinStyID?e.LinStyID:0,this.MakeMethod=void 0!==e.MakeMethod?e.MakeMethod:o.CLinStyleMakeType.Byrule,this.OutClr=void 0!==e.OutClr?e.OutClr:[46,4,3],this.XScale=void 0!==e.XScale?e.XScale:10,this.YScale=void 0!==e.YScale?e.YScale:10,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:[.05,.05,.05]};e.CLinInfo=a,r.Zondy.Object.Theme.CLinInfo=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRegInfo=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.LibID=void 0!==e.LibID?e.LibID:0,this.Ovprnt=void 0!==e.Ovprnt&&e.Ovprnt,this.Angle=void 0!==e.Angle?e.Angle:0,this.EndClr=void 0!==e.EndClr?e.EndClr:0,this.FillClr=void 0!==e.FillClr?e.FillClr:46,this.FillMode=void 0!==e.FillMode?e.FillMode:0,this.FullPatFlg=void 0===e.FullPatFlg||e.FullPatFlg,this.PatClr=void 0!==e.PatClr?e.PatClr:3,this.PatHeight=void 0!==e.PatHeight?e.PatHeight:5,this.PatID=void 0!==e.PatID?e.PatID:0,this.PatWidth=void 0!==e.PatWidth?e.PatWidth:5,this.OutPenW=void 0!==e.OutPenW?e.OutPenW:1};e.CRegInfo=o,r.Zondy.Object.Theme.CRegInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CChartThemeRepresentInfo=void 0;var r=i(6),n=i(22),o=i(428),a=i(429),s=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.AnnInfoLabel=void 0!==e.AnnInfoLabel?e.AnnInfoLabel:new o.CAnnInfo,this.DigitLabel=void 0!==e.DigitLabel?e.DigitLabel:0,this.FormatLabel=void 0!==e.FormatLabel?e.FormatLabel:a.CChartLabelFormat.Unknown,this.IsDrawLabel=void 0===e.IsDrawLabel||e.IsDrawLabel,this.LineColor=void 0!==e.LineColor?e.LineColor:-1,this.MaxLength=void 0!==e.MaxLength?e.MaxLength:30,this.MinRadius=void 0!==e.MinRadius?e.MinRadius:10,this.PieSizeFixFlag=void 0!==e.PieSizeFixFlag?e.PieSizeFixFlag:0,this.PieTiltedAngle=void 0!==e.PieTiltedAngle?e.PieTiltedAngle:30,this.PlotRadius=void 0!==e.PlotRadius?e.PlotRadius:1,this.ThickPersent=void 0!==e.ThickPersent?e.ThickPersent:10,this.Width=void 0!==e.Width?e.Width:3};e.CChartThemeRepresentInfo=s,r.Zondy.Object.Theme.CChartThemeRepresentInfo=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDotDensityTheme=void 0;var r=u(i(13)),n=u(i(8)),o=u(i(14)),a=u(i(15)),s=i(6),l=i(126);function u(t){return t&&t.__esModule?t:{default:t}}i(250);var c=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.Expression=void 0!==i.Expression?i.Expression:"",a.Info=void 0!==i.Info?i.Info:null,a.Value=void 0!==i.Value?i.Value:null,a.Type="CDotDensityTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CDotDensityTheme=c,s.Zondy.Object.Theme.CDotDensityTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CFourColorTheme=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.ClrInfo=void 0!==i.ClrInfo?i.ClrInfo:[25,57,89,121],a.Type="CFourColorTheme",a}return(0,a.default)(e,t),e}(i(126).CTheme);e.CFourColorTheme=u,s.Zondy.Object.Theme.CFourColorTheme=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CGraduatedSymbolTheme=void 0;var r=u(i(13)),n=u(i(8)),o=u(i(14)),a=u(i(15)),s=i(6),l=i(126);function u(t){return t&&t.__esModule?t:{default:t}}i(250);var c=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.BaseValue=void 0!==i.BaseValue?i.BaseValue:141e-6,a.DispMinus=void 0!==i.DispMinus&&i.DispMinus,a.DispZero=void 0!==i.DispZero&&i.DispZero,a.Expression=void 0!==i.Expression?i.Expression:null,a.MinusPntInfo=void 0!==i.MinusPntInfo?i.MinusPntInfo:null,a.PlusPntInfo=void 0!==i.PlusPntInfo?i.PlusPntInfo:null,a.ZeroPntInfo=void 0!==i.ZeroPntInfo?i.ZeroPntInfo:null,a.Type="CGraduatedSymbolTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CGraduatedSymbolTheme=c,s.Zondy.Object.Theme.CGraduatedSymbolTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CMultiClassTheme=void 0;var r=u(i(13)),n=u(i(8)),o=u(i(14)),a=u(i(15)),s=i(6),l=i(126);function u(t){return t&&t.__esModule?t:{default:t}}i(153),i(440);var c=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,a.ExpInfoArr=void 0!==i.ExpInfoArr?i.ExpInfoArr:null,a.MultiClassThemeInfoArr=void 0!==i.MultiClassThemeInfoArr?i.MultiClassThemeInfoArr:null,a.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,a.Type="CMultiClassTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CMultiClassTheme=c,s.Zondy.Object.Theme.CMultiClassTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpInfo=void 0;var r=i(6),n=i(22),o=function(t,e,i){var r=void 0!==i?i:{};(0,n.extend)(this,r),this.Expression=void 0!==t?t:"",this.ItemValueArr=void 0!==e?e:null};e.ExpInfo=o,r.Zondy.Object.Theme.ExpInfo=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRandomTheme=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.Type="CRandomTheme",a}return(0,a.default)(e,t),e}(i(126).CTheme);e.CRandomTheme=u,s.Zondy.Object.Theme.CRandomTheme=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeTheme=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(126),u=i(427);function c(t){return t&&t.__esModule?t:{default:t}}i(153),i(443);var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.AllOtherDataItemInfoSource=void 0!==i.AllOtherDataItemInfoSource?i.AllOtherDataItemInfoSource:u.CAllOtherDataItemInfoSource.DefaultThemeInfo,a.Expression=void 0!==i.Expression?i.Expression:"",a.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,a.RangeThemeInfoArr=void 0!==i.RangeThemeInfoArr?i.RangeThemeInfoArr:null,a.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,a.Type="CRangeTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CRangeTheme=h,s.Zondy.Object.Theme.CRangeTheme=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CRangeThemeInfo=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,a){(0,n.default)(this,e);var s=a||{},l=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,s));return l.StartValue=void 0!==t?t:"",l.EndValue=void 0!==i?i:"",l}return(0,a.default)(e,t),e}(i(153).CThemeInfo);e.CRangeThemeInfo=u,s.Zondy.Object.Theme.CRangeThemeInfo=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CSimpleTheme=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(126),u=i(153);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.ThemeInfo=void 0!==i.ThemeInfo?i.ThemeInfo:new u.CThemeInfo,a.Type="CSimpleTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CSimpleTheme=h,s.Zondy.Object.Theme.CSimpleTheme=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueTheme=void 0;var r=u(i(13)),n=u(i(8)),o=u(i(14)),a=u(i(15)),s=i(6),l=i(126);function u(t){return t&&t.__esModule?t:{default:t}}i(153),i(446);var c=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.DefaultInfo=void 0!==i.DefaultInfo?i.DefaultInfo:null,a.Expression=void 0!==i.Expression?i.Expression:"",a.UniqueThemeInfoArr=void 0!==i.UniqueThemeInfoArr?i.UniqueThemeInfoArr:null,a.GeoInfoType=void 0!==i.GeoInfoType?i.GeoInfoType:null,a.Type="CUniqueTheme",a}return(0,a.default)(e,t),e}(l.CTheme);e.CUniqueTheme=c,s.Zondy.Object.Theme.CUniqueTheme=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CUniqueThemeInfo=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{},s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.Value=void 0!==t?t:"",s}return(0,a.default)(e,t),e}(i(153).CThemeInfo);e.CUniqueThemeInfo=u,s.Zondy.Object.Theme.CUniqueThemeInfo=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FolderInfo=void 0;var r=i(6),n=(i(323),function(t,e){this.name=void 0!==t?t:null,this.attribute=void 0!==e?e:null});e.FolderInfo=n,r.Zondy.Object.Theme.FolderInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=void 0;var r=i(6),n=(i(126),function(t,e){this.LayerName=void 0!==t?t:null,this.ThemeArr=void 0!==e?e:null});e.ThemesInfo=n,r.Zondy.Object.Theme.ThemesInfo=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(450));r.zondy=r.zondy||{},r.zondy.control=r.zondy.control||{},e.default=r},function(t,e,i){"use strict";i.r(e);var r=i(184),n=i(48),o=i(134),a=i(36),s=i(268),l=i(324),u=i(113),c=i(156),h=i(157),d=i(145),p=i(205),f=i(206),g=i(171),y=i(252),v=i(115),m=i(161),_=i(25),b=i(155),S=i(217),O=i(172),C=i(98),T=i(186),x=i(185),E=i(129),P=i(226),j=i(218),R=i(183),I=i(73),L=i(223),w=i(11),A=i(85),M=i(50),F=i(28),k=i(24),N=i(1),D=i(4),G=i(162),B=i(57),U=i(5),V=i(30),W=i(146),Z=i(12),z=i(77),H=i(263),Y=i(55),X=i(52),q=i(7),K=function(t){this.source_=t};K.prototype.isAnimated=function(){return!1},K.prototype.getType=function(){return Object(D.abstract)()},K.prototype.getSource=function(){return this.source_};var J=K,Q=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return q.FRAGMENT_SHADER},e}(J),$=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getType=function(){return q.VERTEX_SHADER},e}(J),tt=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n":"precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"),et=new $(q.DEBUG?"varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n":"varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"),it=i(17);function rt(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var nt=function(t){function e(e,i){t.call(this),this.tolerance=e,this.maxExtent=i,this.origin=Object(N.getCenter)(i),this.projectionMatrix_=Object(it.c)(),this.offsetRotateMatrix_=Object(it.c)(),this.offsetScaleMatrix_=Object(it.c)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.indices=[],this.indicesBuffer=null,this.startIndices=[],this.startIndicesFeature=[],this.vertices=[],this.verticesBuffer=null,this.lineStringReplay=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeleteResourcesFunction=function(t){return Object(D.abstract)()},e.prototype.finish=function(t){Object(D.abstract)()},e.prototype.setUpProgram=function(t,e,i,r){return Object(D.abstract)()},e.prototype.shutDownProgram=function(t,e){Object(D.abstract)()},e.prototype.drawReplay=function(t,e,i,r){Object(D.abstract)()},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){return Object(D.abstract)()},e.prototype.drawHitDetectionReplay=function(t,e,i,r,n,o){return n?this.drawHitDetectionReplayOneByOne(t,e,i,r,o):this.drawHitDetectionReplayAll(t,e,i,r)},e.prototype.drawHitDetectionReplayAll=function(t,e,i,r){return t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawReplay(t,e,i,!0),r(null)||void 0},e.prototype.replay=function(t,e,i,r,n,o,a,s,l,u,c){var h,d,p,f,g,y,v,m,_=t.getGL();this.lineStringReplay&&(h=_.isEnabled(_.STENCIL_TEST),d=_.getParameter(_.STENCIL_FUNC),p=_.getParameter(_.STENCIL_VALUE_MASK),f=_.getParameter(_.STENCIL_REF),g=_.getParameter(_.STENCIL_WRITEMASK),y=_.getParameter(_.STENCIL_FAIL),v=_.getParameter(_.STENCIL_PASS_DEPTH_PASS),m=_.getParameter(_.STENCIL_PASS_DEPTH_FAIL),_.enable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilMask(255),_.stencilFunc(_.ALWAYS,1,255),_.stencilOp(_.KEEP,_.KEEP,_.REPLACE),this.lineStringReplay.replay(t,e,i,r,n,o,a,s,l,u,c),_.stencilMask(0),_.stencilFunc(_.NOTEQUAL,1,255)),t.bindBuffer(q.ARRAY_BUFFER,this.verticesBuffer),t.bindBuffer(q.ELEMENT_ARRAY_BUFFER,this.indicesBuffer);var b=this.setUpProgram(_,t,n,o),S=Object(it.f)(this.projectionMatrix_);Object(it.h)(S,2/(i*n[0]),2/(i*n[1])),Object(it.g)(S,-r),Object(it.j)(S,-(e[0]-this.origin[0]),-(e[1]-this.origin[1]));var O=Object(it.f)(this.offsetScaleMatrix_);Object(it.h)(O,2/n[0],2/n[1]);var C,T=Object(it.f)(this.offsetRotateMatrix_);return 0!==r&&Object(it.g)(T,-r),_.uniformMatrix4fv(b.u_projectionMatrix,!1,rt(this.tmpMat4_,S)),_.uniformMatrix4fv(b.u_offsetScaleMatrix,!1,rt(this.tmpMat4_,O)),_.uniformMatrix4fv(b.u_offsetRotateMatrix,!1,rt(this.tmpMat4_,T)),_.uniform1f(b.u_opacity,a),void 0===l?this.drawReplay(_,t,s,!1):C=this.drawHitDetectionReplay(_,t,s,l,u,c),this.shutDownProgram(_,b),this.lineStringReplay&&(h||_.disable(_.STENCIL_TEST),_.clear(_.STENCIL_BUFFER_BIT),_.stencilFunc(d,f,p),_.stencilMask(g),_.stencilOp(y,m,v)),C},e.prototype.drawElements=function(t,e,i,r){var n=e.hasOESElementIndexUint?q.UNSIGNED_INT:q.UNSIGNED_SHORT,o=r-i,a=i*(e.hasOESElementIndexUint?4:2);t.drawElements(q.TRIANGLES,o,n,a)},e}(W.default),ot=[0,0,0,1],at=[],st=[0,0,0,1],lt=Number.EPSILON||2.220446049250313e-16,ut=function(t,e,i,r,n,o){var a=(i-t)*(o-e)-(n-t)*(r-e);return a<=lt&&a>=-lt?void 0:a>0},ct={STATIC_DRAW:q.STATIC_DRAW,STREAM_DRAW:q.STREAM_DRAW,DYNAMIC_DRAW:q.DYNAMIC_DRAW},ht=function(t,e){this.arr_=void 0!==t?t:[],this.usage_=void 0!==e?e:ct.STATIC_DRAW};ht.prototype.getArray=function(){return this.arr_},ht.prototype.getUsage=function(){return this.usage_};var dt=ht,pt=function(t){function e(e,i){t.call(this,e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.radius_=0,this.state_={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,r){var n,o,a=this.vertices.length,s=this.indices.length,l=a/4;for(n=e,o=i;n<o;n+=r)this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=0,this.vertices[a++]=this.radius_,this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=1,this.vertices[a++]=this.radius_,this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=2,this.vertices[a++]=this.radius_,this.vertices[a++]=t[n],this.vertices[a++]=t[n+1],this.vertices[a++]=3,this.vertices[a++]=this.radius_,this.indices[s++]=l,this.indices[s++]=l+1,this.indices[s++]=l+2,this.indices[s++]=l+2,this.indices[s++]=l+3,this.indices[s++]=l,l+=4},e.prototype.drawCircle=function(t,e){var i=t.getRadius(),r=t.getStride();if(i){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.radius_=i;var n=t.getFlatCoordinates();n=Object(X.d)(n,0,2,r,-this.origin[0],-this.origin[1]),this.drawCoordinates_(n,0,2,r)}else if(this.state_.changed&&(this.styles_.pop(),this.styles_.length)){var o=this.styles_[this.styles_.length-1];this.state_.fillColor=o[0],this.state_.strokeColor=o[1],this.state_.lineWidth=o[2],this.state_.changed=!1}},e.prototype.finish=function(t){this.verticesBuffer=new dt(this.vertices),this.indicesBuffer=new dt(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(tt,et);return this.defaultLocations_?n=this.defaultLocations_:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,q.DEBUG?"u_lineWidth":"k"),this.u_pixelRatio=t.getUniformLocation(e,q.DEBUG?"u_pixelRatio":"l"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"m"),this.u_fillColor=t.getUniformLocation(e,q.DEBUG?"u_fillColor":"n"),this.u_strokeColor=t.getUniformLocation(e,q.DEBUG?"u_strokeColor":"o"),this.u_size=t.getUniformLocation(e,q.DEBUG?"u_size":"p"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"e"),this.a_instruction=t.getAttribLocation(e,q.DEBUG?"a_instruction":"f"),this.a_radius=t.getAttribLocation(e,q.DEBUG?"a_radius":"g")}(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,16,0),t.enableVertexAttribArray(n.a_instruction),t.vertexAttribPointer(n.a_instruction,1,q.FLOAT,!1,16,8),t.enableVertexAttribArray(n.a_radius),t.vertexAttribPointer(n.a_radius,1,q.FLOAT,!1,16,12),t.uniform2fv(n.u_size,i),t.uniform1f(n.u_pixelRatio,r),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_instruction),t.disableVertexAttribArray(e.a_radius)},e.prototype.drawReplay=function(t,e,i,r){var n,o,a,s;if(Object(w.isEmpty)(i))for(a=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],s=this.styles_[n],this.setFillStyle_(t,s[0]),this.setStrokeStyle_(t,s[1],s[2]),this.drawElements(t,e,o,a),a=o;else this.drawReplaySkipping_(t,e,i)},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var o,a,s,l,u,c,h;for(h=this.startIndices.length-2,s=this.startIndices[h+1],o=this.styleIndices_.length-1;o>=0;--o)for(l=this.styles_[o],this.setFillStyle_(t,l[0]),this.setStrokeStyle_(t,l[1],l[2]),u=this.styleIndices_[o];h>=0&&this.startIndices[h]>=u;){if(a=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[Object(D.getUid)(c)]&&c.getGeometry()&&(void 0===n||Object(N.intersects)(n,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,s);var d=r(c);if(d)return d}h--,s=a}},e.prototype.drawReplaySkipping_=function(t,e,i){var r,n,o,a,s,l,u,c;for(u=this.startIndices.length-2,o=n=this.startIndices[u+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(t,a[0]),this.setStrokeStyle_(t,a[1],a[2]),s=this.styleIndices_[r];u>=0&&this.startIndices[u]>=s;)c=this.startIndices[u],l=this.startIndicesFeature[u],i[Object(D.getUid)(l)]&&(n!==o&&this.drawElements(t,e,n,o),o=c),u--,n=c;n!==o&&this.drawElements(t,e,n,o),n=o=s}},e.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_fillColor,e)},e.prototype.setStrokeStyle_=function(t,e,i){t.uniform4fv(this.defaultLocations_.u_strokeColor,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i)},e.prototype.setFillStrokeStyle=function(t,e){var i,r;if(e){var n=e.getLineDash();this.state_.lineDash=n||at;var o=e.getLineDashOffset();this.state_.lineDashOffset=o||0,i=(i=e.getColor())instanceof CanvasGradient||i instanceof CanvasPattern?st:Object(Y.asArray)(i).map(function(t,e){return 3!=e?t/255:t})||st,r=void 0!==(r=e.getWidth())?r:1}else i=[0,0,0,0],r=0;var a=t?t.getColor():[0,0,0,0];a=a instanceof CanvasGradient||a instanceof CanvasPattern?ot:Object(Y.asArray)(a).map(function(t,e){return 3!=e?t/255:t})||ot,this.state_.strokeColor&&Object(Z.b)(this.state_.strokeColor,i)&&this.state_.fillColor&&Object(Z.b)(this.state_.fillColor,a)&&this.state_.lineWidth===r||(this.state_.changed=!0,this.state_.fillColor=a,this.state_.strokeColor=i,this.state_.lineWidth=r,this.styles_.push([a,i,r]))},e}(nt),ft=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),gt=new $(q.DEBUG?"varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n":"varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"),yt=i(3),vt={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};function mt(t,e,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,e),void 0!==i&&t.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,i),r}function _t(t,e,i,r,n){var o=mt(t,r,n);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),o}function bt(t,e,i,r){var n=mt(t,i,r);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),n}var St=function(t){function e(e,i){t.call(this),this.canvas_=e,this.gl_=i,this.bufferCache_={},this.shaderCache_={},this.programCache_={},this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null,this.hasOESElementIndexUint=Object(Z.f)(q.EXTENSIONS,"OES_element_index_uint"),this.hasOESElementIndexUint&&i.getExtension("OES_element_index_uint"),Object(yt.listen)(this.canvas_,vt.LOST,this.handleWebGLContextLost,this),Object(yt.listen)(this.canvas_,vt.RESTORED,this.handleWebGLContextRestored,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindBuffer=function(t,e){var i=this.getGL(),r=e.getArray(),n=Object(D.getUid)(e);if(n in this.bufferCache_){var o=this.bufferCache_[n];i.bindBuffer(t,o.buffer)}else{var a,s=i.createBuffer();i.bindBuffer(t,s),t==q.ARRAY_BUFFER?a=new Float32Array(r):t==q.ELEMENT_ARRAY_BUFFER&&(a=this.hasOESElementIndexUint?new Uint32Array(r):new Uint16Array(r)),i.bufferData(t,a,e.getUsage()),this.bufferCache_[n]={buf:e,buffer:s}}},e.prototype.deleteBuffer=function(t){var e=this.getGL(),i=Object(D.getUid)(t),r=this.bufferCache_[i];e.isContextLost()||e.deleteBuffer(r.buffer),delete this.bufferCache_[i]},e.prototype.disposeInternal=function(){Object(yt.unlistenAll)(this.canvas_);var t=this.getGL();if(!t.isContextLost()){for(var e in this.bufferCache_)t.deleteBuffer(this.bufferCache_[e].buffer);for(var i in this.programCache_)t.deleteProgram(this.programCache_[i]);for(var r in this.shaderCache_)t.deleteShader(this.shaderCache_[r]);t.deleteFramebuffer(this.hitDetectionFramebuffer_),t.deleteRenderbuffer(this.hitDetectionRenderbuffer_),t.deleteTexture(this.hitDetectionTexture_)}},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.getHitDetectionFramebuffer=function(){return this.hitDetectionFramebuffer_||this.initHitDetectionFramebuffer_(),this.hitDetectionFramebuffer_},e.prototype.getShader=function(t){var e=Object(D.getUid)(t);if(e in this.shaderCache_)return this.shaderCache_[e];var i=this.getGL(),r=i.createShader(t.getType());return i.shaderSource(r,t.getSource()),i.compileShader(r),this.shaderCache_[e]=r,r},e.prototype.getProgram=function(t,e){var i=Object(D.getUid)(t)+"/"+Object(D.getUid)(e);if(i in this.programCache_)return this.programCache_[i];var r=this.getGL(),n=r.createProgram();return r.attachShader(n,this.getShader(t)),r.attachShader(n,this.getShader(e)),r.linkProgram(n),this.programCache_[i]=n,n},e.prototype.handleWebGLContextLost=function(){Object(w.clear)(this.bufferCache_),Object(w.clear)(this.shaderCache_),Object(w.clear)(this.programCache_),this.currentProgram_=null,this.hitDetectionFramebuffer_=null,this.hitDetectionTexture_=null,this.hitDetectionRenderbuffer_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.initHitDetectionFramebuffer_=function(){var t=this.gl_,e=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);var i=_t(t,1,1),r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,1,1),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.hitDetectionFramebuffer_=e,this.hitDetectionTexture_=i,this.hitDetectionRenderbuffer_=r},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,!0)},e}(o.a),Ot=function(t){function e(e,i){t.call(this,e,i),this.anchorX=void 0,this.anchorY=void 0,this.groupIndices=[],this.hitDetectionGroupIndices=[],this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.defaultLocations=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.width=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.getTextures(!0),n=t.getGL();return function(){var o,a;if(!n.isContextLost())for(o=0,a=r.length;o<a;++o)n.deleteTexture(r[o]);t.deleteBuffer(e),t.deleteBuffer(i)}},e.prototype.drawCoordinates=function(t,e,i,r){var n,o,a,s,l,u,c=this.anchorX,h=this.anchorY,d=this.height,p=this.imageHeight,f=this.imageWidth,g=this.opacity,y=this.originX,v=this.originY,m=this.rotateWithView?1:0,_=-this.rotation,b=this.scale,S=this.width,O=Math.cos(_),C=Math.sin(_),T=this.indices.length,x=this.vertices.length;for(n=e;n<i;n+=r)l=t[n]-this.origin[0],u=t[n+1]-this.origin[1],o=x/8,a=-b*c,s=-b*(d-h),this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*O-s*C,this.vertices[x++]=a*C+s*O,this.vertices[x++]=y/f,this.vertices[x++]=(v+d)/p,this.vertices[x++]=g,this.vertices[x++]=m,a=b*(S-c),s=-b*(d-h),this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*O-s*C,this.vertices[x++]=a*C+s*O,this.vertices[x++]=(y+S)/f,this.vertices[x++]=(v+d)/p,this.vertices[x++]=g,this.vertices[x++]=m,a=b*(S-c),s=b*h,this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*O-s*C,this.vertices[x++]=a*C+s*O,this.vertices[x++]=(y+S)/f,this.vertices[x++]=v/p,this.vertices[x++]=g,this.vertices[x++]=m,a=-b*c,s=b*h,this.vertices[x++]=l,this.vertices[x++]=u,this.vertices[x++]=a*O-s*C,this.vertices[x++]=a*C+s*O,this.vertices[x++]=y/f,this.vertices[x++]=v/p,this.vertices[x++]=g,this.vertices[x++]=m,this.indices[T++]=o,this.indices[T++]=o+1,this.indices[T++]=o+2,this.indices[T++]=o,this.indices[T++]=o+2,this.indices[T++]=o+3;return x},e.prototype.createTextures=function(t,e,i,r){var n,o,a,s,l=e.length;for(s=0;s<l;++s)o=e[s],(a=Object(D.getUid)(o))in i?n=i[a]:(n=bt(r,o,q.CLAMP_TO_EDGE,q.CLAMP_TO_EDGE),i[a]=n),t[s]=n},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(ft,gt);return this.defaultLocations?n=this.defaultLocations:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"j"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"k"),this.u_image=t.getUniformLocation(e,q.DEBUG?"u_image":"l"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"c"),this.a_texCoord=t.getAttribLocation(e,q.DEBUG?"a_texCoord":"d"),this.a_offsets=t.getAttribLocation(e,q.DEBUG?"a_offsets":"e"),this.a_opacity=t.getAttribLocation(e,q.DEBUG?"a_opacity":"f"),this.a_rotateWithView=t.getAttribLocation(e,q.DEBUG?"a_rotateWithView":"g")}(t,o),this.defaultLocations=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,32,0),t.enableVertexAttribArray(n.a_offsets),t.vertexAttribPointer(n.a_offsets,2,q.FLOAT,!1,32,8),t.enableVertexAttribArray(n.a_texCoord),t.vertexAttribPointer(n.a_texCoord,2,q.FLOAT,!1,32,16),t.enableVertexAttribArray(n.a_opacity),t.vertexAttribPointer(n.a_opacity,1,q.FLOAT,!1,32,24),t.enableVertexAttribArray(n.a_rotateWithView),t.vertexAttribPointer(n.a_rotateWithView,1,q.FLOAT,!1,32,28),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_offsets),t.disableVertexAttribArray(e.a_texCoord),t.disableVertexAttribArray(e.a_opacity),t.disableVertexAttribArray(e.a_rotateWithView)},e.prototype.drawReplay=function(t,e,i,r){var n,o,a,s=r?this.getHitDetectionTextures():this.getTextures(),l=r?this.hitDetectionGroupIndices:this.groupIndices;if(Object(w.isEmpty)(i))for(n=0,o=s.length,a=0;n<o;++n){t.bindTexture(q.TEXTURE_2D,s[n]);var u=l[n];this.drawElements(t,e,a,u),a=u}else this.drawReplaySkipping(t,e,i,s,l)},e.prototype.drawReplaySkipping=function(t,e,i,r,n){var o,a,s=0;for(o=0,a=r.length;o<a;++o){t.bindTexture(q.TEXTURE_2D,r[o]);for(var l=o>0?n[o-1]:0,u=n[o],c=l,h=l;s<this.startIndices.length&&this.startIndices[s]<=u;){var d=this.startIndicesFeature[s];void 0!==i[Object(D.getUid)(d)]?(c!==h&&this.drawElements(t,e,c,h),h=c=s===this.startIndices.length-1?u:this.startIndices[s+1]):h=s===this.startIndices.length-1?u:this.startIndices[s+1],s++}c!==h&&this.drawElements(t,e,c,h)}},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var o,a,s,l,u,c=this.startIndices.length-1,h=this.getHitDetectionTextures();for(o=h.length-1;o>=0;--o)for(t.bindTexture(q.TEXTURE_2D,h[o]),a=o>0?this.hitDetectionGroupIndices[o-1]:0,l=this.hitDetectionGroupIndices[o];c>=0&&this.startIndices[c]>=a;){if(s=this.startIndices[c],u=this.startIndicesFeature[c],void 0===i[Object(D.getUid)(u)]&&u.getGeometry()&&(void 0===n||Object(N.intersects)(n,u.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,s,l);var d=r(u);if(d)return d}l=s,c--}},e.prototype.finish=function(t){this.anchorX=void 0,this.anchorY=void 0,this.height=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.indices=null,this.opacity=void 0,this.originX=void 0,this.originY=void 0,this.rotateWithView=void 0,this.rotation=void 0,this.scale=void 0,this.vertices=null,this.width=void 0},e.prototype.getTextures=function(t){return Object(D.abstract)()},e.prototype.getHitDetectionTextures=function(){return Object(D.abstract)()},e}(nt),Ct=function(t){function e(e,i){t.call(this,e,i),this.images_=[],this.hitDetectionImages_=[],this.textures_=[],this.hitDetectionTextures_=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawMultiPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},e.prototype.drawPoint=function(t,e){this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var i=t.getFlatCoordinates(),r=t.getStride();this.drawCoordinates(i,0,i.length,r)},e.prototype.finish=function(e){var i=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices.push(this.indices.length),this.verticesBuffer=new dt(this.vertices);var r=this.indices;this.indicesBuffer=new dt(r);var n={};this.createTextures(this.textures_,this.images_,n,i),this.createTextures(this.hitDetectionTextures_,this.hitDetectionImages_,n,i),this.images_=null,this.hitDetectionImages_=null,t.prototype.finish.call(this,e)},e.prototype.setImageStyle=function(t){var e,i=t.getAnchor(),r=t.getImage(1),n=t.getImageSize(),o=t.getHitDetectionImage(1),a=t.getOpacity(),s=t.getOrigin(),l=t.getRotateWithView(),u=t.getRotation(),c=t.getSize(),h=t.getScale();0===this.images_.length?this.images_.push(r):(e=this.images_[this.images_.length-1],Object(D.getUid)(e)!=Object(D.getUid)(r)&&(this.groupIndices.push(this.indices.length),this.images_.push(r))),0===this.hitDetectionImages_.length?this.hitDetectionImages_.push(o):(e=this.hitDetectionImages_[this.hitDetectionImages_.length-1],Object(D.getUid)(e)!=Object(D.getUid)(o)&&(this.hitDetectionGroupIndices.push(this.indices.length),this.hitDetectionImages_.push(o))),this.anchorX=i[0],this.anchorY=i[1],this.height=c[1],this.imageHeight=n[1],this.imageWidth=n[0],this.opacity=a,this.originX=s[0],this.originY=s[1],this.rotation=u,this.rotateWithView=l,this.scale=h,this.width=c[0]},e.prototype.getTextures=function(t){return t?this.textures_.concat(this.hitDetectionTextures_):this.textures_},e.prototype.getHitDetectionTextures=function(){return this.hitDetectionTextures_},e}(Ot),Tt=i(93),xt=i(158);function Et(t,e,i,r){var n=i-r;return t[e]===t[n]&&t[e+1]===t[n+1]&&(i-e)/r>3&&!!Object(xt.a)(t,e,i,r)}var Pt=new Q(q.DEBUG?"precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;varying float a;varying vec2 aVertex;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((aVertex.x+1.0)/2.0*o.x*p,(aVertex.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),jt=new $(q.DEBUG?"varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n":"varying float a;varying vec2 aVertex;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;aVertex=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"),Rt=function(t){function e(e,i){t.call(this,e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i,r){var n,o,a,s,l,u,c,h,d=this.vertices.length,p=this.indices.length,f="bevel"===this.state_.lineJoin?0:"miter"===this.state_.lineJoin?1:2,g="butt"===this.state_.lineCap?0:"square"===this.state_.lineCap?1:2,y=Et(t,e,i,r),v=p,m=1;for(n=e,o=i;n<o;n+=r){if(l=d/7,u=c,c=h||[t[n],t[n+1]],n===e){if(h=[t[n+r],t[n+r+1]],i-e==2*r&&Object(Z.b)(c,h))break;if(!y){g&&(d=this.addVertices_([0,0],c,h,7*m*g,d),d=this.addVertices_([0,0],c,h,7*-m*g,d),this.indices[p++]=l+2,this.indices[p++]=l,this.indices[p++]=l+1,this.indices[p++]=l+1,this.indices[p++]=l+3,this.indices[p++]=l+2),d=this.addVertices_([0,0],c,h,3*m*(g||1),d),v=(d=this.addVertices_([0,0],c,h,3*-m*(g||1),d))/7-1;continue}u=[t[i-2*r],t[i-2*r+1]],a=h}else{if(n===i-r){if(y){h=a;break}u=u||[0,0],d=this.addVertices_(u,c,[0,0],5*m*(g||1),d),d=this.addVertices_(u,c,[0,0],5*-m*(g||1),d),this.indices[p++]=l,this.indices[p++]=v-1,this.indices[p++]=v,this.indices[p++]=v,this.indices[p++]=l+1,this.indices[p++]=l,g&&(d=this.addVertices_(u,c,[0,0],11*m*g,d),d=this.addVertices_(u,c,[0,0],11*-m*g,d),this.indices[p++]=l+2,this.indices[p++]=l,this.indices[p++]=l+1,this.indices[p++]=l+1,this.indices[p++]=l+3,this.indices[p++]=l+2);break}h=[t[n+r],t[n+r+1]]}s=ut(u[0],u[1],c[0],c[1],h[0],h[1])?-1:1,d=this.addVertices_(u,c,h,13*s*(f||1),d),d=this.addVertices_(u,c,h,17*s*(f||1),d),d=this.addVertices_(u,c,h,19*-s*(f||1),d),n>e&&(this.indices[p++]=l,this.indices[p++]=v-1,this.indices[p++]=v,this.indices[p++]=l+2,this.indices[p++]=l,this.indices[p++]=m*s>0?v:v-1),this.indices[p++]=l,this.indices[p++]=l+2,this.indices[p++]=l+1,v=l+2,m=s,f&&(d=this.addVertices_(u,c,h,23*s*f,d),this.indices[p++]=l+1,this.indices[p++]=l+3,this.indices[p++]=l)}y&&(l=l||d/7,s=Object(Tt.a)([u[0],u[1],c[0],c[1],h[0],h[1]],0,6,2)?1:-1,d=this.addVertices_(u,c,h,13*s*(f||1),d),d=this.addVertices_(u,c,h,19*-s*(f||1),d),this.indices[p++]=l,this.indices[p++]=v-1,this.indices[p++]=v,this.indices[p++]=l+1,this.indices[p++]=l,this.indices[p++]=m*s>0?v:v-1)},e.prototype.addVertices_=function(t,e,i,r,n){return this.vertices[n++]=t[0],this.vertices[n++]=t[1],this.vertices[n++]=e[0],this.vertices[n++]=e[1],this.vertices[n++]=i[0],this.vertices[n++]=i[1],this.vertices[n++]=r,n},e.prototype.isValid_=function(t,e,i,r){var n=i-e;if(n<2*r)return!1;if(n===2*r){var o=[t[e],t[e+1]],a=[t[e+r],t[e+r+1]];return!Object(Z.b)(o,a)}return!0},e.prototype.drawLineString=function(t,e){var i=t.getFlatCoordinates(),r=t.getStride();this.isValid_(i,0,i.length,r)&&(i=Object(X.d)(i,0,i.length,r,-this.origin[0],-this.origin[1]),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.drawCoordinates_(i,0,i.length,r))},e.prototype.drawMultiLineString=function(t,e){var i=this.indices.length,r=t.getEnds();r.unshift(0);var n,o,a=t.getFlatCoordinates(),s=t.getStride();if(r.length>1)for(n=1,o=r.length;n<o;++n)if(this.isValid_(a,r[n-1],r[n],s)){var l=Object(X.d)(a,r[n-1],r[n],s,-this.origin[0],-this.origin[1]);this.drawCoordinates_(l,0,l.length,s)}this.indices.length>i&&(this.startIndices.push(i),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1))},e.prototype.drawPolygonCoordinates=function(t,e,i){var r,n;if(Et(t,0,t.length,i)||(t.push(t[0]),t.push(t[1])),this.drawCoordinates_(t,0,t.length,i),e.length)for(r=0,n=e.length;r<n;++r)Et(e[r],0,e[r].length,i)||(e[r].push(e[r][0]),e[r].push(e[r][1])),this.drawCoordinates_(e[r],0,e[r].length,i)},e.prototype.setPolygonStyle=function(t,e){var i=void 0===e?this.indices.length:e;this.startIndices.push(i),this.startIndicesFeature.push(t),this.state_.changed&&(this.styleIndices_.push(i),this.state_.changed=!1)},e.prototype.getCurrentIndex=function(){return this.indices.length},e.prototype.finish=function(t){this.verticesBuffer=new dt(this.vertices),this.indicesBuffer=new dt(this.indices),this.startIndices.push(this.indices.length),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer;return function(){t.deleteBuffer(e),t.deleteBuffer(i)}},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(Pt,jt);return this.defaultLocations_?n=this.defaultLocations_:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"h"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"i"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"j"),this.u_lineWidth=t.getUniformLocation(e,q.DEBUG?"u_lineWidth":"k"),this.u_miterLimit=t.getUniformLocation(e,q.DEBUG?"u_miterLimit":"l"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"m"),this.u_color=t.getUniformLocation(e,q.DEBUG?"u_color":"n"),this.u_size=t.getUniformLocation(e,q.DEBUG?"u_size":"o"),this.u_pixelRatio=t.getUniformLocation(e,q.DEBUG?"u_pixelRatio":"p"),this.a_lastPos=t.getAttribLocation(e,q.DEBUG?"a_lastPos":"d"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"e"),this.a_nextPos=t.getAttribLocation(e,q.DEBUG?"a_nextPos":"f"),this.a_direction=t.getAttribLocation(e,q.DEBUG?"a_direction":"g")}(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_lastPos),t.vertexAttribPointer(n.a_lastPos,2,q.FLOAT,!1,28,0),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,28,8),t.enableVertexAttribArray(n.a_nextPos),t.vertexAttribPointer(n.a_nextPos,2,q.FLOAT,!1,28,16),t.enableVertexAttribArray(n.a_direction),t.vertexAttribPointer(n.a_direction,1,q.FLOAT,!1,28,24),t.uniform2fv(n.u_size,i),t.uniform1f(n.u_pixelRatio,r),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_lastPos),t.disableVertexAttribArray(e.a_position),t.disableVertexAttribArray(e.a_nextPos),t.disableVertexAttribArray(e.a_direction)},e.prototype.drawReplay=function(t,e,i,r){var n,o,a,s,l=t.getParameter(t.DEPTH_FUNC),u=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Object(w.isEmpty)(i))for(a=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],s=this.styles_[n],this.setStrokeStyle_(t,s[0],s[1],s[2]),this.drawElements(t,e,o,a),t.clear(t.DEPTH_BUFFER_BIT),a=o;else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(u),t.depthFunc(l))},e.prototype.drawReplaySkipping_=function(t,e,i){var r,n,o,a,s,l,u,c;for(u=this.startIndices.length-2,o=n=this.startIndices[u+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setStrokeStyle_(t,a[0],a[1],a[2]),s=this.styleIndices_[r];u>=0&&this.startIndices[u]>=s;)c=this.startIndices[u],l=this.startIndicesFeature[u],i[Object(D.getUid)(l)]&&(n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),o=c),u--,n=c;n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),n=o=s}},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var o,a,s,l,u,c,h;for(h=this.startIndices.length-2,s=this.startIndices[h+1],o=this.styleIndices_.length-1;o>=0;--o)for(l=this.styles_[o],this.setStrokeStyle_(t,l[0],l[1],l[2]),u=this.styleIndices_[o];h>=0&&this.startIndices[h]>=u;){if(a=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[Object(D.getUid)(c)]&&c.getGeometry()&&(void 0===n||Object(N.intersects)(n,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,s);var d=r(c);if(d)return d}h--,s=a}},e.prototype.setStrokeStyle_=function(t,e,i,r){t.uniform4fv(this.defaultLocations_.u_color,e),t.uniform1f(this.defaultLocations_.u_lineWidth,i),t.uniform1f(this.defaultLocations_.u_miterLimit,r)},e.prototype.setFillStrokeStyle=function(t,e){var i=e.getLineCap();this.state_.lineCap=void 0!==i?i:"round";var r=e.getLineDash();this.state_.lineDash=r||at;var n=e.getLineDashOffset();this.state_.lineDashOffset=n||0;var o=e.getLineJoin();this.state_.lineJoin=void 0!==o?o:"round";var a=e.getColor();a=a instanceof CanvasGradient||a instanceof CanvasPattern?st:Object(Y.asArray)(a).map(function(t,e){return 3!=e?t/255:t})||st;var s=e.getWidth();s=void 0!==s?s:1;var l=e.getMiterLimit();l=void 0!==l?l:10,this.state_.strokeColor&&Object(Z.b)(this.state_.strokeColor,a)&&this.state_.lineWidth===s&&this.state_.miterLimit===l||(this.state_.changed=!0,this.state_.strokeColor=a,this.state_.lineWidth=s,this.state_.miterLimit=l,this.styles_.push([a,s,l]))},e}(nt),It=i(107),Lt=new Q(q.DEBUG?"precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n":"precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"),wt=new $(q.DEBUG?"\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n":"attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"),At=i(96),Mt=function(t){this.first_,this.last_,this.head_,this.circular_=void 0===t||t,this.length_=0};Mt.prototype.insertItem=function(t){var e={prev:void 0,next:void 0,data:t},i=this.head_;if(i){var r=i.next;e.prev=i,e.next=r,i.next=e,r&&(r.prev=e),i===this.last_&&(this.last_=e)}else this.first_=e,this.last_=e,this.circular_&&(e.next=e,e.prev=e);this.head_=e,this.length_++},Mt.prototype.removeItem=function(){var t=this.head_;if(t){var e=t.next,i=t.prev;e&&(e.prev=i),i&&(i.next=e),this.head_=e||i,this.first_===this.last_?(this.head_=void 0,this.first_=void 0,this.last_=void 0):this.first_===t?this.first_=this.head_:this.last_===t&&(this.last_=i?this.head_.prev:this.head_),this.length_--}},Mt.prototype.firstItem=function(){if(this.head_=this.first_,this.head_)return this.head_.data},Mt.prototype.lastItem=function(){if(this.head_=this.last_,this.head_)return this.head_.data},Mt.prototype.nextItem=function(){if(this.head_&&this.head_.next)return this.head_=this.head_.next,this.head_.data},Mt.prototype.getNextItem=function(){if(this.head_&&this.head_.next)return this.head_.next.data},Mt.prototype.prevItem=function(){if(this.head_&&this.head_.prev)return this.head_=this.head_.prev,this.head_.data},Mt.prototype.getPrevItem=function(){if(this.head_&&this.head_.prev)return this.head_.prev.data},Mt.prototype.getCurrItem=function(){if(this.head_)return this.head_.data},Mt.prototype.setFirstItem=function(){this.circular_&&this.head_&&(this.first_=this.head_,this.last_=this.head_.prev)},Mt.prototype.concat=function(t){if(t.head_){if(this.head_){var e=this.head_.next;this.head_.next=t.first_,t.first_.prev=this.head_,e.prev=t.last_,t.last_.next=e,this.length_+=t.length_}else this.head_=t.head_,this.first_=t.first_,this.last_=t.last_,this.length_=t.length_;t.head_=void 0,t.first_=void 0,t.last_=void 0,t.length_=0}},Mt.prototype.getLength=function(){return this.length_};var Ft=Mt,kt=i(123),Nt=function(t){function e(e,i){t.call(this,e,i),this.lineStringReplay=new Rt(e,i),this.defaultLocations_=null,this.styles_=[],this.styleIndices_=[],this.state_={fillColor:null,changed:!1}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawCoordinates_=function(t,e,i){var r=new Ft,n=new kt.default;this.processFlatCoordinates_(t,i,r,n,!0);var o=this.getMaxCoords_(r);if(e.length){var a,s,l=[];for(a=0,s=e.length;a<s;++a){var u={list:new Ft,maxCoords:void 0,rtree:new kt.default};l.push(u),this.processFlatCoordinates_(e[a],i,u.list,u.rtree,!1),this.classifyPoints_(u.list,u.rtree,!0),u.maxCoords=this.getMaxCoords_(u.list)}for(l.sort(function(t,e){return e.maxCoords[0]===t.maxCoords[0]?t.maxCoords[1]-e.maxCoords[1]:e.maxCoords[0]-t.maxCoords[0]}),a=0;a<l.length;++a){var c=l[a].list,h=c.firstItem(),d=h,p=void 0;do{if(this.getIntersections_(d,n).length){p=!0;break}d=c.nextItem()}while(h!==d);p||this.bridgeHole_(c,l[a].maxCoords[0],r,o[0],n)&&(n.concat(l[a].rtree),this.classifyPoints_(r,n,!1))}}else this.classifyPoints_(r,n,!1);this.triangulate_(r,n)},e.prototype.processFlatCoordinates_=function(t,e,i,r,n){var o,a,s,l,u,c=Object(Tt.a)(t,0,t.length,e),h=this.vertices.length/2,d=[],p=[];if(n===c){for(l=s=this.createPoint_(t[0],t[1],h++),o=e,a=t.length;o<a;o+=e)u=this.createPoint_(t[o],t[o+1],h++),p.push(this.insertItem_(l,u,i)),d.push([Math.min(l.x,u.x),Math.min(l.y,u.y),Math.max(l.x,u.x),Math.max(l.y,u.y)]),l=u;p.push(this.insertItem_(u,s,i)),d.push([Math.min(l.x,u.x),Math.min(l.y,u.y),Math.max(l.x,u.x),Math.max(l.y,u.y)])}else{var f=t.length-e;for(l=s=this.createPoint_(t[f],t[f+1],h++),o=f-e,a=0;o>=a;o-=e)u=this.createPoint_(t[o],t[o+1],h++),p.push(this.insertItem_(l,u,i)),d.push([Math.min(l.x,u.x),Math.min(l.y,u.y),Math.max(l.x,u.x),Math.max(l.y,u.y)]),l=u;p.push(this.insertItem_(u,s,i)),d.push([Math.min(l.x,u.x),Math.min(l.y,u.y),Math.max(l.x,u.x),Math.max(l.y,u.y)])}r.load(d,p)},e.prototype.getMaxCoords_=function(t){var e=t.firstItem(),i=e,r=[i.p0.x,i.p0.y];do{(i=t.nextItem()).p0.x>r[0]&&(r=[i.p0.x,i.p0.y])}while(i!==e);return r},e.prototype.classifyPoints_=function(t,e,i){var r=t.firstItem(),n=r,o=t.nextItem(),a=!1;do{var s=i?ut(o.p1.x,o.p1.y,n.p1.x,n.p1.y,n.p0.x,n.p0.y):ut(n.p0.x,n.p0.y,n.p1.x,n.p1.y,o.p1.x,o.p1.y);void 0===s?(this.removeItem_(n,o,t,e),a=!0,o===r&&(r=t.getNextItem()),o=n,t.prevItem()):n.p1.reflex!==s&&(n.p1.reflex=s,a=!0),n=o,o=t.nextItem()}while(n!==r);return a},e.prototype.bridgeHole_=function(t,e,i,r,n){for(var o=t.firstItem();o.p1.x!==e;)o=t.nextItem();var a,s,l,u,c=o.p1,h={x:r,y:c.y,i:-1},d=1/0,p=this.getIntersections_({p0:c,p1:h},n,!0);for(a=0,s=p.length;a<s;++a){var f=p[a],g=this.calculateIntersection_(c,h,f.p0,f.p1,!0),y=Math.abs(c.x-g[0]);y<d&&void 0!==ut(c.x,c.y,f.p0.x,f.p0.y,f.p1.x,f.p1.y)&&(d=y,u={x:g[0],y:g[1],i:-1},o=f)}if(d===1/0)return!1;if(l=o.p1,d>0){var v=this.getPointsInTriangle_(c,u,o.p1,n);if(v.length){var m=1/0;for(a=0,s=v.length;a<s;++a){var _=v[a],b=Math.atan2(c.y-_.y,h.x-_.x);(b<m||b===m&&_.x<l.x)&&(m=b,l=_)}}}for(o=i.firstItem();o.p1.x!==l.x||o.p1.y!==l.y;)o=i.nextItem();var S={x:c.x,y:c.y,i:c.i,reflex:void 0},O={x:o.p1.x,y:o.p1.y,i:o.p1.i,reflex:void 0};return t.getNextItem().p0=S,this.insertItem_(c,o.p1,t,n),this.insertItem_(O,S,t,n),o.p1=O,t.setFirstItem(),i.concat(t),!0},e.prototype.triangulate_=function(t,e){for(var i=!1,r=this.isSimple_(t,e);t.getLength()>3;)if(r){if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e,!0))break}else if(!this.clipEars_(t,e,r,i)&&!this.classifyPoints_(t,e,i)&&!this.resolveSelfIntersections_(t,e)){if(!(r=this.isSimple_(t,e))){this.splitPolygon_(t,e);break}i=!this.isClockwise_(t),this.classifyPoints_(t,e,i)}if(3===t.getLength()){var n=this.indices.length;this.indices[n++]=t.getPrevItem().p0.i,this.indices[n++]=t.getCurrItem().p0.i,this.indices[n++]=t.getNextItem().p0.i}},e.prototype.clipEars_=function(t,e,i,r){var n,o,a,s=this.indices.length,l=t.firstItem(),u=t.getPrevItem(),c=l,h=t.nextItem(),d=t.getNextItem(),p=!1;do{if(n=c.p0,o=c.p1,a=h.p1,!1===o.reflex){var f;f=i?0===this.getPointsInTriangle_(n,o,a,e,!0).length:r?this.diagonalIsInside_(d.p1,a,o,n,u.p0):this.diagonalIsInside_(u.p0,n,o,a,d.p1),(i||0===this.getIntersections_({p0:n,p1:a},e).length)&&f&&(i||!1===n.reflex||!1===a.reflex||Object(Tt.a)([u.p0.x,u.p0.y,n.x,n.y,o.x,o.y,a.x,a.y,d.p1.x,d.p1.y],0,10,2)===!r)&&(this.indices[s++]=n.i,this.indices[s++]=o.i,this.indices[s++]=a.i,this.removeItem_(c,h,t,e),h===l&&(l=d),p=!0)}u=t.getPrevItem(),c=t.getCurrItem(),h=t.nextItem(),d=t.getNextItem()}while(c!==l&&t.getLength()>3);return p},e.prototype.resolveSelfIntersections_=function(t,e,i){var r=t.firstItem();t.nextItem();var n=r,o=t.nextItem(),a=!1;do{var s=this.calculateIntersection_(n.p0,n.p1,o.p0,o.p1,i);if(s){var l=!1,u=this.vertices.length,c=this.indices.length,h=u/2,d=t.prevItem();t.removeItem(),e.remove(d),l=d===r;var p=void 0;if(i?(s[0]===n.p0.x&&s[1]===n.p0.y?(t.prevItem(),p=n.p0,o.p0=p,e.remove(n),l=l||n===r):(p=o.p1,n.p1=p,e.remove(o),l=l||o===r),t.removeItem()):(p=this.createPoint_(s[0],s[1],h),n.p1=p,o.p0=p,e.update([Math.min(n.p0.x,n.p1.x),Math.min(n.p0.y,n.p1.y),Math.max(n.p0.x,n.p1.x),Math.max(n.p0.y,n.p1.y)],n),e.update([Math.min(o.p0.x,o.p1.x),Math.min(o.p0.y,o.p1.y),Math.max(o.p0.x,o.p1.x),Math.max(o.p0.y,o.p1.y)],o)),this.indices[c++]=d.p0.i,this.indices[c++]=d.p1.i,this.indices[c++]=p.i,a=!0,l)break}n=t.getPrevItem(),o=t.nextItem()}while(n!==r);return a},e.prototype.isSimple_=function(t,e){var i=t.firstItem(),r=i;do{if(this.getIntersections_(r,e).length)return!1;r=t.nextItem()}while(r!==i);return!0},e.prototype.isClockwise_=function(t){var e=2*t.getLength(),i=new Array(e),r=t.firstItem(),n=r,o=0;do{i[o++]=n.p0.x,i[o++]=n.p0.y,n=t.nextItem()}while(n!==r);return Object(Tt.a)(i,0,e,2)},e.prototype.splitPolygon_=function(t,e){var i=t.firstItem(),r=i;do{var n=this.getIntersections_(r,e);if(n.length){var o=n[0],a=this.vertices.length/2,s=this.calculateIntersection_(r.p0,r.p1,o.p0,o.p1),l=this.createPoint_(s[0],s[1],a),u=new Ft,c=new kt.default;this.insertItem_(l,r.p1,u,c),r.p1=l,e.update([Math.min(r.p0.x,l.x),Math.min(r.p0.y,l.y),Math.max(r.p0.x,l.x),Math.max(r.p0.y,l.y)],r);for(var h=t.nextItem();h!==o;)this.insertItem_(h.p0,h.p1,u,c),e.remove(h),t.removeItem(),h=t.getCurrItem();this.insertItem_(o.p0,l,u,c),o.p0=l,e.update([Math.min(o.p1.x,l.x),Math.min(o.p1.y,l.y),Math.max(o.p1.x,l.x),Math.max(o.p1.y,l.y)],o),this.classifyPoints_(t,e,!1),this.triangulate_(t,e),this.classifyPoints_(u,c,!1),this.triangulate_(u,c);break}r=t.nextItem()}while(r!==i)},e.prototype.createPoint_=function(t,e,i){var r=this.vertices.length;return this.vertices[r++]=t,this.vertices[r++]=e,{x:t,y:e,i:i,reflex:void 0}},e.prototype.insertItem_=function(t,e,i,r){var n={p0:t,p1:e};return i.insertItem(n),r&&r.insert([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n},e.prototype.removeItem_=function(t,e,i,r){i.getCurrItem()===e&&(i.removeItem(),t.p1=e.p1,r.remove(e),r.update([Math.min(t.p0.x,t.p1.x),Math.min(t.p0.y,t.p1.y),Math.max(t.p0.x,t.p1.x),Math.max(t.p0.y,t.p1.y)],t))},e.prototype.getPointsInTriangle_=function(t,e,i,r,n){for(var o=[],a=r.getInExtent([Math.min(t.x,e.x,i.x),Math.min(t.y,e.y,i.y),Math.max(t.x,e.x,i.x),Math.max(t.y,e.y,i.y)]),s=0,l=a.length;s<l;++s)for(var u in a[s]){var c=a[s][u];"object"!=typeof c||n&&!c.reflex||c.x===t.x&&c.y===t.y||c.x===e.x&&c.y===e.y||c.x===i.x&&c.y===i.y||-1!==o.indexOf(c)||!Object(It.b)([t.x,t.y,e.x,e.y,i.x,i.y],0,6,2,c.x,c.y)||o.push(c)}return o},e.prototype.getIntersections_=function(t,e,i){for(var r=t.p0,n=t.p1,o=e.getInExtent([Math.min(r.x,n.x),Math.min(r.y,n.y),Math.max(r.x,n.x),Math.max(r.y,n.y)]),a=[],s=0,l=o.length;s<l;++s){var u=o[s];t!==u&&(i||u.p0!==n||u.p1!==r)&&this.calculateIntersection_(r,n,u.p0,u.p1,i)&&a.push(u)}return a},e.prototype.calculateIntersection_=function(t,e,i,r,n){var o=(r.y-i.y)*(e.x-t.x)-(r.x-i.x)*(e.y-t.y);if(0!==o){var a=((r.x-i.x)*(t.y-i.y)-(r.y-i.y)*(t.x-i.x))/o,s=((e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x))/o;if(!n&&a>lt&&a<1-lt&&s>lt&&s<1-lt||n&&a>=0&&a<=1&&s>=0&&s<=1)return[t.x+a*(e.x-t.x),t.y+a*(e.y-t.y)]}},e.prototype.diagonalIsInside_=function(t,e,i,r,n){if(void 0===e.reflex||void 0===r.reflex)return!1;var o=(i.x-r.x)*(e.y-r.y)>(i.y-r.y)*(e.x-r.x),a=(n.x-r.x)*(e.y-r.y)<(n.y-r.y)*(e.x-r.x),s=(t.x-e.x)*(r.y-e.y)>(t.y-e.y)*(r.x-e.x),l=(i.x-e.x)*(r.y-e.y)<(i.y-e.y)*(r.x-e.x),u=r.reflex?a||o:a&&o,c=e.reflex?l||s:l&&s;return u&&c},e.prototype.drawMultiPolygon=function(t,e){var i,r,n,o,a=t.getEndss(),s=t.getStride(),l=this.indices.length,u=this.lineStringReplay.getCurrentIndex(),c=t.getFlatCoordinates(),h=0;for(i=0,r=a.length;i<r;++i){var d=a[i];if(d.length>0){var p=Object(X.d)(c,h,d[0],s,-this.origin[0],-this.origin[1]);if(p.length){var f=[],g=void 0;for(n=1,o=d.length;n<o;++n)d[n]!==d[n-1]&&(g=Object(X.d)(c,d[n-1],d[n],s,-this.origin[0],-this.origin[1]),f.push(g));this.lineStringReplay.drawPolygonCoordinates(p,f,s),this.drawCoordinates_(p,f,s)}}h=d[d.length-1]}this.indices.length>l&&(this.startIndices.push(l),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(l),this.state_.changed=!1)),this.lineStringReplay.getCurrentIndex()>u&&this.lineStringReplay.setPolygonStyle(e,u)},e.prototype.drawPolygon=function(t,e){var i=t.getEnds(),r=t.getStride();if(i.length>0){var n=t.getFlatCoordinates().map(Number),o=Object(X.d)(n,0,i[0],r,-this.origin[0],-this.origin[1]);if(o.length){var a,s,l,u=[];for(a=1,s=i.length;a<s;++a)i[a]!==i[a-1]&&(l=Object(X.d)(n,i[a-1],i[a],r,-this.origin[0],-this.origin[1]),u.push(l));this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e),this.state_.changed&&(this.styleIndices_.push(this.indices.length),this.state_.changed=!1),this.lineStringReplay.setPolygonStyle(e),this.lineStringReplay.drawPolygonCoordinates(o,u,r),this.drawCoordinates_(o,u,r)}}},e.prototype.finish=function(t){this.verticesBuffer=new dt(this.vertices),this.indicesBuffer=new dt(this.indices),this.startIndices.push(this.indices.length),this.lineStringReplay.finish(t),0===this.styleIndices_.length&&this.styles_.length>0&&(this.styles_=[]),this.vertices=null,this.indices=null},e.prototype.getDeleteResourcesFunction=function(t){var e=this.verticesBuffer,i=this.indicesBuffer,r=this.lineStringReplay.getDeleteResourcesFunction(t);return function(){t.deleteBuffer(e),t.deleteBuffer(i),r()}},e.prototype.setUpProgram=function(t,e,i,r){var n,o=e.getProgram(Lt,wt);return this.defaultLocations_?n=this.defaultLocations_:(n=new function(t,e){this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"b"),this.u_offsetScaleMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetScaleMatrix":"c"),this.u_offsetRotateMatrix=t.getUniformLocation(e,q.DEBUG?"u_offsetRotateMatrix":"d"),this.u_color=t.getUniformLocation(e,q.DEBUG?"u_color":"e"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"f"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"a")}(t,o),this.defaultLocations_=n),e.useProgram(o),t.enableVertexAttribArray(n.a_position),t.vertexAttribPointer(n.a_position,2,q.FLOAT,!1,8,0),n},e.prototype.shutDownProgram=function(t,e){t.disableVertexAttribArray(e.a_position)},e.prototype.drawReplay=function(t,e,i,r){var n,o,a,s,l=t.getParameter(t.DEPTH_FUNC),u=t.getParameter(t.DEPTH_WRITEMASK);if(r||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),Object(w.isEmpty)(i))for(a=this.startIndices[this.startIndices.length-1],n=this.styleIndices_.length-1;n>=0;--n)o=this.styleIndices_[n],s=this.styles_[n],this.setFillStyle_(t,s),this.drawElements(t,e,o,a),a=o;else this.drawReplaySkipping_(t,e,i);r||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(u),t.depthFunc(l))},e.prototype.drawHitDetectionReplayOneByOne=function(t,e,i,r,n){var o,a,s,l,u,c,h;for(h=this.startIndices.length-2,s=this.startIndices[h+1],o=this.styleIndices_.length-1;o>=0;--o)for(l=this.styles_[o],this.setFillStyle_(t,l),u=this.styleIndices_[o];h>=0&&this.startIndices[h]>=u;){if(a=this.startIndices[h],c=this.startIndicesFeature[h],void 0===i[Object(D.getUid)(c)]&&c.getGeometry()&&(void 0===n||Object(N.intersects)(n,c.getGeometry().getExtent()))){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.drawElements(t,e,a,s);var d=r(c);if(d)return d}h--,s=a}},e.prototype.drawReplaySkipping_=function(t,e,i){var r,n,o,a,s,l,u,c;for(u=this.startIndices.length-2,o=n=this.startIndices[u+1],r=this.styleIndices_.length-1;r>=0;--r){for(a=this.styles_[r],this.setFillStyle_(t,a),s=this.styleIndices_[r];u>=0&&this.startIndices[u]>=s;)c=this.startIndices[u],l=this.startIndicesFeature[u],i[Object(D.getUid)(l)]&&(n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),o=c),u--,n=c;n!==o&&(this.drawElements(t,e,n,o),t.clear(t.DEPTH_BUFFER_BIT)),n=o=s}},e.prototype.setFillStyle_=function(t,e){t.uniform4fv(this.defaultLocations_.u_color,e)},e.prototype.setFillStrokeStyle=function(t,e){var i=t?t.getColor():[0,0,0,0];if(i=i instanceof CanvasGradient||i instanceof CanvasPattern?ot:Object(Y.asArray)(i).map(function(t,e){return 3!=e?t/255:t})||ot,this.state_.fillColor&&Object(Z.b)(i,this.state_.fillColor)||(this.state_.fillColor=i,this.state_.changed=!0,this.styles_.push(i)),e)this.lineStringReplay.setFillStrokeStyle(null,e);else{var r=new At.default({color:[0,0,0,0],width:0});this.lineStringReplay.setFillStrokeStyle(null,r)}},e}(nt),Dt=i(92),Gt=i(42),Bt=i(29),Ut=function(t,e){this.space_=e,this.emptyBlocks_=[{x:0,y:0,width:t,height:t}],this.entries_={},this.context_=Object(k.createCanvasContext2D)(t,t),this.canvas_=this.context_.canvas};Ut.prototype.get=function(t){return this.entries_[t]||null},Ut.prototype.add=function(t,e,i,r,n){for(var o=0,a=this.emptyBlocks_.length;o<a;++o){var s=this.emptyBlocks_[o];if(s.width>=e+this.space_&&s.height>=i+this.space_){var l={offsetX:s.x+this.space_,offsetY:s.y+this.space_,image:this.canvas_};return this.entries_[t]=l,r.call(n,this.context_,s.x+this.space_,s.y+this.space_),this.split_(o,s,e+this.space_,i+this.space_),l}}return null},Ut.prototype.split_=function(t,e,i,r){var n,o;e.width-i>e.height-r?(n={x:e.x+i,y:e.y,width:e.width-i,height:e.height},o={x:e.x,y:e.y+r,width:i,height:e.height-r},this.updateBlocks_(t,n,o)):(n={x:e.x+i,y:e.y,width:e.width-i,height:r},o={x:e.x,y:e.y+r,width:e.width,height:e.height-r},this.updateBlocks_(t,n,o))},Ut.prototype.updateBlocks_=function(t,e,i){var r=[t,1];e.width>0&&e.height>0&&r.push(e),i.width>0&&i.height>0&&r.push(i),this.emptyBlocks_.splice.apply(this.emptyBlocks_,r)};var Vt=Ut,Wt=function(t){var e=t||{};this.currentSize_=void 0!==e.initialSize?e.initialSize:256,this.maxSize_=void 0!==e.maxSize?e.maxSize:void 0!==q.MAX_TEXTURE_SIZE?q.MAX_TEXTURE_SIZE:2048,this.space_=void 0!==e.space?e.space:1,this.atlases_=[new Vt(this.currentSize_,this.space_)],this.currentHitSize_=this.currentSize_,this.hitAtlases_=[new Vt(this.currentHitSize_,this.space_)]};Wt.prototype.getInfo=function(t){var e=this.getInfo_(this.atlases_,t);if(!e)return null;var i=this.getInfo_(this.hitAtlases_,t);return this.mergeInfos_(e,i)},Wt.prototype.getInfo_=function(t,e){for(var i=0,r=t.length;i<r;++i){var n=t[i].get(e);if(n)return n}return null},Wt.prototype.mergeInfos_=function(t,e){return{offsetX:t.offsetX,offsetY:t.offsetY,image:t.image,hitImage:e.image}},Wt.prototype.add=function(t,e,i,r,n,o){if(e+this.space_>this.maxSize_||i+this.space_>this.maxSize_)return null;var a=this.add_(!1,t,e,i,r,o);if(!a)return null;var s=void 0!==n?n:Bt.c,l=this.add_(!0,t,e,i,s,o);return this.mergeInfos_(a,l)},Wt.prototype.add_=function(t,e,i,r,n,o){var a,s,l,u,c=t?this.hitAtlases_:this.atlases_;for(l=0,u=c.length;l<u;++l){if(s=(a=c[l]).add(e,i,r,n,o))return s;if(!s&&l===u-1){var h=void 0;t?(h=Math.min(2*this.currentHitSize_,this.maxSize_),this.currentHitSize_=h):(h=Math.min(2*this.currentSize_,this.maxSize_),this.currentSize_=h),a=new Vt(h,this.space_),c.push(a),++u}}return null};var Zt=Wt,zt=[1,1],Ht={Circle:pt,Image:Ct,LineString:Rt,Polygon:Nt,Text:function(t){function e(e,i){t.call(this,e,i),this.images_=[],this.textures_=[],this.measureCanvas_=Object(k.createCanvasContext2D)(0,0).canvas,this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.atlases_={},this.currAtlas_=void 0,this.scale=1,this.opacity=1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText=function(t,e){if(this.text_){var i=null,r=2,n=2;switch(t.getType()){case U.default.POINT:case U.default.MULTI_POINT:r=(i=t.getFlatCoordinates()).length,n=t.getStride();break;case U.default.CIRCLE:i=t.getCenter();break;case U.default.LINE_STRING:i=t.getFlatMidpoint();break;case U.default.MULTI_LINE_STRING:r=(i=t.getFlatMidpoints()).length;break;case U.default.POLYGON:i=t.getFlatInteriorPoint();break;case U.default.MULTI_POLYGON:r=(i=t.getFlatInteriorPoints()).length}this.startIndices.push(this.indices.length),this.startIndicesFeature.push(e);var o,a,s,l,u,c,h,d,p=this.currAtlas_,f=this.text_.split("\n"),g=this.getTextSize_(f),y=Math.round(g[0]*this.textAlign_-this.offsetX_),v=Math.round(g[1]*this.textBaseline_-this.offsetY_),m=this.state_.lineWidth/2*this.state_.scale;for(o=0,a=f.length;o<a;++o)for(u=0,c=p.height*o,s=0,l=(h=f[o].split("")).length;s<l;++s){if(d=p.atlas.getInfo(h[s])){var _=d.image;if(this.anchorX=y-u,this.anchorY=v-c,this.originX=0===s?d.offsetX-m:d.offsetX,this.originY=d.offsetY,this.height=p.height,this.width=0===s||s===h.length-1?p.width[h[s]]+m:p.width[h[s]],this.imageHeight=_.height,this.imageWidth=_.width,0===this.images_.length)this.images_.push(_);else{var b=this.images_[this.images_.length-1];Object(D.getUid)(b)!=Object(D.getUid)(_)&&(this.groupIndices.push(this.indices.length),this.images_.push(_))}this.drawText_(i,0,r,n)}u+=this.width}}},e.prototype.getTextSize_=function(t){var e=this,i=this.currAtlas_,r=t.length*i.height;return[t.map(function(t){for(var r=0,n=0,o=t.length;n<o;++n){var a=t[n];i.width[a]||e.addCharToAtlas_(a),r+=i.width[a]?i.width[a]:0}return r}).reduce(function(t,e){return Math.max(t,e)}),r]},e.prototype.drawText_=function(t,e,i,r){for(var n=e,o=i;n<o;n+=r)this.drawCoordinates(t,e,i,r)},e.prototype.addCharToAtlas_=function(t){if(1===t.length){var e=this.currAtlas_,i=this.state_,r=this.measureCanvas_.getContext("2d");r.font=i.font;var n=Math.ceil(r.measureText(t).width*i.scale);e.atlas.add(t,n,e.height,function(e,r,n){e.font=i.font,e.fillStyle=i.fillColor,e.strokeStyle=i.strokeColor,e.lineWidth=i.lineWidth,e.lineCap=i.lineCap,e.lineJoin=i.lineJoin,e.miterLimit=i.miterLimit,e.textAlign="left",e.textBaseline="top",Gt.CANVAS_LINE_DASH&&i.lineDash&&(e.setLineDash(i.lineDash),e.lineDashOffset=i.lineDashOffset),1!==i.scale&&e.setTransform(i.scale,0,0,i.scale,0,0),i.strokeColor&&e.strokeText(t,r,n),i.fillColor&&e.fillText(t,r,n)})&&(e.width[t]=n)}},e.prototype.finish=function(e){var i=e.getGL();this.groupIndices.push(this.indices.length),this.hitDetectionGroupIndices=this.groupIndices,this.verticesBuffer=new dt(this.vertices),this.indicesBuffer=new dt(this.indices),this.createTextures(this.textures_,this.images_,{},i),this.state_={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0},this.text_="",this.textAlign_=void 0,this.textBaseline_=void 0,this.offsetX_=void 0,this.offsetY_=void 0,this.images_=null,this.atlases_={},this.currAtlas_=void 0,t.prototype.finish.call(this,e)},e.prototype.setTextStyle=function(t){var e=this.state_,i=t.getFill(),r=t.getStroke();if(t&&t.getText()&&(i||r)){if(i){var n=i.getColor();e.fillColor=Object(Dt.asColorLike)(n||ot)}else e.fillColor=null;if(r){var o=r.getColor();e.strokeColor=Object(Dt.asColorLike)(o||st),e.lineWidth=r.getWidth()||1,e.lineCap=r.getLineCap()||"round",e.lineDashOffset=r.getLineDashOffset()||0,e.lineJoin=r.getLineJoin()||"round",e.miterLimit=r.getMiterLimit()||10;var a=r.getLineDash();e.lineDash=a?a.slice():at}else e.strokeColor=null,e.lineWidth=0;e.font=t.getFont()||"10px sans-serif",e.scale=t.getScale()||1,this.text_=t.getText();var s=z.b[t.getTextAlign()],l=z.b[t.getTextBaseline()];this.textAlign_=void 0===s?.5:s,this.textBaseline_=void 0===l?.5:l,this.offsetX_=t.getOffsetX()||0,this.offsetY_=t.getOffsetY()||0,this.rotateWithView=!!t.getRotateWithView(),this.rotation=t.getRotation()||0,this.currAtlas_=this.getAtlas_(e)}else this.text_=""},e.prototype.getAtlas_=function(t){var e=[];for(var i in t)(t[i]||0===t[i])&&(Array.isArray(t[i])?e=e.concat(t[i]):e.push(t[i]));var r=this.calculateHash_(e);if(!this.atlases_[r]){var n=this.measureCanvas_.getContext("2d");n.font=t.font;var o=Math.ceil((1.5*n.measureText("M").width+t.lineWidth/2)*t.scale);this.atlases_[r]={atlas:new Zt({space:t.lineWidth+1}),width:{},height:o}}return this.atlases_[r]},e.prototype.calculateHash_=function(t){for(var e="",i=0,r=t.length;i<r;++i)e+=t[i];return e},e.prototype.getTextures=function(t){return this.textures_},e.prototype.getHitDetectionTextures=function(){return this.textures_},e}(Ot)},Yt=function(t){function e(e,i,r){t.call(this),this.maxExtent_=i,this.tolerance_=e,this.renderBuffer_=r,this.replaysByZIndex_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addDeclutter=function(t){return[]},e.prototype.getDeleteResourcesFunction=function(t){var e,i=[];for(e in this.replaysByZIndex_){var r=this.replaysByZIndex_[e];for(var n in r)i.push(r[n].getDeleteResourcesFunction(t))}return function(){for(var t,e=arguments,r=i.length,n=0;n<r;n++)t=i[n].apply(this,e);return t}},e.prototype.finish=function(t){var e;for(e in this.replaysByZIndex_){var i=this.replaysByZIndex_[e];for(var r in i)i[r].finish(t)}},e.prototype.getReplay=function(t,e){var i=void 0!==t?t.toString():"0",r=this.replaysByZIndex_[i];void 0===r&&(r={},this.replaysByZIndex_[i]=r);var n=r[e];return void 0===n&&(n=new(0,Ht[e])(this.tolerance_,this.maxExtent_),r[e]=n),n},e.prototype.isEmpty=function(){return Object(w.isEmpty)(this.replaysByZIndex_)},e.prototype.replay=function(t,e,i,r,n,o,a,s){var l,u,c,h,d,p,f=Object.keys(this.replaysByZIndex_).map(Number);for(f.sort(Z.i),l=0,u=f.length;l<u;++l)for(d=this.replaysByZIndex_[f[l].toString()],c=0,h=z.a.length;c<h;++c)void 0!==(p=d[z.a[c]])&&p.replay(t,e,i,r,n,o,a,s,void 0,!1)},e.prototype.replayHitDetection_=function(t,e,i,r,n,o,a,s,l,u,c){var h,d,p,f,g,y,v=Object.keys(this.replaysByZIndex_).map(Number);for(v.sort(function(t,e){return e-t}),h=0,d=v.length;h<d;++h)for(f=this.replaysByZIndex_[v[h].toString()],p=z.a.length-1;p>=0;--p)if(void 0!==(g=f[z.a[p]])&&(y=g.replay(t,e,i,r,n,o,a,s,l,u,c)))return y},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,a,s,l,u){var c,h=e.getGL();return h.bindFramebuffer(h.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.renderBuffer_&&(c=Object(N.buffer)(Object(N.createOrUpdateFromCoordinate)(t),r*this.renderBuffer_)),this.replayHitDetection_(e,t,r,n,zt,a,s,l,function(t){var e=new Uint8Array(4);if(h.readPixels(0,0,1,1,h.RGBA,h.UNSIGNED_BYTE,e),e[3]>0){var i=u(t);if(i)return i}},!0,c)},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n,o,a,s,l){var u=e.getGL();return u.bindFramebuffer(u.FRAMEBUFFER,e.getHitDetectionFramebuffer()),void 0!==this.replayHitDetection_(e,t,r,n,zt,a,s,l,function(t){var e=new Uint8Array(4);return u.readPixels(0,0,1,1,u.RGBA,u.UNSIGNED_BYTE,e),e[3]>0},!1)},e}(H.a),Xt=function(t){function e(e,i,r,n,o,a,s){t.call(this),this.context_=e,this.center_=i,this.extent_=a,this.pixelRatio_=s,this.size_=o,this.rotation_=n,this.resolution_=r,this.imageStyle_=null,this.fillStyle_=null,this.strokeStyle_=null,this.textStyle_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.drawText_=function(t,e){var i=this.context_,r=t.getReplay(0,V.a.TEXT);r.setTextStyle(this.textStyle_),r.drawText(e,null),r.finish(i),r.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),r.getDeleteResourcesFunction(i)()},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.drawGeometry=function(t){switch(t.getType()){case U.default.POINT:this.drawPoint(t,null);break;case U.default.LINE_STRING:this.drawLineString(t,null);break;case U.default.POLYGON:this.drawPolygon(t,null);break;case U.default.MULTI_POINT:this.drawMultiPoint(t,null);break;case U.default.MULTI_LINE_STRING:this.drawMultiLineString(t,null);break;case U.default.MULTI_POLYGON:this.drawMultiPolygon(t,null);break;case U.default.GEOMETRY_COLLECTION:this.drawGeometryCollection(t,null);break;case U.default.CIRCLE:this.drawCircle(t,null)}},e.prototype.drawFeature=function(t,e){var i=e.getGeometryFunction()(t);i&&Object(N.intersects)(this.extent_,i.getExtent())&&(this.setStyle(e),this.drawGeometry(i))},e.prototype.drawGeometryCollection=function(t,e){var i,r,n=t.getGeometriesArray();for(i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])},e.prototype.drawPoint=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.IMAGE);n.setImageStyle(this.imageStyle_),n.drawPoint(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiPoint=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.IMAGE);n.setImageStyle(this.imageStyle_),n.drawMultiPoint(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawLineString=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawLineString(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiLineString=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.LINE_STRING);n.setFillStrokeStyle(null,this.strokeStyle_),n.drawMultiLineString(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawPolygon=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawPolygon(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawMultiPolygon=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.POLYGON);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawMultiPolygon(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.drawCircle=function(t,e){var i=this.context_,r=new Yt(1,this.extent_),n=r.getReplay(0,V.a.CIRCLE);n.setFillStrokeStyle(this.fillStyle_,this.strokeStyle_),n.drawCircle(t,e),n.finish(i),n.replay(this.context_,this.center_,this.resolution_,this.rotation_,this.size_,this.pixelRatio_,1,{},void 0,!1),n.getDeleteResourcesFunction(i)(),this.textStyle_&&this.drawText_(r,t)},e.prototype.setImageStyle=function(t){this.imageStyle_=t},e.prototype.setFillStrokeStyle=function(t,e){this.fillStyle_=t,this.strokeStyle_=e},e.prototype.setTextStyle=function(t){this.textStyle_=t},e}(W.default),qt=i(262),Kt=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n":"precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"),Jt=new $(q.DEBUG?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"),Qt=function(t){function e(e,i){t.call(this,i),this.mapRenderer=e,this.arrayBuffer_=new dt([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0,this.texCoordMatrix=Object(it.c)(),this.projectionMatrix=Object(it.c)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.defaultLocations_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindFramebuffer=function(t,e){var i=this.mapRenderer.getGL();if(void 0===this.framebufferDimension||this.framebufferDimension!=e){var r=function(t,e,i){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(i))}.bind(null,i,this.framebuffer,this.texture);t.postRenderFunctions.push(r);var n=_t(i,e,e),o=i.createFramebuffer();i.bindFramebuffer(q.FRAMEBUFFER,o),i.framebufferTexture2D(q.FRAMEBUFFER,q.COLOR_ATTACHMENT0,q.TEXTURE_2D,n,0),this.texture=n,this.framebuffer=o,this.framebufferDimension=e}else i.bindFramebuffer(q.FRAMEBUFFER,this.framebuffer)},e.prototype.composeFrame=function(t,e,i){this.dispatchComposeEvent_(B.a.PRECOMPOSE,i,t),i.bindBuffer(q.ARRAY_BUFFER,this.arrayBuffer_);var r,n=i.getGL(),o=i.getProgram(Kt,Jt);this.defaultLocations_?r=this.defaultLocations_:(r=new function(t,e){this.u_texCoordMatrix=t.getUniformLocation(e,q.DEBUG?"u_texCoordMatrix":"d"),this.u_projectionMatrix=t.getUniformLocation(e,q.DEBUG?"u_projectionMatrix":"e"),this.u_opacity=t.getUniformLocation(e,q.DEBUG?"u_opacity":"f"),this.u_texture=t.getUniformLocation(e,q.DEBUG?"u_texture":"g"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,q.DEBUG?"a_texCoord":"c")}(n,o),this.defaultLocations_=r),i.useProgram(o)&&(n.enableVertexAttribArray(r.a_position),n.vertexAttribPointer(r.a_position,2,q.FLOAT,!1,16,0),n.enableVertexAttribArray(r.a_texCoord),n.vertexAttribPointer(r.a_texCoord,2,q.FLOAT,!1,16,8),n.uniform1i(r.u_texture,0)),n.uniformMatrix4fv(r.u_texCoordMatrix,!1,rt(this.tmpMat4_,this.getTexCoordMatrix())),n.uniformMatrix4fv(r.u_projectionMatrix,!1,rt(this.tmpMat4_,this.getProjectionMatrix())),n.uniform1f(r.u_opacity,e.opacity),n.bindTexture(q.TEXTURE_2D,this.getTexture()),n.drawArrays(q.TRIANGLE_STRIP,0,4),this.dispatchComposeEvent_(B.a.POSTCOMPOSE,i,t)},e.prototype.dispatchComposeEvent_=function(t,e,i){var r=this.getLayer();if(r.hasListener(t)){var n=i.viewState,o=n.resolution,a=i.pixelRatio,s=i.extent,l=n.center,u=n.rotation,c=i.size,h=new Xt(e,l,o,u,c,s,a),d=new G.a(t,h,i,null,e);r.dispatchEvent(d)}},e.prototype.getTexCoordMatrix=function(){return this.texCoordMatrix},e.prototype.getTexture=function(){return this.texture},e.prototype.getProjectionMatrix=function(){return this.projectionMatrix},e.prototype.handleWebGLContextLost=function(){this.texture=null,this.framebuffer=null,this.framebufferDimension=void 0},e.prototype.prepareFrame=function(t,e,i){return Object(D.abstract)()},e.prototype.forEachLayerAtPixel=function(t,e,i,r){return Object(D.abstract)()},e}(qt.a),$t=function(t){function e(e,i){t.call(this,e,i),this.image_=null,this.hitCanvasContext_=null,this.hitTransformationMatrix_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTexture_=function(t){var e=t.getImage();return bt(this.mapRenderer.getGL(),e,q.CLAMP_TO_EDGE,q.CLAMP_TO_EDGE)},e.prototype.prepareFrame=function(t,e,i){var r=this.mapRenderer.getGL(),n=t.pixelRatio,o=t.viewState,a=o.center,s=o.resolution,l=o.rotation,u=this.image_,c=this.texture,h=this.getLayer().getSource(),d=t.viewHints,p=t.extent;if(void 0!==e.extent&&(p=Object(N.getIntersection)(p,e.extent)),!d[F.default.ANIMATING]&&!d[F.default.INTERACTING]&&!Object(N.isEmpty)(p)){var f=o.projection;if(!A.a){var g=h.getProjection();g&&(f=g)}var y=h.getImage(p,s,n,f);if(y&&this.loadImage(y)&&(u=y,c=this.createTexture_(y),this.texture)){var v=function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,r,this.texture);t.postRenderFunctions.push(v)}}if(u){var m=this.mapRenderer.getContext().getCanvas();this.updateProjectionMatrix_(m.width,m.height,n,a,s,l,u.getExtent()),this.hitTransformationMatrix_=null;var _=this.texCoordMatrix;Object(it.f)(_),Object(it.h)(_,1,-1),Object(it.j)(_,0,-1),this.image_=u,this.texture=c}return!!u},e.prototype.updateProjectionMatrix_=function(t,e,i,r,n,o,a){var s=t*n,l=e*n,u=this.projectionMatrix;Object(it.f)(u),Object(it.h)(u,2*i/s,2*i/l),Object(it.g)(u,-o),Object(it.j)(u,a[0]-r[0],a[1]-r[1]),Object(it.h)(u,(a[2]-a[0])/2,(a[3]-a[1])/2),Object(it.j)(u,1,1)},e.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.image_&&this.image_.getImage()){var n=[this.image_.getImage().width,this.image_.getImage().height];this.hitTransformationMatrix_||(this.hitTransformationMatrix_=this.getHitTransformationMatrix_(e.size,n));var o=Object(it.a)(this.hitTransformationMatrix_,t.slice());if(!(o[0]<0||o[0]>n[0]||o[1]<0||o[1]>n[1])){this.hitCanvasContext_||(this.hitCanvasContext_=Object(k.createCanvasContext2D)(1,1)),this.hitCanvasContext_.clearRect(0,0,1,1),this.hitCanvasContext_.drawImage(this.image_.getImage(),o[0],o[1],1,1,0,0,1,1);var a=this.hitCanvasContext_.getImageData(0,0,1,1).data;return a[3]>0?i.call(r,this.getLayer(),a):void 0}}},e.prototype.getHitTransformationMatrix_=function(t,e){var i=Object(it.c)();Object(it.j)(i,-1,-1),Object(it.h)(i,2/t[0],2/t[1]),Object(it.j)(i,0,t[1]),Object(it.h)(i,1,-1);var r=Object(it.d)(this.projectionMatrix.slice()),n=Object(it.c)();return Object(it.j)(n,0,e[1]),Object(it.h)(n,1,-1),Object(it.h)(n,e[0]/2,e[1]/2),Object(it.j)(n,1,1),Object(it.e)(n,r),Object(it.e)(n,i),n},e}(Qt);$t.handles=function(t){return t.getType()===M.a.IMAGE},$t.create=function(t,e){return new $t(t,e)};var te=$t,ee=i(37),ie=i(83),re=i(68),ne=i(43),oe=i(173),ae=i(69),se=function(t){function e(e){t.call(this,e);var i=e.getViewport();this.canvas_=document.createElement("canvas"),this.canvas_.style.width="100%",this.canvas_.style.height="100%",this.canvas_.style.display="block",this.canvas_.className=ee.e,i.insertBefore(this.canvas_,i.childNodes[0]||null),this.clipTileCanvasWidth_=0,this.clipTileCanvasHeight_=0,this.clipTileContext_=Object(k.createCanvasContext2D)(),this.renderedVisible_=!0,this.gl_=Object(q.getContext)(this.canvas_,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.context_=new St(this.canvas_,this.gl_),Object(yt.listen)(this.canvas_,vt.LOST,this.handleWebGLContextLost,this),Object(yt.listen)(this.canvas_,vt.RESTORED,this.handleWebGLContextRestored,this),this.textureCache_=new oe.default,this.focus_=null,this.tileTextureQueue_=new ae.b(function(t){var e=t[1],i=t[2],r=e[0]-this.focus_[0],n=e[1]-this.focus_[1];return 65536*Math.log(i)+Math.sqrt(r*r+n*n)/i}.bind(this),function(t){return t[0].getKey()}),this.loadNextTileTexture_=function(t,e){if(!this.tileTextureQueue_.isEmpty()){this.tileTextureQueue_.reprioritize();var i=this.tileTextureQueue_.dequeue(),r=i[0],n=i[3],o=i[4];this.bindTileTexture(r,n,o,q.LINEAR,q.LINEAR)}return!1}.bind(this),this.textureCacheFrameMarkerCount_=0,this.initializeGL_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bindTileTexture=function(t,e,i,r,n){var o=this.getGL(),a=t.getKey();if(this.textureCache_.containsKey(a)){var s=this.textureCache_.get(a);o.bindTexture(q.TEXTURE_2D,s.texture),s.magFilter!=r&&(o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,r),s.magFilter=r),s.minFilter!=n&&(o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,n),s.minFilter=n)}else{var l=o.createTexture(),u=t;if(o.bindTexture(q.TEXTURE_2D,l),i>0){var c=this.clipTileContext_.canvas,h=this.clipTileContext_;this.clipTileCanvasWidth_!==e[0]||this.clipTileCanvasHeight_!==e[1]?(c.width=e[0],c.height=e[1],this.clipTileCanvasWidth_=e[0],this.clipTileCanvasHeight_=e[1]):h.clearRect(0,0,e[0],e[1]),h.drawImage(u.getImage(),i,i,e[0],e[1],0,0,e[0],e[1]),o.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,c)}else o.texImage2D(q.TEXTURE_2D,0,q.RGBA,q.RGBA,q.UNSIGNED_BYTE,u.getImage());o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MAG_FILTER,r),o.texParameteri(q.TEXTURE_2D,q.TEXTURE_MIN_FILTER,n),o.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_S,q.CLAMP_TO_EDGE),o.texParameteri(q.TEXTURE_2D,q.TEXTURE_WRAP_T,q.CLAMP_TO_EDGE),this.textureCache_.set(a,{texture:l,magFilter:r,minFilter:n})}},e.prototype.dispatchRenderEvent=function(t,e){var i=this.getMap();if(i.hasListener(t)){var r=this.context_,n=e.extent,o=e.size,a=e.viewState,s=e.pixelRatio,l=a.resolution,u=a.center,c=a.rotation,h=new Xt(r,u,l,c,o,n,s),d=new G.a(t,h,e,null,r);i.dispatchEvent(d)}},e.prototype.disposeInternal=function(){var e=this.getGL();e.isContextLost()||this.textureCache_.forEach(function(t){t&&e.deleteTexture(t.texture)}),this.context_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.expireCache_=function(t,e){for(var i,r=this.getGL();this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024;){if(i=this.textureCache_.peekLast())r.deleteTexture(i.texture);else{if(+this.textureCache_.peekLastKey()==e.index)break;--this.textureCacheFrameMarkerCount_}this.textureCache_.pop()}},e.prototype.getContext=function(){return this.context_},e.prototype.getGL=function(){return this.gl_},e.prototype.getTileTextureQueue=function(){return this.tileTextureQueue_},e.prototype.handleWebGLContextLost=function(t){t.preventDefault(),this.textureCache_.clear(),this.textureCacheFrameMarkerCount_=0;var e=this.getLayerRenderers();for(var i in e)e[i].handleWebGLContextLost()},e.prototype.handleWebGLContextRestored=function(){this.initializeGL_(),this.getMap().render()},e.prototype.initializeGL_=function(){var t=this.gl_;t.activeTexture(q.TEXTURE0),t.blendFuncSeparate(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA,q.ONE,q.ONE_MINUS_SRC_ALPHA),t.disable(q.CULL_FACE),t.disable(q.DEPTH_TEST),t.disable(q.SCISSOR_TEST),t.disable(q.STENCIL_TEST)},e.prototype.isTileTextureLoaded=function(t){return this.textureCache_.containsKey(t.getKey())},e.prototype.renderFrame=function(t){var e=this.getContext(),i=this.getGL();if(i.isContextLost())return!1;if(!t)return this.renderedVisible_&&(this.canvas_.style.display="none",this.renderedVisible_=!1),!1;this.focus_=t.focus,this.textureCache_.set((-t.index).toString(),null),++this.textureCacheFrameMarkerCount_,this.dispatchRenderEvent(B.a.PRECOMPOSE,t);var r=[],n=t.layerStatesArray;Object(Z.l)(n,re.sortByZIndex);var o,a,s=t.viewState.resolution;for(o=0,a=n.length;o<a;++o){var l=n[o];Object(ie.visibleAtResolution)(l,s)&&l.sourceState==ne.a.READY&&this.getLayerRenderer(l.layer).prepareFrame(t,l,e)&&r.push(l)}var u=t.size[0]*t.pixelRatio,c=t.size[1]*t.pixelRatio;for(this.canvas_.width==u&&this.canvas_.height==c||(this.canvas_.width=u,this.canvas_.height=c),i.bindFramebuffer(q.FRAMEBUFFER,null),i.clearColor(0,0,0,0),i.clear(q.COLOR_BUFFER_BIT),i.enable(q.BLEND),i.viewport(0,0,this.canvas_.width,this.canvas_.height),o=0,a=r.length;o<a;++o){var h=r[o];this.getLayerRenderer(h.layer).composeFrame(t,h,e)}this.renderedVisible_||(this.canvas_.style.display="",this.renderedVisible_=!0),this.calculateMatrices2D(t),this.textureCache_.getCount()-this.textureCacheFrameMarkerCount_>1024&&t.postRenderFunctions.push(this.expireCache_.bind(this)),this.tileTextureQueue_.isEmpty()||(t.postRenderFunctions.push(this.loadNextTileTexture_),t.animate=!0),this.dispatchRenderEvent(B.a.POSTCOMPOSE,t),this.scheduleRemoveUnusedLayerRenderers(t),this.scheduleExpireIconCache(t)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n,o,a){var s;if(this.getGL().isContextLost())return!1;var l,u=e.viewState,c=e.layerStatesArray;for(l=c.length-1;l>=0;--l){var h=c[l],d=h.layer;if(Object(ie.visibleAtResolution)(h,u.resolution)&&o.call(a,d)&&(s=this.getLayerRenderer(d).forEachFeatureAtCoordinate(t,e,i,r)))return s}},e.prototype.hasFeatureAtCoordinate=function(t,e,i,r,n){var o=!1;if(this.getGL().isContextLost())return!1;var a,s=e.viewState,l=e.layerStatesArray;for(a=l.length-1;a>=0;--a){var u=l[a],c=u.layer;if(Object(ie.visibleAtResolution)(u,s.resolution)&&r.call(n,c)&&(o=this.getLayerRenderer(c).hasFeatureAtCoordinate(t,e)))return!0}return o},e.prototype.forEachLayerAtPixel=function(t,e,i,r,n,o,a){if(this.getGL().isContextLost())return!1;var s,l,u=e.viewState,c=e.layerStatesArray;for(l=c.length-1;l>=0;--l){var h=c[l],d=h.layer;if(Object(ie.visibleAtResolution)(h,u.resolution)&&o.call(n,d)&&(s=this.getLayerRenderer(d).forEachLayerAtPixel(t,e,r,n)))return s}},e}(re.default),le=i(16),ue=i(128),ce=i(19),he=new Q(q.DEBUG?"precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n":"precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"),de=new $(q.DEBUG?"varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n":"varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"),pe=i(45),fe=function(t){function e(e,i){t.call(this,e,i),this.fragmentShader_=he,this.vertexShader_=de,this.locations_=null,this.renderArrayBuffer_=new dt([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,this.tmpSize_=[0,0]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.mapRenderer.getContext().deleteBuffer(this.renderArrayBuffer_),t.prototype.disposeInternal.call(this)},e.prototype.createLoadedTileFinder=function(t,e,i){var r=this.mapRenderer;return function(n,o){return t.forEachLoadedTile(e,n,o,function(t){var e=r.isTileTextureLoaded(t);return e&&(i[n]||(i[n]={}),i[n][t.tileCoord.toString()]=t),e})}},e.prototype.handleWebGLContextLost=function(){t.prototype.handleWebGLContextLost.call(this),this.locations_=null},e.prototype.prepareFrame=function(t,e,i){var r=this.mapRenderer,n=i.getGL(),o=t.viewState,a=o.projection,s=this.getLayer(),l=s.getSource();if(!(l instanceof ue.default))return!0;var u,c=l.getTileGridForProjection(a),h=c.getZForResolution(o.resolution),p=c.getResolution(h),f=l.getTilePixelSize(h,t.pixelRatio,a),g=f[0]/Object(pe.toSize)(c.getTileSize(h),this.tmpSize_)[0],y=p/g,v=l.getTilePixelRatio(g)*l.getGutterForProjection(a),m=o.center,_=t.extent,b=c.getTileRangeForExtentAndZ(_,h);if(this.renderedTileRange_&&this.renderedTileRange_.equals(b)&&this.renderedRevision_==l.getRevision())u=this.renderedFramebufferExtent_;else{var S=b.getSize(),O=Math.max(S[0]*f[0],S[1]*f[1]),C=Object(ce.e)(O),T=y*C,x=c.getOrigin(h),P=x[0]+b.minX*f[0]*y,j=x[1]+b.minY*f[1]*y;u=[P,j,P+T,j+T],this.bindFramebuffer(t,C),n.viewport(0,0,C,C),n.clearColor(0,0,0,0),n.clear(q.COLOR_BUFFER_BIT),n.disable(q.BLEND);var R=i.getProgram(this.fragmentShader_,this.vertexShader_);i.useProgram(R),this.locations_||(this.locations_=new function(t,e){this.u_tileOffset=t.getUniformLocation(e,q.DEBUG?"u_tileOffset":"d"),this.u_texture=t.getUniformLocation(e,q.DEBUG?"u_texture":"e"),this.a_position=t.getAttribLocation(e,q.DEBUG?"a_position":"b"),this.a_texCoord=t.getAttribLocation(e,q.DEBUG?"a_texCoord":"c")}(n,R)),i.bindBuffer(q.ARRAY_BUFFER,this.renderArrayBuffer_),n.enableVertexAttribArray(this.locations_.a_position),n.vertexAttribPointer(this.locations_.a_position,2,q.FLOAT,!1,16,0),n.enableVertexAttribArray(this.locations_.a_texCoord),n.vertexAttribPointer(this.locations_.a_texCoord,2,q.FLOAT,!1,16,8),n.uniform1i(this.locations_.u_texture,0);var I={};I[h]={};var L,w,A,M,F,k,D=this.createLoadedTileFinder(l,a,I),G=s.getUseInterimTilesOnError(),B=!0,U=Object(N.createEmpty)(),V=new E.b(0,0,0,0);for(M=b.minX;M<=b.maxX;++M)for(F=b.minY;F<=b.maxY;++F)if(w=l.getTile(h,M,F,g,a),void 0===e.extent||(k=c.getTileCoordExtent(w.tileCoord,U),Object(N.intersects)(k,e.extent))){if((A=w.getState())==le.default.LOADED||A==le.default.EMPTY||A==le.default.ERROR&&!G||(w=w.getInterimTile()),(A=w.getState())==le.default.LOADED){if(r.isTileTextureLoaded(w)){I[h][w.tileCoord.toString()]=w;continue}}else if(A==le.default.EMPTY||A==le.default.ERROR&&!G)continue;B=!1,c.forEachTileCoordParentTileRange(w.tileCoord,D,null,V,U)||(L=c.getTileCoordChildTileRange(w.tileCoord,V,U))&&D(h+1,L)}var W=Object.keys(I).map(Number);W.sort(Z.i);for(var z=new Float32Array(4),H=0,Y=W.length;H<Y;++H){var X=I[W[H]];for(var K in X)(w=X[K])instanceof d.default&&(k=c.getTileCoordExtent(w.tileCoord,U),z[0]=2*(k[2]-k[0])/T,z[1]=2*(k[3]-k[1])/T,z[2]=2*(k[0]-u[0])/T-1,z[3]=2*(k[1]-u[1])/T-1,n.uniform4fv(this.locations_.u_tileOffset,z),r.bindTileTexture(w,f,v*g,q.LINEAR,q.LINEAR),n.drawArrays(q.TRIANGLE_STRIP,0,4))}B?(this.renderedTileRange_=b,this.renderedFramebufferExtent_=u,this.renderedRevision_=l.getRevision()):(this.renderedTileRange_=null,this.renderedFramebufferExtent_=null,this.renderedRevision_=-1,t.animate=!0)}this.updateUsedTiles(t.usedTiles,l,h,b);var J=r.getTileTextureQueue();this.manageTilePyramid(t,l,c,g,a,_,h,s.getPreload(),function(t){t.getState()!=le.default.LOADED||r.isTileTextureLoaded(t)||J.isKeyQueued(t.getKey())||J.enqueue([t,c.getTileCoordCenter(t.tileCoord),c.getResolution(t.tileCoord[0]),f,v*g])},this),this.scheduleExpireCache(t,l);var Q=this.texCoordMatrix;return Object(it.f)(Q),Object(it.j)(Q,(Math.round(m[0]/p)*p-u[0])/(u[2]-u[0]),(Math.round(m[1]/p)*p-u[1])/(u[3]-u[1])),0!==o.rotation&&Object(it.g)(Q,o.rotation),Object(it.h)(Q,t.size[0]*o.resolution/(u[2]-u[0]),t.size[1]*o.resolution/(u[3]-u[1])),Object(it.j)(Q,-.5,-.5),!0},e.prototype.forEachLayerAtPixel=function(t,e,i,r){if(this.framebuffer){var n=[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]],o=Object(it.a)(this.texCoordMatrix,n.slice()),a=[o[0]*this.framebufferDimension,o[1]*this.framebufferDimension],s=this.mapRenderer.getContext().getGL();s.bindFramebuffer(s.FRAMEBUFFER,this.framebuffer);var l=new Uint8Array(4);return s.readPixels(a[0],a[1],1,1,s.RGBA,s.UNSIGNED_BYTE,l),l[3]>0?i.call(r,this.getLayer(),l):void 0}},e}(Qt);fe.handles=function(t){return t.getType()===M.a.TILE},fe.create=function(t,e){return new fe(t,e)};var ge=fe,ye=i(60),ve=function(t){function e(e,i){t.call(this,e,i),this.dirty_=!1,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Object(N.createEmpty)(),this.renderedRenderOrder_=null,this.replayGroup_=null,this.layerState_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.composeFrame=function(t,e,i){this.layerState_=e;var r=t.viewState,n=this.replayGroup_,o=t.size,a=t.pixelRatio,s=this.mapRenderer.getGL();n&&!n.isEmpty()&&(s.enable(s.SCISSOR_TEST),s.scissor(0,0,o[0]*a,o[1]*a),n.replay(i,r.center,r.resolution,r.rotation,o,a,e.opacity,e.managed?t.skippedFeatureUids:{}),s.disable(s.SCISSOR_TEST))},e.prototype.disposeInternal=function(){var e=this.replayGroup_;if(e){var i=this.mapRenderer.getContext();e.getDeleteResourcesFunction(i)(),this.replayGroup_=null}t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,i,r,n){if(this.replayGroup_&&this.layerState_){var o=this.mapRenderer.getContext(),a=e.viewState,s=this.getLayer(),l=this.layerState_,u={};return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a.center,a.resolution,a.rotation,e.size,e.pixelRatio,l.opacity,{},function(t){var e=Object(D.getUid)(t);if(!(e in u))return u[e]=!0,r.call(n,t,s)})}},e.prototype.hasFeatureAtCoordinate=function(t,e){if(this.replayGroup_&&this.layerState_){var i=this.mapRenderer.getContext(),r=e.viewState,n=this.layerState_;return this.replayGroup_.hasFeatureAtCoordinate(t,i,r.center,r.resolution,r.rotation,e.size,e.pixelRatio,n.opacity,e.skippedFeatureUids)}return!1},e.prototype.forEachLayerAtPixel=function(t,e,i,r){var n=Object(it.a)(e.pixelToCoordinateTransform,t.slice());return this.hasFeatureAtCoordinate(n,e)?i.call(r,this.getLayer(),null):void 0},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t,e,i){var r=this.getLayer(),n=r.getSource(),o=t.viewHints[F.default.ANIMATING],a=t.viewHints[F.default.INTERACTING],s=r.getUpdateWhileAnimating(),l=r.getUpdateWhileInteracting();if(!this.dirty_&&!s&&o||!l&&a)return!0;var u=t.extent,c=t.viewState,h=c.projection,d=c.resolution,p=t.pixelRatio,f=r.getRevision(),g=r.getRenderBuffer(),y=r.getRenderOrder();void 0===y&&(y=ye.a);var v=Object(N.buffer)(u,g*d);if(!this.dirty_&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==y&&Object(N.containsExtent)(this.renderedExtent_,v))return!0;this.replayGroup_&&t.postRenderFunctions.push(this.replayGroup_.getDeleteResourcesFunction(i)),this.dirty_=!1;var m=new Yt(Object(ye.c)(d,p),v,r.getRenderBuffer());n.loadFeatures(v,d,h);var _=function(t){var e,i=t.getStyleFunction()||r.getStyleFunction();if(i&&(e=i(t,d)),e){var n=this.renderFeature(t,d,p,e,m);this.dirty_=this.dirty_||n}}.bind(this);if(y){var b=[];n.forEachFeatureInExtent(v,function(t){b.push(t)}),b.sort(y),b.forEach(_.bind(this))}else n.forEachFeatureInExtent(v,_);return m.finish(i),this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=y,this.renderedExtent_=v,this.replayGroup_=m,!0},e.prototype.renderFeature=function(t,e,i,r,n){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=r.length-1;a>=0;--a)o=Object(ye.d)(n,t,r[a],Object(ye.b)(e,i),this.handleStyleImageChange_,this)||o;else o=Object(ye.d)(n,t,r,Object(ye.b)(e,i),this.handleStyleImageChange_,this)||o;return o},e}(Qt);ve.handles=function(t){return t.getType()===M.a.VECTOR},ve.create=function(t,e){return new ve(t,e)};var me=ve,_e=function(t){function e(e){(e=Object(w.assign)({},e)).controls||(e.controls=Object(I.a)()),e.interactions||(e.interactions=Object(L.defaults)()),t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRenderer=function(){var t=new se(this);return t.registerLayerRenderers([te,ge,me]),t},e}(O.default);i.d(e,"AssertionError",function(){return r.a}),i.d(e,"Collection",function(){return n.default}),i.d(e,"Disposable",function(){return o.a}),i.d(e,"Feature",function(){return a.default}),i.d(e,"Geolocation",function(){return s.default}),i.d(e,"Graticule",function(){return l.default}),i.d(e,"Image",function(){return u.default}),i.d(e,"ImageBase",function(){return c.a}),i.d(e,"ImageCanvas",function(){return h.a}),i.d(e,"ImageTile",function(){return d.default}),i.d(e,"Kinetic",function(){return p.default}),i.d(e,"Map",function(){return f.default}),i.d(e,"MapBrowserEvent",function(){return g.default}),i.d(e,"MapBrowserEventHandler",function(){return y.a}),i.d(e,"MapBrowserPointerEvent",function(){return v.default}),i.d(e,"MapEvent",function(){return m.a}),i.d(e,"Object",function(){return _.default}),i.d(e,"Observable",function(){return b.default}),i.d(e,"Overlay",function(){return S.default}),i.d(e,"PluggableMap",function(){return O.default}),i.d(e,"Tile",function(){return C.default}),i.d(e,"TileCache",function(){return T.a}),i.d(e,"TileQueue",function(){return x.a}),i.d(e,"TileRange",function(){return E.b}),i.d(e,"VectorImageTile",function(){return P.a}),i.d(e,"VectorTile",function(){return j.default}),i.d(e,"View",function(){return R.default}),i.d(e,"WebGLMap",function(){return _e}),i.d(e,"getUid",function(){return D.getUid}),i.d(e,"inherits",function(){return D.inherits}),i.d(e,"VERSION",function(){return D.VERSION})},function(t,e,i){"use strict";t.exports=n;var r=i(462);function n(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}function o(t){return t.type===n.Bytes?t.readVarint()+t.pos:t.pos+1}function a(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function s(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=t;n--)i.buf[n+r]=i.buf[n]}function l(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function m(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function _(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5,n.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,t(n,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=_(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*_(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return e=127&(i=r[this.pos++]),i<128?e:(e|=(127&(i=r[this.pos++]))<<7,i<128?e:(e|=(127&(i=r[this.pos++]))<<14,i<128?e:(e|=(127&(i=r[this.pos++]))<<21,i<128?e:function(t,e,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return a(t,r,e);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return a(t,r,e);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return a(t,r,e);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return a(t,r,e);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return a(t,r,e);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return a(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,i){for(var r="",n=e;n<i;){var o,a,s,l=t[n],u=null,c=l>239?4:l>223?3:l>191?2:1;if(n+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(o=t[n+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=t[n+1],a=t[n+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=t[n+1],a=t[n+2],s=t[n+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),n+=c}return r}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var i=o(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=o(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===n.Varint)for(;this.buf[this.pos++]>127;);else if(e===n.Bytes)this.pos=this.readVarint()+this.pos;else if(e===n.Fixed32)this.pos+=4;else{if(e!==n.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,r;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;e.buf[e.pos++]|=i|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,n,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):n=r;continue}if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(t[i++]=239,t[i++]=191,t[i++]=189,n=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&s(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&s(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,n.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,d,e)},writePackedFloat:function(t,e){this.writeMessage(t,c,e)},writePackedDouble:function(t,e){this.writeMessage(t,h,e)},writePackedFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,f,e)},writePackedFixed64:function(t,e){this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,y,e)},writeBytesField:function(t,e){this.writeTag(t,n.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,n.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,n.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,n.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,n.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,n.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,n.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,i){var r=i(479);e.Processor=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvSource=e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=void 0,e.ContourZValue=e.ContourParam=e.ContourNoteParam=e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=e.ServiceBase=e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=void 0,e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=e.FeatureTheme=e.Sector=e.FeatureRectangle=e.FeaturePolygon=e.Point=e.FeatureLine=e.Label=e.Image=e.FeatureCircle=e.ShapeParameters=e.ShapeFactory=e.ThemeVector=e.Ring=e.RankSymbol=e.OverlayPoint=e.Pie=e.Line=e.Graph=e.OverlayCircle=e.Bar3D=e.Bar=e.RankSymbolThemeSource=e.GraphThemeSource=e.RandomThemeSource=e.SimpleThemeSource=e.UniqueThemeSource=e.ThemeStyle=e.RangeThemeSource=e.goog=e.ZDOverviewMap=e.PolygonJSON=e.MilstdParams=e.EnumMilstdType=e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilStd=e.Drag=e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=e.Layer=e.MapLayerSource=e.GdbpLayer=e.MapLayerTileSource=e.TileLayer_mapgis=e.TileLayerSource=e.CacheTileLayer=e.CacheTileLayerSource=e.Doc=e.MapDocSource=e.MapDocTileLayer=e.MapDocTileSource=e.ZDTileDebug=void 0;var r=Si(i(48)),n=Si(i(36)),o=Si(i(268)),a=Si(i(324)),s=(Si(i(113)),Si(i(145)),Si(i(205))),l=Si(i(206)),u=(Si(i(171)),Si(i(25))),c=bi(i(155)),h=Si(i(217)),d=Si(i(172)),p=(Si(i(98)),Si(i(218)),Si(i(183))),f=bi(i(7)),g=bi(i(209)),y=Si(i(75)),v=Si(i(277)),m=bi(i(278)),_=bi(i(231)),b=bi(i(208)),S=bi(i(279)),O=Si(i(207)),C=bi(i(280)),T=Si(i(281)),x=(Si(i(35)),Si(i(455))),E=Si(i(33)),P=Si(i(456)),j=Si(i(190)),R=Si(i(62)),I=(Si(i(44)),Si(i(457))),L=Si(i(458)),w=Si(i(459)),A=Si(i(460)),M=Si(i(461)),F=Si(i(463)),k=bi(i(646)),N=Si(i(464)),D=bi(i(465)),G=Si(i(466)),B=Si(i(467)),U=Si(i(468)),V=Si(i(647)),W=Si(i(331)),Z=Si(i(332)),z=Si(i(344)),H=Si(i(335)),Y=Si(i(339)),X=Si(i(340)),q=Si(i(333)),K=Si(i(342)),J=Si(i(343)),Q=Si(i(341)),$=Si(i(337)),tt=Si(i(338)),et=Si(i(330)),it=Si(i(336)),rt=Si(i(329)),nt=Si(i(334)),ot=Si(i(256)),at=Si(i(72)),st=Si(i(130)),lt=Si(i(39)),ut=Si(i(147)),ct=Si(i(54)),ht=Si(i(82)),dt=Si(i(88)),pt=Si(i(38)),ft=bi(i(34)),gt=Si(i(20)),yt=i(87),vt=Si(i(76)),mt=Si(i(182)),_t=Si(i(269)),bt=Si(i(220)),St=Si(i(210)),Ot=Si(i(211)),Ct=Si(i(270)),Tt=Si(i(212)),xt=bi(i(271)),Et=Si(i(272)),Pt=Si(i(41)),jt=Si(i(221)),Rt=Si(i(213)),It=Si(i(273)),Lt=Si(i(214)),wt=Si(i(215)),At=Si(i(216)),Mt=bi(i(47)),Ft=Si(i(274)),kt=Si(i(275)),Nt=Si(i(276)),Dt=Si(i(222)),Gt=Si(i(328)),Bt=Si(i(469)),Ut=Si(i(219)),Vt=Si(i(83)),Wt=Si(i(154)),Zt=Si(i(100)),zt=Si(i(470)),Ht=Si(i(127)),Yt=(Si(i(264)),Si(i(146))),Xt=(Si(i(175)),Si(i(188))),qt=Si(i(68)),Kt=Si(i(163)),Jt=Si(i(251)),Qt=Si(i(327)),$t=Si(i(471)),te=Si(i(472)),ee=Si(i(473)),ie=Si(i(89)),re=Si(i(474)),ne=Si(i(282)),oe=Si(i(475)),ae=Si(i(476)),se=Si(i(477)),le=bi(i(345)),ue=Si(i(478)),ce=Si(i(174)),he=Si(i(481)),de=Si(i(128)),pe=Si(i(482)),fe=Si(i(483)),ge=Si(i(81)),ye=Si(i(484)),ve=Si(i(485)),me=Si(i(486)),_e=(Si(i(227)),Si(i(114))),be=Si(i(487)),Se=bi(i(648)),Oe=Si(i(176)),Ce=Si(i(488)),Te=(Si(i(173)),Si(i(258))),xe=Si(i(101)),Ee=Si(i(194)),Pe=bi(i(187)),je=Si(i(224)),Re=Si(i(325)),Ie=Si(i(96)),Le=Si(i(84)),we=Si(i(66)),Ae=Si(i(105)),Me=bi(i(346)),Fe=bi(i(450)),ke=bi(i(55)),Ne=bi(i(92)),De=bi(i(347)),Ge=bi(i(26)),Be=bi(i(56)),Ue=bi(i(32)),Ve=bi(i(1)),We=bi(i(225)),Ze=bi(i(267)),ze=i(42),He=bi(ze),Ye=(bi(ze),bi(i(223))),Xe=bi(i(326)),qe=bi(i(9)),Ke=bi(i(49)),Je=bi(i(489)),Qe=bi(i(490)),$e=bi(i(21)),ti=bi(i(45)),ei=bi(i(70)),ii=bi(i(59)),ri=bi(i(0)),ni=i(491),oi=i(534),ai=i(543),si=i(143),li=i(563),ui=i(571),ci=i(595),hi=i(596),di=i(602),pi=i(610),fi=i(625),gi=i(632),yi=i(638),vi=i(426),mi=i(393),_i=i(641);function bi(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function Si(t){return t&&t.__esModule?t:{default:t}}var Oi=window.ol={};Oi.color={},Oi.colorlike={},Oi.control={},Oi.coordinate={},Oi.easing={},Oi.events={},Oi.events.condition={},Oi.extent={},Oi.featureloader={},Oi.format={},Oi.format.filter={},Oi.geom={},Oi.has={},Oi.interaction={},Oi.layer={},Oi.loadingstrategy={},Oi.proj={},Oi.proj.Units={},Oi.proj.proj4={},Oi.render={},Oi.render.canvas={},Oi.renderer={},Oi.renderer.canvas={},Oi.renderer.webgl={},Oi.size={},Oi.source={},Oi.zondy={},Oi.sphere=Oi.Sphere=function(t){this.radius=t},Oi.style={},Oi.style.IconImageCache={},Oi.tilegrid={},Oi.xml={},Oi.Collection=r.default,Oi.Feature=n.default,Oi.Geolocation=o.default,Oi.Graticule=a.default,Oi.Kinetic=s.default,Oi.Map=l.default,Oi.Object=u.default,Oi.Observable=c.default,Oi.Observable.unByKey=c.unByKey,Oi.Overlay=h.default,Oi.PluggableMap=d.default,Oi.View=p.default,Oi.WebGLMap=f,Oi.color.asArray=ke.asArray,Oi.color.asString=ke.asString,Oi.colorlike.asColorLike=Ne.asColorLike,Oi.control.Attribution=g.default,Oi.control.Attribution.render=g.render,Oi.control.Control=y.default,Oi.control.FullScreen=v.default,Oi.control.MousePosition=m.default,Oi.control.MousePosition.render=m.render,Oi.control.OverviewMap=_.default,Oi.control.OverviewMap.render=_.render,Oi.control.Rotate=b.default,Oi.control.Rotate.render=b.render,Oi.control.ScaleLine=S.default,Oi.control.ScaleLine.render=S.render,Oi.control.Zoom=O.default,Oi.control.ZoomSlider=C.default,Oi.control.ZoomSlider.render=C.render,Oi.control.ZoomToExtent=T.default,Oi.control.defaults=De.defaults,Oi.coordinate.add=Ge.add,Oi.coordinate.createStringXY=Ge.createStringXY,Oi.coordinate.format=Ge.format,Oi.coordinate.rotate=Ge.rotate,Oi.coordinate.toStringHDMS=Ge.toStringHDMS,Oi.coordinate.toStringXY=Ge.toStringXY,Oi.easing.easeIn=Be.easeIn,Oi.easing.easeOut=Be.easeOut,Oi.easing.inAndOut=Be.inAndOut,Oi.easing.linear=Be.linear,Oi.easing.upAndDown=Be.upAndDown,Oi.events.condition.altKeyOnly=Ue.altKeyOnly,Oi.events.condition.altShiftKeysOnly=Ue.altShiftKeysOnly,Oi.events.condition.always=Ue.always,Oi.events.condition.click=Ue.click,Oi.events.condition.doubleClick=Ue.doubleClick,Oi.events.condition.focus=Ue.focus,Oi.events.condition.mouseOnly=Ue.mouseOnly,Oi.events.condition.never=Ue.never,Oi.events.condition.noModifierKeys=Ue.noModifierKeys,Oi.events.condition.platformModifierKeyOnly=Ue.platformModifierKeyOnly,Oi.events.condition.pointerMove=Ue.pointerMove,Oi.events.condition.primaryAction=Ue.primaryAction,Oi.events.condition.shiftKeyOnly=Ue.shiftKeyOnly,Oi.events.condition.singleClick=Ue.singleClick,Oi.events.condition.targetNotEditable=Ue.targetNotEditable,Oi.extent.applyTransform=Ve.applyTransform,Oi.extent.boundingExtent=Ve.boundingExtent,Oi.extent.buffer=Ve.buffer,Oi.extent.containsCoordinate=Ve.containsCoordinate,Oi.extent.containsExtent=Ve.containsExtent,Oi.extent.containsXY=Ve.containsXY,Oi.extent.createEmpty=Ve.createEmpty,Oi.extent.equals=Ve.equals,Oi.extent.extend=Ve.extend,Oi.extent.getArea=Ve.getArea,Oi.extent.getBottomLeft=Ve.getBottomLeft,Oi.extent.getBottomRight=Ve.getBottomRight,Oi.extent.getCenter=Ve.getCenter,Oi.extent.getHeight=Ve.getHeight,Oi.extent.getIntersection=Ve.getIntersection,Oi.extent.getSize=Ve.getSize,Oi.extent.getTopLeft=Ve.getTopLeft,Oi.extent.getTopRight=Ve.getTopRight,Oi.extent.getWidth=Ve.getWidth,Oi.extent.intersects=Ve.intersects,Oi.extent.isEmpty=Ve.isEmpty,Oi.featureloader.xhr=We.xhr,Oi.format.EsriJSON=x.default,Oi.format.Feature=E.default,Oi.format.GML=P.default,Oi.format.GML2=j.default,Oi.format.GML3=R.default,Oi.format.GPX=I.default,Oi.format.GeoJSON=L.default,Oi.format.IGC=w.default,Oi.format.KML=A.default,Oi.format.MVT=M.default,Oi.format.OSMXML=F.default,Oi.format.Polyline=k.default,Oi.format.Polyline.decodeDeltas=k.decodeDeltas,Oi.format.Polyline.decodeFloats=k.decodeFloats,Oi.format.Polyline.encodeDeltas=k.encodeDeltas,Oi.format.Polyline.encodeFloats=k.encodeFloats,Oi.format.TopoJSON=N.default,Oi.format.WFS=D.default,Oi.format.WFS.writeFilter=D.writeFilter,Oi.format.WKT=G.default,Oi.format.WMSCapabilities=B.default,Oi.format.WMSGetFeatureInfo=U.default,Oi.format.WMTSCapabilities=V.default,Oi.format.filter.Bbox=W.default,Oi.format.filter.Contains=Z.default,Oi.format.filter.During=z.default,Oi.format.filter.EqualTo=H.default,Oi.format.filter.GreaterThan=Y.default,Oi.format.filter.GreaterThanOrEqualTo=X.default,Oi.format.filter.Intersects=q.default,Oi.format.filter.IsBetween=K.default,Oi.format.filter.IsLike=J.default,Oi.format.filter.IsNull=Q.default,Oi.format.filter.LessThan=$.default,Oi.format.filter.LessThanOrEqualTo=tt.default,Oi.format.filter.Not=et.default,Oi.format.filter.NotEqualTo=it.default,Oi.format.filter.Or=rt.default,Oi.format.filter.Within=nt.default,Oi.format.filter.and=Ze.and,Oi.format.filter.bbox=Ze.bbox,Oi.format.filter.between=Ze.between,Oi.format.filter.contains=Ze.contains,Oi.format.filter.during=Ze.during,Oi.format.filter.equalTo=Ze.equalTo,Oi.format.filter.greaterThan=Ze.greaterThan,Oi.format.filter.greaterThanOrEqualTo=Ze.greaterThanOrEqualTo,Oi.format.filter.intersects=Ze.intersects,Oi.format.filter.isNull=Ze.isNull,Oi.format.filter.lessThan=Ze.lessThan,Oi.format.filter.lessThanOrEqualTo=Ze.lessThanOrEqualTo,Oi.format.filter.like=Ze.like,Oi.format.filter.not=Ze.not,Oi.format.filter.notEqualTo=Ze.notEqualTo,Oi.format.filter.or=Ze.or,Oi.format.filter.within=Ze.within,Oi.geom.Circle=ot.default,Oi.geom.Geometry=at.default,Oi.geom.GeometryLayout=gt.default,Oi.geom.GeometryCollection=st.default,Oi.geom.LineString=lt.default,Oi.geom.LinearRing=ut.default,Oi.geom.MultiLineString=ct.default,Oi.geom.MultiPoint=ht.default,Oi.geom.MultiPolygon=dt.default,Oi.geom.Point=pt.default,Oi.geom.Polygon=ft.default,Oi.geom.Polygon.circular=ft.circular,Oi.geom.Polygon.fromCircle=ft.fromCircle,Oi.geom.Polygon.fromExtent=ft.fromExtent,Oi.geom.Polygon.prototype.setCoordinates=function(t,e){if(t){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=(0,yt.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}else this.setFlatCoordinates(Oi.geom.GeometryLayout.XY,null,this.ends_)},Oi.geom.SimpleGeometry=vt.default,Oi.has.DEVICE_PIXEL_RATIO=He.DEVICE_PIXEL_RATIO,Oi.has.GEOLOCATION=He.GEOLOCATION,Oi.has.TOUCH=He.TOUCH,Oi.has.WEBGL=He.WEBGL,Oi.inherits=Fe.inherits,Oi.interaction.DoubleClickZoom=mt.default,Oi.interaction.DragAndDrop=_t.default,Oi.interaction.DragBox=bt.default,Oi.interaction.DragPan=St.default,Oi.interaction.DragRotate=Ot.default,Oi.interaction.DragRotateAndZoom=Ct.default,Oi.interaction.DragZoom=Tt.default,Oi.interaction.Draw=xt.default,Oi.interaction.Draw.createBox=xt.createBox,Oi.interaction.Draw.createRegularPolygon=xt.createRegularPolygon,Oi.interaction.Draw.handleEvent=xt.handleEvent,Oi.interaction.Extent=Et.default,Oi.interaction.Interaction=Pt.default,Oi.interaction.KeyboardPan=jt.default,Oi.interaction.KeyboardZoom=Rt.default,Oi.interaction.Modify=It.default,Oi.interaction.MouseWheelZoom=Lt.default,Oi.interaction.PinchRotate=wt.default,Oi.interaction.PinchZoom=At.default,Oi.interaction.Pointer=Mt.default,Oi.interaction.Pointer.handleEvent=Mt.handleEvent,Oi.interaction.Select=Ft.default,Oi.interaction.Snap=kt.default,Oi.interaction.Translate=Nt.default,Oi.interaction.defaults=Ye.defaults,Oi.layer.Base=Dt.default,Oi.layer.Group=Gt.default,Oi.layer.Heatmap=Bt.default,Oi.layer.Image=Ut.default,Oi.layer.Layer=Vt.default,Oi.layer.Tile=Wt.default,Oi.layer.Vector=Zt.default,Oi.layer.VectorTile=zt.default,Oi.loadingstrategy.all=Xe.all,Oi.loadingstrategy.bbox=Xe.bbox,Oi.loadingstrategy.tile=Xe.tile,Oi.proj.Projection=Ht.default,Oi.proj.Units.METERS_PER_UNIT=Ke.METERS_PER_UNIT,Oi.proj.addCoordinateTransforms=qe.addCoordinateTransforms,Oi.proj.addEquivalentProjections=qe.addEquivalentProjections,Oi.proj.addProjection=qe.addProjection,Oi.proj.equivalent=qe.equivalent,Oi.proj.fromLonLat=qe.fromLonLat,Oi.proj.get=qe.get,Oi.proj.getPointResolution=qe.getPointResolution,Oi.proj.getTransform=qe.getTransform,Oi.proj.proj4.register=Je.register,Oi.proj.toLonLat=qe.toLonLat,Oi.proj.transform=qe.transform,Oi.proj.transformExtent=qe.transformExtent,Oi.render.VectorContext=Yt.default,Oi.render.canvas.labelCache=$e.labelCache,Oi.render.toContext=Qe.toContext,Oi.renderer.canvas.ImageLayer=Xt.default,Oi.renderer.Map=qt.default,Oi.renderer.canvas.TileLayer=Kt.default,Oi.renderer.canvas.VectorLayer=Jt.default,Oi.renderer.canvas.VectorTileLayer=Qt.default,Oi.size.toSize=ti.toSize,Oi.source.BingMaps=$t.default,Oi.source.CartoDB=te.default,Oi.source.Cluster=ee.default,Oi.source.Image=ie.default,Oi.source.ImageArcGISRest=re.default,Oi.source.ImageCanvas=ne.default,Oi.source.ImageMapGuide=oe.default,Oi.source.ImageStatic=ae.default,Oi.source.ImageWMS=se.default,Oi.source.OSM=le.default,Oi.source.OSM.ATTRIBUTION=le.ATTRIBUTION,Oi.source.Raster=ue.default,Oi.source.Source=ce.default,Oi.source.Stamen=he.default,Oi.source.Tile=de.default,Oi.source.TileArcGISRest=pe.default,Oi.source.TileDebug=fe.default,Oi.source.TileImage=ge.default,Oi.source.TileJSON=ye.default,Oi.source.TileWMS=ve.default,Oi.source.UTFGrid=me.default,Oi.source.Vector=_e.default,Oi.source.VectorTile=be.default,Oi.source.WMTS=Se.default,Oi.source.WMTS.optionsFromCapabilities=Se.optionsFromCapabilities,Oi.source.XYZ=Oe.default,Oi.source.Zoomify=Ce.default,Oi.sphere.prototype.getArea=ei.getArea,Oi.sphere.prototype.getDistance=ei.getDistance,Oi.sphere.prototype.getLength=ei.getLength,Oi.sphere.prototype.getAreaInternal=ei.getAreaInternal,Oi.style.Circle=Te.default,Oi.style.Fill=xe.default,Oi.style.Icon=Ee.default,Oi.style.IconImageCache.shared=Pe.shared,Oi.style.Image=je.default,Oi.style.RegularShape=Re.default,Oi.style.Stroke=Ie.default,Oi.style.Style=Le.default,Oi.style.Text=we.default,Oi.tilegrid.TileGrid=Ae.default,Oi.tilegrid.WMTS=Me.default,Oi.tilegrid.WMTS.createFromCapabilitiesMatrixSet=Me.createFromCapabilitiesMatrixSet,Oi.tilegrid.createXYZ=ii.createXYZ,Oi.xml.getAllTextContent=ri.getAllTextContent,Oi.xml.parse=ri.parse,e.ZDTileDebug=ni.ZDTileDebug,e.MapDocTileSource=ni.MapDocTileSource,e.MapDocTileLayer=ni.MapDocTileLayer,e.MapDocSource=ni.MapDocSource,e.Doc=ni.Doc,e.CacheTileLayerSource=ni.CacheTileLayerSource,e.CacheTileLayer=ni.CacheTileLayer,e.TileLayerSource=ni.TileLayerSource,e.TileLayer_mapgis=ni.TileLayer_mapgis,e.MapLayerTileSource=ni.MapLayerTileSource,e.GdbpLayer=ni.GdbpLayer,e.MapLayerSource=ni.MapLayerSource,e.Layer=ni.Layer,e.BaiduMapSource=ni.BaiduMapSource,e.BaiDuLayer=ni.BaiDuLayer,e.GaodeMapSource=ni.GaodeMapSource,e.GaoDeLayer=ni.GaoDeLayer,e.TiandituMapSource=ni.TiandituMapSource,e.TianDiTu=ni.TianDiTu,e.GoogleMapSource=ni.GoogleMapSource,e.GoogleLayer=ni.GoogleLayer,e.ArcGISMapSource=ni.ArcGISMapSource,e.ArcGISLayer=ni.ArcGISLayer,e.OpenStreetMapSource=ni.OpenStreetMapSource,e.OpenStreetLayer=ni.OpenStreetLayer,e.TiandituType=ni.TiandituType,e.GoogleLayerType=ni.GoogleLayerType,e.ArcGISLayerType=ni.ArcGISLayerType,e.OpenStreetLayerType=ni.OpenStreetLayerType,e.Drag=oi.Drag,e.MilStd=oi.MilStd,e.MilStdDrawTool=oi.MilStdDrawTool,e.MilStdModifyTool=oi.MilStdModifyTool,e.MilStdDragPan=oi.MilStdDragPan,e.EnumMilstdType=oi.EnumMilstdType,e.MilstdParams=oi.MilstdParams,e.PolygonJSON=oi.PolygonJSON,e.ZDOverviewMap=oi.ZDOverviewMap,e.goog=oi.goog,e.RangeThemeSource=ai.RangeThemeSource,e.ThemeStyle=ai.ThemeStyle,e.UniqueThemeSource=ai.UniqueThemeSource,e.SimpleThemeSource=ai.SimpleThemeSource,e.RandomThemeSource=ai.RandomThemeSource,e.GraphThemeSource=ai.GraphThemeSource,e.RankSymbolThemeSource=ai.RankSymbolThemeSource,e.Bar=mi.Bar,e.Bar3D=mi.Bar3D,e.OverlayCircle=mi.OverlayCircle,e.Graph=mi.Graph,e.Line=mi.Line,e.Pie=mi.Pie,e.OverlayPoint=mi.OverlayPoint,e.RankSymbol=mi.RankSymbol,e.Ring=mi.Ring,e.ThemeVector=mi.ThemeVector,e.ShapeFactory=mi.ShapeFactory,e.ShapeParameters=mi.ShapeParameters,e.FeatureCircle=mi.FeatureCircle,e.Image=mi.Image,e.Label=mi.Label,e.FeatureLine=mi.FeatureLine,e.Point=mi.Point,e.FeaturePolygon=mi.FeaturePolygon,e.FeatureRectangle=mi.FeatureRectangle,e.Sector=mi.Sector,e.FeatureTheme=mi.FeatureTheme,e.LevelRenderer=mi.LevelRenderer,e.Render=mi.Render,e.Animation=mi.Animation,e.Animator=mi.Animator,e.Area=mi.Area,e.Clip=mi.Clip,e.Color=mi.Color,e.ComputeBoundingBox=mi.ComputeBoundingBox,e.Config=mi.Config,e.LevelRendererCurve=mi.LevelRendererCurve,e.Easing=mi.Easing,e.Env=mi.Env,e.LevelRendererEvent=mi.LevelRendererEvent,e.Eventful=mi.Eventful,e.Group=mi.Group,e.Handler=mi.Handler,e.Http=mi.Http,e.Math=mi.Math,e.Matrix=mi.Matrix,e.Painter=mi.Painter,e.PaintLayer=mi.PaintLayer,e.Shape=mi.Shape,e.SmicBrokenLine=mi.SmicBrokenLine,e.SmicCircle=mi.SmicCircle,e.SmicEllipse=mi.SmicEllipse,e.SmicImage=mi.SmicImage,e.SmicIsogon=mi.SmicIsogon,e.SmicPoint=mi.SmicPoint,e.SmicPolygon=mi.SmicPolygon,e.SmicRectangle=mi.SmicRectangle,e.SmicRing=mi.SmicRing,e.SmicSector=mi.SmicSector,e.SmicStar=mi.SmicStar,e.SmicText=mi.SmicText,e.Storage=mi.Storage,e.Transformable=mi.Transformable,e.Util=mi.Util,e.LevelRendererVector=mi.LevelRendererVector,e.SUtil=mi.SUtil,e.ServiceBase=si.ServiceBase,e.AnyLine=li.AnyLine,e.Arc=li.Arc,e.Zondy=li.Zondy,e.CAttStruct=li.CAttStruct,e.CAttDataRow=li.CAttDataRow,e.CDisplayStyle=li.CDisplayStyle,e.CDisplayStyleExtend=li.CDisplayStyleExtend,e.CDynNoteInfo=li.CDynNoteInfo,e.CGDBInfo=li.CGDBInfo,e.Circle=li.Circle,e.CLineInfo=li.CLineInfo,e.CPointInfo=li.CPointInfo,e.CRegionInfo=li.CRegionInfo,e.DynNoteLableType=li.DynNoteLableType,e.DynShowStyle=li.DynShowStyle,e.XClsType=li.XClsType,e.VectClsType=li.VectClsType,e.FeatureType=li.FeatureType,e.FontShape=li.FontShape,e.LabelLinType=li.LabelLinType,e.LabelRegType=li.LabelRegType,e.LabelPntType=li.LabelPntType,e.RepeatType=li.RepeatType,e.LabelSpreadType=li.LabelSpreadType,e.LineConstrain=li.LineConstrain,e.EightDirType=li.EightDirType,e.ISShowArc=li.ISShowArc,e.NetAnalyType=li.NetAnalyType,e.NetElemType=li.NetElemType,e.CLinAdjustType=li.CLinAdjustType,e.CLinHeadType=li.CLinHeadType,e.CLinJointType=li.CLinJointType,e.CLinStyleMakeType=li.CLinStyleMakeType,e.CItemType=li.CItemType,e.MapType=li.MapType,e.LayerStatusType=li.LayerStatusType,e.Feature=li.Feature,e.FeatureGeometry=li.FeatureGeometry,e.FeatureGraphicBase=li.FeatureGraphicBase,e.FeatureSet=li.FeatureSet,e.GLine=li.GLine,e.GPoint=li.GPoint,e.GRegion=li.GRegion,e.LabelLinInfo=li.LabelLinInfo,e.LabelRegInfo=li.LabelRegInfo,e.LablePntInfo=li.LablePntInfo,e.MultiPolygon=li.MultiPolygon,e.Point2D=li.Point2D,e.Polygon=li.Polygon,e.PolyLine=li.PolyLine,e.Rectangle=li.Rectangle,e.Tangram=li.Tangram,e.VectCls=li.VectCls,e.WebGraphicsInfo=li.WebGraphicsInfo,e.extend=li.extend,e.isArray=li.isArray,e.extendDeep=li.extendDeep,e.copy=li.copy,e.copyExcluce=li.copyExcluce,e.reset=li.reset,e.getElement=li.getElement,e.isElement=li.isElement,e.removeItem=li.removeItem,e.indexOf=li.indexOf,e.modifyDOMElement=li.modifyDOMElement,e.applyDefaults=li.applyDefaults,e.getParameterString=li.getParameterString,e.getWFParameterString=li.getWFParameterString,e.urlAppend=li.urlAppend,e.getParameters=li.getParameters,e.IS_GECKO=li.IS_GECKO,e.Browser=li.Browser,e.getBrowser=li.getBrowser,e.isSupportCanvas=li.isSupportCanvas,e.supportCanvas=li.supportCanvas,e.isInTheSameDomain=li.isInTheSameDomain,e.toJSON=li.toJSON,e.transformResult=li.transformResult,e.copyAttributes=li.copyAttributes,e.copyAttributesWithClip=li.copyAttributesWithClip,e.cloneObject=li.cloneObject,e.newGuid=li.newGuid,e.bind=li.bind,e.bindAsEventListener=li.bindAsEventListener,e.getTopAnalysisResult=li.getTopAnalysisResult,e.ChineseToUtf8=li.ChineseToUtf8,e.DeepMerge=li.DeepMerge,e.merge=li.merge,e.mixin=li.mixin,e.createCanvasContext2D=li.createCanvasContext2D,e.ContourNoteParam=ui.ContourNoteParam,e.ContourParam=ui.ContourParam,e.ContourZValue=ui.ContourZValue,e.ContourRegionInfo=ui.ContourRegionInfo,e.MeshingParam=ui.MeshingParam,e.NetAnalyse=ui.NetAnalyse,e.NetAnalysisExtent=ui.NetAnalysisExtent,e.SlopLineParam=ui.SlopLineParam,e.CommonServiceBase=ci.CommonServiceBase,e.Events=ci.Events,e.CORS=ci.CORS,e.RequestTimeout=ci.RequestTimeout,e.FetchRequest=ci.FetchRequest,e.IgsServiceBase=ci.IgsServiceBase,e.JSONFormat=ci.JSONFormat,e.ColorInfo=hi.ColorInfo,e.GDBInfo=hi.GDBInfo,e.MapDoc=hi.MapDoc,e.CatalogService=hi.CatalogService,e.TileLayer=hi.TileLayer,e.VectorLayer=hi.VectorLayer,e.EditDocFeature=di.EditDocFeature,e.EditLayerFeature=di.EditLayerFeature,e.EditServiceBase=di.EditServiceBase,e.MultiGeoQuery=di.MultiGeoQuery,e.MultiGeoQueryParameter=di.MultiGeoQueryParameter,e.ObjClsQuery=di.ObjClsQuery,e.ObjClsQueryParameter=di.ObjClsQueryParameter,e.QueryByLayerParameter=di.QueryByLayerParameter,e.QueryDocFeature=di.QueryDocFeature,e.QueryFeatureRule=di.QueryFeatureRule,e.QueryFeatureStruct=di.QueryFeatureStruct,e.QueryLayerFeature=di.QueryLayerFeature,e.QueryParameter=di.QueryParameter,e.QueryParameterBase=di.QueryParameterBase,e.QueryServiceBase=di.QueryServiceBase,e.AnalysisBase=pi.AnalysisBase,e.ClassBufferBase=pi.ClassBufferBase,e.ClassBufferByMultiplyRing=pi.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=pi.ClassBufferBySingleRing,e.ClipBase=pi.ClipBase,e.ClipByCircle=pi.ClipByCircle,e.ClipByLayer=pi.ClipByLayer,e.ClipByPolygon=pi.ClipByPolygon,e.ContourAnalyse=pi.ContourAnalyse,e.FeatureBuffBase=pi.FeatureBuffBase,e.FeatureBuffByMultiplyRing=pi.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=pi.FeatureBuffBySingleRing,e.NetAnalysis=pi.NetAnalysis,e.OverlayBase=pi.OverlayBase,e.OverlayByLayer=pi.OverlayByLayer,e.OverlayByPolygon=pi.OverlayByPolygon,e.ProjectBase=pi.ProjectBase,e.ProjectByLayer=pi.ProjectByLayer,e.ProjectBySRID=pi.ProjectBySRID,e.FunctionWareService=pi.FunctionWareService,e.CalArea=fi.CalArea,e.CalPolyLineLength=fi.CalPolyLineLength,e.CalServiceBase=fi.CalServiceBase,e.CProjectBySRSID=fi.CProjectBySRSID,e.CProjectParam=fi.CProjectParam,e.GeometryAnalysisBase=fi.GeometryAnalysisBase,e.ProjectDots=fi.ProjectDots,e.ProjectRang=fi.ProjectRang,e.Smooth=fi.Smooth,e.TopAnalysis=fi.TopAnalysis,e.CoordinateElpTrans=vi.CoordinateElpTrans,e.GetDocImageService=gi.GetDocImageService,e.GetLayerImageService=gi.GetLayerImageService,e.GetMapImageService=gi.GetMapImageService,e.GetMapInfoService=gi.GetMapInfoService,e.GetTileImageService=gi.GetTileImageService,e.MapServiceBase=gi.MapServiceBase,e.CAllOtherDataItemInfoSource=yi.CAllOtherDataItemInfoSource,e.CAnnInfo=yi.CAnnInfo,e.CChartLabelFormat=yi.CChartLabelFormat,e.CChartTheme=yi.CChartTheme,e.CChartThemeInfo=yi.CChartThemeInfo,e.CChartThemeRepresentInfo=yi.CChartThemeRepresentInfo,e.CChartType=yi.CChartType,e.CDotDensityTheme=yi.CDotDensityTheme,e.CFourColorTheme=yi.CFourColorTheme,e.CGraduatedSymbolTheme=yi.CGraduatedSymbolTheme,e.CLinInfo=yi.CLinInfo,e.CMultiClassTheme=yi.CMultiClassTheme,e.CPntInfo=yi.CPntInfo,e.CRandomTheme=yi.CRandomTheme,e.CRangeTheme=yi.CRangeTheme,e.CRangeThemeInfo=yi.CRangeThemeInfo,e.CRegInfo=yi.CRegInfo,e.CSimpleTheme=yi.CSimpleTheme,e.CTheme=yi.CTheme,e.CThemeInfo=yi.CThemeInfo,e.CUniqueTheme=yi.CUniqueTheme,e.CUniqueThemeInfo=yi.CUniqueThemeInfo,e.ExpInfo=yi.ExpInfo,e.FolderInfo=yi.FolderInfo,e.FolderInfoAttribute=yi.FolderInfoAttribute,e.ItemValue=yi.ItemValue,e.ThemeOper=yi.ThemeOper,e.ThemesInfo=yi.ThemesInfo,e.MapvSource=_i.MapvSource,Oi.source.Mapv=_i.MapvSource},function(t,e,i){t.exports=function(){"use strict";function t(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function e(t,e){return t<e?-1:t>e?1:0}return function(i,r,n,o,a){!function e(i,r,n,o,a){for(;o>n;){if(o-n>600){var s=o-n+1,l=r-n+1,u=Math.log(s),c=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1);e(i,r,Math.max(n,Math.floor(r-l*c/s+h)),Math.min(o,Math.floor(r+(s-l)*c/s+h)),a)}var d=i[r],p=n,f=o;for(t(i,n,r),a(i[o],d)>0&&t(i,n,o);p<f;){for(t(i,p,f),p++,f--;a(i[p],d)<0;)p++;for(;a(i[f],d)>0;)f--}0===a(i[n],d)?t(i,n,f):t(i,++f,o),f<=r&&(n=f+1),r<=f&&(o=f-1)}}(i,r,n||0,o||i.length-1,a||e)}}()},function(t,e,i){"use strict";i.r(e);var r=i(36),n=i(23),o=i(1),a=i(33),s=i(189),l=i(20),u=i(5),c=i(39),h=i(147),d=i(54),p=i(82),f=i(88),g=i(38),y=i(34),v=i(87),m=i(93),_=i(11),b=i(9),S={};S[u.default.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new g.default([t.x,t.y,t.z,t.m],l.default.XYZM):void 0!==t.z?new g.default([t.x,t.y,t.z],l.default.XYZ):void 0!==t.m?new g.default([t.x,t.y,t.m],l.default.XYM):new g.default([t.x,t.y])},S[u.default.LINE_STRING]=function(t){var e=x(t);return new c.default(t.paths[0],e)},S[u.default.POLYGON]=function(t){var e=x(t);return new y.default(t.rings,e)},S[u.default.MULTI_POINT]=function(t){var e=x(t);return new p.default(t.points,e)},S[u.default.MULTI_LINE_STRING]=function(t){var e=x(t);return new d.default(t.paths,e)},S[u.default.MULTI_POLYGON]=function(t){var e=x(t);return new f.default(t.rings,e)};var O={};O[u.default.POINT]=function(t,e){var i,r=t.getCoordinates(),o=t.getLayout();return o===l.default.XYZ?i={x:r[0],y:r[1],z:r[2]}:o===l.default.XYM?i={x:r[0],y:r[1],m:r[2]}:o===l.default.XYZM?i={x:r[0],y:r[1],z:r[2],m:r[3]}:o===l.default.XY?i={x:r[0],y:r[1]}:Object(n.a)(!1,34),i},O[u.default.LINE_STRING]=function(t,e){var i=t,r=E(i);return{hasZ:r.hasZ,hasM:r.hasM,paths:[i.getCoordinates()]}},O[u.default.POLYGON]=function(t,e){var i=t,r=E(i);return{hasZ:r.hasZ,hasM:r.hasM,rings:i.getCoordinates(!1)}},O[u.default.MULTI_POINT]=function(t,e){var i=t,r=E(i);return{hasZ:r.hasZ,hasM:r.hasM,points:i.getCoordinates()}},O[u.default.MULTI_LINE_STRING]=function(t,e){var i=t,r=E(i);return{hasZ:r.hasZ,hasM:r.hasM,paths:i.getCoordinates()}},O[u.default.MULTI_POLYGON]=function(t,e){for(var i=E(t),r=t.getCoordinates(!1),n=[],o=0;o<r.length;o++)for(var a=r[o].length-1;a>=0;a--)n.push(r[o][a]);return{hasZ:i.hasZ,hasM:i.hasM,rings:n}};var C=function(t){function e(e){var i=e||{};t.call(this),this.geometryName_=i.geometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i=t,n=T(i.geometry,e),o=new r.default;return this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(n),e&&e.idField&&i.attributes[e.idField]&&o.setId(i.attributes[e.idField]),i.attributes&&o.setProperties(i.attributes),o},e.prototype.readFeaturesFromObject=function(t,e){var i=e||{};if(t.features){var r=[],n=t.features;i.idField=t.objectIdFieldName;for(var o=0,a=n.length;o<a;++o)r.push(this.readFeatureFromObject(n[o],i));return r}return[this.readFeatureFromObject(t,i)]},e.prototype.readGeometryFromObject=function(t,e){return T(t,e)},e.prototype.readProjectionFromObject=function(t){if(t.spatialReference&&void 0!==t.spatialReference.wkid){var e=t.spatialReference.wkid;return Object(b.get)("EPSG:"+e)}return null},e.prototype.writeGeometryObject=function(t,e){return P(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={},r=t.getGeometry();r&&(i.geometry=P(r,e),e&&e.featureProjection&&(i.geometry.spatialReference={wkid:Number(Object(b.get)(e.featureProjection).getCode().split(":").pop())}));var n=t.getProperties();return delete n[t.getGeometryName()],Object(_.isEmpty)(n)?i.attributes={}:i.attributes=n,i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{features:i}},e}(s.a);function T(t,e){if(!t)return null;var i;if("number"==typeof t.x&&"number"==typeof t.y)i=u.default.POINT;else if(t.points)i=u.default.MULTI_POINT;else if(t.paths)i=1===t.paths.length?u.default.LINE_STRING:u.default.MULTI_LINE_STRING;else if(t.rings){var r=t,n=x(r),s=function(t,e){var i,r,n=[],a=[],s=[];for(i=0,r=t.length;i<r;++i){n.length=0,Object(v.deflateCoordinates)(n,0,t[i],e.length),Object(m.a)(n,0,n.length,e.length)?a.push([t[i]]):s.push(t[i])}for(;s.length;){var l=s.shift(),u=!1;for(i=a.length-1;i>=0;i--){var c=a[i][0];if(Object(o.containsExtent)(new h.default(c).getExtent(),new h.default(l).getExtent())){a[i].push(l),u=!0;break}}u||a.push([l.reverse()])}return a}(r.rings,n);1===s.length?(i=u.default.POLYGON,t.rings=s[0]):(i=u.default.MULTI_POLYGON,t.rings=s)}var l=S[i];return Object(a.transformWithOptions)(l(t),!1,e)}function x(t){var e=l.default.XY;return!0===t.hasZ&&!0===t.hasM?e=l.default.XYZM:!0===t.hasZ?e=l.default.XYZ:!0===t.hasM&&(e=l.default.XYM),e}function E(t){var e=t.getLayout();return{hasZ:e===l.default.XYZ||e===l.default.XYZM,hasM:e===l.default.XYM||e===l.default.XYZM}}function P(t,e){return(0,O[t.getType()])(Object(a.transformWithOptions)(t,!0,e),e)}e.default=C},function(t,e,i){"use strict";i.r(e);var r=i(62).default;r.prototype.writeFeatures,r.prototype.writeFeaturesNode,e.default=r},function(t,e,i){"use strict";i.r(e);var r=i(36),n=i(12),o=i(33),a=i(120),s=i(2),l=i(20),u=i(5),c=i(39),h=i(54),d=i(38),p=i(9),f=i(0),g=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],y={rte:Z,trk:z,wpt:H},v=Object(f.makeStructureNS)(g,{rte:Object(f.makeArrayPusher)(Z),trk:Object(f.makeArrayPusher)(z),wpt:Object(f.makeArrayPusher)(H)}),m=Object(f.makeStructureNS)(g,{text:Object(f.makeObjectPropertySetter)(s.h,"linkText"),type:Object(f.makeObjectPropertySetter)(s.h,"linkType")}),_=Object(f.makeStructureNS)(g,{rte:Object(f.makeChildAppender)(function(t,e,i){var r=i[0],n=e.getProperties(),a={node:t};a.properties=n;var s=e.getGeometry();if(s.getType()==u.default.LINE_STRING){var l=Object(o.transformWithOptions)(s,!0,r);a.geometryLayout=l.getLayout(),n.rtept=l.getCoordinates()}var c=i[i.length-1].node,h=R[c.namespaceURI],d=Object(f.makeSequence)(n,h);Object(f.pushSerializeAndPop)(a,I,f.OBJECT_PROPERTY_NODE_FACTORY,d,i,h)}),trk:Object(f.makeChildAppender)(function(t,e,i){var r=i[0],n=e.getProperties(),a={node:t};a.properties=n;var s=e.getGeometry();if(s.getType()==u.default.MULTI_LINE_STRING){var l=Object(o.transformWithOptions)(s,!0,r);n.trkseg=l.getLineStrings()}var c=i[i.length-1].node,h=w[c.namespaceURI],d=Object(f.makeSequence)(n,h);Object(f.pushSerializeAndPop)(a,A,f.OBJECT_PROPERTY_NODE_FACTORY,d,i,h)}),wpt:Object(f.makeChildAppender)(function(t,e,i){var r=i[0],n=i[i.length-1];n.properties=e.getProperties();var a=e.getGeometry();if(a.getType()==u.default.POINT){var s=Object(o.transformWithOptions)(a,!0,r);n.geometryLayout=s.getLayout(),X(t,s.getCoordinates(),i)}})}),b=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=Object(p.get)("EPSG:4326"),this.readExtensions_=i.readExtensions}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,i=t.length;e<i;++e){var r=t[e];if(this.readExtensions_){var n=r.get("extensionsNode_")||null;this.readExtensions_(r,n)}r.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!Object(n.f)(g,t.namespaceURI))return null;var i=y[t.localName];if(!i)return null;var r=i(t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_([r]),r):null},e.prototype.readFeaturesFromNode=function(t,e){if(!Object(n.f)(g,t.namespaceURI))return[];if("gpx"==t.localName){var i=Object(f.pushParseAndPop)([],v,t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_(i),i):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Object(f.createElementNS)("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",f.XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(f.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),Object(f.pushSerializeAndPop)({node:i},_,G,t,[e]),i},e}(a.a),S=Object(f.makeStructureNS)(g,{name:Object(f.makeObjectPropertySetter)(s.h),cmt:Object(f.makeObjectPropertySetter)(s.h),desc:Object(f.makeObjectPropertySetter)(s.h),src:Object(f.makeObjectPropertySetter)(s.h),link:V,number:Object(f.makeObjectPropertySetter)(s.f),extensions:W,type:Object(f.makeObjectPropertySetter)(s.h),rtept:function(t,e){var i=Object(f.pushParseAndPop)({},O,t,e);if(i){var r=e[e.length-1];B(r.flatCoordinates,r.layoutOptions,t,i)}}}),O=Object(f.makeStructureNS)(g,{ele:Object(f.makeObjectPropertySetter)(s.d),time:Object(f.makeObjectPropertySetter)(s.c)}),C=Object(f.makeStructureNS)(g,{name:Object(f.makeObjectPropertySetter)(s.h),cmt:Object(f.makeObjectPropertySetter)(s.h),desc:Object(f.makeObjectPropertySetter)(s.h),src:Object(f.makeObjectPropertySetter)(s.h),link:V,number:Object(f.makeObjectPropertySetter)(s.f),type:Object(f.makeObjectPropertySetter)(s.h),extensions:W,trkseg:function(t,e){var i=e[e.length-1];Object(f.parseNode)(T,t,e);var r=i.flatCoordinates;i.ends.push(r.length)}}),T=Object(f.makeStructureNS)(g,{trkpt:function(t,e){var i=Object(f.pushParseAndPop)({},x,t,e);if(i){var r=e[e.length-1];B(r.flatCoordinates,r.layoutOptions,t,i)}}}),x=Object(f.makeStructureNS)(g,{ele:Object(f.makeObjectPropertySetter)(s.d),time:Object(f.makeObjectPropertySetter)(s.c)}),E=Object(f.makeStructureNS)(g,{ele:Object(f.makeObjectPropertySetter)(s.d),time:Object(f.makeObjectPropertySetter)(s.c),magvar:Object(f.makeObjectPropertySetter)(s.d),geoidheight:Object(f.makeObjectPropertySetter)(s.d),name:Object(f.makeObjectPropertySetter)(s.h),cmt:Object(f.makeObjectPropertySetter)(s.h),desc:Object(f.makeObjectPropertySetter)(s.h),src:Object(f.makeObjectPropertySetter)(s.h),link:V,sym:Object(f.makeObjectPropertySetter)(s.h),type:Object(f.makeObjectPropertySetter)(s.h),fix:Object(f.makeObjectPropertySetter)(s.h),sat:Object(f.makeObjectPropertySetter)(s.f),hdop:Object(f.makeObjectPropertySetter)(s.d),vdop:Object(f.makeObjectPropertySetter)(s.d),pdop:Object(f.makeObjectPropertySetter)(s.d),ageofdgpsdata:Object(f.makeObjectPropertySetter)(s.d),dgpsid:Object(f.makeObjectPropertySetter)(s.f),extensions:W}),P=["text","type"],j=Object(f.makeStructureNS)(g,{text:Object(f.makeChildAppender)(s.n),type:Object(f.makeChildAppender)(s.n)}),R=Object(f.makeStructureNS)(g,["name","cmt","desc","src","link","number","type","rtept"]),I=Object(f.makeStructureNS)(g,{name:Object(f.makeChildAppender)(s.n),cmt:Object(f.makeChildAppender)(s.n),desc:Object(f.makeChildAppender)(s.n),src:Object(f.makeChildAppender)(s.n),link:Object(f.makeChildAppender)(Y),number:Object(f.makeChildAppender)(s.m),type:Object(f.makeChildAppender)(s.n),rtept:Object(f.makeArraySerializer)(Object(f.makeChildAppender)(X))}),L=Object(f.makeStructureNS)(g,["ele","time"]),w=Object(f.makeStructureNS)(g,["name","cmt","desc","src","link","number","type","trkseg"]),A=Object(f.makeStructureNS)(g,{name:Object(f.makeChildAppender)(s.n),cmt:Object(f.makeChildAppender)(s.n),desc:Object(f.makeChildAppender)(s.n),src:Object(f.makeChildAppender)(s.n),link:Object(f.makeChildAppender)(Y),number:Object(f.makeChildAppender)(s.m),type:Object(f.makeChildAppender)(s.n),trkseg:Object(f.makeArraySerializer)(Object(f.makeChildAppender)(function(t,e,i){var r={node:t};r.geometryLayout=e.getLayout(),r.properties={},Object(f.pushSerializeAndPop)(r,F,M,e.getCoordinates(),i)}))}),M=Object(f.makeSimpleNodeFactory)("trkpt"),F=Object(f.makeStructureNS)(g,{trkpt:Object(f.makeChildAppender)(X)}),k=Object(f.makeStructureNS)(g,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),N=Object(f.makeStructureNS)(g,{ele:Object(f.makeChildAppender)(s.l),time:Object(f.makeChildAppender)(s.k),magvar:Object(f.makeChildAppender)(s.l),geoidheight:Object(f.makeChildAppender)(s.l),name:Object(f.makeChildAppender)(s.n),cmt:Object(f.makeChildAppender)(s.n),desc:Object(f.makeChildAppender)(s.n),src:Object(f.makeChildAppender)(s.n),link:Object(f.makeChildAppender)(Y),sym:Object(f.makeChildAppender)(s.n),type:Object(f.makeChildAppender)(s.n),fix:Object(f.makeChildAppender)(s.n),sat:Object(f.makeChildAppender)(s.m),hdop:Object(f.makeChildAppender)(s.l),vdop:Object(f.makeChildAppender)(s.l),pdop:Object(f.makeChildAppender)(s.l),ageofdgpsdata:Object(f.makeChildAppender)(s.l),dgpsid:Object(f.makeChildAppender)(s.m)}),D={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function G(t,e,i){var r=t.getGeometry();if(r){var n=D[r.getType()];if(n){var o=e[e.length-1].node;return Object(f.createElementNS)(o.namespaceURI,n)}}}function B(t,e,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function U(t,e,i){var r=l.default.XY,n=2;if(t.hasZ&&t.hasM?(r=l.default.XYZM,n=4):t.hasZ?(r=l.default.XYZ,n=3):t.hasM&&(r=l.default.XYM,n=3),4!==n){for(var o=0,a=e.length/4;o<a;o++)e[o*n]=e[4*o],e[o*n+1]=e[4*o+1],t.hasZ&&(e[o*n+2]=e[4*o+2]),t.hasM&&(e[o*n+2]=e[4*o+3]);if(e.length=e.length/4*n,i)for(var s=0,u=i.length;s<u;s++)i[s]=i[s]/4*n}return r}function V(t,e){var i=e[e.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),Object(f.parseNode)(m,t,e)}function W(t,e){e[e.length-1].extensionsNode_=t}function Z(t,e){var i=e[0],n=Object(f.pushParseAndPop)({flatCoordinates:[],layoutOptions:{}},S,t,e);if(n){var a=n.flatCoordinates;delete n.flatCoordinates;var s=n.layoutOptions;delete n.layoutOptions;var l=U(s,a),u=new c.default(a,l);Object(o.transformWithOptions)(u,!1,i);var h=new r.default(u);return h.setProperties(n),h}}function z(t,e){var i=e[0],n=Object(f.pushParseAndPop)({flatCoordinates:[],ends:[],layoutOptions:{}},C,t,e);if(n){var a=n.flatCoordinates;delete n.flatCoordinates;var s=n.ends;delete n.ends;var l=n.layoutOptions;delete n.layoutOptions;var u=U(l,a,s),c=new h.default(a,u,s);Object(o.transformWithOptions)(c,!1,i);var d=new r.default(c);return d.setProperties(n),d}}function H(t,e){var i=e[0],n=Object(f.pushParseAndPop)({},E,t,e);if(n){var a={},s=B([],a,t,n),l=U(a,s),u=new d.default(s,l);Object(o.transformWithOptions)(u,!1,i);var c=new r.default(u);return c.setProperties(n),c}}function Y(t,e,i){t.setAttribute("href",e);var r=i[i.length-1].properties,n=[r.linkText,r.linkType];Object(f.pushSerializeAndPop)({node:t},j,f.OBJECT_PROPERTY_NODE_FACTORY,n,i,P)}function X(t,e,i){var r=i[i.length-1],n=r.node.namespaceURI,o=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case l.default.XYZM:0!==e[3]&&(o.time=e[3]);case l.default.XYZ:0!==e[2]&&(o.ele=e[2]);break;case l.default.XYM:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?L[n]:k[n],s=Object(f.makeSequence)(o,a);Object(f.pushSerializeAndPop)({node:t,properties:o},N,f.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)}e.default=b},function(t,e,i){"use strict";i.r(e);var r=i(23),n=i(36),o=i(33),a=i(189),s=i(130),l=i(39),u=i(54),c=i(82),h=i(88),d=i(38),p=i(34),f=i(11),g=i(9),y=i(5),v=function(t){function e(e){var i=e||{};t.call(this),this.dataProjection=Object(g.get)(i.dataProjection?i.dataProjection:"EPSG:4326"),i.featureProjection&&(this.defaultFeatureProjection=Object(g.get)(i.featureProjection)),this.geometryName_=i.geometryName,this.extractGeometryName_=i.extractGeometryName}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromObject=function(t,e){var i,r=m((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),o=new n.default;return this.geometryName_?o.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&o.setGeometryName(i.geometry_name),o.setGeometry(r),"id"in i&&o.setId(i.id),i.properties&&o.setProperties(i.properties),o},e.prototype.readFeaturesFromObject=function(t,e){var i=null;if("FeatureCollection"===t.type){i=[];for(var r=t.features,n=0,o=r.length;n<o;++n)i.push(this.readFeatureFromObject(r[n],e))}else i=[this.readFeatureFromObject(t,e)];return i},e.prototype.readGeometryFromObject=function(t,e){return m(t,e)},e.prototype.readProjectionFromObject=function(t){var e,i=t.crs;return i?"name"==i.type?e=Object(g.get)(i.properties.name):Object(r.a)(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var i={type:"Feature",geometry:null,properties:null},r=t.getId();void 0!==r&&(i.id=r);var n=t.getGeometry();n&&(i.geometry=_(n,e));var o=t.getProperties();return delete o[t.getGeometryName()],Object(f.isEmpty)(o)||(i.properties=o),i},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}},e.prototype.writeGeometryObject=function(t,e){return _(t,this.adaptOptions(e))},e}(a.a);function m(t,e){if(!t)return null;var i;switch(t.type){case y.default.POINT:i=function(t){return new d.default(t.coordinates)}(t);break;case y.default.LINE_STRING:i=function(t){return new l.default(t.coordinates)}(t);break;case y.default.POLYGON:i=function(t){return new p.default(t.coordinates)}(t);break;case y.default.MULTI_POINT:i=function(t){return new c.default(t.coordinates)}(t);break;case y.default.MULTI_LINE_STRING:i=function(t){return new u.default(t.coordinates)}(t);break;case y.default.MULTI_POLYGON:i=function(t){return new h.default(t.coordinates)}(t);break;case y.default.GEOMETRY_COLLECTION:i=function(t,e){var i=t.geometries.map(function(t){return m(t,void 0)});return new s.default(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Object(o.transformWithOptions)(i,!1,e)}function _(t,e){var i,r=(t=Object(o.transformWithOptions)(t,!0,e)).getType();switch(r){case y.default.POINT:i=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case y.default.LINE_STRING:i=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case y.default.POLYGON:i=function(t,e){var i;return e&&(i=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case y.default.MULTI_POINT:i=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case y.default.MULTI_LINE_STRING:i=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case y.default.MULTI_POLYGON:i=function(t,e){var i;return e&&(i=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case y.default.GEOMETRY_COLLECTION:i=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map(function(t){var i=Object(f.assign)({},e);return delete i.featureProjection,_(t,i)})}}(t,e);break;case y.default.CIRCLE:i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+r)}return i}e.default=v},function(t,e,i){"use strict";i.r(e);var r=i(36),n=i(33),o=i(191),a=i(20),s=i(39),l=i(9),u={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},c=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,h=/^H.([A-Z]{3}).*?:(.*)/,d=/^HFDTE(\d{2})(\d{2})(\d{2})/,p=/\r\n|\r|\n/,f=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=Object(l.get)("EPSG:4326"),this.altitudeMode_=i.altitudeMode?i.altitudeMode:u.NONE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromText=function(t,e){var i,o,l=this.altitudeMode_,f=t.split(p),g={},y=[],v=2e3,m=0,_=1,b=-1;for(i=0,o=f.length;i<o;++i){var S=f[i],O=void 0;if("B"==S.charAt(0)){if(O=c.exec(S)){var C=parseInt(O[1],10),T=parseInt(O[2],10),x=parseInt(O[3],10),E=parseInt(O[4],10)+parseInt(O[5],10)/6e4;"S"==O[6]&&(E=-E);var P=parseInt(O[7],10)+parseInt(O[8],10)/6e4;if("W"==O[9]&&(P=-P),y.push(P,E),l!=u.NONE){var j;j=l==u.GPS?parseInt(O[11],10):l==u.BAROMETRIC?parseInt(O[12],10):0,y.push(j)}var R=Date.UTC(v,m,_,C,T,x);R<b&&(R=Date.UTC(v,m,_+1,C,T,x)),y.push(R/1e3),b=R}}else"H"==S.charAt(0)&&((O=d.exec(S))?(_=parseInt(O[1],10),m=parseInt(O[2],10)-1,v=2e3+parseInt(O[3],10)):(O=h.exec(S))&&(g[O[1]]=O[2].trim()))}if(0===y.length)return null;var I=l==u.NONE?a.default.XYM:a.default.XYZM,L=new s.default(y,I),w=new r.default(Object(n.transformWithOptions)(L,!1,e));return w.setProperties(g),w},e.prototype.readFeaturesFromText=function(t,e){var i=this.readFeatureFromText(t,e);return i?[i]:[]},e}(o.a);e.default=f},function(t,e,i){"use strict";i.r(e),i.d(e,"getDefaultFillStyle",function(){return H}),i.d(e,"getDefaultImageStyle",function(){return q}),i.d(e,"getDefaultStrokeStyle",function(){return Q}),i.d(e,"getDefaultTextStyle",function(){return tt}),i.d(e,"getDefaultStyle",function(){return it}),i.d(e,"getDefaultStyleArray",function(){return nt}),i.d(e,"readFlatCoordinates",function(){return lt});var r,n,o,a,s,l,u,c=i(36),h=i(12),d=i(23),p=i(55),f=i(33),g=i(120),y=i(2),v=i(130),m=i(20),_=i(5),b=i(39),S=i(54),O=i(82),C=i(88),T=i(38),x=i(34),E=i(19),P=i(9),j=i(101),R=i(194),I=i(97),L=i(79),w=i(96),A=i(84),M=i(66),F=i(0),k=["http://www.google.com/kml/ext/2.2"],N=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],D={fraction:I.a.FRACTION,pixels:I.a.PIXELS,insetPixels:I.a.PIXELS},G=Object(F.makeStructureNS)(N,{ExtendedData:Dt,Region:Gt,MultiGeometry:Object(F.makeObjectPropertySetter)(Rt,"geometry"),LineString:Object(F.makeObjectPropertySetter)(Et,"geometry"),LinearRing:Object(F.makeObjectPropertySetter)(Pt,"geometry"),Point:Object(F.makeObjectPropertySetter)(It,"geometry"),Polygon:Object(F.makeObjectPropertySetter)(wt,"geometry"),Style:Object(F.makeObjectPropertySetter)(Mt),StyleMap:function(t,e){var i=dt(t,e);if(i){var r=e[e.length-1];Array.isArray(i)?r.Style=i:"string"==typeof i?r.styleUrl=i:Object(d.a)(!1,38)}},address:Object(F.makeObjectPropertySetter)(y.h),description:Object(F.makeObjectPropertySetter)(y.h),name:Object(F.makeObjectPropertySetter)(y.h),open:Object(F.makeObjectPropertySetter)(y.a),phoneNumber:Object(F.makeObjectPropertySetter)(y.h),styleUrl:Object(F.makeObjectPropertySetter)(ut),visibility:Object(F.makeObjectPropertySetter)(y.a)},Object(F.makeStructureNS)(k,{MultiTrack:Object(F.makeObjectPropertySetter)(function(t,e){var i=Object(F.pushParseAndPop)([],_t,t,e);if(i)return new S.default(i)},"geometry"),Track:Object(F.makeObjectPropertySetter)(St,"geometry")})),B=Object(F.makeStructureNS)(N,{ExtendedData:Dt,Region:Gt,Link:function(t,e){Object(F.parseNode)(U,t,e)},address:Object(F.makeObjectPropertySetter)(y.h),description:Object(F.makeObjectPropertySetter)(y.h),name:Object(F.makeObjectPropertySetter)(y.h),open:Object(F.makeObjectPropertySetter)(y.a),phoneNumber:Object(F.makeObjectPropertySetter)(y.h),visibility:Object(F.makeObjectPropertySetter)(y.a)}),U=Object(F.makeStructureNS)(N,{href:Object(F.makeObjectPropertySetter)(ut)}),V=Object(F.makeStructureNS)(N,{LatLonAltBox:function(t,e){var i=Object(F.pushParseAndPop)({},Vt,t,e);if(i){var r=e[e.length-1],n=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=n,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)}},Lod:function(t,e){var i=Object(F.pushParseAndPop)({},Wt,t,e);if(i){var r=e[e.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}}),W=Object(F.makeStructureNS)(N,["Document","Placemark"]),Z=Object(F.makeStructureNS)(N,{Document:Object(F.makeChildAppender)(function(t,e,i){var r={node:t};Object(F.pushSerializeAndPop)(r,Xt,qt,e,i,void 0,this)}),Placemark:Object(F.makeChildAppender)(_e)}),z=null;function H(){return z}var Y,X=null;function q(){return X}var K,J=null;function Q(){return J}var $=null;function tt(){return $}var et=null;function it(){return et}var rt=null;function nt(){return rt}var ot=function(t){function e(e){t.call(this);var i=e||{};rt||(r=[255,255,255,1],z=new j.default({color:r}),n=[20,2],o=I.a.PIXELS,a=I.a.PIXELS,s=[64,64],l="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",u=.5,X=new R.default({anchor:n,anchorOrigin:L.a.BOTTOM_LEFT,anchorXUnits:o,anchorYUnits:a,crossOrigin:"anonymous",rotation:0,scale:u,size:s,src:l}),Y="NO_IMAGE",J=new w.default({color:r,width:1}),K=new w.default({color:[51,51,51,1],width:2}),$=new M.default({font:"bold 16px Helvetica",fill:z,stroke:K,scale:.8}),et=new A.default({fill:z,image:X,text:$,stroke:J,zIndex:0}),rt=[et]),this.dataProjection=Object(P.get)("EPSG:4326"),this.defaultStyle_=i.defaultStyle?i.defaultStyle:rt,this.extractStyles_=void 0===i.extractStyles||i.extractStyles,this.writeStyles_=void 0===i.writeStyles||i.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===i.showPointNames||i.showPointNames}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readDocumentOrFolder_=function(t,e){var i=Object(F.makeStructureNS)(N,{Document:Object(F.makeArrayExtender)(this.readDocumentOrFolder_,this),Folder:Object(F.makeArrayExtender)(this.readDocumentOrFolder_,this),Placemark:Object(F.makeArrayPusher)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)});return Object(F.pushParseAndPop)([],i,t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var i=Object(F.pushParseAndPop)({geometry:null},G,t,e);if(i){var r=new c.default,n=t.getAttribute("id");null!==n&&r.setId(n);var o=e[0],a=i.geometry;if(a&&Object(f.transformWithOptions)(a,!1,o),r.setGeometry(a),delete i.geometry,this.extractStyles_){var s=function(t,e,i,r,n){return function(o,a){var s,l=n,u="";if(l){var c=o.getGeometry();c&&(l=c.getType()===_.default.POINT)}if(l&&(u=o.get("name"),l=l&&!!u),t)return l?(s=at(t[0],u),t.concat(s)):t;if(e){var h=function t(e,i,r){return Array.isArray(e)?e:"string"==typeof e?(!(e in r)&&"#"+e in r&&(e="#"+e),t(r[e],i,r)):i}(e,i,r);return l?(s=at(h[0],u),h.concat(s)):h}return l?(s=at(i[0],u),i.concat(s)):i}}(i.Style,i.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(s)}return delete i.Style,r.setProperties(i),r}},e.prototype.readSharedStyle_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=Mt(t,e);if(r){var n,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[n]=r}}},e.prototype.readSharedStyleMap_=function(t,e){var i=t.getAttribute("id");if(null!==i){var r=dt(t,e);if(r){var n,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),n=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[n]=r}}},e.prototype.readFeatureFromNode=function(t,e){return Object(h.f)(N,t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){if(!Object(h.f)(N,t.namespaceURI))return[];var i,r=t.localName;if("Document"==r||"Folder"==r)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==r){var n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==r){i=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&Object(h.c)(i,a)}return i}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=Object(F.parse)(t);return this.readNameFromDocument(e)}return Object(F.isDocument)(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var i=this.readNameFromNode(e);if(i)return i}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(Object(h.f)(N,e.namespaceURI)&&"name"==e.localName)return Object(y.h)(e);for(var i=t.firstElementChild;i;i=i.nextElementSibling){var r=i.localName;if(Object(h.f)(N,i.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(i);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var i=Object(F.parse)(t);Object(h.c)(e,this.readNetworkLinksFromDocument(i))}else Object(F.isDocument)(t)?Object(h.c)(e,this.readNetworkLinksFromDocument(t)):Object(h.c)(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Object(h.c)(e,this.readNetworkLinksFromNode(i));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(Object(h.f)(N,i.namespaceURI)&&"NetworkLink"==i.localName){var r=Object(F.pushParseAndPop)({},B,i,[]);e.push(r)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!Object(h.f)(N,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||Object(h.c)(e,this.readNetworkLinksFromNode(n))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var i=Object(F.parse)(t);Object(h.c)(e,this.readRegionFromDocument(i))}else Object(F.isDocument)(t)?Object(h.c)(e,this.readRegionFromDocument(t)):Object(h.c)(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&Object(h.c)(e,this.readRegionFromNode(i));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],i=t.firstElementChild;i;i=i.nextElementSibling)if(Object(h.f)(N,i.namespaceURI)&&"Region"==i.localName){var r=Object(F.pushParseAndPop)({},V,i,[]);e.push(r)}for(var n=t.firstElementChild;n;n=n.nextElementSibling){var o=n.localName;!Object(h.f)(N,n.namespaceURI)||"Document"!=o&&"Folder"!=o&&"kml"!=o||Object(h.c)(e,this.readRegionFromNode(n))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var i=Object(F.createElementNS)(N[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",k[0]),i.setAttributeNS(r,"xmlns:xsi",F.XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(F.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var n={node:i},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=W[i.namespaceURI],s=Object(F.makeSequence)(o,a);return Object(F.pushSerializeAndPop)(n,Z,F.OBJECT_PROPERTY_NODE_FACTORY,s,[e],a,this),i},e}(g.a);function at(t,e){var i=null,r=[0,0],n="start";if(t.getImage()){var o=t.getImage().getImageSize();if(null===o&&(o=s),2==o.length){var a=t.getImage().getScale();r[0]=a*o[0]/2,r[1]=-a*o[1]/2,n="left"}}if(null!==t.getText()){var l=t.getText();(i=l.clone()).setFont(l.getFont()||$.getFont()),i.setScale(l.getScale()||$.getScale()),i.setFill(l.getFill()||$.getFill()),i.setStroke(l.getStroke()||K)}else i=$.clone();return i.setText(e),i.setOffsetX(r[0]),i.setOffsetY(r[1]),i.setTextAlign(n),new A.default({text:i})}function st(t){var e=Object(F.getAllTextContent)(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){var r=i[1];return[parseInt(r.substr(6,2),16),parseInt(r.substr(4,2),16),parseInt(r.substr(2,2),16),parseInt(r.substr(0,2),16)/255]}}function lt(t){for(var e,i=Object(F.getAllTextContent)(t,!1),r=[],n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=n.exec(i);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;r.push(o,a,s),i=i.substr(e[0].length)}if(""===i)return r}function ut(t){var e=Object(F.getAllTextContent)(t,!1).trim(),i=t.baseURI;return i&&"about:blank"!=i||(i=window.location.href),i?new URL(e,i).href:e}function ct(t){return Object(y.d)(t)}var ht=Object(F.makeStructureNS)(N,{Pair:function(t,e){var i=Object(F.pushParseAndPop)({},Bt,t,e);if(i){var r=i.key;if(r&&"normal"==r){var n=i.styleUrl;n&&(e[e.length-1]=n);var o=i.Style;o&&(e[e.length-1]=o)}}}});function dt(t,e){return Object(F.pushParseAndPop)(void 0,ht,t,e)}var pt=Object(F.makeStructureNS)(N,{Icon:Object(F.makeObjectPropertySetter)(function(t,e){return Object(F.pushParseAndPop)({},Ot,t,e)||null}),heading:Object(F.makeObjectPropertySetter)(y.d),hotSpot:Object(F.makeObjectPropertySetter)(function(t){var e,i=t.getAttribute("xunits"),r=t.getAttribute("yunits");return e="insetPixels"!==i?"insetPixels"!==r?L.a.BOTTOM_LEFT:L.a.TOP_LEFT:"insetPixels"!==r?L.a.BOTTOM_RIGHT:L.a.TOP_RIGHT,{x:parseFloat(t.getAttribute("x")),xunits:D[i],y:parseFloat(t.getAttribute("y")),yunits:D[r],origin:e}}),scale:Object(F.makeObjectPropertySetter)(ct)}),ft=Object(F.makeStructureNS)(N,{color:Object(F.makeObjectPropertySetter)(st),scale:Object(F.makeObjectPropertySetter)(ct)}),gt=Object(F.makeStructureNS)(N,{color:Object(F.makeObjectPropertySetter)(st),width:Object(F.makeObjectPropertySetter)(y.d)}),yt=Object(F.makeStructureNS)(N,{color:Object(F.makeObjectPropertySetter)(st),fill:Object(F.makeObjectPropertySetter)(y.a),outline:Object(F.makeObjectPropertySetter)(y.a)}),vt=Object(F.makeStructureNS)(N,{coordinates:Object(F.makeReplacer)(lt)});function mt(t,e){return Object(F.pushParseAndPop)(null,vt,t,e)}var _t=Object(F.makeStructureNS)(k,{Track:Object(F.makeArrayPusher)(St)}),bt=Object(F.makeStructureNS)(N,{when:function(t,e){var i=e[e.length-1].whens,r=Object(F.getAllTextContent)(t,!1),n=Date.parse(r);i.push(isNaN(n)?0:n)}},Object(F.makeStructureNS)(k,{coord:function(t,e){var i=e[e.length-1].flatCoordinates,r=Object(F.getAllTextContent)(t,!1),n=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(n){var o=parseFloat(n[1]),a=parseFloat(n[2]),s=parseFloat(n[3]);i.push(o,a,s,0)}else i.push(0,0,0,0)}}));function St(t,e){var i=Object(F.pushParseAndPop)({flatCoordinates:[],whens:[]},bt,t,e);if(i){for(var r=i.flatCoordinates,n=i.whens,o=0,a=Math.min(r.length,n.length);o<a;++o)r[4*o+3]=n[o];return new b.default(r,m.default.XYZM)}}var Ot=Object(F.makeStructureNS)(N,{href:Object(F.makeObjectPropertySetter)(ut)},Object(F.makeStructureNS)(k,{x:Object(F.makeObjectPropertySetter)(y.d),y:Object(F.makeObjectPropertySetter)(y.d),w:Object(F.makeObjectPropertySetter)(y.d),h:Object(F.makeObjectPropertySetter)(y.d)})),Ct=Object(F.makeStructureNS)(N,{coordinates:Object(F.makeReplacer)(lt)});function Tt(t,e){return Object(F.pushParseAndPop)(null,Ct,t,e)}var xt=Object(F.makeStructureNS)(N,{extrude:Object(F.makeObjectPropertySetter)(y.a),tessellate:Object(F.makeObjectPropertySetter)(y.a),altitudeMode:Object(F.makeObjectPropertySetter)(y.h)});function Et(t,e){var i=Object(F.pushParseAndPop)({},xt,t,e),r=Tt(t,e);if(r){var n=new b.default(r,m.default.XYZ);return n.setProperties(i),n}}function Pt(t,e){var i=Object(F.pushParseAndPop)({},xt,t,e),r=Tt(t,e);if(r){var n=new x.default(r,m.default.XYZ,[r.length]);return n.setProperties(i),n}}var jt=Object(F.makeStructureNS)(N,{LineString:Object(F.makeArrayPusher)(Et),LinearRing:Object(F.makeArrayPusher)(Pt),MultiGeometry:Object(F.makeArrayPusher)(Rt),Point:Object(F.makeArrayPusher)(It),Polygon:Object(F.makeArrayPusher)(wt)});function Rt(t,e){var i,r=Object(F.pushParseAndPop)([],jt,t,e);if(!r)return null;if(0===r.length)return new v.default(r);for(var n,o,a,s=!0,l=r[0].getType(),u=1,c=r.length;u<c;++u)if((n=r[u]).getType()!=l){s=!1;break}if(s)if(l==_.default.POINT){var p=r[0];o=p.getLayout(),a=p.getFlatCoordinates();for(var f=1,g=r.length;f<g;++f)n=r[f],Object(h.c)(a,n.getFlatCoordinates());Ft(i=new O.default(a,o),r)}else l==_.default.LINE_STRING?Ft(i=new S.default(r),r):l==_.default.POLYGON?Ft(i=new C.default(r),r):l==_.default.GEOMETRY_COLLECTION?i=new v.default(r):Object(d.a)(!1,37);else i=new v.default(r);return i}function It(t,e){var i=Object(F.pushParseAndPop)({},xt,t,e),r=Tt(t,e);if(r){var n=new T.default(r,m.default.XYZ);return n.setProperties(i),n}}var Lt=Object(F.makeStructureNS)(N,{innerBoundaryIs:function(t,e){var i=Object(F.pushParseAndPop)(void 0,Zt,t,e);i&&e[e.length-1].push(i)},outerBoundaryIs:function(t,e){var i=Object(F.pushParseAndPop)(void 0,zt,t,e);i&&(e[e.length-1][0]=i)}});function wt(t,e){var i=Object(F.pushParseAndPop)({},xt,t,e),r=Object(F.pushParseAndPop)([null],Lt,t,e);if(r&&r[0]){for(var n=r[0],o=[n.length],a=1,s=r.length;a<s;++a)Object(h.c)(n,r[a]),o.push(n.length);var l=new x.default(n,m.default.XYZ,o);return l.setProperties(i),l}}var At=Object(F.makeStructureNS)(N,{IconStyle:function(t,e){var i=Object(F.pushParseAndPop)({},pt,t,e);if(i){var r,c,h,d,p=e[e.length-1],f="Icon"in i?i.Icon:{},g=!("Icon"in i)||Object.keys(f).length>0,y=f.href;y?r=y:g&&(r=l);var v,m=L.a.BOTTOM_LEFT,_=i.hotSpot;_?(c=[_.x,_.y],h=_.xunits,d=_.yunits,m=_.origin):r===l?(c=n,h=o,d=a):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(r)&&(c=[.5,0],h=I.a.FRACTION,d=I.a.FRACTION);var b,S=f.x,O=f.y;void 0!==S&&void 0!==O&&(v=[S,O]);var C,T=f.w,x=f.h;void 0!==T&&void 0!==x&&(b=[T,x]);var P=i.heading;void 0!==P&&(C=Object(E.j)(P));var j=i.scale;if(g){r==l&&(b=s,void 0===j&&(j=u));var w=new R.default({anchor:c,anchorOrigin:m,anchorXUnits:h,anchorYUnits:d,crossOrigin:"anonymous",offset:v,offsetOrigin:L.a.BOTTOM_LEFT,rotation:C,scale:j,size:b,src:r});p.imageStyle=w}else p.imageStyle=Y}},LabelStyle:function(t,e){var i=Object(F.pushParseAndPop)({},ft,t,e);if(i){var n=e[e.length-1],o=new M.default({fill:new j.default({color:"color"in i?i.color:r}),scale:i.scale});n.textStyle=o}},LineStyle:function(t,e){var i=Object(F.pushParseAndPop)({},gt,t,e);if(i){var n=e[e.length-1],o=new w.default({color:"color"in i?i.color:r,width:"width"in i?i.width:1});n.strokeStyle=o}},PolyStyle:function(t,e){var i=Object(F.pushParseAndPop)({},yt,t,e);if(i){var n=e[e.length-1],o=new j.default({color:"color"in i?i.color:r});n.fillStyle=o;var a=i.fill;void 0!==a&&(n.fill=a);var s=i.outline;void 0!==s&&(n.outline=s)}}});function Mt(t,e){var i=Object(F.pushParseAndPop)({},At,t,e);if(!i)return null;var r,n="fillStyle"in i?i.fillStyle:z,o=i.fill;void 0===o||o||(n=null),"imageStyle"in i?i.imageStyle!=Y&&(r=i.imageStyle):r=X;var a="textStyle"in i?i.textStyle:$,s="strokeStyle"in i?i.strokeStyle:J,l=i.outline;return void 0===l||l||(s=null),[new A.default({fill:n,image:r,stroke:s,text:a,zIndex:void 0})]}function Ft(t,e){var i,r,n,o=e.length,a=new Array(e.length),s=new Array(e.length),l=new Array(e.length);i=r=n=!1;for(var u=0;u<o;++u){var c=e[u];a[u]=c.get("extrude"),s[u]=c.get("tessellate"),l[u]=c.get("altitudeMode"),i=i||void 0!==a[u],r=r||void 0!==s[u],n=n||l[u]}i&&t.set("extrude",a),r&&t.set("tessellate",s),n&&t.set("altitudeMode",l)}var kt=Object(F.makeStructureNS)(N,{displayName:Object(F.makeObjectPropertySetter)(y.h),value:Object(F.makeObjectPropertySetter)(y.h)}),Nt=Object(F.makeStructureNS)(N,{Data:function(t,e){var i=t.getAttribute("name");Object(F.parseNode)(kt,t,e);var r=e[e.length-1];null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){Object(F.parseNode)(Ut,t,e)}});function Dt(t,e){Object(F.parseNode)(Nt,t,e)}function Gt(t,e){Object(F.parseNode)(V,t,e)}var Bt=Object(F.makeStructureNS)(N,{Style:Object(F.makeObjectPropertySetter)(Mt),key:Object(F.makeObjectPropertySetter)(y.h),styleUrl:Object(F.makeObjectPropertySetter)(ut)}),Ut=Object(F.makeStructureNS)(N,{SimpleData:function(t,e){var i=t.getAttribute("name");if(null!==i){var r=Object(y.h)(t);e[e.length-1][i]=r}}}),Vt=Object(F.makeStructureNS)(N,{altitudeMode:Object(F.makeObjectPropertySetter)(y.h),minAltitude:Object(F.makeObjectPropertySetter)(y.d),maxAltitude:Object(F.makeObjectPropertySetter)(y.d),north:Object(F.makeObjectPropertySetter)(y.d),south:Object(F.makeObjectPropertySetter)(y.d),east:Object(F.makeObjectPropertySetter)(y.d),west:Object(F.makeObjectPropertySetter)(y.d)}),Wt=Object(F.makeStructureNS)(N,{minLodPixels:Object(F.makeObjectPropertySetter)(y.d),maxLodPixels:Object(F.makeObjectPropertySetter)(y.d),minFadeExtent:Object(F.makeObjectPropertySetter)(y.d),maxFadeExtent:Object(F.makeObjectPropertySetter)(y.d)}),Zt=Object(F.makeStructureNS)(N,{LinearRing:Object(F.makeReplacer)(mt)}),zt=Object(F.makeStructureNS)(N,{LinearRing:Object(F.makeReplacer)(mt)});function Ht(t,e){for(var i=Object(p.asArray)(e),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]],n=0;n<4;++n){var o=Math.floor(r[n]).toString(16);r[n]=1==o.length?"0"+o:o}Object(y.n)(t,r.join(""))}var Yt=Object(F.makeStructureNS)(N,{Data:Object(F.makeChildAppender)(function(t,e,i){t.setAttribute("name",e.name);var r={node:t},n=e.value;"object"==typeof n?(null!==n&&n.displayName&&Object(F.pushSerializeAndPop)(r,Yt,F.OBJECT_PROPERTY_NODE_FACTORY,[n.displayName],i,["displayName"]),null!==n&&n.value&&Object(F.pushSerializeAndPop)(r,Yt,F.OBJECT_PROPERTY_NODE_FACTORY,[n.value],i,["value"])):Object(F.pushSerializeAndPop)(r,Yt,F.OBJECT_PROPERTY_NODE_FACTORY,[n],i,["value"])}),value:Object(F.makeChildAppender)(function(t,e){Object(y.n)(t,e)}),displayName:Object(F.makeChildAppender)(function(t,e){Object(y.j)(t,e)})}),Xt=Object(F.makeStructureNS)(N,{Placemark:Object(F.makeChildAppender)(_e)}),qt=function(t,e,i){var r=e[e.length-1].node;return Object(F.createElementNS)(r.namespaceURI,"Placemark")},Kt=Object(F.makeSimpleNodeFactory)("Data"),Jt=Object(F.makeStructureNS)(N,["href"],Object(F.makeStructureNS)(k,["x","y","w","h"])),Qt=Object(F.makeStructureNS)(N,{href:Object(F.makeChildAppender)(y.n)},Object(F.makeStructureNS)(k,{x:Object(F.makeChildAppender)(y.l),y:Object(F.makeChildAppender)(y.l),w:Object(F.makeChildAppender)(y.l),h:Object(F.makeChildAppender)(y.l)})),$t=function(t,e,i){return Object(F.createElementNS)(k[0],"gx:"+i)},te=Object(F.makeStructureNS)(N,["scale","heading","Icon","hotSpot"]),ee=Object(F.makeStructureNS)(N,{Icon:Object(F.makeChildAppender)(function(t,e,i){var r={node:t},n=i[i.length-1].node,o=Jt[n.namespaceURI],a=Object(F.makeSequence)(e,o);Object(F.pushSerializeAndPop)(r,Qt,F.OBJECT_PROPERTY_NODE_FACTORY,a,i,o),o=Jt[k[0]],a=Object(F.makeSequence)(e,o),Object(F.pushSerializeAndPop)(r,Qt,$t,a,i,o)}),heading:Object(F.makeChildAppender)(y.l),hotSpot:Object(F.makeChildAppender)(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:Object(F.makeChildAppender)(Re)}),ie=Object(F.makeStructureNS)(N,["color","scale"]),re=Object(F.makeStructureNS)(N,{color:Object(F.makeChildAppender)(Ht),scale:Object(F.makeChildAppender)(Re)}),ne=Object(F.makeStructureNS)(N,["color","width"]),oe=Object(F.makeStructureNS)(N,{color:Object(F.makeChildAppender)(Ht),width:Object(F.makeChildAppender)(y.l)}),ae={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},se=function(t,e,i){if(t){var r=e[e.length-1].node;return Object(F.createElementNS)(r.namespaceURI,ae[t.getType()])}},le=Object(F.makeSimpleNodeFactory)("Point"),ue=Object(F.makeSimpleNodeFactory)("LineString"),ce=Object(F.makeSimpleNodeFactory)("LinearRing"),he=Object(F.makeSimpleNodeFactory)("Polygon"),de=Object(F.makeStructureNS)(N,{LineString:Object(F.makeChildAppender)(Oe),Point:Object(F.makeChildAppender)(Oe),Polygon:Object(F.makeChildAppender)(Ee),GeometryCollection:Object(F.makeChildAppender)(pe)});function pe(t,e,i){var r,n,o={node:t},a=e.getType();a==_.default.GEOMETRY_COLLECTION?(r=e.getGeometries(),n=se):a==_.default.MULTI_POINT?(r=e.getPoints(),n=le):a==_.default.MULTI_LINE_STRING?(r=e.getLineStrings(),n=ue):a==_.default.MULTI_POLYGON?(r=e.getPolygons(),n=he):Object(d.a)(!1,39),Object(F.pushSerializeAndPop)(o,de,n,r,i)}var fe=Object(F.makeStructureNS)(N,{LinearRing:Object(F.makeChildAppender)(Oe)});function ge(t,e,i){var r={node:t};Object(F.pushSerializeAndPop)(r,fe,ce,[e],i)}var ye=Object(F.makeStructureNS)(N,{ExtendedData:Object(F.makeChildAppender)(function(t,e,i){for(var r={node:t},n=e.names,o=e.values,a=n.length,s=0;s<a;s++)Object(F.pushSerializeAndPop)(r,Yt,Kt,[{name:n[s],value:o[s]}],i)}),MultiGeometry:Object(F.makeChildAppender)(pe),LineString:Object(F.makeChildAppender)(Oe),LinearRing:Object(F.makeChildAppender)(Oe),Point:Object(F.makeChildAppender)(Oe),Polygon:Object(F.makeChildAppender)(Ee),Style:Object(F.makeChildAppender)(function(t,e,i){var r={node:t},n={},o=e.getFill(),a=e.getStroke(),s=e.getImage(),l=e.getText();s&&"function"==typeof s.getSrc&&(n.IconStyle=s),l&&(n.LabelStyle=l),a&&(n.LineStyle=a),o&&(n.PolyStyle=o);var u=i[i.length-1].node,c=Ie[u.namespaceURI],h=Object(F.makeSequence)(n,c);Object(F.pushSerializeAndPop)(r,Le,F.OBJECT_PROPERTY_NODE_FACTORY,h,i,c)}),address:Object(F.makeChildAppender)(y.n),description:Object(F.makeChildAppender)(y.n),name:Object(F.makeChildAppender)(y.n),open:Object(F.makeChildAppender)(y.i),phoneNumber:Object(F.makeChildAppender)(y.n),styleUrl:Object(F.makeChildAppender)(y.n),visibility:Object(F.makeChildAppender)(y.i)}),ve=Object(F.makeStructureNS)(N,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),me=Object(F.makeSimpleNodeFactory)("ExtendedData");function _e(t,e,i){var r={node:t};e.getId()&&t.setAttribute("id",e.getId());var n=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(n||{}).sort().filter(function(t){return!o[t]});if(a.length>0){var s={names:a,values:Object(F.makeSequence)(n,a)};Object(F.pushSerializeAndPop)(r,ye,me,[s],i)}var l=e.getStyleFunction();if(l){var u=l(e,0);if(u){var c=Array.isArray(u)?u[0]:u;this.writeStyles_&&(n.Style=c);var h=c.getText();h&&(n.name=h.getText())}}var d=i[i.length-1].node,p=ve[d.namespaceURI],g=Object(F.makeSequence)(n,p);Object(F.pushSerializeAndPop)(r,ye,F.OBJECT_PROPERTY_NODE_FACTORY,g,i,p);var y=i[0],v=e.getGeometry();v&&(v=Object(f.transformWithOptions)(v,!0,y)),Object(F.pushSerializeAndPop)(r,ye,se,[v],i)}var be=Object(F.makeStructureNS)(N,["extrude","tessellate","altitudeMode","coordinates"]),Se=Object(F.makeStructureNS)(N,{extrude:Object(F.makeChildAppender)(y.i),tessellate:Object(F.makeChildAppender)(y.i),altitudeMode:Object(F.makeChildAppender)(y.n),coordinates:Object(F.makeChildAppender)(function(t,e,i){var r,n=i[i.length-1],o=n.layout,a=n.stride;o==m.default.XY||o==m.default.XYM?r=2:o==m.default.XYZ||o==m.default.XYZM?r=3:Object(d.a)(!1,34);var s=e.length,l="";if(s>0){l+=e[0];for(var u=1;u<r;++u)l+=","+e[u];for(var c=a;c<s;c+=a){l+=" "+e[c];for(var h=1;h<r;++h)l+=","+e[c+h]}}Object(y.n)(t,l)})});function Oe(t,e,i){var r=e.getFlatCoordinates(),n={node:t};n.layout=e.getLayout(),n.stride=e.getStride();var o=e.getProperties();o.coordinates=r;var a=i[i.length-1].node,s=be[a.namespaceURI],l=Object(F.makeSequence)(o,s);Object(F.pushSerializeAndPop)(n,Se,F.OBJECT_PROPERTY_NODE_FACTORY,l,i,s)}var Ce=Object(F.makeStructureNS)(N,{outerBoundaryIs:Object(F.makeChildAppender)(ge),innerBoundaryIs:Object(F.makeChildAppender)(ge)}),Te=Object(F.makeSimpleNodeFactory)("innerBoundaryIs"),xe=Object(F.makeSimpleNodeFactory)("outerBoundaryIs");function Ee(t,e,i){var r=e.getLinearRings(),n=r.shift(),o={node:t};Object(F.pushSerializeAndPop)(o,Ce,Te,r,i),Object(F.pushSerializeAndPop)(o,Ce,xe,[n],i)}var Pe=Object(F.makeStructureNS)(N,{color:Object(F.makeChildAppender)(Ht)}),je=Object(F.makeSimpleNodeFactory)("color");function Re(t,e){Object(y.l)(t,Math.round(1e6*e)/1e6)}var Ie=Object(F.makeStructureNS)(N,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Le=Object(F.makeStructureNS)(N,{IconStyle:Object(F.makeChildAppender)(function(t,e,i){var r={node:t},n={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),l={href:o};if(a){l.w=a[0],l.h=a[1];var u=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(l.x=c[0],l.y=s[1]-(c[1]+a[1])),u&&(u[0]!==a[0]/2||u[1]!==a[1]/2)){var h={x:u[0],xunits:I.a.PIXELS,y:a[1]-u[1],yunits:I.a.PIXELS};n.hotSpot=h}}n.Icon=l;var d=e.getScale();1!==d&&(n.scale=d);var p=e.getRotation();0!==p&&(n.heading=p);var f=i[i.length-1].node,g=te[f.namespaceURI],y=Object(F.makeSequence)(n,g);Object(F.pushSerializeAndPop)(r,ee,F.OBJECT_PROPERTY_NODE_FACTORY,y,i,g)}),LabelStyle:Object(F.makeChildAppender)(function(t,e,i){var r={node:t},n={},o=e.getFill();o&&(n.color=o.getColor());var a=e.getScale();a&&1!==a&&(n.scale=a);var s=i[i.length-1].node,l=ie[s.namespaceURI],u=Object(F.makeSequence)(n,l);Object(F.pushSerializeAndPop)(r,re,F.OBJECT_PROPERTY_NODE_FACTORY,u,i,l)}),LineStyle:Object(F.makeChildAppender)(function(t,e,i){var r={node:t},n={color:e.getColor(),width:e.getWidth()},o=i[i.length-1].node,a=ne[o.namespaceURI],s=Object(F.makeSequence)(n,a);Object(F.pushSerializeAndPop)(r,oe,F.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)}),PolyStyle:Object(F.makeChildAppender)(function(t,e,i){var r={node:t};Object(F.pushSerializeAndPop)(r,Pe,je,[e.getColor()],i)})});e.default=ot},function(t,e,i){"use strict";i.r(e);var r=i(23),n=i(451),o=i.n(n),a=i(33),s=i(108),l=i(20),u=i(5),c=i(39),h=i(54),d=i(82),p=i(88),f=i(38),g=i(34),y=i(93),v=i(127),m=i(49),_=i(264),b=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=new v.default({code:"",units:m.default.TILE_PIXELS}),this.featureClass_=i.featureClass?i.featureClass:_.default,this.geometryName_=i.geometryName,this.layerName_=i.layerName?i.layerName:"layer",this.layers_=i.layers?i.layers:null,this.extent_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readRawGeometry_=function(t,e,i,n){t.pos=e.geometry;for(var o=t.readVarint()+t.pos,a=1,s=0,l=0,u=0,c=0,h=0;t.pos<o;){if(!s){var d=t.readVarint();a=7&d,s=d>>3}s--,1===a||2===a?(l+=t.readSVarint(),u+=t.readSVarint(),1===a&&c>h&&(n.push(c),h=c),i.push(l,u),c+=2):7===a?c>h&&(i.push(i[h],i[h+1]),c+=2):Object(r.a)(!1,59)}c>h&&(n.push(c),h=c)},e.prototype.createFeature_=function(t,e,i){var r,n=e.type;if(0===n)return null;var o=e.id,s=e.properties;s[this.layerName_]=e.layer.name;var v=[],m=[];this.readRawGeometry_(t,e,v,m);var b=function(t,e){var i;return 1===t?i=1===e?u.default.POINT:u.default.MULTI_POINT:2===t?i=1===e?u.default.LINE_STRING:u.default.MULTI_LINE_STRING:3===t&&(i=u.default.POLYGON),i}(n,m.length);if(this.featureClass_===_.default)r=new this.featureClass_(b,v,m,s,o);else{var S;if(b==u.default.POLYGON){for(var O=[],C=0,T=0,x=0,E=m.length;x<E;++x){var P=m[x];Object(y.a)(v,C,P,2)||(O.push(m.slice(T,x)),T=x),C=P}S=O.length>1?new p.default(v,l.default.XY,O):new g.default(v,l.default.XY,m)}else S=b===u.default.POINT?new f.default(v,l.default.XY):b===u.default.LINE_STRING?new c.default(v,l.default.XY):b===u.default.POLYGON?new g.default(v,l.default.XY,m):b===u.default.MULTI_POINT?new d.default(v,l.default.XY):b===u.default.MULTI_LINE_STRING?new h.default(v,l.default.XY,m):null;r=new(0,this.featureClass_),this.geometryName_&&r.setGeometryName(this.geometryName_);var j=Object(a.transformWithOptions)(S,!1,this.adaptOptions(i));r.setGeometry(j),r.setId(o),r.setProperties(s)}return r},e.prototype.getLastExtent=function(){return this.extent_},e.prototype.getType=function(){return s.a.ARRAY_BUFFER},e.prototype.readFeatures=function(t,e){var i=this.layers_,r=new o.a(t),n=r.readFields(S,{}),a=[];for(var s in n)if(!i||-1!=i.indexOf(s)){for(var l=n[s],u=0,c=l.length;u<c;++u){var h=T(r,l,u);a.push(this.createFeature_(r,h))}this.extent_=l?[0,0,l.extent,l.extent]:null}return a},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(a.default);function S(t,e,i){if(3===t){var r={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(O,r,n),r.length=r.features.length,r.length&&(e[r.name]=r)}}function O(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){for(var r=null,n=i.readVarint()+i.pos;i.pos<n;)r=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function C(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t)for(var r=i.readVarint()+i.pos;i.pos<r;){var n=e.layer.keys[i.readVarint()],o=e.layer.values[i.readVarint()];e.properties[n]=o}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function T(t,e,i){t.pos=e.features[i];var r=t.readVarint()+t.pos,n={layer:e,type:0,properties:{}};return t.readFields(C,n,r),n}e.default=b},function(t,e){e.read=function(t,e,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=i?n-1:0,d=i?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,i,r,n,o){var a,s,l,u=8*o-n-1,c=(1<<u)-1,h=c>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*l-1)*Math.pow(2,n),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;t[i+p]=255&s,p+=f,s/=256,n-=8);for(a=a<<n|s,u+=n;u>0;t[i+p]=255&a,p+=f,a/=256,u-=8);t[i+p-f]|=128*g}},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(36),o=i(33),a=i(120),s=i(20),l=i(39),u=i(38),c=i(34),h=i(11),d=i(9),p=i(0),f=[null],g=Object(p.makeStructureNS)(f,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:_}),y=Object(p.makeStructureNS)(f,{node:function(t,e){var i=e[0],r=e[e.length-1],a=t.getAttribute("id"),s=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];r.nodes[a]=s;var l=Object(p.pushParseAndPop)({tags:{}},m,t,e);if(!Object(h.isEmpty)(l.tags)){var c=new u.default(s);Object(o.transformWithOptions)(c,!1,i);var d=new n.default(c);d.setId(a),d.setProperties(l.tags),r.features.push(d)}},way:function(t,e){var i=t.getAttribute("id"),r=Object(p.pushParseAndPop)({id:i,ndrefs:[],tags:{}},g,t,e);e[e.length-1].ways.push(r)}}),v=function(t){function e(){t.call(this),this.dataProjection=Object(d.get)("EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromNode=function(t,e){var i=this.getReadOptions(t,e);if("osm"==t.localName){for(var a=Object(p.pushParseAndPop)({nodes:{},ways:[],features:[]},y,t,[i]),u=0;u<a.ways.length;u++){for(var h=a.ways[u],d=[],f=0,g=h.ndrefs.length;f<g;f++){var v=a.nodes[h.ndrefs[f]];Object(r.c)(d,v)}var m;m=h.ndrefs[0]==h.ndrefs[h.ndrefs.length-1]?new c.default(d,s.default.XY,[d.length]):new l.default(d,s.default.XY),Object(o.transformWithOptions)(m,!1,i);var _=new n.default(m);_.setId(h.id),_.setProperties(h.tags),a.features.push(_)}if(a.features)return a.features}return[]},e}(a.a),m=Object(p.makeStructureNS)(f,{tag:_});function _(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}e.default=v},function(t,e,i){"use strict";i.r(e);var r=i(36),n=i(33),o=i(189),a=i(39),s=i(54),l=i(82),u=i(88),c=i(38),h=i(34),d=i(9),p=function(t){function e(e){t.call(this);var i=e||{};this.layerName_=i.layerName,this.layers_=i.layers?i.layers:null,this.dataProjection=Object(d.get)(i.dataProjection?i.dataProjection:"EPSG:4326")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var i,r=t,n=null,o=null;r.transform&&(n=(i=r.transform).scale,o=i.translate);var a=r.arcs;i&&function(t,e,i){for(var r=0,n=t.length;r<n;++r)m(t[r],e,i)}(a,n,o);var s,l=[],u=r.objects,c=this.layerName_;for(var h in u)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===u[h].type?(s=u[h],l.push.apply(l,y(s,a,n,o,c,h,e))):(s=u[h],l.push(v(s,a,n,o,c,h,e))));return l}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(o.a),f={Point:function(t,e,i){var r=t.coordinates;return e&&i&&_(r,e,i),new c.default(r)},LineString:function(t,e){var i=g(t.arcs,e);return new a.default(i)},Polygon:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r)i[r]=g(t.arcs[r],e);return new h.default(i)},MultiPoint:function(t,e,i){var r=t.coordinates;if(e&&i)for(var n=0,o=r.length;n<o;++n)_(r[n],e,i);return new l.default(r)},MultiLineString:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r)i[r]=g(t.arcs[r],e);return new s.default(i)},MultiPolygon:function(t,e){for(var i=[],r=0,n=t.arcs.length;r<n;++r){for(var o=t.arcs[r],a=[],s=0,l=o.length;s<l;++s)a[s]=g(o[s],e);i[r]=a}return new u.default(i)}};function g(t,e){for(var i,r,n=[],o=0,a=t.length;o<a;++o)i=t[o],o>0&&n.pop(),r=i>=0?e[i]:e[~i].slice().reverse(),n.push.apply(n,r);for(var s=0,l=n.length;s<l;++s)n[s]=n[s].slice();return n}function y(t,e,i,r,n,o,a){for(var s=t.geometries,l=[],u=0,c=s.length;u<c;++u)l[u]=v(s[u],e,i,r,n,o,a);return l}function v(t,e,i,o,a,s,l){var u,c=t.type,h=f[c];u="Point"===c||"MultiPoint"===c?h(t,i,o):h(t,e);var d=new r.default;d.setGeometry(Object(n.transformWithOptions)(u,!1,l)),void 0!==t.id&&d.setId(t.id);var p=t.properties;return a&&(p||(p={}),p[a]=s),p&&d.setProperties(p),d}function m(t,e,i){for(var r=0,n=0,o=0,a=t.length;o<a;++o){var s=t[o];r+=s[0],n+=s[1],s[0]=r,s[1]=n,_(s,e,i)}}function _(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}e.default=p},function(t,e,i){"use strict";i.r(e),i.d(e,"writeFilter",function(){return N});var r=i(23),n=i(190),o=i(62),a=i(44),s=i(267),l=i(120),u=i(2),c=i(11),h=i(9),d=i(0),p={"http://www.opengis.net/gml":{boundedBy:Object(d.makeObjectPropertySetter)(a.default.prototype.readGeometryElement,"bounds")}},f={"http://www.opengis.net/wfs":{totalInserted:Object(d.makeObjectPropertySetter)(u.f),totalUpdated:Object(d.makeObjectPropertySetter)(u.f),totalDeleted:Object(d.makeObjectPropertySetter)(u.f)}},g={"http://www.opengis.net/wfs":{TransactionSummary:Object(d.makeObjectPropertySetter)(function(t,e){return Object(d.pushParseAndPop)({},f,t,e)},"transactionSummary"),InsertResults:Object(d.makeObjectPropertySetter)(function(t,e){return Object(d.pushParseAndPop)([],E,t,e)},"insertIds")}},y={"http://www.opengis.net/wfs":{PropertyName:Object(d.makeChildAppender)(u.n)}},v={"http://www.opengis.net/wfs":{Insert:Object(d.makeChildAppender)(function(t,e,i){var r=i[i.length-1],a=r.featureType,s=r.featureNS,l=r.gmlVersion,u=Object(d.createElementNS)(s,a);t.appendChild(u),2===l?n.default.prototype.writeFeatureElement(u,e,i):o.default.prototype.writeFeatureElement(u,e,i)}),Update:Object(d.makeChildAppender)(function(t,e,i){var n=i[i.length-1];Object(r.a)(void 0!==e.getId(),27);var o=n.featureType,a=n.featurePrefix,s=n.featureNS,l=j(a,o),u=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(_,"xmlns:"+a,s);var c=e.getId();if(void 0!==c){for(var h=e.getKeys(),p=[],f=0,g=h.length;f<g;f++){var y=e.get(h[f]);if(void 0!==y){var m=h[f];y&&"function"==typeof y.getSimplifiedGeometry&&(m=u),p.push({name:m,value:y})}}Object(d.pushSerializeAndPop)({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},v,Object(d.makeSimpleNodeFactory)("Property"),p,i),P(t,c,i)}}),Delete:Object(d.makeChildAppender)(function(t,e,i){var n=i[i.length-1];Object(r.a)(void 0!==e.getId(),26);var o=n.featureType,a=n.featurePrefix,s=n.featureNS,l=j(a,o);t.setAttribute("typeName",l),t.setAttributeNS(_,"xmlns:"+a,s);var u=e.getId();void 0!==u&&P(t,u,i)}),Property:Object(d.makeChildAppender)(function(t,e,i){var r=Object(d.createElementNS)(S,"Name"),a=i[i.length-1].gmlVersion;if(t.appendChild(r),Object(u.n)(r,e.name),void 0!==e.value&&null!==e.value){var s=Object(d.createElementNS)(S,"Value");t.appendChild(s),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===a?n.default.prototype.writeGeometryElement(s,e.value,i):o.default.prototype.writeGeometryElement(s,e.value,i):Object(u.n)(s,e.value)}}),Native:Object(d.makeChildAppender)(function(t,e,i){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&Object(u.n)(t,e.value)})}},m="feature",_="http://www.w3.org/2000/xmlns/",b="http://www.opengis.net/ogc",S="http://www.opengis.net/wfs",O={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},C="1.1.0",T=function(t){function e(e){t.call(this);var i=e||{};this.featureType_=i.featureType,this.featureNS_=i.featureNS,this.gmlFormat_=i.gmlFormat?i.gmlFormat:new o.default,this.schemaLocation_=i.schemaLocation?i.schemaLocation:O[C]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var i={node:t};Object(c.assign)(i,{featureType:this.featureType_,featureNS:this.featureNS_}),Object(c.assign)(i,this.getReadOptions(t,e||{}));var r=[i];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[a.GMLNS].featureMember=Object(d.makeArrayPusher)(a.default.prototype.readFeaturesInternal);var n=Object(d.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,r,this.gmlFormat_);return n||(n=[]),n},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=Object(d.parse)(t);return this.readTransactionResponseFromDocument(e)}return Object(d.isDocument)(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=Object(d.parse)(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Object(d.isDocument)(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},i=Object(u.g)(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=i,Object(d.pushParseAndPop)(e,p,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return Object(d.pushParseAndPop)({},g,t,[])},e.prototype.writeGetFeature=function(t){var e,i=Object(d.createElementNS)(S,"GetFeature");if(i.setAttribute("service","WFS"),i.setAttribute("version","1.1.0"),t&&(t.handle&&i.setAttribute("handle",t.handle),t.outputFormat&&i.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&i.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&i.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&i.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&i.setAttribute("count",String(t.count)),void 0!==t.viewParams&&i.setAttribute("viewParams ",t.viewParams),e=t.filter,t.bbox)){Object(r.a)(t.geometryName,12);var n=Object(s.bbox)(t.geometryName,t.bbox,t.srsName);e=e?Object(s.and)(e,n):n}i.setAttributeNS(d.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",this.schemaLocation_);var o={node:i};return Object(c.assign)(o,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),Object(r.a)(Array.isArray(t.featureTypes),11),function(t,e,i){var r=i[i.length-1],n=Object(c.assign)({},r);n.node=t,Object(d.pushSerializeAndPop)(n,R,Object(d.makeSimpleNodeFactory)("Query"),e,i)}(i,t.featureTypes,[o]),i},e.prototype.writeTransaction=function(t,e,i,r){var n,o,a=[],s=Object(d.createElementNS)(S,"Transaction"),l=r.version?r.version:C,u="1.0.0"===l?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",l),r&&(n=r.gmlOptions?r.gmlOptions:{},r.handle&&s.setAttribute("handle",r.handle));var h=O[l];s.setAttributeNS(d.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",h);var p=r.featurePrefix?r.featurePrefix:m;return t&&(o=Object(c.assign)({node:s},{featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,hasZ:r.hasZ,srsName:r.srsName}),Object(c.assign)(o,n),Object(d.pushSerializeAndPop)(o,v,Object(d.makeSimpleNodeFactory)("Insert"),t,a)),e&&(o=Object(c.assign)({node:s},{featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,hasZ:r.hasZ,srsName:r.srsName}),Object(c.assign)(o,n),Object(d.pushSerializeAndPop)(o,v,Object(d.makeSimpleNodeFactory)("Update"),e,a)),i&&Object(d.pushSerializeAndPop)({node:s,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,srsName:r.srsName},v,Object(d.makeSimpleNodeFactory)("Delete"),i,a),r.nativeElements&&Object(d.pushSerializeAndPop)({node:s,featureNS:r.featureNS,featureType:r.featureType,featurePrefix:p,gmlVersion:u,srsName:r.srsName},v,Object(d.makeSimpleNodeFactory)("Native"),r.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var i=[{}];return this.gmlFormat_.readGeometryElement(e,i),Object(h.get)(i.pop().srsName)}return null},e}(l.a),x={"http://www.opengis.net/ogc":{FeatureId:Object(d.makeArrayPusher)(function(t,e){return t.getAttribute("fid")})}},E={"http://www.opengis.net/wfs":{Feature:function(t,e){Object(d.parseNode)(x,t,e)}}};function P(t,e,i){var r=Object(d.createElementNS)(b,"Filter"),n=Object(d.createElementNS)(b,"FeatureId");r.appendChild(n),n.setAttribute("fid",e),t.appendChild(r)}function j(t,e){var i=(t=t||m)+":";return 0===e.indexOf(i)?e:i+e}var R={"http://www.opengis.net/wfs":{Query:Object(d.makeChildAppender)(function(t,e,i){var r,n=i[i.length-1],o=n.featurePrefix,a=n.featureNS,s=n.propertyNames,l=n.srsName;r=o?j(o,e):e,t.setAttribute("typeName",r),l&&t.setAttribute("srsName",l),a&&t.setAttributeNS(_,"xmlns:"+o,a);var u=Object(c.assign)({},n);u.node=t,Object(d.pushSerializeAndPop)(u,y,Object(d.makeSimpleNodeFactory)("PropertyName"),s,i);var h=n.filter;if(h){var p=Object(d.createElementNS)(b,"Filter");t.appendChild(p),I(p,h,i)}})},"http://www.opengis.net/ogc":{During:Object(d.makeChildAppender)(function(t,e,i){var r=Object(d.createElementNS)("http://www.opengis.net/fes","ValueReference");Object(u.n)(r,e.propertyName),t.appendChild(r);var n=Object(d.createElementNS)(a.GMLNS,"TimePeriod");t.appendChild(n);var o=Object(d.createElementNS)(a.GMLNS,"begin");n.appendChild(o),k(o,e.begin);var s=Object(d.createElementNS)(a.GMLNS,"end");n.appendChild(s),k(s,e.end)}),And:Object(d.makeChildAppender)(L),Or:Object(d.makeChildAppender)(L),Not:Object(d.makeChildAppender)(function(t,e,i){var r={node:t},n=e.condition;Object(d.pushSerializeAndPop)(r,R,Object(d.makeSimpleNodeFactory)(n.getTagName()),[n],i)}),BBOX:Object(d.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,M(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.extent,i)}),Contains:Object(d.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,M(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,i)}),Intersects:Object(d.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,M(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,i)}),Within:Object(d.makeChildAppender)(function(t,e,i){i[i.length-1].srsName=e.srsName,M(t,e.geometryName),o.default.prototype.writeGeometryElement(t,e.geometry,i)}),PropertyIsEqualTo:Object(d.makeChildAppender)(w),PropertyIsNotEqualTo:Object(d.makeChildAppender)(w),PropertyIsLessThan:Object(d.makeChildAppender)(w),PropertyIsLessThanOrEqualTo:Object(d.makeChildAppender)(w),PropertyIsGreaterThan:Object(d.makeChildAppender)(w),PropertyIsGreaterThanOrEqualTo:Object(d.makeChildAppender)(w),PropertyIsNull:Object(d.makeChildAppender)(function(t,e,i){M(t,e.propertyName)}),PropertyIsBetween:Object(d.makeChildAppender)(function(t,e,i){M(t,e.propertyName);var r=Object(d.createElementNS)(b,"LowerBoundary");t.appendChild(r),F(r,""+e.lowerBoundary);var n=Object(d.createElementNS)(b,"UpperBoundary");t.appendChild(n),F(n,""+e.upperBoundary)}),PropertyIsLike:Object(d.makeChildAppender)(function(t,e,i){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),M(t,e.propertyName),F(t,""+e.pattern)})}};function I(t,e,i){var r={node:t};Object(d.pushSerializeAndPop)(r,R,Object(d.makeSimpleNodeFactory)(e.getTagName()),[e],i)}function L(t,e,i){for(var r={node:t},n=e.conditions,o=0,a=n.length;o<a;++o){var s=n[o];Object(d.pushSerializeAndPop)(r,R,Object(d.makeSimpleNodeFactory)(s.getTagName()),[s],i)}}function w(t,e,i){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),M(t,e.propertyName),F(t,""+e.expression)}function A(t,e,i){var r=Object(d.createElementNS)(b,t);Object(u.n)(r,i),e.appendChild(r)}function M(t,e){A("PropertyName",t,e)}function F(t,e){A("Literal",t,e)}function k(t,e){var i=Object(d.createElementNS)(a.GMLNS,"TimeInstant");t.appendChild(i);var r=Object(d.createElementNS)(a.GMLNS,"timePosition");i.appendChild(r),Object(u.n)(r,e)}function N(t){var e=Object(d.createElementNS)(b,"Filter");return I(e,t,[]),e}e.default=T},function(t,e,i){"use strict";i.r(e);var r=i(36),n=i(33),o=i(191),a=i(130),s=i(5),l=i(20),u=i(39),c=i(54),h=i(82),d=i(88),p=i(38),f=i(34),g={POINT:p.default,LINESTRING:u.default,POLYGON:f.default,MULTIPOINT:h.default,MULTILINESTRING:c.default,MULTIPOLYGON:d.default},y="EMPTY",v="Z",m="M",_={};for(var b in s.default)_[b]=s.default[b].toUpperCase();var S=function(t){this.wkt=t,this.index_=-1};S.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},S.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},S.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},S.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},S.prototype.nextToken=function(){var t,e=this.nextChar_(),i=this.index_,r=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,r=this.readNumber_();else if(this.isAlpha_(e))t=1,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:i,value:r,type:t}},S.prototype.readNumber_=function(){var t,e=this.index_,i=!1,r=!1;do{"."==t?i=!0:"e"!=t&&"E"!=t||(r=!0),t=this.nextChar_()}while(this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},S.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()};var O=function(t){this.lexer_=t,this.token_,this.layout_=l.default.XY};O.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},O.prototype.isTokenType=function(t){return this.token_.type==t},O.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},O.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},O.prototype.parseGeometryLayout_=function(){var t=l.default.XY,e=this.token_;if(this.isTokenType(1)){var i=e.value;i===v?t=l.default.XYZ:i===m?t=l.default.XYM:"ZM"===i&&(t=l.default.XYZM),t!==l.default.XY&&this.consume_()}return t},O.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},O.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},O.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},O.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},O.prototype.parseMultiPointText_=function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},O.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},O.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},O.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,i=0;i<e;++i){var r=this.token_;if(!this.match(4))break;t.push(r.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},O.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},O.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},O.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},O.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},O.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&this.token_.value==y;return t&&this.consume_(),t},O.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},O.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var i=this.parseGeometryCollectionText_();return new a.default(i)}var r,n=g[e];if(!n)throw new Error("Invalid geometry type: "+e);switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return r||(r=n===g.POINT?[NaN,NaN]:[]),new n(r,this.layout_)}throw new Error(this.formatErrorMessage_())};var C=function(t){function e(e){t.call(this);var i=e||{};this.splitCollection_=void 0!==i.splitCollection&&i.splitCollection}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse_=function(t){var e=new S(t);return new O(e).parse()},e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);if(i){var n=new r.default;return n.setGeometry(i),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var i,n=this.readGeometryFromText(t,e),o=[],a=0,l=(i=this.splitCollection_&&n.getType()==s.default.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;a<l;++a){var u=new r.default;u.setGeometry(i[a]),o.push(u)}return o},e.prototype.readGeometryFromText=function(t,e){var i=this.parse_(t);return i?Object(n.transformWithOptions)(i,!1,e):null},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var i=[],r=0,n=t.length;r<n;++r)i.push(t[r].getGeometry());var o=new a.default(i);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return j(Object(n.transformWithOptions)(t,!0,e))},e}(o.a);function T(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function x(t){for(var e=t.getCoordinates(),i=[],r=0,n=e.length;r<n;++r)i.push(e[r].join(" "));return i.join(",")}function E(t){for(var e=[],i=t.getLinearRings(),r=0,n=i.length;r<n;++r)e.push("("+x(i[r])+")");return e.join(",")}var P={Point:T,LineString:x,Polygon:E,MultiPoint:function(t){for(var e=[],i=t.getPoints(),r=0,n=i.length;r<n;++r)e.push("("+T(i[r])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],i=t.getLineStrings(),r=0,n=i.length;r<n;++r)e.push("("+x(i[r])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],i=t.getPolygons(),r=0,n=i.length;r<n;++r)e.push("("+E(i[r])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],i=t.getGeometries(),r=0,n=i.length;r<n;++r)e.push(j(i[r]));return e.join(",")}};function j(t){var e=t.getType(),i=(0,P[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var r=function(t){var e=t.getLayout(),i="";return e!==l.default.XYZ&&e!==l.default.XYZM||(i+=v),e!==l.default.XYM&&e!==l.default.XYZM||(i+=m),i}(t);r.length>0&&(e+=" "+r)}return 0===i.length?e+" "+y:e+"("+i+")"}e.default=C},function(t,e,i){"use strict";i.r(e);var r=i(149),n=i(193),o=i(2),a=i(0),s=[null,"http://www.opengis.net/wms"],l=Object(a.makeStructureNS)(s,{Service:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},h,t,e)}),Capability:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},u,t,e)})}),u=Object(a.makeStructureNS)(s,{Request:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},_,t,e)}),Exception:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)([],g,t,e)}),Layer:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},y,t,e)})}),c=function(t){function e(){t.call(this),this.version=void 0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),Object(a.pushParseAndPop)({version:this.version},l,t,[])||null},e}(n.a),h=Object(a.makeStructureNS)(s,{Name:Object(a.makeObjectPropertySetter)(o.h),Title:Object(a.makeObjectPropertySetter)(o.h),Abstract:Object(a.makeObjectPropertySetter)(o.h),KeywordList:Object(a.makeObjectPropertySetter)(R),OnlineResource:Object(a.makeObjectPropertySetter)(r.a),ContactInformation:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},d,t,e)}),Fees:Object(a.makeObjectPropertySetter)(o.h),AccessConstraints:Object(a.makeObjectPropertySetter)(o.h),LayerLimit:Object(a.makeObjectPropertySetter)(o.f),MaxWidth:Object(a.makeObjectPropertySetter)(o.f),MaxHeight:Object(a.makeObjectPropertySetter)(o.f)}),d=Object(a.makeStructureNS)(s,{ContactPersonPrimary:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},p,t,e)}),ContactPosition:Object(a.makeObjectPropertySetter)(o.h),ContactAddress:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},f,t,e)}),ContactVoiceTelephone:Object(a.makeObjectPropertySetter)(o.h),ContactFacsimileTelephone:Object(a.makeObjectPropertySetter)(o.h),ContactElectronicMailAddress:Object(a.makeObjectPropertySetter)(o.h)}),p=Object(a.makeStructureNS)(s,{ContactPerson:Object(a.makeObjectPropertySetter)(o.h),ContactOrganization:Object(a.makeObjectPropertySetter)(o.h)}),f=Object(a.makeStructureNS)(s,{AddressType:Object(a.makeObjectPropertySetter)(o.h),Address:Object(a.makeObjectPropertySetter)(o.h),City:Object(a.makeObjectPropertySetter)(o.h),StateOrProvince:Object(a.makeObjectPropertySetter)(o.h),PostCode:Object(a.makeObjectPropertySetter)(o.h),Country:Object(a.makeObjectPropertySetter)(o.h)}),g=Object(a.makeStructureNS)(s,{Format:Object(a.makeArrayPusher)(o.h)}),y=Object(a.makeStructureNS)(s,{Name:Object(a.makeObjectPropertySetter)(o.h),Title:Object(a.makeObjectPropertySetter)(o.h),Abstract:Object(a.makeObjectPropertySetter)(o.h),KeywordList:Object(a.makeObjectPropertySetter)(R),CRS:Object(a.makeObjectPropertyPusher)(o.h),EX_GeographicBoundingBox:Object(a.makeObjectPropertySetter)(function(t,e){var i=Object(a.pushParseAndPop)({},m,t,e);if(i){var r=i.westBoundLongitude,n=i.southBoundLatitude,o=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0!==r&&void 0!==n&&void 0!==o&&void 0!==s)return[r,n,o,s]}}),BoundingBox:Object(a.makeObjectPropertyPusher)(function(t,e){var i=[Object(o.e)(t.getAttribute("minx")),Object(o.e)(t.getAttribute("miny")),Object(o.e)(t.getAttribute("maxx")),Object(o.e)(t.getAttribute("maxy"))],r=[Object(o.e)(t.getAttribute("resx")),Object(o.e)(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r}}),Dimension:Object(a.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Object(o.b)(t.getAttribute("multipleValues")),nearestValue:Object(o.b)(t.getAttribute("nearestValue")),current:Object(o.b)(t.getAttribute("current")),values:Object(o.h)(t)}}),Attribution:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},v,t,e)}),AuthorityURL:Object(a.makeObjectPropertyPusher)(function(t,e){var i=E(t,e);if(i)return i.name=t.getAttribute("name"),i}),Identifier:Object(a.makeObjectPropertyPusher)(o.h),MetadataURL:Object(a.makeObjectPropertyPusher)(function(t,e){var i=E(t,e);if(i)return i.type=t.getAttribute("type"),i}),DataURL:Object(a.makeObjectPropertyPusher)(E),FeatureListURL:Object(a.makeObjectPropertyPusher)(E),Style:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},C,t,e)}),MinScaleDenominator:Object(a.makeObjectPropertySetter)(o.d),MaxScaleDenominator:Object(a.makeObjectPropertySetter)(o.d),Layer:Object(a.makeObjectPropertyPusher)(function(t,e){var i=e[e.length-1],r=Object(a.pushParseAndPop)({},y,t,e);if(r){var n=Object(o.b)(t.getAttribute("queryable"));void 0===n&&(n=i.queryable),r.queryable=void 0!==n&&n;var s=Object(o.g)(t.getAttribute("cascaded"));void 0===s&&(s=i.cascaded),r.cascaded=s;var l=Object(o.b)(t.getAttribute("opaque"));void 0===l&&(l=i.opaque),r.opaque=void 0!==l&&l;var u=Object(o.b)(t.getAttribute("noSubsets"));void 0===u&&(u=i.noSubsets),r.noSubsets=void 0!==u&&u;var c=Object(o.e)(t.getAttribute("fixedWidth"));c||(c=i.fixedWidth),r.fixedWidth=c;var h=Object(o.e)(t.getAttribute("fixedHeight"));return h||(h=i.fixedHeight),r.fixedHeight=h,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in i){var e=r[t]||[];r[t]=e.concat(i[t])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){var e=i[t];r[t]=e}}),r}})}),v=Object(a.makeStructureNS)(s,{Title:Object(a.makeObjectPropertySetter)(o.h),OnlineResource:Object(a.makeObjectPropertySetter)(r.a),LogoURL:Object(a.makeObjectPropertySetter)(j)}),m=Object(a.makeStructureNS)(s,{westBoundLongitude:Object(a.makeObjectPropertySetter)(o.d),eastBoundLongitude:Object(a.makeObjectPropertySetter)(o.d),southBoundLatitude:Object(a.makeObjectPropertySetter)(o.d),northBoundLatitude:Object(a.makeObjectPropertySetter)(o.d)}),_=Object(a.makeStructureNS)(s,{GetCapabilities:Object(a.makeObjectPropertySetter)(P),GetMap:Object(a.makeObjectPropertySetter)(P),GetFeatureInfo:Object(a.makeObjectPropertySetter)(P)}),b=Object(a.makeStructureNS)(s,{Format:Object(a.makeObjectPropertyPusher)(o.h),DCPType:Object(a.makeObjectPropertyPusher)(function(t,e){return Object(a.pushParseAndPop)({},S,t,e)})}),S=Object(a.makeStructureNS)(s,{HTTP:Object(a.makeObjectPropertySetter)(function(t,e){return Object(a.pushParseAndPop)({},O,t,e)})}),O=Object(a.makeStructureNS)(s,{Get:Object(a.makeObjectPropertySetter)(E),Post:Object(a.makeObjectPropertySetter)(E)}),C=Object(a.makeStructureNS)(s,{Name:Object(a.makeObjectPropertySetter)(o.h),Title:Object(a.makeObjectPropertySetter)(o.h),Abstract:Object(a.makeObjectPropertySetter)(o.h),LegendURL:Object(a.makeObjectPropertyPusher)(j),StyleSheetURL:Object(a.makeObjectPropertySetter)(E),StyleURL:Object(a.makeObjectPropertySetter)(E)}),T=Object(a.makeStructureNS)(s,{Format:Object(a.makeObjectPropertySetter)(o.h),OnlineResource:Object(a.makeObjectPropertySetter)(r.a)}),x=Object(a.makeStructureNS)(s,{Keyword:Object(a.makeArrayPusher)(o.h)});function E(t,e){return Object(a.pushParseAndPop)({},T,t,e)}function P(t,e){return Object(a.pushParseAndPop)({},b,t,e)}function j(t,e){var i=E(t,e);if(i){var r=[Object(o.g)(t.getAttribute("width")),Object(o.g)(t.getAttribute("height"))];return i.size=r,i}}function R(t,e){return Object(a.pushParseAndPop)([],x,t,e)}e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(12),n=i(190),o=i(120),a=i(11),s=i(0),l=function(t){function e(e){t.call(this);var i=e||{};this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new n.default,this.layers_=i.layers?i.layers:null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var i=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==i)for(var o=0,a=t.childNodes.length;o<a;o++){var l=t.childNodes[o];if(l.nodeType===Node.ELEMENT_NODE){var u=l,c=e[0],h=u.localName.replace("_layer","");if(!this.layers_||Object(r.f)(this.layers_,h)){var d=h+"_feature";c.featureType=d,c.featureNS=this.featureNS_;var p={};p[d]=Object(s.makeArrayPusher)(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var f=Object(s.makeStructureNS)([c.featureNS,null],p);u.setAttribute("namespaceURI",this.featureNS_);var g=Object(s.pushParseAndPop)([],f,u,e,this.gmlFormat_);g&&Object(r.c)(n,g)}}}if("FeatureCollection"==i){var y=Object(s.pushParseAndPop)([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);y&&(n=y)}return n},e.prototype.readFeaturesFromNode=function(t,e){var i={};return e&&Object(a.assign)(i,this.getReadOptions(t,e)),this.readFeatures_(t,[i])},e}(o.a);e.default=l},function(t,e,i){"use strict";i.r(e);var r=i(3),n=i(25),o=i(24),a=i(100),s=i(19),l=i(11),u=i(57),c=i(194),h=i(84),d={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},p=["#00f","#0ff","#0f0","#ff0","#f00"],f=function(t){function e(e){var i=e||{},o=Object(l.assign)({},i);delete o.gradient,delete o.radius,delete o.blur,delete o.shadow,delete o.weight,t.call(this,o),this.gradient_=null,this.shadow_=void 0!==i.shadow?i.shadow:250,this.circleImage_=void 0,this.styleCache_=null,Object(r.listen)(this,Object(n.getChangeEventType)(d.GRADIENT),this.handleGradientChanged_,this),this.setGradient(i.gradient?i.gradient:p),this.setBlur(void 0!==i.blur?i.blur:15),this.setRadius(void 0!==i.radius?i.radius:8),Object(r.listen)(this,Object(n.getChangeEventType)(d.BLUR),this.handleStyleChanged_,this),Object(r.listen)(this,Object(n.getChangeEventType)(d.RADIUS),this.handleStyleChanged_,this),this.handleStyleChanged_();var a,f=i.weight?i.weight:"weight";a="string"==typeof f?function(t){return t.get(f)}:f,this.setStyle(function(t,e){var i=a(t),r=void 0!==i?Object(s.a)(i,0,1):1,n=255*r|0,o=this.styleCache_[n];return o||(o=[new h.default({image:new c.default({opacity:r,src:this.circleImage_})})],this.styleCache_[n]=o),o}.bind(this)),this.setRenderOrder(null),Object(r.listen)(this,u.a.RENDER,this.handleRender_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createCircle_=function(){var t=this.getRadius(),e=this.getBlur(),i=t+e+1,r=2*i,n=Object(o.createCanvasContext2D)(r,r);n.shadowOffsetX=n.shadowOffsetY=this.shadow_,n.shadowBlur=e,n.shadowColor="#000",n.beginPath();var a=i-this.shadow_;return n.arc(a,a,t,0,2*Math.PI,!0),n.fill(),n.canvas.toDataURL()},e.prototype.getBlur=function(){return this.get(d.BLUR)},e.prototype.getGradient=function(){return this.get(d.GRADIENT)},e.prototype.getRadius=function(){return this.get(d.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Object(o.createCanvasContext2D)(1,256),i=e.createLinearGradient(0,0,1,256),r=1/(t.length-1),n=0,a=t.length;n<a;++n)i.addColorStop(n*r,t[n]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.getImageData(0,0,1,256).data}(this.getGradient())},e.prototype.handleStyleChanged_=function(){this.circleImage_=this.createCircle_(),this.styleCache_=new Array(256),this.changed()},e.prototype.handleRender_=function(t){for(var e=t.context,i=e.canvas,r=e.getImageData(0,0,i.width,i.height),n=r.data,o=0,a=n.length;o<a;o+=4){var s=4*n[o+3];s&&(n[o]=this.gradient_[s],n[o+1]=this.gradient_[s+1],n[o+2]=this.gradient_[s+2])}e.putImageData(r,0,0)},e.prototype.setBlur=function(t){this.set(d.BLUR,t)},e.prototype.setGradient=function(t){this.set(d.GRADIENT,t)},e.prototype.setRadius=function(t){this.set(d.RADIUS,t)},e}(a.default);e.default=f},function(t,e,i){"use strict";i.r(e);var r=i(50),n=i(23),o=i(63),a=i(100),s=i(132),l=i(11),u=function(t){function e(e){var i=e||{},o=i.renderMode||s.a.HYBRID;Object(n.a)(void 0==o||o==s.a.IMAGE||o==s.a.HYBRID||o==s.a.VECTOR,28),i.declutter&&o==s.a.IMAGE&&(o=s.a.HYBRID),i.renderMode=o;var a=Object(l.assign)({},i);delete a.preload,delete a.useInterimTilesOnError,t.call(this,a),this.setPreload(i.preload?i.preload:0),this.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),this.type=r.a.VECTOR_TILE}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPreload=function(){return this.get(o.a.PRELOAD)},e.prototype.getUseInterimTilesOnError=function(){return this.get(o.a.USE_INTERIM_TILES_ON_ERROR)},e.prototype.setPreload=function(t){this.set(o.a.PRELOAD,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(o.a.USE_INTERIM_TILES_ON_ERROR,t)},e}(a.default);u.prototype.getSource,e.default=u},function(t,e,i){"use strict";i.r(e);var r=i(90),n=i(1),o=i(177),a=i(9),s=i(43),l=i(81),u=i(46),c=i(59),h=function(t){function e(e){var i=void 0!==e.hidpi&&e.hidpi;t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:Object(a.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:s.a.LOADING,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:i?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.hidpi_=i,this.culture_=void 0!==e.culture?e.culture:"en-us",this.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,this.apiKey_=e.key,this.imagerySet_=e.imagerySet;var r="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;Object(o.a)(r,this.handleImageryMetadataResponse.bind(this),void 0,"jsonp")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,o=this.getProjection(),l=Object(c.extentFromProjection)(o),h=this.hidpi_?2:1,d=e.imageWidth==e.imageHeight?e.imageWidth/h:[e.imageWidth/h,e.imageHeight/h],p=Object(c.createXYZ)({extent:l,minZoom:e.zoomMin,maxZoom:i,tileSize:d});this.tileGrid=p;var f=this.culture_,g=this.hidpi_;if(this.tileUrlFunction=Object(r.b)(e.imageUrlSubdomains.map(function(t){var i=[0,0,0],r=e.imageUrl.replace("{subdomain}",t).replace("{culture}",f);return function(t,e,n){if(t){Object(u.createOrUpdate)(t[0],t[1],-t[2]-1,i);var o=r;return g&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",Object(u.quadKey)(i))}}})),e.imageryProviders){var y=Object(a.getTransformFromProjections)(Object(a.get)("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var i=[],r=t.viewState,o=this.getTileGrid().getTileCoordForCoordAndResolution(r.center,r.resolution)[0];return e.imageryProviders.map(function(e){for(var r=!1,a=e.coverageAreas,s=0,l=a.length;s<l;++s){var u=a[s];if(o>=u.zoomMin&&o<=u.zoomMax){var c=u.bbox,h=[c[1],c[0],c[3],c[2]],d=Object(n.applyTransform)(h,y);if(Object(n.intersects)(d,t.extent)){r=!0;break}}}r&&i.push(e.attribution)}),i.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'),i}.bind(this))}this.setState(s.a.READY)}else this.setState(s.a.ERROR)},e}(l.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(11),n=i(43),o=function(t){function e(e){t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX}),this.account_=e.account,this.mapId_=e.map||"",this.config_=e.config||{},this.templateCache_={},this.initializeMap_()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){Object(r.assign)(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var i=e.target;if(!i.status||i.status>=200&&i.status<300){var r;try{r=JSON.parse(i.responseText)}catch(t){return void this.setState(n.a.ERROR)}this.applyTemplate_(r),this.templateCache_[t]=r,this.setState(n.a.READY)}else this.setState(n.a.ERROR)},e.prototype.handleInitError_=function(t){this.setState(n.a.ERROR)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}(i(176).default);e.default=o},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(23),o=i(36),a=i(5),s=i(26),l=i(3),u=i(10),c=i(1),h=i(38),d=function(t){function e(e){t.call(this,{attributions:e.attributions,wrapX:e.wrapX}),this.resolution=void 0,this.distance=void 0!==e.distance?e.distance:20,this.features=[],this.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return Object(n.a)(e.getType()==a.default.POINT,10),e},this.source=e.source,Object(l.listen)(this.source,u.default.CHANGE,this.refresh,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features),t.prototype.refresh.call(this)},e.prototype.cluster=function(){if(void 0!==this.resolution){this.features.length=0;for(var t=Object(c.createEmpty)(),e=this.distance*this.resolution,i=this.source.getFeatures(),n={},o=0,a=i.length;o<a;o++){var s=i[o];if(!(Object(r.getUid)(s)in n)){var l=this.geometryFunction(s);if(l){var u=l.getCoordinates();Object(c.createOrUpdateFromCoordinate)(u,t),Object(c.buffer)(t,e,t);var h=this.source.getFeaturesInExtent(t);h=h.filter(function(t){var e=Object(r.getUid)(t);return!(e in n||(n[e]=!0,0))}),this.features.push(this.createCluster(h))}}}}},e.prototype.createCluster=function(t){for(var e=[0,0],i=t.length-1;i>=0;--i){var r=this.geometryFunction(t[i]);r?Object(s.add)(e,r.getCoordinates()):t.splice(i,1)}Object(s.scale)(e,1/t.length);var n=new o.default(new h.default(e));return n.set("features",t),n},e}(i(114).default);e.default=d},function(t,e,i){"use strict";i.r(e);var r=i(113),n=i(23),o=i(3),a=i(10),s=i(1),l=i(11),u=i(89),c=i(95),h=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.hidpi_=void 0===i.hidpi||i.hidpi,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:u.defaultImageLoadFunction,this.params_=i.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;var u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==i&&Object(s.containsExtent)(u.getExtent(),t))return u;var c={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object(l.assign)(c,this.params_);var h=((t=t.slice())[0]+t[2])/2,d=(t[1]+t[3])/2;if(1!=this.ratio_){var p=this.ratio_*Object(s.getWidth)(t)/2,f=this.ratio_*Object(s.getHeight)(t)/2;t[0]=h-p,t[1]=d-f,t[2]=h+p,t[3]=d+f}var g=e/i,y=Math.ceil(Object(s.getWidth)(t)/g),v=Math.ceil(Object(s.getHeight)(t)/g);t[0]=h-g*y/2,t[2]=h+g*y/2,t[1]=d-g*v/2,t[3]=d+g*v/2,this.imageSize_[0]=y,this.imageSize_[1]=v;var m=this.getRequestUrl_(t,this.imageSize_,i,n,c);return this.image_=new r.default(t,e,i,m,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(o.listen)(this.image_,a.default.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,r,o){var a=r.getCode().split(":").pop();o.SIZE=e[0]+","+e[1],o.BBOX=t.join(","),o.BBOXSR=a,o.IMAGESR=a,o.DPI=Math.round(90*i);var s=this.url_,l=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return l==s&&Object(n.a)(!1,50),Object(c.appendParams)(l,o)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(l.assign)(this.params_,t),this.image_=null,this.changed()},e}(u.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(113),n=i(3),o=i(10),a=i(1),s=i(11),l=i(89),u=i(95),c=function(t){function e(e){t.call(this,{projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,this.params_=e.params||{},this.url_=e.url,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:l.defaultImageLoadFunction,this.hidpi_=void 0===e.hidpi||e.hidpi,this.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,this.ratio_=void 0!==e.ratio?e.ratio:1,this.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,this.image_=null,this.renderedRevision_=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,s){e=this.findNearestResolution(e),i=this.hidpi_?i:1;var l=this.image_;if(l&&this.renderedRevision_==this.getRevision()&&l.getResolution()==e&&l.getPixelRatio()==i&&Object(a.containsExtent)(l.getExtent(),t))return l;1!=this.ratio_&&(t=t.slice(),Object(a.scaleFromCenter)(t,this.ratio_));var u=[Object(a.getWidth)(t)/e*i,Object(a.getHeight)(t)/e*i];if(void 0!==this.url_){var c=this.getUrl(this.url_,this.params_,t,u,s);l=new r.default(t,e,i,c,this.crossOrigin_,this.imageLoadFunction_),Object(n.listen)(l,o.default.CHANGE,this.handleImageChange,this)}else l=null;return this.image_=l,this.renderedRevision_=this.getRevision(),l},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){Object(s.assign)(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,i,r,n){var o=function(t,e,i,r){var n=Object(a.getWidth)(t),o=Object(a.getHeight)(t),s=e[0],l=e[1],u=.0254/r;return l*n>s*o?n*i/(s*u):o*i/(l*u)}(i,r,this.metersPerUnit_,this.displayDpi_),l=Object(a.getCenter)(i),c={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(r[0]),SETDISPLAYHEIGHT:Math.round(r[1]),SETVIEWSCALE:o,SETVIEWCENTERX:l[0],SETVIEWCENTERY:l[1]};return Object(s.assign)(c,e),Object(u.appendParams)(t,c)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(l.default);e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(113),n=i(27),o=i(24),a=i(3),s=i(10),l=i(1),u=i(9),c=i(89),h=function(t){function e(e){var i=void 0!==e.crossOrigin?e.crossOrigin:null,n=void 0!==e.imageLoadFunction?e.imageLoadFunction:c.defaultImageLoadFunction;t.call(this,{attributions:e.attributions,projection:Object(u.get)(e.projection)}),this.url_=e.url,this.imageExtent_=e.imageExtent,this.image_=new r.default(this.imageExtent_,void 0,1,this.url_,i,n),this.imageSize_=e.imageSize?e.imageSize:null,Object(a.listen)(this.image_,s.default.CHANGE,this.handleImageChange,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,r){return Object(l.intersects)(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==n.a.LOADED){var i,r,a=this.image_.getExtent(),s=this.image_.getImage();this.imageSize_?(i=this.imageSize_[0],r=this.imageSize_[1]):(i=s.width,r=s.height);var u=Object(l.getHeight)(a)/r,c=Math.ceil(Object(l.getWidth)(a)/u);if(c!=i){var h=Object(o.createCanvasContext2D)(c,r),d=h.canvas;h.drawImage(s,0,0,i,r,0,0,d.width,d.height),this.image_.setImage(d)}}t.prototype.handleImageChange.call(this,e)},e}(c.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(165),n=i(113),o=i(23),a=i(3),s=i(10),l=i(1),u=i(11),c=i(9),h=i(138),d=i(89),p=i(139),f=i(116),g=i(95),y=[101,101],v=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,projection:i.projection,resolutions:i.resolutions}),this.crossOrigin_=void 0!==i.crossOrigin?i.crossOrigin:null,this.url_=i.url,this.imageLoadFunction_=void 0!==i.imageLoadFunction?i.imageLoadFunction:d.defaultImageLoadFunction,this.params_=i.params||{},this.v13_=!0,this.updateV13_(),this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==i.ratio?i.ratio:1.5}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,i,n){if(void 0!==this.url_){var o=Object(c.get)(i),a=this.getProjection();a&&a!==o&&(e=Object(h.a)(a,o,t,e),t=Object(c.transform)(t,o,a));var s=Object(l.getForViewAndSize)(t,e,0,y),d={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(u.assign)(d,this.params_,n);var p=Math.floor((t[0]-s[0])/e),f=Math.floor((s[3]-t[1])/e);return d[this.v13_?"I":"X"]=p,d[this.v13_?"J":"Y"]=f,this.getRequestUrl_(s,y,1,a||o,d)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,i,o){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);var c=e/i,h=Object(l.getCenter)(t),d=Math.ceil(Object(l.getWidth)(t)/c),p=Math.ceil(Object(l.getHeight)(t)/c),f=Object(l.getForViewAndSize)(h,c,0,[d,p]),g=Math.ceil(this.ratio_*Object(l.getWidth)(t)/c),y=Math.ceil(this.ratio_*Object(l.getHeight)(t)/c),v=Object(l.getForViewAndSize)(h,c,0,[g,y]),m=this.image_;if(m&&this.renderedRevision_==this.getRevision()&&m.getResolution()==e&&m.getPixelRatio()==i&&Object(l.containsExtent)(m.getExtent(),f))return m;var _={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object(u.assign)(_,this.params_),this.imageSize_[0]=Math.round(Object(l.getWidth)(v)/c),this.imageSize_[1]=Math.round(Object(l.getHeight)(v)/c);var b=this.getRequestUrl_(v,this.imageSize_,i,o,_);return this.image_=new n.default(v,e,i,b,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),Object(a.listen)(this.image_,s.default.CHANGE,this.handleImageChange,this),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,i,r,n){if(Object(o.a)(void 0!==this.url_,9),n[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(n.STYLES=""),1!=i)switch(this.serverType_){case p.a.GEOSERVER:var a=90*i+.5|0;"FORMAT_OPTIONS"in n?n.FORMAT_OPTIONS+=";dpi:"+a:n.FORMAT_OPTIONS="dpi:"+a;break;case p.a.MAPSERVER:n.MAP_RESOLUTION=90*i;break;case p.a.CARMENTA_SERVER:case p.a.QGIS:n.DPI=90*i;break;default:Object(o.a)(!1,8)}n.WIDTH=e[0],n.HEIGHT=e[1];var s,l=r.getAxisOrientation();return s=this.v13_&&"ne"==l.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,n.BBOX=s.join(","),Object(g.appendParams)(this.url_,n)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){Object(u.assign)(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||r.a;this.v13_=Object(f.a)(t,"1.3")>=0},e}(d.default);e.default=v},function(t,e,i){"use strict";i.r(e);var r=i(4),n=i(157),o=i(185),a=i(24),s=i(3),l=i(35),u=i(10),c=i(452),h=i(1),d=i(50),p=i(219),f=i(154),g=i(11),y=i(188),v=i(163),m=i(89),_=i(43),b=i(17),S={PIXEL:"pixel",IMAGE:"image"},O=function(t){function e(e,i,r){t.call(this,e),this.extent=i.extent,this.resolution=i.viewState.resolution/i.pixelRatio,this.data=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(l.default),C=function(t){function e(e){t.call(this,{projection:null}),this.worker_=null,this.operationType_=void 0!==e.operationType?e.operationType:S.PIXEL,this.threads_=void 0!==e.threads?e.threads:1,this.renderers_=function(t){for(var e=t.length,i=new Array(e),r=0;r<e;++r)i[r]=E(t[r]);return i}(e.sources);for(var i=0,n=this.renderers_.length;i<n;++i)Object(s.listen)(this.renderers_[i],u.default.CHANGE,this.changed,this);this.tileQueue_=new o.a(function(){return 1},this.changed.bind(this));for(var a=function(t){return t.map(function(t){return t.getLayer().getLayerState()})}(this.renderers_),l={},c=0,h=a.length;c<h;++c)l[Object(r.getUid)(a[c].layer)]=a[c];this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:Object(b.c)(),extent:null,focus:null,index:0,layerStates:l,layerStatesArray:a,pixelRatio:1,pixelToCoordinateTransform:Object(b.c)(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},void 0!==e.operation&&this.setOperation(e.operation,e.lib)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setOperation=function(t,e){this.worker_=new c.Processor({operation:t,imageOps:this.operationType_===S.IMAGE,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,i){var r=Object(g.assign)({},this.frameState_);r.viewState=Object(g.assign)({},r.viewState);var n=Object(h.getCenter)(t);r.extent=t.slice(),r.focus=n,r.size[0]=Math.round(Object(h.getWidth)(t)/e),r.size[1]=Math.round(Object(h.getHeight)(t)/e),r.time=Date.now(),r.animate=!1;var o=r.viewState;return o.center=n,o.projection=i,o.resolution=e,r},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,i=this.renderers_.length;e<i;++e)if(this.renderers_[e].getLayer().getSource().getState()!==_.a.READY){t=!1;break}return t},e.prototype.getImage=function(t,e,i,r){if(!this.allSourcesReady_())return null;var n=this.updateFrameState_(t,e,r);if(this.requestedFrameState_=n,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&Object(h.equals)(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),n.tileQueue.loadMoreTiles(16,16),n.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.renderers_.length,i=new Array(e),r=0;r<e;++r){var n=x(this.renderers_[r],t,t.layerStatesArray[r]);if(!n)return;i[r]=n}var o={};this.dispatchEvent(new O("beforeoperations",t,o)),this.worker_.process(i,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,i,r){if(!e&&i){var o=t.extent,s=t.viewState.resolution;if(s===this.requestedFrameState_.viewState.resolution&&Object(h.equals)(o,this.requestedFrameState_.extent)){var l;if(this.renderedImageCanvas_)l=this.renderedImageCanvas_.getImage().getContext("2d");else{var u=Math.round(Object(h.getWidth)(o)/s),c=Math.round(Object(h.getHeight)(o)/s);l=Object(a.createCanvasContext2D)(u,c),this.renderedImageCanvas_=new n.a(o,s,1,l.canvas)}l.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new O("afteroperations",t,r))}}},e.prototype.getImageInternal=function(){return null},e}(m.default),T=null;function x(t,e,i){if(!t.prepareFrame(e,i))return null;var r=e.size[0],n=e.size[1];if(T){var o=T.canvas;o.width!==r||o.height!==n?T=Object(a.createCanvasContext2D)(r,n):T.clearRect(0,0,r,n)}else T=Object(a.createCanvasContext2D)(r,n);return t.composeFrame(e,i,T),T.getImageData(0,0,r,n)}function E(t){var e=t,i=t,r=t,n=null;return"function"==typeof e.getTile?n=function(t){var e=new f.default({source:t});return new v.default(e)}(e):"function"==typeof i.getImage?n=function(t){var e=new p.default({source:t});return new y.default(e)}(i):r.getType()===d.a.TILE?n=new v.default(r):r.getType()!=d.a.IMAGE&&r.getType()!=d.a.VECTOR||(n=new y.default(r)),n}e.default=C},function(t,e,i){var r=i(480).newImageData;function n(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function i(t,i,r){return e?new ImageData(t,i,r):{data:t,width:i,height:r}}return function(e){var r,n,o=e.buffers,a=e.meta,s=e.imageOps,l=e.width,u=e.height,c=o.length,h=o[0].byteLength;if(s){var d=new Array(c);for(n=0;n<c;++n)d[n]=i(new Uint8ClampedArray(o[n]),l,u);r=t(d,a).data}else{r=new Uint8ClampedArray(h);var p=new Array(c),f=new Array(c);for(n=0;n<c;++n)p[n]=new Uint8ClampedArray(o[n]),f[n]=[0,0,0,0];for(var g=0;g<h;g+=4){for(var y=0;y<c;++y){var v=p[y];f[y][0]=v[g],f[y][1]=v[g+1],f[y][2]=v[g+2],f[y][3]=v[g+3]}var m=t(f,a);r[g]=m[0],r[g+1]=m[1],r[g+2]=m[2],r[g+3]=m[3]}}return r.buffer}}function o(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+n.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),r=new Blob(i,{type:"text/javascript"}),o=URL.createObjectURL(r),a=new Worker(o);return a.addEventListener("message",e),a}function a(t){var e;this._imageOps=!!t.imageOps;var i=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var r=0;r<e;++r)i[r]=o(t,this._onWorkerMessage.bind(this,r));else i[0]=function(t,e){var i=n(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}a.prototype.process=function(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()},a.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},a.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},a.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,i=t.inputs[0].height,r=t.inputs.map(function(t){return t.data.buffer}),n=this._workers.length;if(this._running=n,1===n)this._workers[0].postMessage({buffers:r,meta:t.meta,imageOps:this._imageOps,width:e,height:i},r);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/n),s=0;s<n;++s){for(var l=s*a,u=[],c=0,h=r.length;c<h;++c)u.push(r[s].slice(l,l+a));this._workers[s].postMessage({buffers:u,meta:t.meta,imageOps:this._imageOps,width:e,height:i},u)}}},a.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},a.prototype._resolveJob=function(){var t,e,i=this._job,n=this._workers.length;if(1===n)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=i.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var a=4*Math.ceil(o/4/n),s=0;s<n;++s){var l=this._dataLookup[s].buffer,u=s*a;t.set(new Uint8ClampedArray(l),u),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},i.callback(null,r(t,i.inputs[0].width,i.inputs[0].height),e),this._dispatch()},t.exports=a},function(t,e){var i=!0;try{new ImageData(10,10)}catch(t){i=!1}var r=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,n){if(i)return new ImageData(t,e,n);var o=r.createImageData(e,n);return o.data.set(t),o}},function(t,e,i){"use strict";i.r(e);var r=i(345),n=i(176),o=['Map tiles by <a href="https://stamen.com/">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.',r.ATTRIBUTION],a={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},s={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}},l=function(t){function e(e){var i=e.layer.indexOf("-"),r=-1==i?e.layer:e.layer.slice(0,i),n=s[r],l=a[e.layer],u=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+l.extension;t.call(this,{attributions:o,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=e.maxZoom?e.maxZoom:n.maxZoom,minZoom:void 0!=e.minZoom?e.minZoom:n.minZoom,opaque:l.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,url:u,wrapX:e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(n.default);e.default=l},function(t,e,i){"use strict";i.r(e);var r=i(1),n=i(19),o=i(11),a=i(45),s=i(81),l=i(46),u=i(95),c=function(t){function e(e){var i=e||{};t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,tileUrlFunction:h,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}),this.params_=i.params||{},this.tmpExtent_=Object(r.createEmpty)(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,r,o,a){var s=this.urls;if(s){var c=o.getCode().split(":").pop();a.SIZE=e[0]+","+e[1],a.BBOX=i.join(","),a.BBOXSR=c,a.IMAGESR=c,a.DPI=Math.round(a.DPI?a.DPI*r:90*r);var h=(1==s.length?s[0]:s[Object(n.d)(Object(l.hash)(t),s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Object(u.appendParams)(h,a)}},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.updateParams=function(t){Object(o.assign)(this.params_,t),this.setKey(this.getKeyForParams_())},e}(s.default);function h(t,e,i){var r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),!(r.getResolutions().length<=t[0])){var n=r.getTileCoordExtent(t,this.tmpExtent_),s=Object(a.toSize)(r.getTileSize(t[0]),this.tmpSize);1!=e&&(s=Object(a.scale)(s,e,this.tmpSize));var l={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(o.assign)(l,this.params_),this.getRequestUrl_(t,s,n,e,i,l)}}e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(98),n=i(16),o=i(24),a=i(45),s=i(128),l=i(46),u=function(t){function e(e,i,r){t.call(this,e,n.default.LOADED),this.tileSize_=i,this.text_=r,this.canvas_=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Object(o.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(r.default),c=function(t){function e(e){t.call(this,{opaque:!1,projection:e.projection,tileGrid:e.tileGrid,wrapX:void 0===e.wrapX||e.wrapX})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getTile=function(t,e,i){var r=Object(l.getKeyZXY)(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var n=Object(a.toSize)(this.tileGrid.getTileSize(t)),o=[t,e,i],s=this.getTileCoordForTileUrlFunction(o),c=s?this.getTileCoordForTileUrlFunction(s).toString():"",h=new u(o,n,c);return this.tileCache.set(r,h),h},e}(s.default);e.default=c},function(t,e,i){"use strict";i.r(e);var r=i(90),n=i(23),o=i(1),a=i(177),s=i(9),l=i(43),u=i(81),c=i(59),h=function(t){function e(e){if(t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:Object(s.get)("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:l.a.LOADING,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.tileJSON_=null,e.url)if(e.jsonp)Object(a.a)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(n.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,i=Object(s.get)("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var a=Object(s.getTransformFromProjections)(i,n);e=Object(o.applyTransform)(t.bounds,a)}var u=t.minzoom||0,h=t.maxzoom||22,d=Object(c.createXYZ)({extent:Object(c.extentFromProjection)(n),maxZoom:h,minZoom:u});if(this.tileGrid=d,this.tileUrlFunction=Object(r.a)(t.tiles,d),void 0!==t.attribution&&!this.getAttributions()){var p=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return Object(o.intersects)(p,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState(l.a.READY)},e.prototype.handleTileJSONError=function(){this.setState(l.a.ERROR)},e}(u.default);e.default=h},function(t,e,i){"use strict";i.r(e);var r=i(165),n=i(23),o=i(1),a=i(11),s=i(19),l=i(9),u=i(138),c=i(45),h=i(81),d=i(139),p=i(46),f=i(116),g=i(95),y=function(t){function e(e){var i=e||{},r=i.params||{},n=!("TRANSPARENT"in r)||r.TRANSPARENT;t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,opaque:!n,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:i.tileClass,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,tileUrlFunction:v,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition}),this.gutter_=void 0!==i.gutter?i.gutter:0,this.params_=r,this.v13_=!0,this.serverType_=i.serverType,this.hidpi_=void 0===i.hidpi||i.hidpi,this.tmpExtent_=Object(o.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getGetFeatureInfoUrl=function(t,e,i,n){var s=Object(l.get)(i),h=this.getProjection(),d=this.getTileGrid();d||(d=this.getTileGridForProjection(s));var p=d.getTileCoordForCoordAndResolution(t,e);if(!(d.getResolutions().length<=p[0])){var f=d.getResolution(p[0]),g=d.getTileCoordExtent(p,this.tmpExtent_),y=Object(c.toSize)(d.getTileSize(p[0]),this.tmpSize),v=this.gutter_;0!==v&&(y=Object(c.buffer)(y,v,this.tmpSize),g=Object(o.buffer)(g,f*v,g)),h&&h!==s&&(f=Object(u.a)(h,s,t,f),g=Object(l.transformExtent)(g,s,h),t=Object(l.transform)(t,s,h));var m={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object(a.assign)(m,this.params_,n);var _=Math.floor((t[0]-g[0])/f),b=Math.floor((g[3]-t[1])/f);return m[this.v13_?"I":"X"]=_,m[this.v13_?"J":"Y"]=b,this.getRequestUrl_(p,y,g,1,h||s,m)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,i,r,o,a){var l=this.urls;if(l){if(a.WIDTH=e[0],a.HEIGHT=e[1],a[this.v13_?"CRS":"SRS"]=o.getCode(),"STYLES"in this.params_||(a.STYLES=""),1!=r)switch(this.serverType_){case d.a.GEOSERVER:var u=90*r+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+u:a.FORMAT_OPTIONS="dpi:"+u;break;case d.a.MAPSERVER:a.MAP_RESOLUTION=90*r;break;case d.a.CARMENTA_SERVER:case d.a.QGIS:a.DPI=90*r;break;default:Object(n.a)(!1,52)}var c,h,f=o.getAxisOrientation(),y=i;return this.v13_&&"ne"==f.substr(0,2)&&(c=i[0],y[0]=i[1],y[1]=c,c=i[2],y[2]=i[3],y[3]=c),a.BBOX=y.join(","),h=1==l.length?l[0]:l[Object(s.d)(Object(p.hash)(t),l.length)],Object(g.appendParams)(h,a)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")},e.prototype.updateParams=function(t){Object(a.assign)(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||r.a;this.v13_=Object(f.a)(t,"1.3")>=0},e}(h.default);function v(t,e,i){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var s=n.getResolution(t[0]),l=n.getTileCoordExtent(t,this.tmpExtent_),u=Object(c.toSize)(n.getTileSize(t[0]),this.tmpSize),h=this.gutter_;0!==h&&(u=Object(c.buffer)(u,h,this.tmpSize),l=Object(o.buffer)(l,s*h,l)),1!=e&&(u=Object(c.scale)(u,e,this.tmpSize));var d={SERVICE:"WMS",VERSION:r.a,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object(a.assign)(d,this.params_),this.getRequestUrl_(t,u,l,e,i,d)}}e.default=y},function(t,e,i){"use strict";i.r(e),i.d(e,"CustomTile",function(){return y});var r=i(98),n=i(16),o=i(90),a=i(23),s=i(3),l=i(10),u=i(1),c=i(177),h=i(9),d=i(43),p=i(128),f=i(46),g=i(59),y=function(t){function e(e,i,r,n,o,a){t.call(this,e,i),this.src_=r,this.extent_=n,this.preemptive_=o,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),r=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof r)return null;var n=r.charCodeAt(Math.floor(e*r.length));n>=93&&n--,n>=35&&n--;var o=null;if((n-=32)in this.keys_){var a=this.keys_[n];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,i,r){this.state==n.default.IDLE&&!0===r?(Object(s.listenOnce)(this,l.default.CHANGE,function(r){e.call(i,this.getData(t))},this),this.loadInternal_()):!0===r?setTimeout(function(){e.call(i,this.getData(t))}.bind(this),0):e.call(i,this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=n.default.ERROR,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=n.default.EMPTY,this.changed()},e.prototype.loadInternal_=function(){if(this.state==n.default.IDLE)if(this.state=n.default.LOADING,this.jsonp_)Object(c.a)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(i)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_&&this.loadInternal_()},e}(r.default),v=function(t){function e(e){if(t.call(this,{projection:Object(h.get)("EPSG:3857"),state:d.a.LOADING}),this.preemptive_=void 0===e.preemptive||e.preemptive,this.tileUrlFunction_=o.d,this.template_=void 0,this.jsonp_=e.jsonp||!1,e.url)if(this.jsonp_)Object(c.a)(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{var i=new XMLHttpRequest;i.addEventListener("load",this.onXHRLoad_.bind(this)),i.addEventListener("error",this.onXHRError_.bind(this)),i.open("GET",e.url),i.send()}else e.tileJSON?this.handleTileJSONResponse(e.tileJSON):Object(a.a)(!1,51)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var i;try{i=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(i)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,i,r){if(this.tileGrid){var n=this.tileGrid.getTileCoordForCoordAndResolution(t,e);this.getTile(n[0],n[1],n[2],1,this.getProjection()).forDataAtCoordinate(t,i,null,r)}else!0===r?setTimeout(function(){i(null)},0):i(null)},e.prototype.handleTileJSONError=function(){this.setState(d.a.ERROR)},e.prototype.handleTileJSONResponse=function(t){var e,i=Object(h.get)("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){var n=Object(h.getTransformFromProjections)(i,r);e=Object(u.applyTransform)(t.bounds,n)}var a=t.minzoom||0,s=t.maxzoom||22,l=Object(g.createXYZ)({extent:Object(g.extentFromProjection)(r),maxZoom:s,minZoom:a});this.tileGrid=l,this.template_=t.template;var c=t.grids;if(c){if(this.tileUrlFunction_=Object(o.a)(c,l),void 0!==t.attribution){var p=void 0!==e?e:i.getExtent();this.setAttributions(function(e){return Object(u.intersects)(p,e.extent)?[t.attribution]:null})}this.setState(d.a.READY)}else this.setState(d.a.ERROR)},e.prototype.getTile=function(t,e,i,r,o){var a=Object(f.getKeyZXY)(t,e,i);if(this.tileCache.containsKey(a))return this.tileCache.get(a);var s=[t,e,i],l=this.getTileCoordForTileUrlFunction(s,o),u=this.tileUrlFunction_(l,r,o),c=new y(s,void 0!==u?n.default.IDLE:n.default.EMPTY,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(s),this.preemptive_,this.jsonp_);return this.tileCache.set(a,c),c},e.prototype.useTile=function(t,e,i){var r=Object(f.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)},e}(p.default);e.default=v},function(t,e,i){"use strict";i.r(e);var r=i(16),n=i(226),o=i(218),a=i(45),s=i(227),l=i(46),u=i(59),c=function(t){function e(e){var i=e.projection||"EPSG:3857",r=e.extent||Object(u.extentFromProjection)(i),a=e.tileGrid||Object(u.createXYZ)({extent:r,maxZoom:e.maxZoom||22,minZoom:e.minZoom,tileSize:e.tileSize||512});t.call(this,{attributions:e.attributions,cacheSize:void 0!==e.cacheSize?e.cacheSize:128,opaque:!1,projection:i,state:e.state,tileGrid:a,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:n.b,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.format_=e.format?e.format:null,this.sourceTiles_={},this.overlaps_=void 0==e.overlaps||e.overlaps,this.tileClass=e.tileClass?e.tileClass:o.default,this.tileGrids_={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTiles_={}},e.prototype.getTile=function(t,e,i,o,a){var s=Object(l.getKeyZXY)(t,e,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);var u=[t,e,i],c=this.getTileCoordForTileUrlFunction(u,a),h=new n.a(u,null!==c?r.default.IDLE:r.default.EMPTY,this.getRevision(),this.format_,this.tileLoadFunction,c,this.tileUrlFunction,this.tileGrid,this.getTileGridForProjection(a),this.sourceTiles_,o,a,this.tileClass,this.handleTileChange.bind(this),u[0]);return this.tileCache.set(s,h),h},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),i=this.tileGrids_[e];if(!i){var r=this.tileGrid;i=this.tileGrids_[e]=Object(u.createForProjection)(t,void 0,r?r.getTileSize(r.getMinZoom()):void 0)}return i},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,i){var r=this.getTileGridForProjection(i),n=Object(a.toSize)(r.getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(s.default);e.default=c},function(t,e,i){"use strict";i.r(e),i.d(e,"CustomTile",function(){return f});var r=i(148),n=i(145),o=i(16),a=i(90),s=i(23),l=i(24),u=i(1),c=i(45),h=i(81),d=i(105),p={DEFAULT:"default",TRUNCATED:"truncated"},f=function(t){function e(e,i,r,n,o,a,s){t.call(this,i,r,n,o,a,s),this.zoomifyImage_=null,this.tileSize_=Object(c.toSize)(e.getTileSize(i[0]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(this.state==o.default.LOADED){var i=this.tileSize_;if(e.width==i[0]&&e.height==i[1])return this.zoomifyImage_=e,e;var r=Object(l.createCanvasContext2D)(i[0],i[1]);return r.drawImage(e,0,0),this.zoomifyImage_=r.canvas,r.canvas}return e},e}(n.default),g=function(t){function e(e){var i=e||{},n=i.size,o=void 0!==i.tierSizeCalculation?i.tierSizeCalculation:p.DEFAULT,l=n[0],c=n[1],h=i.extent||[0,-n[1],n[0],0],g=[],y=i.tileSize||r.b,v=y;switch(o){case p.DEFAULT:for(;l>v||c>v;)g.push([Math.ceil(l/v),Math.ceil(c/v)]),v+=v;break;case p.TRUNCATED:for(var m=l,_=c;m>v||_>v;)g.push([Math.ceil(m/v),Math.ceil(_/v)]),m>>=1,_>>=1;break;default:Object(s.a)(!1,53)}g.push([1,1]),g.reverse();for(var b=[1],S=[0],O=1,C=g.length;O<C;O++)b.push(1<<O),S.push(g[O-1][0]*g[O-1][1]+S[O-1]);b.reverse();var T=new d.default({tileSize:y,extent:h,origin:Object(u.getTopLeft)(h),resolutions:b}),x=i.url;x&&-1==x.indexOf("{TileGroup}")&&-1==x.indexOf("{tileIndex}")&&(x+="{TileGroup}/{z}-{x}-{y}.jpg");var E=Object(a.c)(x),P=Object(a.b)(E.map(function(t){return function(e,i,r){if(e){var n=e[0],o=e[1],a=-e[2]-1,s=o+a*g[n][0],l=T.getTileSize(n),u=Array.isArray(l)?l[0]:l,c={z:n,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+S[n])/u|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return c[e]})}}})),j=f.bind(null,T);t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileClass:j,tileGrid:T,tileUrlFunction:P,transition:i.transition})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h.default);e.default=g},function(t,e,i){"use strict";i.r(e),i.d(e,"register",function(){return a});var r=i(9),n=i(131),o=i(127);function a(t){var e,i,a=Object.keys(t.defs),s=a.length;for(e=0;e<s;++e){var l=a[e];if(!Object(r.get)(l)){var u=t.defs(l);Object(r.addProjection)(new o.default({code:l,axisOrientation:u.axis,metersPerUnit:u.to_meter,units:u.units}))}}for(e=0;e<s;++e){var c=a[e],h=Object(r.get)(c);for(i=0;i<s;++i){var d=a[i],p=Object(r.get)(d);if(!Object(n.c)(c,d))if(t.defs[c]===t.defs[d])Object(r.addEquivalentProjections)([h,p]);else{var f=t(c,d);Object(r.addCoordinateTransforms)(h,p,f.forward,f.inverse)}}}}},function(t,e,i){"use strict";i.r(e),i.d(e,"toContext",function(){return a});var r=i(42),n=i(17),o=i(175);function a(t,e){var i=t.canvas,a=e||{},s=a.pixelRatio||r.DEVICE_PIXEL_RATIO,l=a.size;l&&(i.width=l[0]*s,i.height=l[1]*s,i.style.width=l[0]+"px",i.style.height=l[1]+"px");var u=[0,0,i.width,i.height],c=Object(n.h)(Object(n.c)(),s,s);return new o.default(t,s,u,c,0)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=e.ZDTileDebug=e.Layer=e.MapLayerSource=e.GdbpLayer=e.MapLayerTileSource=e.TileLayer_mapgis=e.TileLayerSource=e.CacheTileLayer=e.CacheTileLayerSource=e.Doc=e.MapDocSource=e.MapDocTileLayer=e.MapDocTileSource=void 0;var r=i(492),n=i(519),o=i(365),a=i(520),s=i(521),l=i(522),u=i(523),c=i(533);e.MapDocTileSource=r.MapDocTileSource,e.MapDocTileLayer=r.MapDocTileLayer,e.MapDocSource=n.MapDocSource,e.Doc=n.Doc,e.CacheTileLayerSource=o.CacheTileLayerSource,e.CacheTileLayer=o.CacheTileLayer,e.TileLayerSource=a.TileLayerSource,e.TileLayer_mapgis=a.TileLayer_mapgis,e.MapLayerTileSource=s.MapLayerTileSource,e.GdbpLayer=s.GdbpLayer,e.MapLayerSource=l.MapLayerSource,e.Layer=l.Layer,e.ZDTileDebug=u.ZDTileDebug,e.BaiduMapSource=c.BaiduMapSource,e.BaiDuLayer=c.BaiDuLayer,e.GaodeMapSource=c.GaodeMapSource,e.GaoDeLayer=c.GaoDeLayer,e.TiandituMapSource=c.TiandituMapSource,e.TianDiTu=c.TianDiTu,e.GoogleMapSource=c.GoogleMapSource,e.GoogleLayer=c.GoogleLayer,e.ArcGISMapSource=c.ArcGISMapSource,e.ArcGISLayer=c.ArcGISLayer,e.OpenStreetMapSource=c.OpenStreetMapSource,e.OpenStreetLayer=c.OpenStreetLayer,e.TiandituType=c.TiandituType,e.GoogleLayerType=c.GoogleLayerType,e.ArcGISLayerType=c.ArcGISLayerType,e.OpenStreetLayerType=c.OpenStreetLayerType},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDocTileLayer=e.MapDocTileSource=void 0;var r=p(i(58)),n=i(6),o=i(22),a=p(i(81)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),l=(p(i(105)),i(4)),u=i(11),c=i(95),h=p(i(154)),d=i(9);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){var e=void 0!==t?t:{};a.default.call(this,{attributions:e.attributions,extent:this.extent,tileExtent:this.tileExtent,ip:this.ip,port:this.port,logo:e.logo,opaque:e.opaque,tileGrid:this.zondyTileGrid,projection:i,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null,void 0!==e.projection&&e.projection;var i=(0,d.createProjection)(e.projection,"EPSG:4326"),r=[-180,-90,180,90];null!=i&&e.projection?r=i.getExtent():e.extent&&(e.extent[0]<200&&e.extent[2]<200&&e.extent[1]<120&&e.extent[3]<120?(e.projection="EPSG:4326",r=(0,d.createProjection)(e.projection,"EPSG:4326").getExtent()):(e.projection="EPSG:3857",r=(0,d.createProjection)(e.projection,"EPSG:3857").getExtent())),this.extent=void 0!==e.extent?e.extent:r,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.minZoom=void 0!==e.minZoom?e.minZoom:0,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.origin=void 0!==e.origin?e.origin:s.getTopLeft(this.extent),this.rlt=Math.random(),this.f=void 0!==e.f?e.f:"png",this.layers=void 0!=e.layers?e.layers:null,this.filters=void 0!=e.filters?e.filters:null,this.style=void 0!=e.style?e.style:null,this.proj=void 0!=e.proj?e.proj:null,this.guid=void 0!==e.guid?e.guid:(0,o.newGuid)(),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.cache=!1,this.tileGrid=void 0!==e.tileGrid?e.tileGrid:ol.tilegrid.createXYZ({extent:r,maxZoom:this.maxZoom,minZoom:this.minZoom,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend,""===this.domain?this.url_=this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name:this.url_=this.domain+"/igs/rest/mrms/docs/"+this.name};(0,l.inherits)(f,a.default),f.prototype.getResolutions=function(){if(null==this.maxResolution){var t=s.getWidth(this.extent),e=s.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},f.prototype.tileUrlFunctionExtend=function(t,e,i){var n=this.tileGrid;if(n||(n=this.getTileGridForProjection(i)),!(n.getResolutions().length<=t[0])){if(null!=n){var o=n.getTileRangeForExtentAndZ(this.extent,t[0],o);if(!o.contains(t))return}null!=this.maxResolution&&(this.maxResolution,Math.pow(2,t[0]));var a={f:this.f,cache:!1,rlt:this.rlt,guid:this.guid};null!=this.style&&(a.style=(0,r.default)(this.style)),null!=this.proj&&(a.proj=(0,r.default)(this.proj)),null!=this.layers&&(a.layers=this.layers),null!=this.filters&&(a.filters=this.filters);var s={minX:t[1],maxX:t[1],minY:t[2],maxY:t[2]},l=n.getTileRangeExtent(t[0],s,null);return a.w=this.tileSize,a.h=this.tileSize,a.bbox=l.join(","),(0,c.appendParams)(this.url_,a)}},e.MapDocTileSource=f,n.Zondy.Source.MapDocTileSource=f;var g=function(t,e,i){var r=void 0!==i?i:{};r.layerName=t,r.name=e,r.source=r.source?r.source:new f(r);var n=(0,u.assign)({},r);n.maxResolution=1/0,h.default.call(this,n),this.options={},(0,u.assign)(this.options,r),(0,u.assign)(this,r)};(0,l.inherits)(g,h.default),g.prototype.refresh=function(){this.setSource(null);var t=this.options.source.guid;(0,u.assign)(this.options,{guid:t}),this.options.source=new f(this.options),this.setSource(this.options.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(0,u.assign)(this.options,{style:t})},g.prototype.setLayerStatus=function(t,e){if(null!=t&&null!=e){var i=e+":"+t;(0,u.assign)(this.options,{layers:i}),this.refresh()}},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(0,u.assign)(this.options,{filters:t})},e.MapDocTileLayer=g,n.Zondy.Map.MapDocTileLayer=g},function(t,e,i){var r=i(80),n=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},function(t,e,i){i(495);var r=i(80).Object;t.exports=function(t,e,i){return r.defineProperty(t,e,i)}},function(t,e,i){var r=i(133);r(r.S+r.F*!i(151),"Object",{defineProperty:i(150).f})},function(t,e,i){i(497);var r=i(80).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,i){var r=i(168),n=i(287).f;i(234)("getOwnPropertyDescriptor",function(){return function(t,e){return n(r(t),e)}})},function(t,e,i){var r=i(197);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,i){t.exports={default:i(500),__esModule:!0}},function(t,e,i){i(350),t.exports=i(80).Object.getOwnPropertySymbols},function(t,e,i){var r=i(292),n=i(355),o=i(288);t.exports=function(t){var e=r(t),i=n.f;if(i)for(var a,s=i(t),l=o.f,u=0;s.length>u;)l.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,i){var r=i(168),n=i(354),o=i(503);t.exports=function(t){return function(e,i,a){var s,l=r(e),u=n(l.length),c=o(a,u);if(t&&i!=i){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===i)return t||c||0;return!t&&-1}}},function(t,e,i){var r=i(293),n=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?n(t+e,0):o(t,e)}},function(t,e,i){var r=i(197);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,i){var r=i(150),n=i(140),o=i(292);t.exports=i(151)?Object.defineProperties:function(t,e){n(t);for(var i,a=o(e),s=a.length,l=0;s>l;)r.f(t,i=a[l++],e[i]);return t}},function(t,e,i){i(507);var r=i(80).Object;t.exports=function(t){return r.getOwnPropertyNames(t)}},function(t,e,i){i(234)("getOwnPropertyNames",function(){return i(357).f})},function(t,e,i){t.exports={default:i(509),__esModule:!0}},function(t,e,i){i(360),i(363),t.exports=i(290).f("iterator")},function(t,e,i){var r=i(293),n=i(286);t.exports=function(t){return function(e,i){var o,a,s=String(n(e)),l=r(i),u=s.length;return l<0||l>=u?t?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(t,e,i){"use strict";var r=i(297),n=i(233),o=i(236),a={};i(166)(a,i(110)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=r(a,{next:n(1,i)}),o(t,e+" Iterator")}},function(t,e,i){"use strict";var r=i(513),n=i(514),o=i(199),a=i(168);t.exports=i(361)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,n(1)):n(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){t.exports={default:i(516),__esModule:!0}},function(t,e,i){i(350),i(364),i(517),i(518),t.exports=i(80).Symbol},function(t,e,i){i(291)("asyncIterator")},function(t,e,i){i(291)("observable")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Doc=e.MapDocSource=void 0;var r=i(6),n=i(22),o=i(89),a=y(o),s=y(i(219)),l=y(i(113)),u=g(i(1)),c=g(i(3)),h=g(i(10)),d=i(4),p=i(11),f=i(95);function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function y(t){return t&&t.__esModule?t:{default:t}}var v=function(t){var e=t||{};a.default.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.token=e.token,this.mode=void 0!==e.mode?e.mode:"normal",this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.f=void 0!==e.f?e.f:"png",this.layers=void 0!==e.layers?e.layers:null,this.filters=void 0!==e.filters?e.filters:null,this.style=void 0!==e.style?e.style:null,this.proj=void 0!==e.proj?e.proj:null,this.guid=void 0!==e.guid?e.guid:(0,n.newGuid)(),this.rlt=Math.random(),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:o.defaultImageLoadFunction,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.2,this.isAntialiasing=void 0!==e.isAntialiasing?e.isAntialiasing:null,this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",""===this.domain?this.url_=this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/docs/"+this.name:this.url_=this.domain+"/igs/rest/mrms/docs/"+this.name};(0,d.inherits)(v,a.default),v.prototype.getImage=function(t,e,i,r){if(void 0===this.url_)return null;e=this.findNearestResolution(e);var o=this.image_;if(o&&this.renderedRevision_===this.getRevision()&&o.getResolution()===e&&o.getPixelRatio()===i&&u.containsExtent(o.getExtent(),t))return o;null===this.guid&&(this.guid=(0,n.newGuid)());var a={f:this.f,cache:!1,rlt:this.rlt,guid:this.guid};null!==this.style&&(0,p.assign)(a,{style:$.toJSON(this.style)}),null!==this.proj&&(0,p.assign)(a,{proj:$.toJSON(this.proj)}),null!==this.layers&&(0,p.assign)(a,{layers:this.layers}),null!==this.filters&&(0,p.assign)(a,{filters:this.filters}),null!==this.mode&&(0,p.assign)(a,{mode:this.mode}),null!==this.isAntialiasing&&(0,p.assign)(a,{isAntialiasing:this.isAntialiasing});var s=((t=t.slice())[0]+t[2])/2,d=(t[1]+t[3])/2;if(1!==this.ratio_){var f=this.ratio_*u.getWidth(t)/2,g=this.ratio_*u.getHeight(t)/2;t[0]=s-f,t[1]=d-g,t[2]=s+f,t[3]=d+g}var y=e/i,v=Math.ceil(u.getWidth(t)/y),m=Math.ceil(u.getHeight(t)/y);t[0]=s-y*v/2,t[2]=s+y*v/2,t[1]=d-y*m/2,t[3]=d+y*m/2,this.imageSize_[0]=v,this.imageSize_[1]=m;var _=this.getRequestUrl_(t,this.imageSize_,i,r,a);return this.image_=new l.default(t,e,i,_,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),c.listen(this.image_,h.default.CHANGE,this.handleImageChange,this),this.image_},v.prototype.getRequestUrl_=function(t,e,i,r,n){return(0,p.assign)(n,{w:e[0]}),(0,p.assign)(n,{h:e[1]}),null!==this.layers&&(0,p.assign)(n,{layers:this.layers}),r.getAxisOrientation(),(0,p.assign)(n,{bbox:t.join(",")}),this.token&&(0,p.assign)(n,{token:this.token}),(0,f.appendParams)(this.url_,n)},e.MapDocSource=v,r.Zondy.Source.MapDocSource=v;var m=function(t,e,i){this.options=i||{},(0,p.assign)(this.options,{layerName:t}),(0,p.assign)(this.options,{name:e}),s.default.call(this,this.options),this.style=void 0!==this.options.style?this.options.style:null,this.filters=void 0!==this.options.filters?this.options.filters:null,this.layers=void 0!==this.options.layers?this.options.layers:null,this.isAntialiasing=void 0!==this.options.isAntialiasing?this.options.isAntialiasing:null,this.source=void 0!==this.options.source?this.options.source:null,null===this.source&&(this.source=new r.Zondy.Source.MapDocSource(this.options)),this.setSource(this.source),(0,p.assign)(this,this.options)};(0,d.inherits)(m,s.default),m.prototype.refresh=function(){this.setSource(null);var t=this.source.guid;(0,p.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,p.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,p.assign)(this.options,{filters:this.filters}),void 0!==this.layers&&null!==this.layers&&(0,p.assign)(this.options,{layers:this.layers}),void 0!==this.isAntialiasing&&null!==this.isAntialiasing&&(0,p.assign)(this.options,{isAntialiasing:this.isAntialiasing}),this.source=new r.Zondy.Source.MapDocSource(this.options),this.setSource(this.source)},m.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},m.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t)},m.prototype.setLayerStatus=function(t,e){if(null!==t&&null!==e){var i=e+":"+t;this.layers=i,this.refresh()}},m.prototype.setFilters=function(t){null!==t&&""!==t.toString()&&(this.filters=t)},e.Doc=m,r.Zondy.Map.Doc=m},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer_mapgis=e.TileLayerSource=void 0;var r=i(6),n=(i(22),h(i(81))),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),a=h(i(105)),s=i(4),l=i(11),u=h(i(154)),c=i(365);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=t||{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:void 0!==e.wrapX&&e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.name=void 0!==e.name?e.name:null,this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,r=[-180,-90,180,90];null!=i&&(r=i.getExtent()),this.extent=void 0!==e.extent?e.extent:r,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileOriginType=void 0!==e.tileOriginType?e.tileOriginType:"leftTop",this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=void 0!==e.resolutions?e.resolutions:this.getResolutions(),this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!=e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(d,n.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.extent),e=o.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},d.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var n;n=""===this.domain?this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/tile/"+this.name+"/{z}/{y}/{x}?size="+this.tileSize:this.domain+"/igs/rest/mrms/tile/"+this.name+"/{z}/{y}/{x}?size="+this.tileSize;var o=(this.extent[3]-this.extent[1])/2+this.extent[1];if("lefttop"==this.tileOriginType.toLowerCase()||this.origin[1]>=o)var a=t[0],s=t[1],l=-(t[2]+1);else if(a=t[0],s=t[1],l=t[2],s>=Math.pow(2,a)||l>=Math.pow(2,a))return;return n.replace("{x}",s.toString()).replace("{y}",l.toString()).replace("{z}",a.toString())},e.TileLayerSource=d,r.Zondy.Source.TileLayerSource=d;var p=function(t,e,i){var n=i||{};(0,l.assign)(n,{layerName:t}),(0,l.assign)(n,{name:e});var o=(0,l.assign)({},n);o.maxResolution=1/0,u.default.call(this,o),this.isAutoConfig=void 0===n.isAutoConfig||null==n.isAutoConfig||n.isAutoConfig,this.cache=void 0!==n.cache&&n.cache,this.source=void 0!==n.source?n.source:null,null==this.source&&(this.isAutoConfig?new r.Zondy.Service.GetMapInfoService({ip:n.ip,port:n.port,mapName:e,layerObj:this,paraObj:n}).GetMapInfo(function(t){var e=(0,l.assign)({},this.paraObj);e.name=t.name,e.extent=[t.xMin,t.yMin,t.xMax,t.yMax],e.tileOriginType=t.originType,e.resolutions=t.resolutions,e.tileSize=t.tileWidth,e.origin=[t.originX,t.originY],e.maxZoom=t.endLevel,"dtile"==t.type.toLowerCase()&&(this.layerObj.cache=!0),t.xMax-t.xMin<=1e-6&&t.yMax-t.yMin<=1e-6?alert("èŽ·å–æ•°æ®èŒƒå›´å¤±è´¥ï¼"):(this.layerObj.cache?this.layerObj.source=new c.CacheTileLayerSource(e):this.layerObj.source=new d(e),this.layerObj.setSource(this.layerObj.source))},function(){alert("è¯·æ±‚å¤±è´¥ï¼")},null):(this.cache?this.source=new c.CacheTileLayerSource(n):this.source=new d(n),this.setSource(this.source))),(0,l.assign)(this,n)};(0,s.inherits)(p,u.default),e.TileLayer_mapgis=p,r.Zondy.Map.TileLayer=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GdbpLayer=e.MapLayerTileSource=void 0;var r=p(i(58)),n=i(6),o=i(22),a=p(i(81)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),l=p(i(105)),u=i(4),c=i(11),h=i(95),d=p(i(154));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){var e=void 0!==t?t:{};if(a.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,projection:e.projection,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.gdbps=void 0!==e.gdbps?e.gdbps:null,null!=this.gdbps){this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null,r=[-180,-90,180,90];null!=i&&(r=i.getExtent()),this.extent=void 0!==e.extent?e.extent:r,this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.origin=void 0!==e.origin?e.origin:s.getTopLeft(this.extent),this.rlt=Math.random(),this.f=void 0!==e.f?e.f:"png",this.filters=void 0!=e.filters?e.filters:null,this.style=void 0!=e.style?e.style:null,this.guid=void 0!==e.guid?e.guid:(0,o.newGuid)(),this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",this.tileGrid=new l.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend,this.proj=e.proj,""===this.domain?this.url_=this.networkProtocol+"://"+this.ip+":"+this.port+"/igs/rest/mrms/layers":this.url_=this.domain+"/igs/rest/mrms/layers"}else alert("å½“å‰æ²¡æœ‰èµ‹å€¼è¦æ˜¾ç¤ºçš„çŸ¢é‡å›¾å±‚ï¼")};(0,u.inherits)(f,a.default),f.prototype.getResolutions=function(){if(null==this.maxResolution){var t=s.getWidth(this.extent),e=s.getHeight(this.extent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},f.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}null!=this.maxResolution&&(this.maxResolution,Math.pow(2,t[0]));var o={f:this.f,rlt:this.rlt,guid:this.guid};null!=this.gdbps&&""!=this.gdbps&&(0,c.assign)(o,{gdbps:this.gdbps.join(",")}),null!=this.style&&(0,c.assign)(o,{style:(0,r.default)(this.style)}),null!=this.filters&&(0,c.assign)(o,{filters:this.filters}),null!=this.proj&&(0,c.assign)(o,{proj:this.proj});var a={minX:t[1],maxX:t[1],minY:t[2],maxY:t[2]},s=this.tileGrid.getTileRangeExtent(t[0],a,null);return o.w=this.tileSize,o.h=this.tileSize,o.bbox=s.join(","),(0,h.appendParams)(this.url_,o)},e.MapLayerTileSource=f,n.Zondy.Source.MapLayerTileSource=f;var g=function(t,e,i){var r=i||{};(0,c.assign)(r,{layerName:t}),(0,c.assign)(r,{gdbps:e}),(0,c.assign)(r,{source:r.source?r.source:new f(r)}),d.default.call(this,r),this.options={},(0,c.assign)(this.options,r),(0,c.assign)(this,r)};(0,u.inherits)(g,d.default),g.prototype.refresh=function(){this.setSource(null);var t=this.options.source.guid;(0,c.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,c.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,c.assign)(this.options,{filters:this.filters}),this.options.source=new f(this.options),this.setSource(this.options.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t,(0,c.assign)(this.options,{style:t}))},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(this.filters=t,(0,c.assign)(this.options,{filters:t}))},e.GdbpLayer=g,n.Zondy.Map.GdbpLayer=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Layer=e.MapLayerSource=void 0;var r=i(6),n=i(22),o=p(i(89)),a=i(1),s=(p(a),d(i(105)),i(4)),l=d(i(113)),u=i(11),c=i(95),h=d(i(219));function d(t){return t&&t.__esModule?t:{default:t}}function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var f=function(t){var e=t||{};ol.source.Image.call(this,{attributions:e.attributions,logo:e.logo,projection:e.projection,resolutions:e.resolutions}),this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.gdbps=void 0!==e.gdbps?e.gdbps:null,null!=this.gdbps?(this.f=void 0!==e.f?e.f:"png",this.rlt=Math.random(),this.filters=void 0!==e.filters?e.filters:null,this.style=void 0!==e.style?e.style:null,this.guid=void 0!==e.guid?e.guid:r.Zondy.Util.newGuid(),this.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,this.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:o.defaultImageLoadFunction,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==e.ratio?e.ratio:1.5,this.url_="http://"+this.ip+":"+this.port+"/igs/rest/mrms/layers"):alert("å½“å‰æ²¡æœ‰èµ‹å€¼è¦æ˜¾ç¤ºçš„çŸ¢é‡å›¾å±‚ï¼")};(0,s.inherits)(f,o.default),f.prototype.getImage=function(t,e,i,r){if(void 0==this.url_)return null;e=this.findNearestResolution(e);var o=this.image_;if(o&&this.renderedRevision_==this.getRevision()&&o.getResolution()==e&&o.getPixelRatio()==i&&(0,a.containsExtent)(o.getExtent(),t))return o;null==this.guid&&(this.guid=(0,n.newGuid)());var s={f:this.f,rlt:this.rlt,guid:this.guid};null!=this.gdbps&&""!=this.gdbps&&(0,u.assign)(s,{gdbps:this.gdbps.join(",")}),null!=this.style&&(0,u.assign)(s,{style:$.toJSON(this.style)}),null!=this.filters&&(0,u.assign)(s,{filters:this.filters});var c=((t=t.slice())[0]+t[2])/2,h=(t[1]+t[3])/2;if(1!=this.ratio_){var d=this.ratio_*(0,a.getWidth)(t)/2,p=this.ratio_*(0,a.getHeight)(t)/2;t[0]=c-d,t[1]=h-p,t[2]=c+d,t[3]=h+p}var f=e/i,g=Math.ceil((0,a.getWidth)(t)/f),y=Math.ceil((0,a.getHeight)(t)/f);t[0]=c-f*g/2,t[2]=c+f*g/2,t[1]=h-f*y/2,t[3]=h+f*y/2,this.imageSize_[0]=g,this.imageSize_[1]=y;var v=this.getRequestUrl_(t,this.imageSize_,i,r,s);return this.image_=new l.default(t,e,i,v,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_},f.prototype.getRequestUrl_=function(t,e,i,r,n){(0,u.assign)(n,{w:e[0]}),(0,u.assign)(n,{h:e[1]}),null!=this.layers&&(0,u.assign)(n,{layers:this.layers}),r.getAxisOrientation();var o=t;return(0,u.assign)(n,{bbox:o.join(",")}),(0,c.appendParams)(this.url_,n)},f.prototype.getUrl=function(){return this.url_},f.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.MapLayerSource=f,r.Zondy.Source.MapLayerSource=f;var g=function(t,e,i){this.options=i||{},ol.layer.Image.call(this,this.options),(0,u.assign)(this.options,{layerName:t}),(0,u.assign)(this.options,{gdbps:e}),this.style=void 0!==this.options.style?this.options.style:null,this.filters=void 0!==this.options.filters?this.options.filters:null,this.source=void 0!==this.options.source?this.options.source:null,null==this.source&&(this.source=new r.Zondy.Source.MapLayerSource(this.options)),this.setSource(this.source),(0,u.assign)(this,this.options)};(0,s.inherits)(g,h.default),g.prototype.refresh=function(){this.setSource(null);var t=this.source.guid;(0,u.assign)(this.options,{guid:t}),void 0!==this.style&&null!==this.style&&(0,u.assign)(this.options,{style:this.style}),void 0!==this.filters&&null!==this.filters&&(0,u.assign)(this.options,{filters:this.filters}),this.source=new r.Zondy.Source.MapLayerSource(this.options),this.setSource(this.source)},g.prototype.getStyle=function(){return void 0!==this.options.style?this.options.style:null},g.prototype.setStyle=function(t){void 0!==t&&null!==t&&(this.style=t)},g.prototype.setFilters=function(t){null!=t&&""!=t.toString()&&(this.filters=t)},e.Layer=g,r.Zondy.Map.Layer=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZDTileDebug=void 0;var r=g(i(13)),n=g(i(8)),o=g(i(18)),a=g(i(14)),s=g(i(15)),l=i(6),u=g(i(98)),c=g(i(16)),h=i(24),d=i(45),p=g(i(128)),f=i(46);function g(t){return t&&t.__esModule?t:{default:t}}var y=function(t){function e(t,i,o){(0,n.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,c.default.LOADED));return s.tileSize_=i,s.text_=o,s.canvas_=null,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getImage",value:function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=(0,h.createCanvasContext2D)(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.text_,t[0]/2,t[1]/2),this.canvas_=e.canvas,e.canvas}},{key:"load",value:function(){}}]),e}(u.default),v=function(t){function e(t){return(0,n.default)(this,e),(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX}))}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getTile",value:function(t,e,i){var r=(0,f.getKeyZXY)(t,e,i);if(this.tileCache.containsKey(r))return this.tileCache.get(r);var n=(0,d.toSize)(this.tileGrid.getTileSize(t)),o=[t,e,i],a=this.getTileCoordForTileUrlFunction(o),s=(a?this.getTileCoordForTileUrlFunction(a).toString():"").split(",");s[2]=-s[2]-1;var l=s.join(","),u=new y(o,n,l);return this.tileCache.set(r,u),u}}]),e}(p.default);e.ZDTileDebug=v,l.Zondy.Map.ZDTileDebug=v},function(t,e,i){i(525),t.exports=i(80).Object.getPrototypeOf},function(t,e,i){var r=i(296),n=i(362);i(234)("getPrototypeOf",function(){return function(t){return n(r(t))}})},function(t,e,i){t.exports={default:i(527),__esModule:!0}},function(t,e,i){i(528),t.exports=i(80).Object.setPrototypeOf},function(t,e,i){var r=i(133);r(r.S,"Object",{setPrototypeOf:i(529).set})},function(t,e,i){var r=i(141),n=i(140),o=function(t,e){if(n(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=i(195)(Function.call,i(287).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return o(t,i),e?t.__proto__=i:r(t,i),t}}({},!1):void 0),check:o}},function(t,e,i){t.exports={default:i(531),__esModule:!0}},function(t,e,i){i(532);var r=i(80).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,i){var r=i(133);r(r.S,"Object",{create:i(297)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenStreetLayerType=e.ArcGISLayerType=e.GoogleLayerType=e.TiandituType=e.OpenStreetLayer=e.OpenStreetMapSource=e.ArcGISLayer=e.ArcGISMapSource=e.GoogleLayer=e.GoogleMapSource=e.TianDiTu=e.TiandituMapSource=e.GaoDeLayer=e.GaodeMapSource=e.BaiDuLayer=e.BaiduMapSource=void 0;var r=i(6),n=(i(22),h(i(81))),o=c(i(1)),a=h(i(105)),s=i(4),l=h(i(154)),u=c(i(9));function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.maxResolution=void 0!==e.maxResolution?e.maxResolution:null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],this.tileExtent=null!=i?i.getExtent():[-20037508.34,-20037508.34,20037508.34,20037508.34],this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:[0,0],this.maxZoom=void 0!==e.maxZoom?e.maxZoom:16,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(d,n.default),d.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},d.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var n=t[0],o=t[1],a=t[2];return"http://online2.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=pl&udt=20141219&scaler=1".replace("{z}",n.toString()).replace("{y}",a.toString()).replace("{x}",o.toString())},e.BaiduMapSource=d,r.Zondy.Source.BaiduMapSource=d;var p=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new d(e),this.setSource(this.source))};(0,s.inherits)(p,l.default),e.BaiDuLayer=p,r.Zondy.Map.BaiDuLayer=p;var f=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.maxResolution=null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],this.tileExtent=null!=i?i.getExtent():[-20037508.34,-20037508.34,20037508.34,20037508.34],this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=18?e.maxZoom:18,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(f,n.default),f.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},f.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var n=["http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd03.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}","http://webrd04.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&z={z}&y={y}&x={x}"],o=t[0],a=t[1],s=-(t[2]+1);return n[Math.round(Math.random()*(n.length-1))].replace("{z}",o.toString()).replace("{y}",s.toString()).replace("{x}",a.toString())},e.GaodeMapSource=f,r.Zondy.Source.GaodeMapSource=f;var g=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new f(e),this.setSource(this.source))};(0,s.inherits)(g,l.default),e.GaoDeLayer=g,r.Zondy.Map.GaoDeLayer=g;var y=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:r.Zondy.Enum.Map.TiandituType.VEC,this.ip=void 0!==e.ip?e.ip:"127.0.0.1",this.port=void 0!==e.port?e.port:"6163",this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",""===this.domain?this.domainStr=this.networkProtocol+"://"+this.ip+":"+this.port:this.domainStr=this.domain,this.maxResolution=null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-180,-90,180,90],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=18?e.maxZoom:18,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.custom=void 0!==e.custom?e.custom:null,this.token=e.token,this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(y,n.default),y.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t<=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},y.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var o="";if(null!==this.custom&&void 0!==this.custom){if(void 0===this.custom.baseURL)return;this.custom.layer=this.custom.layer?this.custom.layer:r.Zondy.Enum.Map.TiandituType.VEC,this.custom.version=this.custom.version?this.custom.version:"1.0.0",o=this.custom.baseURL.indexOf("?")>0?this.custom.baseURL+"&SERVICE=WMTS&REQUEST=GetTile&VERSION="+this.custom.version+"&LAYER="+this.custom.layer+"&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}":this.custom.baseURL+"?SERVICE=WMTS&REQUEST=GetTile&VERSION="+this.custom.version+"&LAYER="+this.custom.layer+"&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}"}else switch(this.layerType){case r.Zondy.Enum.Map.TiandituType.VEC:case r.Zondy.Enum.TiandituType.VEC:o="http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/vec_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case r.Zondy.Enum.Map.TiandituType.IMG:case r.Zondy.Enum.TiandituType.IMG:o="http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/img_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case r.Zondy.Enum.Map.TiandituType.CVA:case r.Zondy.Enum.TiandituType.CVA:o="http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/cva_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case r.Zondy.Enum.Map.TiandituType.CIA:case r.Zondy.Enum.TiandituType.CIA:o="http://t"+Math.round(7*Math.random())+".tianditu.gov.cn/cia_c/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=c&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}";break;case r.Zondy.Enum.Map.TiandituType.VEC_IGS:case r.Zondy.Enum.TiandituType.VEC_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/vector/{x}/{y}/{z}";break;case r.Zondy.Enum.Map.TiandituType.IMG_IGS:case r.Zondy.Enum.TiandituType.IMG_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/raster/{x}/{y}/{z}";break;case r.Zondy.Enum.Map.TiandituType.CVA_IGS:case r.Zondy.Enum.TiandituType.CVA_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/vectorAnno/{x}/{y}/{z}";break;case r.Zondy.Enum.Map.TiandituType.CIA_IGS:case r.Zondy.Enum.TiandituType.CIA_IGS:o=this.domainStr+"/igs/rest/cts/tianditu/rasterAnno/{x}/{y}/{z}"}var a="";void 0!=this.token&&""!=this.token&&(a="tk="+this.token,o.indexOf("?")>0?o+="&"+a:o+="?"+a);var s=t[0],l=t[1],u=-(t[2]+1);return o.replace("{x}",l.toString()).replace("{y}",u.toString()).replace("{z}",s.toString())},e.TiandituMapSource=y,r.Zondy.Source.TiandituMapSource=y;var v=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new y(e),this.setSource(this.source))};(0,s.inherits)(v,l.default),e.TianDiTu=v,r.Zondy.Map.TianDiTu=v;var m=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,wrapX:e.wrapX,tilePixelRatio:e.tilePixelRatio,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.ip=void 0!==e.ip?e.ip:null,this.port=void 0!==e.port?e.port:null,this.networkProtocol=void 0!==e.networkProtocol?e.networkProtocol:location.protocol.split(":")[0]||"http",this.domain=e&&e.domain?e.domain:"",""===this.domain?this.domainStr=this.networkProtocol+"://"+this.ip+":"+this.port:this.domainStr=this.domain,this.layerType=void 0!==e.layerType?e.layerType:r.Zondy.Enum.Map.GoogleLayerType.VEC,this.maxResolution=null;var i=void 0!==e.projection?e.projection:null;this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getTopLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=24?e.maxZoom:24,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:this.getBaseURL(),this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(m,n.default),m.prototype.getBaseURL=function(){var t="";switch(this.layerType){case r.Zondy.Enum.Map.GoogleLayerType.VEC:case r.Zondy.Enum.GoogleLayerType.VEC:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt/lyrs=m@207000000&hl=zh-CN&gl=CN&src=app&s=Galile";break;case r.Zondy.Enum.Map.GoogleLayerType.RASTER:case r.Zondy.Enum.GoogleLayerType.RASTER:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt?lyrs=s@173&hl=zh-Hans-CN&gl=CN&token=63145";break;case r.Zondy.Enum.Map.GoogleLayerType.ROAD:case r.Zondy.Enum.GoogleLayerType.ROAD:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt/imgtp=png32&lyrs=h@248000000,highlight:0x342eaef8dd85f26f:0x39c2c9ac6c582210@1%7Cstyle:maps&hl=zh-CN&gl=CN&src=app&s=Galileo";break;case r.Zondy.Enum.Map.GoogleLayerType.TERRAIN:case r.Zondy.Enum.GoogleLayerType.TERRAIN:t="http://mt"+Math.round(3*Math.random())+".google.cn/vt?lyrs=t&scale=1";break;case r.Zondy.Enum.Map.GoogleLayerType.VEC_IGS:case r.Zondy.Enum.GoogleLayerType.VEC_IGS:t=this.domain+"/igs/rest/cts/google/vector/";break;case r.Zondy.Enum.Map.GoogleLayerType.RASTER_IGS:case r.Zondy.Enum.GoogleLayerType.RASTER_IGS:t=this.domain+"/igs/rest/cts/google/raster/";break;case r.Zondy.Enum.Map.GoogleLayerType.ROAD_IGS:case r.Zondy.Enum.GoogleLayerType.ROAD_IGS:t=this.domain+"/igs/rest/cts/google/road/";break;case r.Zondy.Enum.Map.GoogleLayerType.TERRAIN_IGS:case r.Zondy.Enum.GoogleLayerType.TERRAIN_IGS:t=this.domain+"/igs/rest/cts/google/terrain/"}return t},m.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t<=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},m.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var n=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],n);if(!n.contains(t))return}var o="";switch(this.layerType){case r.Zondy.Enum.Map.GoogleLayerType.VEC:case r.Zondy.Enum.GoogleLayerType.VEC:case r.Zondy.Enum.Map.GoogleLayerType.RASTER:case r.Zondy.Enum.GoogleLayerType.RASTER:case r.Zondy.Enum.Map.GoogleLayerType.ROAD:case r.Zondy.Enum.GoogleLayerType.ROAD:case r.Zondy.Enum.Map.GoogleLayerType.TERRAIN:case r.Zondy.Enum.GoogleLayerType.TERRAIN:o=this.baseURL+"&x={x}&y={y}&z={z}";break;case r.Zondy.Enum.Map.GoogleLayerType.VEC_IGS:case r.Zondy.Enum.GoogleLayerType.VEC_IGS:case r.Zondy.Enum.Map.GoogleLayerType.RASTER_IGS:case r.Zondy.Enum.GoogleLayerType.RASTER_IGS:case r.Zondy.Enum.Map.GoogleLayerType.ROAD_IGS:case r.Zondy.Enum.GoogleLayerType.ROAD_IGS:case r.Zondy.Enum.Map.GoogleLayerType.TERRAIN_IGS:case r.Zondy.Enum.GoogleLayerType.TERRAIN_IGS:o=this.baseURL+"{x}/{y}/{z}"}var a=t[0],s=t[1],l=-(t[2]+1);return o.replace("{x}",s.toString()).replace("{y}",l.toString()).replace("{z}",a.toString())},e.GoogleMapSource=m,r.Zondy.Source.GoogleMapSource=m;var _=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new m(e),this.setSource(this.source))};(0,s.inherits)(_,l.default),e.GoogleLayer=_,r.Zondy.Map.GoogleLayer=_;var b=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:r.Zondy.Enum.Map.ArcGISLayerType.WorldTerrainBase,this.maxResolution=null;var i=void 0!==e.projection?e.projection:this.initProjection();this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom?e.maxZoom<=20?e.maxZoom:20:this.initMaxZoom(),this.tileSize=void 0!==e.tileSize?e.tileSize:this.initTileSize(),this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:"http://services.arcgisonline.com/ArcGIS/rest/services/",this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(b,n.default),b.prototype.initTileSize=function(){var t=256;switch(this.layerType){case r.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case r.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case r.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case r.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case r.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case r.Zondy.Enum.ArcGISLayerType.TopoUS2D:t=512;break;default:t=256}return t},b.prototype.initProjection=function(){var t=null;switch(this.layerType){case r.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case r.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case r.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case r.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case r.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case r.Zondy.Enum.ArcGISLayerType.TopoUS2D:t=u.get("EPSG:4326");break;default:t=u.get("EPSG:3857")}return t},b.prototype.initMaxZoom=function(){var t=null;switch(this.layerType){case r.Zondy.Enum.Map.ArcGISLayerType.ImageryWorld2D:case r.Zondy.Enum.ArcGISLayerType.ImageryWorld2D:case r.Zondy.Enum.Map.ArcGISLayerType.StreetMapWorld2D:case r.Zondy.Enum.ArcGISLayerType.StreetMapWorld2D:case r.Zondy.Enum.Map.ArcGISLayerType.USATopoMaps:case r.Zondy.Enum.ArcGISLayerType.USATopoMaps:t=16;break;case r.Zondy.Enum.Map.ArcGISLayerType.TopoUS2D:case r.Zondy.Enum.ArcGISLayerType.TopoUS2D:case r.Zondy.Enum.Map.ArcGISLayerType.WorldShadedRelief:case r.Zondy.Enum.ArcGISLayerType.WorldShadedRelief:case r.Zondy.Enum.Map.ArcGISLayerType.WorldTerrainBase:case r.Zondy.Enum.ArcGISLayerType.WorldTerrainBase:t=14;break;case r.Zondy.Enum.Map.ArcGISLayerType.WorldPhysical:case r.Zondy.Enum.ArcGISLayerType.WorldPhysical:t=9;break;case r.Zondy.Enum.Map.ArcGISLayerType.WorldStreet:case r.Zondy.Enum.ArcGISLayerType.WorldStreet:case r.Zondy.Enum.Map.ArcGISLayerType.WorldTopo:case r.Zondy.Enum.ArcGISLayerType.WorldTopo:case r.Zondy.Enum.Map.ArcGISLayerType.WorldImagery:case r.Zondy.Enum.ArcGISLayerType.WorldImagery:t=20;break;case r.Zondy.Enum.Map.ArcGISLayerType.NatGeoWorldMap:case r.Zondy.Enum.ArcGISLayerType.NatGeoWorldMap:case r.Zondy.Enum.Map.ArcGISLayerType.OceanBasemap:case r.Zondy.Enum.ArcGISLayerType.OceanBasemap:t=17}return t},b.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},b.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var n=this.baseURL+this.layerType+"/MapServer/tile/{z}/{y}/{x}.jpg",o=t[0],a=t[1],s=Math.pow(2,o)-1-t[2];return n.replace("{x}",a.toString()).replace("{y}",s.toString()).replace("{z}",o.toString())},e.ArcGISMapSource=b,r.Zondy.Source.ArcGISMapSource=b;var S=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new b(e),this.setSource(this.source))};(0,s.inherits)(S,l.default),e.ArcGISLayer=S,r.Zondy.Map.ArcGISLayer=S;var O=function(t){var e=void 0!==t?t:{};n.default.call(this,{attributions:e.attributions,logo:e.logo,opaque:e.opaque,projection:e.projection,state:void 0!==e.state?e.state:void 0,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,crossOrigin:void 0!==e.crossOrigin?e.crossOrigin:null}),this.layerType=void 0!==e.layerType?e.layerType:r.Zondy.Enum.Map.OpenStreetLayerType.OSM,xResolution=null;var i=void 0!==e.projection?e.projection:u.get("EPSG:3857");this.tileExtent=[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],null!=i&&(this.tileExtent=i.getExtent()),this.extent=void 0!==e.extent?e.extent:this.tileExtent,this.origin=void 0!==e.origin?e.origin:o.getBottomLeft(this.extent),this.maxZoom=void 0!==e.maxZoom&&e.maxZoom<=20?e.maxZoom:20,this.tileSize=void 0!==e.tileSize?e.tileSize:256,this.resolutions=this.getResolutions(),this.baseURL=void 0!==e.baseURL?e.baseURL:this.GetUrlFormat(),this.tileGrid=new a.default({origin:this.origin,resolutions:this.resolutions,tileSize:this.tileSize}),this.tileUrlFunction=void 0!==e.tileUrlFunction?e.tileUrlFunction:this.tileUrlFunctionExtend};(0,s.inherits)(O,n.default),O.prototype.GetUrlFormat=function(){var t=null;switch(this.layerType){case r.Zondy.Enum.Map.OpenStreetLayerType.LandScape:case r.Zondy.Enum.OpenStreetLayerType.LandScape:t="http://"+"abc"[Math.round(2*Math.random())]+".tile3.opencyclemap.org/landscape/{z}/{x}/{y}.png";break;case r.Zondy.Enum.Map.OpenStreetLayerType.CYCLE:case r.Zondy.Enum.OpenStreetLayerType.CYCLE:t="http://"+"abc"[Math.round(2*Math.random())]+".tile.opencyclemap.org/cycle/{z}/{x}/{y}.png";break;case r.Zondy.Enum.Map.OpenStreetLayerType.CycleTransport:case r.Zondy.Enum.OpenStreetLayerType.CycleTransport:t="http://"+"abc"[Math.round(2*Math.random())]+".tile2.opencyclemap.org/transport/{z}/{x}/{y}.png";break;case r.Zondy.Enum.Map.OpenStreetLayerType.OSM:case r.Zondy.Enum.OpenStreetLayerType.OSM:t="http://"+"abc"[Math.round(2*Math.random())]+".tile.openstreetmap.org/{z}/{x}/{y}.png";break;case r.Zondy.Enum.Map.OpenStreetLayerType.OSM_HYB:case r.Zondy.Enum.OpenStreetLayerType.OSM_HYB:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/hyb/{z}/{x}/{y}.png";break;case r.Zondy.Enum.Map.OpenStreetLayerType.OSM_Quest:case r.Zondy.Enum.OpenStreetLayerType.OSM_Quest:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/osm/{z}/{x}/{y}.png";break;case r.Zondy.Enum.Map.OpenStreetLayerType.OSM_Q_SAT:case r.Zondy.Enum.OpenStreetLayerType.OSM_Q_SAT:t="http://otile"+(Math.round(2*Math.random())+1)+".mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg"}return t},O.prototype.getResolutions=function(){if(null==this.maxResolution){var t=o.getWidth(this.tileExtent),e=o.getHeight(this.tileExtent);this.maxResolution=(t>=e?e:t)/this.tileSize}for(var i=new Array(this.maxZoom),r=0;r<this.maxZoom;++r)i[r]=this.maxResolution/Math.pow(2,r);return i},O.prototype.tileUrlFunctionExtend=function(t,e,i){if(null!=this.tileGrid){var r=this.tileGrid.getTileRangeForExtentAndZ(this.extent,t[0],r);if(!r.contains(t))return}var n=t[0],o=t[1],a=Math.pow(2,n)-1-t[2];return this.baseURL.replace("{x}",o.toString()).replace("{y}",a.toString()).replace("{z}",n.toString())},e.OpenStreetMapSource=O,r.Zondy.Source.OpenStreetMapSource=O;var C=function(t){var e=void 0!==t?t:{};l.default.call(this,e),void 0==e.source&&(this.source=new O(e),this.setSource(this.source))};(0,s.inherits)(C,l.default),e.OpenStreetLayer=C,r.Zondy.Map.OpenStreetLayer=C;var T={VEC:"vec",IMG:"img",CVA:"cva",CIA:"cia",VEC_IGS:"vec_igs",IMG_IGS:"img_igs",CVA_IGS:"cva_igs",CIA_IGS:"cia_igs"};e.TiandituType=T,r.Zondy.Enum.Map.TiandituType=r.Zondy.Enum.TiandituType=T;var x={VEC:"vector",RASTER:"raster",ROAD:"road",TERRAIN:"terrain",VEC_IGS:"vector_igs",RASTER_IGS:"raster_igs",ROAD_IGS:"road_igs",TERRAIN_IGS:"terrain_igs"};e.GoogleLayerType=x,r.Zondy.Enum.Map.GoogleLayerType=r.Zondy.Enum.GoogleLayerType=x;var E={ImageryWorld2D:"ESRI_Imagery_World_2D",StreetMapWorld2D:"ESRI_StreetMap_World_2D",TopoUS2D:"NGS_Topo_US_2D",WorldImagery:"World_Imagery",WorldPhysical:"World_Physical_Map",WorldShadedRelief:"World_Shaded_Relief",WorldStreet:"World_Street_Map",WorldTerrainBase:"World_Terrain_Base",WorldTopo:"World_Topo_Map",NatGeoWorldMap:"NatGeo_World_Map",OceanBasemap:"Ocean_Basemap",USATopoMaps:"USA_Topo_Maps"};e.ArcGISLayerType=E,r.Zondy.Enum.Map.ArcGISLayerType=r.Zondy.Enum.ArcGISLayerType=E;var P={LandScape:"landscape",CYCLE:"cycle",CycleTransport:"transport",OSM:"openstreetmap",OSM_HYB:"hyb",OSM_Quest:"mapquest",OSM_Q_SAT:"OSM_sat"};e.OpenStreetLayerType=P,r.Zondy.Enum.Map.OpenStreetLayerType=r.Zondy.Enum.OpenStreetLayerType=P},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.goog=e.MilstdParams=e.EnumMilstdType=e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilStd=e.Drag=e.ZDOverviewMap=e.PolygonJSON=void 0;var r=i(535),n=i(536),o=i(537),a=i(538),s=function(t){return t&&t.__esModule?t:{default:t}}(i(539));e.PolygonJSON=r.PolygonJSON,e.ZDOverviewMap=n.ZDOverviewMap,e.Drag=o.Drag,e.MilStd=a.MilStd,e.MilStdDrawTool=a.MilStdDrawTool,e.MilStdModifyTool=a.MilStdModifyTool,e.MilStdDragPan=a.MilStdDragPan,e.EnumMilstdType=a.EnumMilstdType,e.MilstdParams=a.MilstdParams,e.goog=s.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolygonJSON=void 0;var r=i(6),n=i(11),o=d(i(36)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=d(i(25)),l=d(i(34)),u=d(i(20)),c=d(i(54)),h=d(i(82));function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){var e=void 0!==t?t:{};(0,n.assign)(this,e)};p.prototype.read=function(t,e){if(void 0===t)return null;var i;return null!==(i="string"==typeof t?JSON.parse(t):t)?this.parseVectors(i):void 0},p.prototype.parseVectors=function(t){if(void 0===t||void 0===t.SFEleArray)return null;if(!t.SFEleArray)return null;if(0==t.SFEleArray.length)return null;for(var e=new Array,i=0,r=t.SFEleArray.length;i<r;i++){var n=t.SFEleArray[i],a=this.parseAttribute(t.AttStruct,n.AttValue),s=this.parseGeometry(n.fGeom,n.ftype),l=new o.default;l.setGeometry(s),l.setId(n.FID.toString()),l.setProperties(a),e[i]=l}return e},p.prototype.parseBound=function(t){return void 0===t?null:a.createOrUpdate(t.xmin,t.ymin,t.xmax,t.ymax)},p.prototype.parseAttribute=function(t,e){if(void 0===t||void 0===e)return null;if(t.FldName.length!=e.length)return null;for(var i=new s.default,r=0,n=t.FldName.length;r<n;r++)i.set(t.FldName[r],e[r]);return i},p.prototype.parseGeometry=function(t,e){var i=null;switch("Unknow"==e&&(e=t.PntGeom.length>0?1:t.LinGeom.length>0?2:3),e){case 1:i=this.parseGPoint(t.PntGeom);break;case 2:i=this.parseGLine(t.LinGeom);break;case 3:i=this.parseGRegion(t.RegGeom)}return i},p.prototype.parseGRegion=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;for(var e=0,i=new Array,r=0;r<t.length;r++){var n=t[r];if(void 0===n||void 0===n.Rings)return null;for(var o=0,a=n.Rings.length;o<a;o++){for(var s=n.Rings[o],c=new Array,h=s.Arcs[0].Dots,d=0,p=h.length;d<p;d++)c[d]=[h[d].x,h[d].y];i[e++]=c}}return new l.default(i,u.default.XY)},p.prototype.parseGLine=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;var e=[];if(!t)return null;if(0===t.length)return null;for(var i=0,r=t.length;i<r;i++){for(var n=new Array,o=t[i].Line.Arcs[0].Dots,a=0,s=o.length;a<s;a++)n[a]=[o[a].x,o[a].y];e[i]=n}return new c.default(e)},p.prototype.parseGPoint=function(t){if(void 0===t||void 0===t.length||0==t.length)return null;for(var e=[],i=null,r=0,n=t.length;r<n;r++)i=t[r].Dot,e[r]=[i.x,i.y];return new h.default(e,u.default.XY)},e.PolygonJSON=p,r.Zondy.Format.PolygonJSON=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZDOverviewMap=void 0;var r=i(6),n=i(4),o=u(i(231)),a=u(i(183)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(3)),l=u(i(10));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){var e=void 0!==t?t:{};o.default.call(this,e),this.cursor_="move",this.previousCursor_=void 0,this.mouseDown=!1,this.positionBox=null,this.preMousePos=null,this.startPos=null,this.endPos=null,this.SetBoxStyle("#999999",.5),this.collapsed_||this.ConnectEventHandle()};(0,n.inherits)(c,o.default),c.prototype.InitView=function(t,e){this.ovmap_.setView(new a.default({center:t,projection:e}))},c.prototype.ConnectEventHandle=function(){var t=this.boxOverlay_.getElement();void 0!==t&&null!=t&&(s.listen(t,l.default.MOUSEMOVE,this.handleMouseEnter,this),s.listen(t,l.default.MOUSEOUT,this.handleMouseLeave,this))},c.prototype.SetBoxStyle=function(t,e){if(void 0!==this.boxOverlay_&&null!=this.boxOverlay_){var i=this.boxOverlay_.getElement();i.style.backgroundColor=t,i.style.opacity=e}},c.prototype.DisConnectEventHandle=function(){var t=this.boxOverlay_.getElement();void 0!==t&&null!=t&&(s.unlisten(t,l.default.MOUSEMOVE,this.handleMouseEnter,this),s.unlisten(t,l.default.MOUSEOUT,this.handleMouseLeave,this))},c.prototype.ConvertPixelToNumber=function(t){if(void 0!==t&&null!=t){var e=t.indexOf("px");if(e>0)return Number(t.slice(0,e))}return Number(t)},c.prototype.handleMouseDown=function(t){this.mouseDown=!0;var e=this.ConvertPixelToNumber(t.target.parentNode.style.bottom),i=this.ConvertPixelToNumber(t.target.parentNode.style.left);this.positionBox=[e,i],this.preMousePos=[t.clientX,t.clientY],this.startPos=[t.clientX,t.clientY]},c.prototype.handleMouseMove=function(t){if(void 0!==this.positionBox&&null!=this.positionBox&&1==this.mouseDown){var e=t.clientX-this.preMousePos[0],i=t.clientY-this.preMousePos[1];this.positionBox[0]-=i,this.positionBox[1]+=e,t.target.parentNode.style.bottom=this.positionBox[0]+"px",t.target.parentNode.style.left=this.positionBox[1]+"px",this.preMousePos=[t.clientX,t.clientY]}},c.prototype.handleMouseUp=function(t){if(null!=this.startPos){this.mouseDown=!1,this.endPos=[t.clientX,t.clientY];var e=this.getMap().getView(),i=this.ovmap_.getView(),r=(this.endPos[0]-this.startPos[0])*i.getResolution(),n=(this.endPos[1]-this.startPos[1])*i.getResolution(),o=e.getCenter(),a=[o[0]+r,o[1]-n];e.setCenter(a),this.startPos=null,this.endPos=null}},c.prototype.handleMouseEnter=function(t){t.target.style.cursor!=this.cursor_&&(this.previousCursor_=t.target.style.cursor,t.target.style.cursor=this.cursor_);var e=this.boxOverlay_.getElement();void 0!==e&&null!=e&&(s.listen(e,l.default.MOUSEDOWN,this.handleMouseDown,this),s.listen(e,l.default.MOUSEMOVE,this.handleMouseMove,this),s.listen(e,l.default.MOUSEUP,this.handleMouseUp,this))},c.prototype.handleMouseLeave=function(t){this.handleMouseUp(t),void 0!==this.previousCursor_&&(t.target.style.cursor=this.previousCursor_,this.previousCursor_=void 0);var e=this.boxOverlay_.getElement();void 0!==e&&null!=e&&(s.unlisten(e,l.default.MOUSEDOWN,this.handleMouseDown,this),s.unlisten(e,l.default.MOUSEMOVE,this.handleMouseMove,this),s.unlisten(e,l.default.MOUSEUP,this.handleMouseUp,this))},c.prototype.handleToggle_=function(){o.default.prototype.handleToggle_.apply(this),this.collapsed_?this.DisConnectEventHandle():this.ConnectEventHandle()},e.ZDOverviewMap=c,r.Zondy.Control.OverviewMap=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Drag=void 0;var r=i(6),n=i(4),o=function(t){return t&&t.__esModule?t:{default:t}}(i(47)),a=function t(e){o.default.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.coordinate_=null,this.cursor_="pointer",this.feature_=null,this.previousCursor_=void 0};(0,n.inherits)(a,o.default),a.prototype.handleDownEvent=function(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e},a.prototype.handleDragEvent=function(t){t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});var e=t.coordinate[0]-this.coordinate_[0],i=t.coordinate[1]-this.coordinate_[1];this.feature_.getGeometry().translate(e,i),this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]},a.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),i=t.map.getTargetElement();e?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},a.prototype.handleUpEvent=function(t){return this.coordinate_=null,this.feature_=null,!1},e.Drag=a,r.Zondy.GeomInteraction.Drag=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MilStdDragPan=e.MilStdModifyTool=e.MilStdDrawTool=e.MilstdParams=e.EnumMilstdType=e.MilStd=void 0;var r=i(4),n=A(i(54)),o=A(i(34)),a=A(i(39)),s=A(i(130)),l=A(i(35)),u=A(i(96)),c=A(i(101)),h=i(84),d=A(h),p=A(i(100)),f=A(i(114)),g=A(i(155)),y=A(i(182)),v=A(i(10)),m=w(i(3)),_=i(47),b=A(_),S=A(i(123)),O=A(i(48)),C=A(i(51)),T=A(i(36)),x=A(i(38)),E=w(i(1)),P=A(i(115)),j=A(i(31)),R=A(i(28)),I=w(i(26)),L=A(i(5));function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function A(t){return t&&t.__esModule?t:{default:t}}var M=window.MilStd=window.MilStd||{};M.commonFun=M.commonFun||{},M.Arrow=M.Arrow||{},M.Flag=M.Flag||{},M.Compass=M.Compass||{},M.Bezier=M.Bezier||{},M.event=M.event||{},M.tool=M.tool||{},M.enum={ZERO_TOLERANCE:1e-4};var F={ArrowCross:"ArrowCross",CircleClosedangle:"CircleClosedangle",Closedangle:"Closedangle",DoubleClosedangle:"DoubleClosedangle",Fourstar:"Fourstar",Rhombus:"Rhombus",SameDirectionClosedangle:"SameDirectionClosedangle",Triangle:"Triangle",Vane:"Vane",SimpleArrow:"SimpleArrow",DoubleArrow:"DoubleArrow",StraightArrow:"StraightArrow",SingleLineArrow:"SingleLineArrow",TriangleFlag:"TriangleFlag",RectFlag:"RectFlag",CurveFlag:"CurveFlag",Bezier:"Bezier",BezierLine:"BezierLine",AssemblyArea:"AssemblyArea"},k=function(t){t&&(this.headHeightFactor=void 0!==t.headHeightFactor&&null!=t.headHeightFactor?t.headHeightFactor:.2,this.headWidthFactor=void 0!==t.headWidthFactor&&null!=t.headWidthFactor?t.headWidthFactor:.5,this.neckHeightFactor=void 0!==t.neckHeightFactor&&null!=t.neckHeightFactor?t.neckHeightFactor:.8,this.neckWidthFactor=void 0!==t.neckWidthFactor&&null!=t.neckWidthFactor?t.neckWidthFactor:.2,this.tailWidthFactor=void 0!==t.tailWidthFactor&&null!=t.tailWidthFactor?t.tailWidthFactor:.1,this.hasSwallowTail=void 0===t.hasSwallowTail||null==t.hasSwallowTail||t.hasSwallowTail,this.swallowTailFactor=void 0!==t.swallowTailFactor&&null!=t.swallowTailFactor?t.swallowTailFactor:.5,this.curveFitMethod=void 0!==t.curveFitMethod&&null!=t.curveFitMethod?t.curveFitMethod:"useBSplieFit",this.maxVertices=void 0!==t.maxVertices&&null!=t.maxVertices?t.maxVertices:20)};M.commonFun.CalLengthOfTwoPoints=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},M.commonFun.wholeDistance=function(t){var e=0;if(null!=t&&t.length>1)for(var i=0;i<t.length-1;i++)e+=M.commonFun.CalLengthOfTwoPoints(t[i],t[i+1]);return e},M.commonFun.getAzimuthAngle=function(t,e){var i=0,r=Math.asin(Math.abs(e[1]-t[1])/M.commonFun.CalLengthOfTwoPoints(t,e));return e[1]>=t[1]&&e[0]>=t[0]?r+Math.PI:e[1]>=t[1]&&e[0]<t[0]?2*Math.PI-r:e[1]<t[1]&&e[0]<t[0]?r:(e[1]<t[1]&&e[0]>=t[0]&&(i=Math.PI-r),i)},M.commonFun.getThirdPoint=function(t,e,i,r,n){var o,a=M.commonFun.getAzimuthAngle(t,e);o="left"==n.toLowerCase()?a+i:a-i;var s=r*Math.cos(o),l=r*Math.sin(o);return[e[0]+s,e[1]+l]},M.commonFun.getAngleOfThreePoints=function(t,e,i){var r=M.commonFun.getAzimuthAngle(e,t)-M.commonFun.getAzimuthAngle(e,i);return r<0&&(r+=2*Math.PI),r},M.commonFun.getFactorial=function(t){for(var e=1,i=1;i<=t;i++)e*=i;return e},M.commonFun.getBinomialFactor=function(t,e){return M.commonFun.getFactorial(t)/(M.commonFun.getFactorial(e)*M.commonFun.getFactorial(t-e))},M.commonFun.getQuadricBSplineFactor=function(t,e){return 0==t?Math.pow(e-1,2)/2:1==t?(-2*Math.pow(e,2)+2*e+1)/2:2==t?Math.pow(e,2)/2:0},M.commonFun.getBSplineFFactor=function(t,e,i){if(2==e)return M.commonFun.getQuadricBSplineFactor(t,i);for(var r=0,n=M.commonFun.getFactorial(e),o=0;o<=e-t;o++)r+=(o%2==0?1:-1)*M.commonFun.getBinomialFactor(e+1,o)*Math.pow(i+e-t-o,e);return r/n},M.commonFun.getSide=function(t,e,i){var r=(e[1]-t[1])*(i[0]-t[0])-(i[1]-t[1])*(e[0]-t[0]);return r>0?"left":r<0?"right":null},M.commonFun.getMidPoint=function(t,e){var i=new Array,r=(t[0]+e[0])/2,n=(t[1]+e[1])/2;return i.push(r),i.push(n),i},M.commonFun.getBezierPoints=function(t){if(t.length<=2)return t;for(var e=new Array,i=t.length-1,r=0;r<=1;r+=.01){for(var n=0,o=0,a=0;a<=i;a++){var s=M.commonFun.getBinomialFactor(i,a),l=Math.pow(r,a),u=Math.pow(1-r,i-a);n+=s*l*u*t[a][0],o+=s*l*u*t[a][1]}e.push([n,o])}return e.push(t[i]),e},M.commonFun.getBSplinePoints=function(t,e){if(t.length<=2||t.length<=e)return t;var i=new Array,r=t.length-e-1;i.push(t[0]);for(var n=0;n<=r;n++)for(var o=0;o<=1;o+=.05){for(var a=0,s=0,l=0;l<=e;l++){var u=M.commonFun.getBSplineFFactor(l,e,o);a+=u*t[n+l][0],s+=u*t[n+l][1]}i.push([a,s])}return i.push(t[t.length-1]),i},M.commonFun.geomEquals=function(t,e){var i=!1;return null!=t&&(i=e[0]==t[0]&&e[1]==t[1]||null==e[0]&&null==e[1]&&null==t[0]&&null==t[1]),i},M.commonFun.CreateNewVertices=function(t){if(null!=t&&t.length>=2){var e=Math.max(t[0][0],t[1][0]),i=[Math.min(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])],r=[e,Math.min(t[0][1],t[1][1])];t.splice(0,1,i),t.splice(1,1,r)}},M.Arrow.getArrowFromVert=function(t,e,i){var r=null;if(null!=t&&t.length>=2){var a=null;switch(e){case"SimpleArrow":case"StraightArrow":a=M.Arrow.getSimpleArrowPnts(t,i.hasSwallowTail,i.swallowTailFactor,i.curveFitMethod,i.headHeightFactor,i.headWidthFactor,i.neckHeightFactor,i.neckWidthFactor,i.tailWidthFactor),r=new o.default([a]);break;case"DoubleArrow":a=M.Arrow.getDoubleArrowPnts(t,i.headHeightFactor,i.headWidthFactor,i.neckHeightFactor,i.neckWidthFactor),r=new o.default([a]);break;case"SingleLineArrow":a=M.Arrow.getSLArrowPnts(t,i.headHeightFactor,i.headWidthFactor),r=new n.default(a)}}return r},M.Arrow.getSimpleArrowPnts=function(t,e,i,r,n,o,a,s,l){if(t.length<2)return t;var u=M.Arrow.getArrowHeadPoints(t,n,o,a,s),c=u[0],h=u[4],d=M.Arrow.getArrowBodyPoints(t,c,h,l,1,1),p=M.Arrow.getArrowTailPoints(t,l,e,i),f=p[0],g=(p.length,p[1]),y=3==p.length?p[2]:p[1],v=d.length,m=d.slice(0,Math.ceil(v/2)),_=d.slice(Math.ceil(v/2));m.push(c),_.push(h),m.reverse(),m.push(f),_.reverse(),_.push(y);var b=null,S=null;"useBezierFit"==r?(b=M.commonFun.getBezierPoints(m),S=M.commonFun.getBezierPoints(_)):(b=M.commonFun.getBSplinePoints(m,2),S=M.commonFun.getBSplinePoints(_,2)),null!=g&&(b.push(g),S.push(g)),b.reverse();for(var O=0;O<u.length;O++)b.push(u[O]);for(var C=0;C<S.length;C++)b.push(S[C]);return b},M.Arrow.getSLArrowPnts=function(t,e,i){if(t.length<2)return null;var r=M.Arrow.getArrowHeadPointsForSLine(t,e,i),n=M.commonFun.getBezierPoints(t),o=new Array;return o.push(r),o.push(n),o},M.Arrow.isCounterClockwise=function(t){if(t.length<3)return 0;var e=t[0],i=t[1],r=t[2];return(i[0]-e[0])*(r[1]-i[1])-(i[1]-e[1])*(r[0]-i[0])},M.Arrow.getDoubleArrowPnts=function(t,e,i,r,n){var o=null,a=t.length;if(a>=3&&!M.commonFun.geomEquals(t[a-1],t[a-2])){var s=t[0],l=t[1],u=t[2],c=null;3==a?(c=M.Arrow.getTempPnt4(s,l,u),t.push(c)):c=t[3],M.Arrow.isCounterClockwise(t)<0&&(s=t[1],l=t[0],u=t[3],c=t[2]);var h=M.commonFun.getMidPoint(s,l),d=M.Arrow.getArrowPoints(s,h,c,"left",e,i,r,n),p=M.Arrow.getArrowPoints(h,l,u,"right",e,i,r,n),f=d.length,g=Math.ceil((f-5)/2);o=d.slice(0,g);var y=d.slice(g,g+5),v=d.slice(g+5),m=p.slice(0,g),_=p.slice(g,g+5),b=p.slice(g+5);o=M.commonFun.getBezierPoints(o);for(var S=0;S<m.length;S++)v.push(m[S]);var O=M.commonFun.getBezierPoints(v);for(b=M.commonFun.getBezierPoints(b),S=0;S<y.length;S++)o.push(y[S]);for(S=0;S<O.length;S++)o.push(O[S]);for(S=0;S<_.length;S++)o.push(_[S]);for(S=0;S<b.length;S++)o.push(b[S]);o.length>0&&(M.commonFun.geomEquals(o[0],o[o.length-1])||o.push(o[0]))}return o},M.Arrow.getArrowHeadPoints=function(t,e,i,r,n){if(t.length<2)return t;var o=M.commonFun.wholeDistance(t)*e,a=o*i,s=o*n,l=t.length,u=[t[l-1][0],t[l-1][1]],c=M.commonFun.CalLengthOfTwoPoints(u,t[l-2]),h=(o=o>c?c:o)*r,d=M.commonFun.getThirdPoint(t[l-2],u,0,o,"left"),p=M.commonFun.getThirdPoint(t[l-2],u,0,h,"left"),f=M.commonFun.getThirdPoint(u,d,1.5*Math.PI,a,"right"),g=M.commonFun.getThirdPoint(u,p,1.5*Math.PI,s,"right"),y=M.commonFun.getThirdPoint(u,d,1.5*Math.PI,a,"left"),v=M.commonFun.getThirdPoint(u,p,1.5*Math.PI,s,"left"),m=new Array;return m.push(g),m.push(f),m.push(u),m.push(y),m.push(v),m},M.Arrow.getArrowHeadPointsForSLine=function(t,e,i){if(t.length<2)return t;var r=M.commonFun.CalLengthOfTwoPoints(t[0],t[1])*e,n=r*i,o=t.length,a=t[o-1],s=M.commonFun.CalLengthOfTwoPoints(a,t[o-2]);r=r>s?s:r;var l=M.commonFun.getThirdPoint(t[o-2],a,0,r,"left"),u=M.commonFun.getThirdPoint(a,l,1.5*Math.PI,n,"right"),c=M.commonFun.getThirdPoint(a,l,1.5*Math.PI,n,"left"),h=new Array;return h.push(u),h.push(a),h.push(c),h},M.Arrow.getArrowBodyPoints=function(t,e,i,r,n,o){if(t.length<2)return t;for(var a=M.commonFun.wholeDistance(t),s=M.commonFun.wholeDistance(t)*r,l=s-M.commonFun.CalLengthOfTwoPoints(e,i)/2,u=0,c=new Array,h=new Array,d=1;d<t.length-1;d++){var p=M.commonFun.getAngleOfThreePoints(t[d-1],t[d],t[d+1])/2,f=(s-(u+=M.commonFun.CalLengthOfTwoPoints(t[d-1],t[d]))/a*l)/Math.sin(p);c.push(M.commonFun.getThirdPoint(t[d-1],t[d],p,f*n,"right")),h.push(M.commonFun.getThirdPoint(t[d-1],t[d],Math.PI-p,f*o,"left"))}for(var g=0;g<h.length;g++)c.push(h[g]);return c},M.Arrow.getArrowTailPoints=function(t,e,i,r){if(t.length<2)return t;var n=M.commonFun.wholeDistance(t)*e,o=new Array,a=M.commonFun.getThirdPoint(t[1],t[0],1.5*Math.PI,n,"right"),s=M.commonFun.getThirdPoint(t[1],t[0],1.5*Math.PI,n,"left");if(i){var l=n*r,u=M.commonFun.getThirdPoint(t[1],t[0],0,l,"left");return o.push(a),o.push(u),o.push(s),o}return o.push(a),o.push(s),o},M.Arrow.getArrowPoints=function(t,e,i,r,n,o,a,s){var l=M.commonFun.getMidPoint(t,e),u=M.commonFun.CalLengthOfTwoPoints(l,i),c=M.commonFun.getThirdPoint(i,l,0,.3*u,"left"),h=M.commonFun.getThirdPoint(i,l,0,.5*u,"left"),d=M.commonFun.getThirdPoint(i,l,0,.7*u,"left");c=M.commonFun.getThirdPoint(l,c,1.5*Math.PI,u/4,r),h=M.commonFun.getThirdPoint(l,h,1.5*Math.PI,u/4,r),d=M.commonFun.getThirdPoint(l,d,1.5*Math.PI,u/4,r);var p=new Array;p.push(l),p.push(c),p.push(h),p.push(d),p.push(i);var f=M.Arrow.getArrowHeadPoints(p,n,o,a,s),g=f[0],y=f[4],v=M.commonFun.CalLengthOfTwoPoints(t,e)/M.commonFun.wholeDistance(p)/2,m="left"==r?1:.01,_="left"==r?.01:1,b=M.Arrow.getArrowBodyPoints(p,g,y,v,m,_),S=b.length,O=b.slice(0,Math.ceil(S/2)),C=b.slice(Math.ceil(S/2));O.push(g),C.push(y),O.reverse(),O.push(t),C.reverse(),C.push(e),O.reverse();for(var T=0;T<f.length;T++)O.push(f[T]);for(T=0;T<C.length;T++)O.push(C[T]);return O},M.Arrow.getTempPnt4=function(t,e,i){var r=null,n=M.commonFun.getMidPoint(t,e),o=M.commonFun.CalLengthOfTwoPoints(n,i),a=M.commonFun.getAngleOfThreePoints(t,n,i),s=0,l=0;return a<Math.PI/2?(s=o*Math.sin(a),l=o*Math.cos(a),r=M.commonFun.getThirdPoint(t,n,1.5*Math.PI,s,"left"),M.commonFun.getThirdPoint(n,r,1.5*Math.PI,l,"right")):a>=Math.PI/2&&a<Math.PI?(s=o*Math.sin(Math.PI-a),l=o*Math.cos(Math.PI-a),r=M.commonFun.getThirdPoint(t,n,1.5*Math.PI,s,"left"),M.commonFun.getThirdPoint(n,r,1.5*Math.PI,l,"left")):a>=Math.PI&&a<1.5*Math.PI?(s=o*Math.sin(a-Math.PI),l=o*Math.cos(a-Math.PI),r=M.commonFun.getThirdPoint(t,n,1.5*Math.PI,s,"right"),M.commonFun.getThirdPoint(n,r,1.5*Math.PI,l,"right")):(s=o*Math.sin(2*Math.PI-a),l=o*Math.cos(2*Math.PI-a),r=M.commonFun.getThirdPoint(t,n,1.5*Math.PI,s,"right"),M.commonFun.getThirdPoint(n,r,1.5*Math.PI,l,"left"))},M.Flag.getFlagFromVert=function(t,e){var i=new Array;M.commonFun.CreateNewVertices(t);var r=new Array;if(null!=t&&t.length>=2){r.push(t[0]),r.push(t[1]);var n=null;switch(e){case"TriangleFlag":n=this.GetTriangleFlagDots(r);break;case"RectFlag":n=this.GetRectFlagDots(r);break;case"CurveFlag":n=this.GetCurveFlagDots(r)}var s=new o.default([n[0]]),l=new a.default(n[1]);i.push(s),i.push(l)}return i},M.Flag.GetTriangleFlagDots=function(t){M.commonFun.CreateNewVertices(t);var e=new Array,i=t.length;if(i>=2&&!M.commonFun.geomEquals(t[i-1],t[i-2])){var r=t[0],n=t[1],o=[r[0],n[1]],a=M.commonFun.getMidPoint(r,o),s=[n[0],a[1]],l=new Array;l.push(a),l.push(r),l.push(s),l.push(a);var u=new Array;u.push(o),u.push(a),e.push(l),e.push(u)}return e},M.Flag.GetRectFlagDots=function(t){M.commonFun.CreateNewVertices(t);var e=new Array,i=t.length;if(i>=2&&!M.commonFun.geomEquals(t[i-1],t[i-2])){var r=t[0],n=t[1],o=[r[0],n[1]],a=M.commonFun.getMidPoint(r,o),s=[n[0],a[1]],l=[n[0],r[1]],u=new Array;u.push(a),u.push(r),u.push(l),u.push(s),u.push(a);var c=new Array;c.push(o),c.push(a),e.push(u),e.push(c)}return e},M.Flag.GetCurveFlagDots=function(t){M.commonFun.CreateNewVertices(t);var e=new Array,i=t.length;if(i>=2&&!M.commonFun.geomEquals(t[i-1],t[i-2])){var r=t[0],n=t[1],o=[r[0],n[1]],a=M.commonFun.getMidPoint(r,o),s=[n[0],a[1]],l=[n[0],r[1]],u=M.commonFun.CalLengthOfTwoPoints(r,a)/2,c=M.commonFun.CalLengthOfTwoPoints(r,l),h=M.commonFun.getThirdPoint(l,r,0,c/4,"left"),d=M.commonFun.getThirdPoint(r,h,1.5*Math.PI,u,"right");h=M.commonFun.getThirdPoint(l,r,0,c/4*3,"left");var p=M.commonFun.getThirdPoint(r,h,1.5*Math.PI,u,"left");h=M.commonFun.getThirdPoint(s,a,0,c/4,"left");var f=M.commonFun.getThirdPoint(a,h,1.5*Math.PI,u,"right");h=M.commonFun.getThirdPoint(s,a,0,c/4*3,"left");var g=M.commonFun.getThirdPoint(a,h,1.5*Math.PI,u,"left"),y=new Array;y.push(r),y.push(d),y.push(p),y.push(l);var v=M.commonFun.getBezierPoints(y),m=new Array;m.push(a),m.push(f),m.push(g),m.push(s);var _=M.commonFun.getBezierPoints(m),b=new Array;b.push(a);for(var S=0;S<v.length;S++)b.push(v[S]);for(_.reverse(),S=0;S<_.length;S++)b.push(_[S]);var O=new Array;O.push(o),O.push(a),e.push(b),e.push(O)}return e},M.Compass.getCompassFromVert=function(t,e){M.commonFun.CreateNewVertices(t);var i=new Array;if(null!=t&&t.length>=2){i.push(t[0]),i.push(t[1]);var r=null;switch(e){case"ArrowCross":r=this.GetArrowCrossDots(i);break;case"CircleClosedangle":r=this.GetCircleClosedangleDots(i);break;case"Closedangle":r=this.GetClosedangleDots(i);break;case"DoubleClosedangle":r=this.GetDoubleClosedangleDots(i);break;case"Fourstar":r=this.GetFourstarDots(i);break;case"Rhombus":r=this.GetRhombusDots(i);break;case"SameDirectionClosedangle":r=this.GetSameDirectionClosedangleDots(i);break;case"Triangle":r=this.GetTriangleDots(i);break;case"Vane":r=this.GetVaneDots(i)}var a=new Array,s=new Array;if(null!=r&&r.length>0){for(var l=0;l<r.length;l++)switch(e){case"ArrowCross":case"DoubleClosedangle":case"CircleClosedangle":case"Rhombus":case"SameDirectionClosedangle":l==r.length-1?s.push(r[l][0]):a.push(r[l][0]);break;case"Closedangle":case"Fourstar":l%2==0?a.push(r[l][0]):s.push(r[l][0]);break;case"Triangle":1==l||4==l?s.push(r[l][0]):a.push(r[l][0]);break;case"Vane":l==r.length-1?a.push(r[l][0]):s.push(r[l][0])}var u=new Array,c=new n.default(a);u.push(c);var h=new o.default(s);u.push(h)}return u}},M.Compass.GetArrowCrossDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),r=new Array,n=[t[0][0]+e/32*15,t[0][1]-i/16*1];r.push(n);var o=[t[0][0]+e/32*15,t[0][1]];r.push(o);var a=[t[0][0]+e/32*17,t[0][1]-i/16*1];r.push(a);var s=[t[0][0]+e/32*17,t[0][1]];r.push(s);var l=new Array,u=[t[0][0],t[0][1]-i/32*15];l.push(u);var c=[t[0][0]+e/128*3,t[0][1]-i/32*17];l.push(c);var h=[t[0][0]+e/128*6,t[0][1]-i/32*15];l.push(h);var d=[t[0][0]+e/128*9,t[0][1]-i/32*17];l.push(d);var p=[t[0][0]+e/128*12,t[0][1]-i/32*15];l.push(p);var f=new Array,g=[t[0][0]+e,t[0][1]-i/32*15],y=[t[0][0]+e/16*15,t[0][1]-i/32*15],v=[t[0][0]+e/16*15,t[0][1]-i/32*17],m=[t[0][0]+e,t[0][1]-i/32*17],_=[t[0][0]+e/16*15,t[0][1]-i/2],b=[t[0][0]+e/50*48,t[0][1]-i/2];f.push(g),f.push(y),f.push(_),f.push(b),f.push(_),f.push(v),f.push(m);var S=[t[0][0]+e/2,t[1][1]+i/32],O=[t[0][0]+e/2+e/32,t[1][1]+i/32+i/64],C=[t[0][0]+e/2+e/32-2*e/32,t[1][1]+i/32+i/64],T=[t[0][0]+e/2,t[1][1]+i/32+i/32],x=[t[0][0]+e/2,t[1][1]+i/32-i/32],E=[t[0][0]+e/2+e/32,t[1][1]+i/32+i/64-i/32],P=[t[0][0]+e/2+e/32-e/16,t[1][1]+i/32+i/64-i/32],j=new Array;j.push(O),j.push(T),j.push(C),j.push(S),j.push(E),j.push(x),j.push(P);var R=M.commonFun.getBSplinePoints(j,2),I=new Array,L=[t[0][0]+e/2,t[0][1]-i/16*2];I.push(L);var w=[t[0][0]+e/32*18,t[0][1]-i/16*4];I.push(w);var A=[t[0][0]+e/32*17,t[0][1]-i/16*4];I.push(A);var F=[t[0][0]+e/32*17,t[0][1]-i/32*15];I.push(F);var k=[t[0][0]+e/16*12,t[0][1]-i/32*15];I.push(k);var N=[t[0][0]+e/16*12,t[0][1]-i/32*14];I.push(N);var D=[t[0][0]+e/16*14,t[0][1]-i/2];I.push(D);var G=[t[0][0]+e/16*12,t[0][1]-i/32*18];I.push(G);var B=[t[0][0]+e/16*12,t[0][1]-i/32*17];I.push(B);var U=[t[0][0]+e/32*17,t[0][1]-i/32*17];I.push(U);var V=[t[0][0]+e/32*17,t[0][1]-i/16*12];I.push(V);var W=[t[0][0]+e/32*18,t[0][1]-i/16*12];I.push(W);var Z=[t[0][0]+e/2,t[0][1]-i/16*14];I.push(Z);var z=[t[0][0]+e/32*14,t[0][1]-i/16*12];I.push(z);var H=[t[0][0]+e/32*15,t[0][1]-i/16*12];I.push(H);var Y=[t[0][0]+e/32*15,t[0][1]-i/32*17];I.push(Y);var X=[t[0][0]+e/16*4,t[0][1]-i/32*17];I.push(X);var q=[t[0][0]+e/16*4,t[0][1]-i/32*18];I.push(q);var K=[t[0][0]+e/16*2,t[0][1]-i/2];I.push(K);var J=[t[0][0]+e/16*4,t[0][1]-i/32*14];I.push(J);var Q=[t[0][0]+e/16*4,t[0][1]-i/32*15];I.push(Q);var $=[t[0][0]+e/32*15,t[0][1]-i/32*15];I.push($);var tt=[t[0][0]+e/32*15,t[0][1]-i/16*4];I.push(tt);var et=[t[0][0]+e/32*14,t[0][1]-i/16*4];I.push(et),I.push(L);for(var it=new Array,rt=0;rt<5;rt++)it[rt]=new Array;return it[0].push(r),it[1].push(l),it[2].push(f),it[3].push(R),it[4].push(I),it},M.Compass.GetCircleClosedangleDots=function(t){if(null==t||t.length<2)return null;var e,i,r,n,o=Math.abs(t[1][0]-t[0][0]),a=Math.abs(t[1][1]-t[0][1]),s=new Array;e=[t[0][0]+o/32*15,t[0][1]-a/16],s.push(e),i=[t[0][0]+o/32*15,t[0][1]],s.push(i),r=[t[0][0]+o/32*17,t[0][1]-a/16],s.push(r),n=[t[0][0]+o/32*17,t[0][1]],s.push(n);var l,u,c,h,d,p=new Array;l=[t[0][0]+o/2,t[0][1]-a/16*2],p.push(l),u=[t[0][0]+o/64*15,t[0][1]-a],p.push(u),c=[t[0][0]+o/32*15,t[0][1]-a/32*28],p.push(c),h=[t[0][0]+o/32*17,t[0][1]-a/32*28],p.push(h),d=[t[0][0]+o/64*49,t[0][1]-a],p.push(d),p.push(l);var f,g,y=new Array,v=t[0][0]+o/2-a/20*9,m=t[0][0]+o/2+a/20*9;f=[v,t[0][1]-a/16*9],g=[m,t[0][1]-a/16*9],y.push(f),y.push(g);var _,b,S,O=0,C=0,T=0,x=0,E=new Array,P=0;for(_=[t[0][0]+o/2,t[0][1]-a/16*9],b=[t[0][0]+o/2,t[0][1]-a/5*1],S=M.commonFun.CalLengthOfTwoPoints(_,b);P<500;)O=Math.sin(2*Math.PI*P/500),C=Math.cos(2*Math.PI*P/500),T=_[0]+S*O,x=_[1]+S*C,E.push([T,x]),++P;E.push(E[0]);for(var j=new Array,R=0;R<4;R++)j[R]=new Array;return j[0].push(s),j[1].push(y),j[2].push(E),j[3].push(p),j},M.Compass.GetClosedangleDots=function(t){if(null==t||t.length<2)return null;var e=new Array,i=Math.abs(t[1][0]-t[0][0]),r=Math.abs(t[1][1]-t[0][1]),n=[t[0][0]+i/2,t[0][1]];e.push(n);var o=[t[0][0]+i,t[0][1]-r];e.push(o);var a=[t[0][0]+i/2,t[0][1]-r/4*3];e.push(a);var s=new Array,l=[t[0][0]+i/2,t[0][1]];s.push(l);var u=[t[0][0],t[0][1]-r];s.push(u);var c=[t[0][0]+i/2,t[0][1]-r/4*3];s.push(c);for(var h=new Array,d=0;d<2;d++)h[d]=new Array;return h[0].push(e),h[1].push(s),h},M.Compass.GetDoubleClosedangleDots=function(t){if(null==t||t.length<2)return null;var e,i,r,n,o=Math.abs(t[1][0]-t[0][0]),a=Math.abs(t[1][1]-t[0][1]),s=new Array;e=[t[0][0]+o/32*15,t[0][1]-a/16],s.push(e),i=[t[0][0]+o/32*15,t[0][1]],s.push(i),r=[t[0][0]+o/32*17,t[0][1]-a/16],s.push(r),n=[t[0][0]+o/32*17,t[0][1]],s.push(n);var l,u,c,h,d,p=new Array;l=[t[0][0]+o/2,t[0][1]-a/16*2],p.push(l),u=[t[0][0],t[0][1]-a/10*7],p.push(u),c=[t[0][0]+o/32*13,t[0][1]-a/32*18],p.push(c),h=[t[0][0]+o/32*19,t[0][1]-a/32*18],p.push(h),d=[t[0][0]+o,t[0][1]-a/10*7],p.push(d),p.push(l);var f,g,y,v,m=new Array;f=[t[0][0],t[0][1]-a/10*3],m.push(f),g=[t[0][0]+o/2,t[0][1]-a/8*7],m.push(g),y=[t[0][0]+o,t[0][1]-a/10*3],m.push(y),v=[t[0][0]+o/2,t[0][1]-a/10*7],m.push(v),m.push(f);var _=[t[0][0]+o/2,t[1][1]+a/32],b=[t[0][0]+o/2+o/32,t[1][1]+a/32+a/64],S=[t[0][0]+o/2+o/32-2*o/32,t[1][1]+a/32+a/64],O=[t[0][0]+o/2,t[1][1]+a/32+a/32],C=[t[0][0]+o/2,t[1][1]+a/32-a/32],T=[t[0][0]+o/2+o/32,t[1][1]+a/32+a/64-a/32],x=[t[0][0]+o/2+o/32-o/16,t[1][1]+a/32+a/64-a/32],E=new Array;E.push(b),E.push(O),E.push(S),E.push(_),E.push(T),E.push(C),E.push(x);for(var P=M.commonFun.getBSplinePoints(E,2),j=new Array,R=0;R<4;R++)j[R]=new Array;return j[0].push(s),j[1].push(P),j[2].push(m),j[3].push(p),j},M.Compass.GetFourstarDots=function(t){if(null==t||t.length<2)return null;var e,i,r,n,o=Math.abs(t[1][0]-t[0][0]),a=Math.abs(t[1][1]-t[0][1]),s=new Array;e=[t[0][0]+o/2,t[0][1]],s.push(e),i=[t[0][0]+o/2,t[0][1]-a],s.push(i),r=[t[0][0]+o/8*3,t[0][1]-a/8*5],s.push(r),n=[t[0][0]+o/8*5,t[0][1]-a/8*3],s.push(n),s.push(e);var l,u,c=new Array;l=[t[0][0],t[0][1]-a/2],c.push(l),u=[t[0][0]+o,t[0][1]-a/2],c.push(u),c.push(n),c.push(r),c.push(l);var h,d,p=new Array;p.push(l),p.push(u),h=[t[0][0]+o/8*5,t[0][1]-a/8*5],p.push(h),d=[t[0][0]+o/8*3,t[0][1]-a/8*3],p.push(d),p.push(l);var f=new Array;f.push(e),f.push(i),f.push(h),f.push(d);for(var g=new Array,y=0;y<4;y++)g[y]=new Array;return g[0].push(s),g[1].push(c),g[2].push(p),g[3].push(f),g},M.Compass.GetRhombusDots=function(t){if(null==t||t.length<2)return null;var e,i,r,n,o,a,s,l,u=Math.abs(t[1][0]-t[0][0]),c=Math.abs(t[1][1]-t[0][1]),h=new Array,d=new Array,p=new Array;e=[t[0][0]+u/2,t[0][1]-c/16*2],h.push(e),i=[t[0][0],t[0][1]-c/16*9],h.push(i),r=[t[0][0]+u,t[0][1]-c/16*9],h.push(r),h.push(e),n=[t[0][0]+u/2,t[1][1]],d.push(r),d.push(n),d.push(i),d.push(r),o=[t[0][0]+u/32*13,t[0][1]-c/16*1],p.push(o),a=[t[0][0]+u/32*13,t[0][1]],p.push(a),s=[t[0][0]+u/32*19,t[0][1]-c/16*1],p.push(s),l=[t[0][0]+u/32*19,t[0][1]],p.push(l);for(var f=new Array,g=0;g<3;g++)f[g]=new Array;return f[0].push(h),f[1].push(p),f[2].push(d),f},M.Compass.GetSameDirectionClosedangleDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),r=[t[0][0]+e/32*15,t[0][1]],n=[t[0][0],t[0][1]-i/16*13],o=[t[0][0]+e/32*15,t[0][1]-i/16*11],a=[t[0][0]+e/16*15,t[0][1]-i/16*13],s=new Array;s.push(r),s.push(n),s.push(o),s.push(a),s.push(r);var l=[t[0][0]+e/32*17,t[0][1]-i/32*1],u=[t[0][0]+e/16,t[0][1]-i/32*27],c=[t[0][0]+e/32*17,t[0][1]-i/16*12],h=[t[0][0]+e,t[0][1]-i/32*27],d=new Array;d.push(l),d.push(u),d.push(c),d.push(h);var p=[t[0][0]+e/32*14,t[0][1]-i],f=[t[0][0]+e/32*14,t[0][1]-i/16*15],g=[t[0][0]+e/32*18,t[0][1]-i],y=[t[0][0]+e/32*18,t[0][1]-i/16*15],v=new Array;v.push(p),v.push(f),v.push(g),v.push(y);for(var m=new Array,_=0;_<3;_++)m[_]=new Array;return m[0].push(s),m[1].push(v),m[2].push(d),m},M.Compass.GetTriangleDots=function(t){if(null==t||t.length<2)return null;var e=Math.abs(t[1][0]-t[0][0]),i=Math.abs(t[1][1]-t[0][1]),r=new Array,n=[t[0][0]+e/32*13,t[0][1]-i/16*1];r.push(n);var o=[t[0][0]+e/32*13,t[0][1]];r.push(o);var a=[t[0][0]+e/32*19,t[0][1]-i/16*1];r.push(a);var s=[t[0][0]+e/32*19,t[0][1]];r.push(s);var l=new Array,u=[t[0][0]+e/2,t[0][1]-i/16*2];l.push(u);var c=[t[0][0],t[0][1]-i/32*17];l.push(c);var h=[t[0][0]+e/2,t[0][1]-i/32*17];l.push(h);var d=new Array,p=[t[0][0]+e/2,t[0][1]-i/16*2];d.push(p);var f=[t[0][0]+e,t[0][1]-i/32*17];d.push(f);var g=[t[0][0]+e/2,t[0][1]-i/32*17];d.push(g);var y=new Array,v=[t[0][0],t[0][1]-i/32*18];y.push(v);var m=[t[0][0]+e,t[0][1]-i/32*18];y.push(m);var _=new Array,b=[t[0][0]+e/2,t[0][1]-i];_.push(b);var S=[t[0][0],t[0][1]-i/32*19];_.push(S);var O=[t[0][0]+e/2,t[0][1]-i/32*19];_.push(O);var C=[t[0][0]+e,t[0][1]-i/32*19],T=new Array;T.push(O),T.push(C),T.push(b);for(var x=new Array,E=0;E<6;E++)x[E]=new Array;return x[0].push(r),x[1].push(l),x[2].push(d),x[3].push(y),x[4].push(_),x[5].push(T),x},M.Compass.GetVaneDots=function(t){if(null==t||t.length<2)return null;var e,i,r,n,o=Math.abs(t[1][0]-t[0][0]),a=Math.abs(t[1][1]-t[0][1]),s=new Array,l=new Array;e=[t[0][0]+o/2,t[0][1]],i=[t[0][0],t[0][1]-a/8],r=[t[0][0]+o/2,t[0][1]-a/8*2],n=[t[0][0]+o,t[0][1]-a/8],s.push(e),s.push(i),s.push(r),l.push(e),l.push(r),l.push(n),l.push(e);var u=[t[0][0]+o/14*6,t[0][1]-a/8*2],c=[t[0][0]+o/14*6,t[0][1]-a],h=[t[0][0]+o/28*13,t[0][1]-a/35*34],d=[t[0][0]+o/28*15,t[0][1]-a/35*34],p=[t[0][0]+o/14*8,t[0][1]-a],f=[t[0][0]+o/14*8,t[0][1]-a/8*2],g=new Array;g.push(u),g.push(c),g.push(h),g.push(d),g.push(p),g.push(f);var y=new Array,v=[t[0][0]+o/14*6,t[0][1]-a/36*21];y.push(v);var m=[t[0][0]+o/14*2,t[0][1]-a/36*22];y.push(m);var _=[t[0][0]+o/14*2,t[0][1]-a/36*23];y.push(_);var b=[t[0][0]+o/14*6,t[0][1]-a/36*22];y.push(b);var S=new Array,O=[t[0][0]+o/14*6,t[0][1]-a/36*23],C=[t[0][0]+o/14*2,t[0][1]-a/36*24],T=[t[0][0]+o/14*2,t[0][1]-a/36*25],x=[t[0][0]+o/14*6,t[0][1]-a/36*24];S.push(O),S.push(C),S.push(T),S.push(x);var E=new Array,P=[t[0][0]+o/14*6,t[0][1]-a/36*25],j=[t[0][0]+o/14*2,t[0][1]-a/36*26],R=[t[0][0]+o/14*2,t[0][1]-a/36*27],I=[t[0][0]+o/14*6,t[0][1]-a/36*26];E.push(P),E.push(j),E.push(R),E.push(I);var L=new Array,w=[t[0][0]+o/14*6,t[0][1]-a/36*27],A=[t[0][0]+o/14*2,t[0][1]-a/36*28],M=[t[0][0]+o/14*2,t[0][1]-a/36*29],F=[t[0][0]+o/14*6,t[0][1]-a/36*28];L.push(w),L.push(A),L.push(M),L.push(F);var k=new Array,N=[t[0][0]+o/14*8,t[0][1]-a/36*21],D=[t[0][0]+o/14*12,t[0][1]-a/36*22],G=[t[0][0]+o/14*12,t[0][1]-a/36*23],B=[t[0][0]+o/14*8,t[0][1]-a/36*22];k.push(N),k.push(D),k.push(G),k.push(B);var U=new Array,V=[t[0][0]+o/14*8,t[0][1]-a/36*23],W=[t[0][0]+o/14*12,t[0][1]-a/36*24],Z=[t[0][0]+o/14*12,t[0][1]-a/36*25],z=[t[0][0]+o/14*8,t[0][1]-a/36*24];U.push(V),U.push(W),U.push(Z),U.push(z);var H=new Array,Y=[t[0][0]+o/14*8,t[0][1]-a/36*25],X=[t[0][0]+o/14*12,t[0][1]-a/36*26],q=[t[0][0]+o/14*12,t[0][1]-a/36*27],K=[t[0][0]+o/14*8,t[0][1]-a/36*26];H.push(Y),H.push(X),H.push(q),H.push(K);var J=new Array,Q=[t[0][0]+o/14*8,t[0][1]-a/36*27],$=[t[0][0]+o/14*12,t[0][1]-a/36*28],tt=[t[0][0]+o/14*12,t[0][1]-a/36*29],et=[t[0][0]+o/14*8,t[0][1]-a/36*28];J.push(Q),J.push($),J.push(tt),J.push(et);for(var it=new Array,rt=0;rt<11;rt++)it[rt]=new Array;return it[0].push(s),it[1].push(g),it[2].push(y),it[3].push(S),it[4].push(E),it[5].push(L),it[6].push(k),it[7].push(U),it[8].push(H),it[9].push(J),it[10].push(l),it},M.Bezier.getBezierFromVert=function(t,e){var i=null;if("BezierLine"==e){var r=M.commonFun.getBSplinePoints(t,2);i=new a.default(r)}else"Bezier"==e?(t.push(t[0]),r=M.commonFun.getBSplinePoints(t,2),t.pop(t[t.length-1]),i=new o.default([r])):"AssemblyArea"==e&&(r=M.Bezier.GetAssemblyAreaDots(t),i=new o.default([r]));return i},M.Bezier.GetAssemblyAreaDots=function(t){var e=null,i=null,r=0,n=null,o=null,a=null,s=null,l=null,u=null,c=null,h=null,d=null,p=null,f=t.length;return f>=2&&t[f-1]!=t[f-2]&&(e=t[0],i=t[1],r=M.commonFun.CalLengthOfTwoPoints(e,i),n=M.commonFun.getMidPoint(e,i),o=M.commonFun.getThirdPoint(e,n,1.5*Math.PI,r/4.5,"right"),a=M.commonFun.getThirdPoint(e,i,0,.8*r,"left"),s=M.commonFun.getThirdPoint(e,a,1.5*Math.PI,r/5,"left"),l=M.commonFun.getThirdPoint(e,i,0,.45*r,"left"),u=M.commonFun.getThirdPoint(e,l,1.5*Math.PI,r/10,"left"),c=M.commonFun.getThirdPoint(e,i,0,.15*r,"left"),h=M.commonFun.getThirdPoint(e,c,1.5*Math.PI,r/7,"left"),d=new Array,(p=new Array).push(e,o,i,h,u,s),d=M.Bezier.getAdvancedBezierPoints(p)),d},M.Bezier.getAdvancedBezierPoints=function(t){var e=0,i=0,r=0,n=0,o=0,a=(t=t.slice()).length;t.push(t[0]);for(var s=new Array,l=0;l<a;)s.push(M.commonFun.getMidPoint(t[l],t[l+1])),++l;s.push(s[0]),t.push(t[1]);var u=new Array;for(l=0;l<a;)e=M.commonFun.CalLengthOfTwoPoints(t[l],t[l+1]),i=M.commonFun.CalLengthOfTwoPoints(t[l+1],t[l+2]),r=M.commonFun.CalLengthOfTwoPoints(s[l],s[l+1])*e/(e+i),u.push(M.commonFun.getThirdPoint(s[l+1],s[l],0,r,"left")),++l;var c=new Array;for(l=0;l<a;)n=t[l+1][0]-u[l][0],o=t[l+1][1]-u[l][1],c.push([s[l][0]+n,s[l][1]+o]),c.push(t[l+1]),c.push([s[l+1][0]+n,s[l+1][1]+o]),++l;var h=new Array,d=c.slice();for(d.push(c[0],c[1]),l=1;l<d.length;)h=h.concat(M.commonFun.getBezierPoints(d.slice(l,l+4))),l+=3;return h},M.MilStdGeomtry=function(t,e,i,r){s.default.call(this,[]),void 0!==t&&null!=t&&(void 0!==r&&null==r&&s.default.call(this,r),this.vertices=t,this.milStdType=e,this.milStdParams=void 0!==i&&null!=i?i:new M.MilstdParams,this.milStdType!=M.EnumMilstdType.TriangleFlag&&this.milStdType!=M.EnumMilstdType.RectFlag&&this.milStdType!=M.EnumMilstdType.CurveFlag&&this.milStdType!=M.EnumMilstdType.ArrowCross&&this.milStdType!=M.EnumMilstdType.CircleClosedangle&&this.milStdType!=M.EnumMilstdType.Closedangle&&this.milStdType!=M.EnumMilstdType.DoubleClosedangle&&this.milStdType!=M.EnumMilstdType.Fourstar&&this.milStdType!=M.EnumMilstdType.Rhombus&&this.milStdType!=M.EnumMilstdType.SameDirectionClosedangle&&this.milStdType!=M.EnumMilstdType.Triangle&&this.milStdType!=M.EnumMilstdType.Vane&&this.milStdType!=M.EnumMilstdType.AssemblyArea||(this.milStdParams.maxVertices=2),this.milStdType==M.EnumMilstdType.DoubleArrow&&(void 0!=i.maxVertices&&i.maxVertices<=4&&i.maxVertices>=3?this.milStdParams.maxVertices=i.maxVertices:this.milStdParams.maxVertices=4))},(0,r.inherits)(M.MilStdGeomtry,s.default),M.MilStdGeomtry.prototype.Create=function(){if("DoubleArrow"==this.milStdType){if(this.vertices.length<3)return}else if(this.vertices.length<2)return;switch(this.milStdType){case M.EnumMilstdType.SimpleArrow:case M.EnumMilstdType.StraightArrow:case M.EnumMilstdType.DoubleArrow:case M.EnumMilstdType.SingleLineArrow:var t=M.Arrow.getArrowFromVert(this.vertices,this.milStdType,this.milStdParams);this.setGeometriesArray([t]);break;case M.EnumMilstdType.TriangleFlag:case M.EnumMilstdType.RectFlag:case M.EnumMilstdType.CurveFlag:var e=M.Flag.getFlagFromVert(this.vertices,this.milStdType);this.setGeometriesArray(e);break;case M.EnumMilstdType.ArrowCross:case M.EnumMilstdType.CircleClosedangle:case M.EnumMilstdType.Closedangle:case M.EnumMilstdType.DoubleClosedangle:case M.EnumMilstdType.Fourstar:case M.EnumMilstdType.Rhombus:case M.EnumMilstdType.SameDirectionClosedangle:case M.EnumMilstdType.Triangle:case M.EnumMilstdType.Vane:e=M.Compass.getCompassFromVert(this.vertices,this.milStdType),this.setGeometriesArray(e);break;case M.EnumMilstdType.Bezier:case M.EnumMilstdType.BezierLine:case M.EnumMilstdType.AssemblyArea:t=M.Compass.getBezierFromVert(this.vertices,this.milStdType),this.setGeometriesArray([t])}},M.MilStdGeomtry.prototype.Update=function(t,e){if("DoubleArrow"==this.milStdType){if(t.length<3)return}else if(t.length<2)return;switch(e||(this.vertices=t),this.milStdType){case M.EnumMilstdType.SimpleArrow:case M.EnumMilstdType.StraightArrow:case M.EnumMilstdType.DoubleArrow:case M.EnumMilstdType.SingleLineArrow:var i=M.Arrow.getArrowFromVert(t,this.milStdType,this.milStdParams);this.setGeometriesArray([i]);break;case M.EnumMilstdType.TriangleFlag:case M.EnumMilstdType.RectFlag:case M.EnumMilstdType.CurveFlag:var r=M.Flag.getFlagFromVert(t,this.milStdType);this.setGeometriesArray(r);break;case M.EnumMilstdType.ArrowCross:case M.EnumMilstdType.CircleClosedangle:case M.EnumMilstdType.Closedangle:case M.EnumMilstdType.DoubleClosedangle:case M.EnumMilstdType.Fourstar:case M.EnumMilstdType.Rhombus:case M.EnumMilstdType.SameDirectionClosedangle:case M.EnumMilstdType.Triangle:case M.EnumMilstdType.Vane:r=M.Compass.getCompassFromVert(t,this.milStdType),this.setGeometriesArray(r);break;case M.EnumMilstdType.Bezier:case M.EnumMilstdType.BezierLine:case M.EnumMilstdType.AssemblyArea:i=M.Bezier.getBezierFromVert(t,this.milStdType),this.setGeometriesArray([i])}},M.event.MilStdDrawEvent=function(t,e){l.default.call(this,t),this.feature=void 0!==e?e:null},(0,r.inherits)(M.event.MilStdDrawEvent,l.default),M.event.MilStdDrawEvent.DRAW_START="draw_start",M.event.MilStdDrawEvent.DRAW_END="draw_end",M.event.MilStdDrawEvent.MODIFY_FEATURE_END="modify_one_feature";var N=function(t){g.default.call(this,[]),this.vertices=null,this.milStdGeom=null,this.feature=null,this.milStdType=null,this.milStdParams=null,this.mapViewport=null,this.dbClickZoomEvent=null,this.map=void 0!==t?t:null,this.featureName=null;var e=new u.default({color:"#000000",width:1.25}),i=new c.default({color:"rgba(0,0,0,0.5)"});this.style=new d.default({fill:i,stroke:e});var r=new p.default({source:new f.default({useSpatialIndex:!1,wrapX:!1})});this.featureOverLay=r,this.featureOverLay.setStyle(this.style),this.setMap(t),this.featureOverLay.on("postcompose",function(t){t.context.shadowBlur=25,t.context.shadowColor="black"})};(0,r.inherits)(N,g.default),N.prototype.setMap=function(t){void 0!==t&&null!=t&&(this.map=t,this.mapViewport=this.map.getViewport())},N.prototype.ShieldDBClickZoomEvent=function(t){for(var e=t.getInteractions(),i=0,r=e.getLength();i<r;i++){var n=e.item(i);if(n instanceof y.default){this.dbClickZoomEvent=n,e.remove(n);break}}},N.prototype.UnShieldDBClickZoomEvent=function(t){null!=this.dbClickZoomEvent&&(t.getInteractions().push(this.dbClickZoomEvent),this.dbClickZoomEvent=null)},N.prototype.activate=function(t,e,i){this.deactivate(),this.ShieldDBClickZoomEvent(this.map),m.listen(this.mapViewport,v.default.CLICK,this.drawStartHandle,this),this.milStdType=t,this.milStdParams=e,this.featureName=void 0!==i&&null!=i?i:"draw",this.featureOverLay.setMap(this.map)},N.prototype.deactivate=function(){this.disconnectEventHandlers(),this.featureOverLay.setMap(null),this.vertices=[],this.milStdGeom=null,this.feature=null,this.UnShieldDBClickZoomEvent(this.map)},N.prototype.drawStartHandle=function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);this.vertices.push(e),this.milStdGeom=new M.MilStdGeomtry(this.vertices,this.milStdType,this.milStdParams),this.featureOverLay.getSource().addFeature(new T.default(new x.default(e))),m.unlisten(this.mapViewport,v.default.CLICK,this.drawStartHandle,this),m.listen(this.mapViewport,v.default.CLICK,this.drawContinueHandle,this),m.listen(this.mapViewport,v.default.DBLCLICK,this.drawEndHandle,this),m.listen(this.mapViewport,v.default.MOUSEMOVE,this.mouseMoveHandle,this)},N.prototype.drawContinueHandle=function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);M.commonFun.CalLengthOfTwoPoints(e,this.vertices[this.vertices.length-1])<M.enum.ZERO_TOLERANCE||(this.vertices.push(e),this.milStdGeom.Update(this.vertices.slice(0),!1),null==this.feature?(this.feature=new T.default(this.milStdGeom),this.featureOverLay.getSource().addFeature(this.feature)):this.feature.setGeometry(this.milStdGeom),this.vertices.length==this.milStdGeom.milStdParams.maxVertices&&this.drawEndHandle(t))},N.prototype.drawEndHandle=function(t){this.disconnectEventHandlers(),t.preventDefault(),this.clear()},N.prototype.mouseMoveHandle=function(t){var e=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if(!(M.commonFun.CalLengthOfTwoPoints(e,this.vertices[this.vertices.length-1])<M.enum.ZERO_TOLERANCE)){var i=this.vertices.concat([e]);this.milStdGeom.Update(i,!0),null==this.feature?(this.feature=new T.default(this.milStdGeom),this.featureOverLay.getSource().addFeature(this.feature)):this.feature.setGeometry(this.milStdGeom)}},N.prototype.disconnectEventHandlers=function(){m.unlisten(this.mapViewport,v.default.CLICK,this.drawStartHandle,this),m.unlisten(this.mapViewport,v.default.CLICK,this.drawContinueHandle,this),m.unlisten(this.mapViewport,v.default.MOUSEMOVE,this.mouseMoveHandle,this),m.unlisten(this.mapViewport,v.default.DBLCLICK,this.drawEndHandle,this)},N.prototype.clear=function(t){this.feature.name=this.featureName,this.dispatchEvent(new M.event.MilStdDrawEvent(M.event.MilStdDrawEvent.DRAW_END,this.feature)),this.featureOverLay.getSource().removeFeature(this.feature),this.UnShieldDBClickZoomEvent(this.map),this.featureOverLay.setMap(null),this.vertices=[],this.milStdGeom=null,this.feature=null};var D=function t(e,i){var r=void 0!==i?i:{};b.default.call(this,{handleDownEvent:t.handleDownEvent_,handleDragEvent:t.handleDragEvent_,handleEvent:t.handleEvent,handleUpEvent:t.handleUpEvent_,handleMoveEvent:t.handleMoveEvent}),this.map_=e,this.vertexFeature_=null,this.lastPixel_=[0,0],this.rBush_=new S.default,this.pixelTolerance_=void 0!==r.pixelTolerance&&null!=r.pixelTolerance?r.pixelTolerance:10,this.snappedToVertex_=!1,this.dragSegments_=null,this.oldVerticesFeature=new O.default,this.overlay_=new p.default({source:new f.default({useSpatialIndex:!1,wrapX:!!r.wrapX}),updateWhileAnimating:!0,updateWhileInteracting:!0});var n=void 0!=r.style?r.style:t.getDefaultStyleFunction();this.overlay_.setStyle(n),this.setMap(this.map_),this.SEGMENT_WRITERS_={Polygon:this.writeVerticeGeometry,MultiLineString:this.writeVerticeGeometry,LineString:this.writeVerticeGeometry},this.selectTool=null,this.features_=void 0!==r.features?r.features:null,this.cursor_="pointer",this.previousCursor_=void 0};(0,r.inherits)(D,b.default),D.prototype.activate=function(){if(null==this.selectTool&&(this.selectTool=new ol.interaction.Select({wrapX:!1})),void 0!==this.map_&&null!=this.map_){for(var t=this.map_.getInteractions(),e=0,i=t.getLength();e<i;e++){var r=t.item(e);(r instanceof ol.interaction.Select||r instanceof D)&&t.remove(r)}this.map_.addInteraction(this.selectTool),this.map_.addInteraction(this),m.listen(this.map_,"dblclick",this.modifyEndHandle,this),this.features_=this.selectTool.getFeatures(),this.features_.forEach(this.addFeature_,this),m.listen(this.features_,C.default.ADD,this.handleFeatureAdd_,this),m.listen(this.features_,C.default.REMOVE,this.handleFeatureRemove_,this),N.prototype.ShieldDBClickZoomEvent(this.map_)}},D.prototype.deactivate=function(){void 0!==this.map_&&null!=this.map_&&(N.prototype.UnShieldDBClickZoomEvent(this.map_),this.map_.removeInteraction(this.selectTool),this.map_.removeInteraction(this))},D.prototype.disconnectEventHandlers=function(){void 0!==this.map_&&null!=this.map_&&(m.unlisten(this.map_,"dblclick",this.modifyEndHandle,this),this.map_.removeInteraction(this.selectTool),this.map_.removeInteraction(this)),m.unlisten(this.features_,C.default.ADD,this.handleFeatureAdd_,this),m.unlisten(this.features_,C.default.REMOVE,this.handleFeatureRemove_,this)},D.prototype.modifyEndHandle=function(t){this.disconnectEventHandlers(),void 0!==this.oldVerticesFeature&&null!=this.oldVerticesFeature&&(this.clearOverLayer(this.overlay_),this.oldVerticesFeature.clear())},D.prototype.addFeature_=function(t){var e=t.getGeometry(),i=null;if(e instanceof x.default&&(i=e),i=e instanceof s.default?e.geometries_[0]:e,void 0!==this.SEGMENT_WRITERS_[i.getType()]&&(this.SEGMENT_WRITERS_[i.getType()].call(this,t),this.oldVerticesFeature.clear(),this.clearOverLayer(this.overlay_),void 0!==e.vertices&&null!=e.vertices))for(var r=0;r<e.vertices.length;r++){var n=new T.default(new x.default(e.vertices[r]));this.overlay_.getSource().addFeature(n),this.oldVerticesFeature.push(n)}var o=this.getMap();void 0!==o&&null!=o&&this.handlePointerAtPixel(this.lastPixel_,o)},D.prototype.clearOverLayer=function(t){void 0!==t&&null!=t&&t.getSource().clear()},D.prototype.setMap=function(t){this.overlay_.setMap(t),b.default.prototype.setMap.call(this,t)},D.prototype.handleFeatureAdd_=function(t){var e=t.element;this.addFeature_(e)},D.prototype.handleFeatureRemove_=function(t){var e=t.element;void 0!==e&&null!=e&&this.dispatchEvent(new M.event.MilStdDrawEvent(M.event.MilStdDrawEvent.MODIFY_FEATURE_END,e));var i,r=this.rBush_,n=[];for(r.forEachInExtent(e.getGeometry().getExtent(),function(t){e===t.feature&&n.push(t)}),i=n.length-1;i>=0;--i)r.remove(n[i]);this.clearOverLayer(this.overlay_),this.oldVerticesFeature.clear(),this.vertexFeature_=null},D.prototype.writeVerticeGeometry=function(t){var e,i,r,n,o=t.getGeometry().vertices;for(i=0,r=o.length;i<r;++i)n={feature:t,depth:[i],index:i,segment:[e=o[i],e]},this.rBush_.insert(E.boundingExtent(n.segment),n)},D.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;if(null==e)e=new T.default(new x.default(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e);else{var i=e.getGeometry();i.setCoordinates(t),e.setGeometry(i)}return e},D.prototype.redrawVertices=function(t,e){if(void 0!==this.oldVerticesFeature&&null!=this.oldVerticesFeature){var i=this.oldVerticesFeature.item(t);i.setGeometry(new x.default(e)),this.oldVerticesFeature.setAt(t,i)}},D.handleDownEvent_=function(t){this.handlePointerAtPixel(t.pixel,t.map),this.dragSegments_=[];var e=this.vertexFeature_;if(null!=e)for(var i=e.getGeometry().getCoordinates(),r=E.boundingExtent([i]),n=this.rBush_.getInExtent(r),o=0,a=n.length;o<a;++o){var s=n[o],l=s.segment;I.equals(l[0],i)?this.dragSegments_.push([s,0]):I.equals(l[1],i)&&this.dragSegments_.push([s,1])}return null!=this.vertexFeature_},D.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),i=t.map.getTargetElement();e?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},D.handleDragEvent_=function(t){for(var e=t.coordinate,i=0,r=this.dragSegments_.length;i<r;++i){var n=this.dragSegments_[i],o=n[0],a=(n[1],o.index),s=o.feature,l=s.getGeometry();if(l.getType()==L.default.GEOMETRY_COLLECTION){for(;e.length<s.getGeometry().geometries_[0].getStride();)e.push(0);var u=l.vertices;if(l.milStdType==M.EnumMilstdType.TriangleFlag||l.milStdType==M.EnumMilstdType.RectFlag||l.milStdType==M.EnumMilstdType.CurveFlag||l.milStdType==M.EnumMilstdType.ArrowCross||l.milStdType==M.EnumMilstdType.CircleClosedangle||l.milStdType==M.EnumMilstdType.Closedangle||l.milStdType==M.EnumMilstdType.DoubleClosedangle||l.milStdType==M.EnumMilstdType.Fourstar||l.milStdType==M.EnumMilstdType.Rhombus||l.milStdType==M.EnumMilstdType.SameDirectionClosedangle||l.milStdType==M.EnumMilstdType.Triangle||l.milStdType==M.EnumMilstdType.Vane)if(0==a){if(e[0]-u[1][0]>=0||e[1]-u[1][1]<=0)return}else if(1==a&&(e[0]-u[0][0]<=0||e[1]-u[0][1]>=0))return;this.updateFeature(o,e,!0);break}this.createOrUpdateVertexFeature_(e)}},D.handleUpEvent_=function(t){for(var e,i=t.coordinate,r=this.dragSegments_.length-1;r>=0;--r){e=this.dragSegments_[r][0],this.rBush_.update(E.boundingExtent(e.segment),e);var n=e.feature.getGeometry(),o=n.vertices;if(n.milStdType==M.EnumMilstdType.TriangleFlag||n.milStdType==M.EnumMilstdType.RectFlag||n.milStdType==M.EnumMilstdType.CurveFlag||n.milStdType==M.EnumMilstdType.ArrowCross||n.milStdType==M.EnumMilstdType.CircleClosedangle||n.milStdType==M.EnumMilstdType.Closedangle||n.milStdType==M.EnumMilstdType.DoubleClosedangle||n.milStdType==M.EnumMilstdType.Fourstar||n.milStdType==M.EnumMilstdType.Rhombus||n.milStdType==M.EnumMilstdType.SameDirectionClosedangle||n.milStdType==M.EnumMilstdType.Triangle||n.milStdType==M.EnumMilstdType.Vane)if(0==e.index){if(i[0]-o[1][0]>=0||i[1]-o[1][1]<=0)return!1}else if(1==e.index&&(i[0]-o[0][0]<=0||i[1]-o[0][1]>=0))return!1;this.updateFeature(e,t.coordinate,!0)}return!1},D.prototype.updateFeature=function(t,e,i){var r=t.feature.getGeometry(),n=r.vertices;if(n[t.index]=e,r.Update(n,i),t.feature.setGeometry(r),null!=this.vertexFeature_){var o=this.vertexFeature_.getGeometry();o.setCoordinates(e),this.vertexFeature_.setGeometry(o)}this.redrawVertices(t.index,e),this.rBush_.remove(t);var a=t.segment;a[0]=a[1]=e,t.segment=a,this.rBush_.insert(E.boundingExtent(t.segment),t)},D.handleEvent=function(t){return!(t instanceof P.default)||(t.map.getView().getHints()[R.default.INTERACTING]||t.type!=j.default.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),_.handleEvent.call(this,t)&&!0)},D.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel(t.pixel,t.map)},D.prototype.handlePointerAtPixel=function(t,e){var i=e.getCoordinateFromPixel(t),r=e.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),n=e.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),o=E.boundingExtent([r,n]),a=this.rBush_.getInExtent(o);if(a.length>0){a.sort(function(t,e){return I.squaredDistanceToSegment(i,t.segment)-I.squaredDistanceToSegment(i,e.segment)});var s=a[0].segment,l=e.getPixelFromCoordinate(s[0]),u=e.getPixelFromCoordinate(s[1]),c=I.squaredDistance(t,l),h=I.squaredDistance(t,u),d=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=d<=this.pixelTolerance_,void(this.snappedToVertex_&&this.createOrUpdateVertexFeature_(s[0]))}null!=this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},D.getDefaultStyleFunction=function(){var t=(0,h.createEditingStyle)();return function(e,i){return t[L.default.POINT]}};var G=function t(e){b.default.call(this,{handleDownEvent:t.prototype.handleDownEvent,handleDragEvent:t.prototype.handleDragEvent,handleMoveEvent:t.prototype.handleMoveEvent,handleUpEvent:t.prototype.handleUpEvent}),this.map_=void 0!==e&&null!=e?e:null,this.coordinate_=null,this.feature_=null,this.cursor_="move",this.previousCursor_=void 0};(0,r.inherits)(G,b.default),G.prototype.activate=function(){if(void 0!==this.map_&&null!=this.map_){for(var t=this.map_.getInteractions(),e=t.getLength()-1;e>=0;e--){var i=t.item(e);i instanceof G&&t.remove(i)}this.map_.addInteraction(this),N.prototype.ShieldDBClickZoomEvent(this.map_),m.listen(this.map_,"dblclick",this.modifyEndHandle,this)}},G.prototype.deactivate=function(){if(void 0!==this.map_&&null!=this.map_){N.prototype.UnShieldDBClickZoomEvent(this.map_);for(var t=this.map_.getInteractions(),e=t.getLength()-1;e>=0;e--){var i=t.item(e);i instanceof G&&t.remove(i)}}},G.prototype.modifyEndHandle=function(t){void 0!==this.map_&&null!=this.map_&&(m.unlisten(this.map_,"dblclick",this.modifyEndHandle,this),this.setActive(!1))},G.prototype.handleDownEvent=function(t){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});return e&&(this.coordinate_=t.coordinate,this.feature_=e),!!e},G.prototype.handleDragEvent=function(t){t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t});var e=t.coordinate[0]-this.coordinate_[0],i=t.coordinate[1]-this.coordinate_[1],r=this.feature_.getGeometry();if(r.translate(e,i),void 0!==r.vertices&&null!=r.vertices)for(var n=r.vertices,o=0,a=n.length;o<a;o++)I.add(n[o],[e,i]);this.coordinate_[0]=t.coordinate[0],this.coordinate_[1]=t.coordinate[1]},G.prototype.handleMoveEvent=function(t){if(this.cursor_){var e=t.map.forEachFeatureAtPixel(t.pixel,function(t,e){return t}),i=t.map.getTargetElement();e?i.style.cursor!=this.cursor_&&(this.previousCursor_=i.style.cursor,i.style.cursor=this.cursor_):void 0!==this.previousCursor_&&(i.style.cursor=this.previousCursor_,this.previousCursor_=void 0)}},G.prototype.handleUpEvent=function(t){return t.map.getTargetElement().style.cursor="default",void 0!==this.feature_&&null!=this.feature_&&this.dispatchEvent(new M.event.MilStdDrawEvent(M.event.MilStdDrawEvent.MODIFY_FEATURE_END,this.feature_)),this.coordinate_=null,this.feature_=null,!1},e.MilStd=M,e.EnumMilstdType=F,M.EnumMilstdType=F,e.MilstdParams=k,M.MilstdParams=k,e.MilStdDrawTool=N,M.tool.MilStdDrawTool=N,e.MilStdModifyTool=D,M.ModifyTool=D,e.MilStdDragPan=G,M.DragPan=G},function(module,exports,__webpack_require__){"use strict";var require;Object.defineProperty(exports,"__esModule",{value:!0});var _typeof2=__webpack_require__(125),_typeof3=_interopRequireDefault(_typeof2),_seal=__webpack_require__(540),_seal2=_interopRequireDefault(_seal);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}var COMPILED=!1,goog=goog||{};goog.global=window||{},goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,e,i){var r,n=t.split("."),o=i||goog.global;n[0]in o||!o.execScript||o.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)!n.length&&goog.isDef(e)?o[r]=e:o=o[r]?o[r]:o[r]={}},goog.define=function(t,e){var i=e;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?i=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(i=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,i)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.define("goog.provide",function(t){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)}),goog.constructNamespace_=function(t,e){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var i=t;(i=i.substring(0,i.lastIndexOf(".")))&&!goog.getObjectByName(i);)goog.implicitNamespaces_[i]=!0}goog.exportPath_(t,e)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(t){if(!goog.isString(t)||!t||-1==t.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){if(!COMPILED)return goog.isProvided_(t)?t in goog.loadedModules_?goog.loadedModules_[t]:goog.getObjectByName(t):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(goog.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},goog.forwardDeclare("Document"),goog.forwardDeclare("HTMLScriptElement"),goog.forwardDeclare("XMLHttpRequest"),COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,e){for(var i,r=t.split("."),n=e||goog.global;i=r.shift();){if(!goog.isDefAndNotNull(n[i]))return null;n=n[i]}return n},goog.globalize=function(t,e){var i=e||goog.global;for(var r in t)i[r]=t[r]},goog.addDependency=function(t,e,i,r){if(goog.DEPENDENCIES_ENABLED){var n,o,a=t.replace(/\\/g,"/"),s=goog.dependencies_;r&&"boolean"!=typeof r||(r=r?{module:"goog"}:{});for(var l=0;n=e[l];l++)s.nameToPath[n]=a,s.loadFlags[a]=r;for(var u=0;o=i[u];u++)a in s.requires||(s.requires[a]={}),s.requires[a][o]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(t),goog.isProvided_(t))return goog.isInModuleLoader_()?goog.module.getInternal_(t):null;if(goog.ENABLE_DEBUG_LOADER){var e=goog.getPathFromDeps_(t);if(e)return goog.writeScripts_(e),null}var i="goog.require could not find: "+t;throw goog.logToConsole_(i),Error(i)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.define("goog.TRANSPILE","detect"),goog.define("goog.TRANSPILER","transpile.js"),goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return null!=t&&"write"in t},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var t=goog.global.document.getElementsByTagName("SCRIPT"),e=t.length-1;e>=0;--e){var i=t[e].src,r=i.lastIndexOf("?"),n=-1==r?i.length:r;if("base.js"==i.substr(n-7,7))return void(goog.basePath=i.substr(0,n-7))}},goog.importScript_=function(t,e){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_)(t,e)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importProcessedScript_=function(t,e,i){var r='goog.retrieveAndExec_("'+t+'", '+e+", "+i+");";goog.importScript_("",r)},goog.queuedModules_=[],goog.wrapModule_=function(t,e){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(e+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+e+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(t>0){var e=goog.queuedModules_;goog.queuedModules_=[];for(var i=0;i<t;i++){var r=e[i];goog.maybeProcessDeferredPath_(r)}}},goog.maybeProcessDeferredDep_=function(t){if(goog.isDeferredModule_(t)&&goog.allDepsAreAvailable_(t)){var e=goog.getPathFromDeps_(t);goog.maybeProcessDeferredPath_(goog.basePath+e)}},goog.isDeferredModule_=function(t){var e=goog.getPathFromDeps_(t),i=e&&goog.dependencies_.loadFlags[e]||{};return!(!e||"goog"!=i.module&&!goog.needsTranspile_(i.lang))&&goog.basePath+e in goog.dependencies_.deferred},goog.allDepsAreAvailable_=function(t){var e=goog.getPathFromDeps_(t);if(e&&e in goog.dependencies_.requires)for(var i in goog.dependencies_.requires[e])if(!goog.isProvided_(i)&&!goog.isDeferredModule_(i))return!1;return!0},goog.maybeProcessDeferredPath_=function(t){if(t in goog.dependencies_.deferred){var e=goog.dependencies_.deferred[t];delete goog.dependencies_.deferred[t],goog.globalEval(e)}},goog.loadModuleFromUrl=function(t){goog.retrieveAndExec_(t,!0,!1)},goog.writeScriptSrcNode_=function(t){goog.global.document.write('<script type="text/javascript" src="'+t+'"><\/script>')},goog.appendScriptSrcNode_=function(t){var e=goog.global.document,i=e.createElement("script");i.type="text/javascript",i.src=t,i.defer=!1,i.async=!1,e.head.appendChild(i)},goog.writeScriptTag_=function(t,e){if(goog.inHtmlDocument_()){var i=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==i.readyState){if(/\bdeps.js$/.test(t))return!1;throw Error('Cannot write "'+t+'" after document load')}if(void 0===e)if(goog.IS_OLD_IE_){var r=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";i.write('<script type="text/javascript" src="'+t+'"'+r+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(t):goog.writeScriptSrcNode_(t);else i.write('<script type="text/javascript">'+e+"<\/script>");return!0}return!1},goog.needsTranspile_=function(lang){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(!goog.transpiledLanguages_){goog.transpiledLanguages_={es5:!0,es6:!0,"es6-impl":!0};
/** @preserveTry */
try{goog.transpiledLanguages_.es5=eval("[1,].length!=1");var es6implTest="let a={};const X=class{constructor(){}x(z){return new Map([...arguments]).get(z[0])==3}};return new X().x([a,3])",es6fullTest="class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}";eval('(()=>{"use strict";'+es6implTest+"})()")&&(goog.transpiledLanguages_["es6-impl"]=!1),eval('(()=>{"use strict";'+es6fullTest+"})()")&&(goog.transpiledLanguages_.es6=!1)}catch(t){}}return!!goog.transpiledLanguages_[lang]},goog.transpiledLanguages_=null,goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,e){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==e&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(t){var e=[],i={},r=goog.dependencies_;!function t(n){if(!(n in r.written||n in r.visited)){if(r.visited[n]=!0,n in r.requires)for(var o in r.requires[n])if(!goog.isProvided_(o)){if(!(o in r.nameToPath))throw Error("Undefined nameToPath for "+o);t(r.nameToPath[o])}n in i||(i[n]=!0,e.push(n))}}(t);for(var n=0;n<e.length;n++){var o=e[n];goog.dependencies_.written[o]=!0}var a=goog.moduleLoaderState_;for(goog.moduleLoaderState_=null,n=0;n<e.length;n++){if(!(o=e[n]))throw goog.moduleLoaderState_=a,Error("Undefined script input");var s=r.loadFlags[o]||{},l=goog.needsTranspile_(s.lang);"goog"==s.module||l?goog.importProcessedScript_(goog.basePath+o,"goog"==s.module,l):goog.importScript_(goog.basePath+o)}goog.moduleLoaderState_=a},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.loadModule=function(t){var e=goog.moduleLoaderState_;try{var i;if(goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1},goog.isFunction(t))i=t.call(void 0,{});else{if(!goog.isString(t))throw Error("Invalid module definition");i=goog.loadModuleFromSource_.call(void 0,t)}var r=goog.moduleLoaderState_.moduleName;if(!goog.isString(r)||!r)throw Error('Invalid module name "'+r+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(r,i):goog.SEAL_MODULE_EXPORTS&&_seal2.default&&(0,_seal2.default)(i),goog.loadedModules_[r]=i}finally{goog.moduleLoaderState_=e}},goog.loadModuleFromSource_=function(){var exports={};return eval(arguments[0]),exports},goog.normalizePath_=function(t){for(var e=t.split("/"),i=0;i<e.length;)"."==e[i]?e.splice(i,1):i&&".."==e[i]&&e[i-1]&&".."!=e[i-1]?e.splice(--i,2):i++;return e.join("/")},goog.loadFileSync_=function(t){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(t);try{var e=new goog.global.XMLHttpRequest;return e.open("get",t,!1),e.send(),0==e.status||200==e.status?e.responseText:null}catch(t){return null}},goog.retrieveAndExec_=function(t,e,i){if(!COMPILED){var r=t;t=goog.normalizePath_(t);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,o=goog.loadFileSync_(t);if(null==o)throw new Error('Load of "'+t+'" failed');i&&(o=goog.transpile_.call(goog.global,o,t)),e?o=goog.wrapModule_(t,o):o+="\n//# sourceURL="+t,goog.IS_OLD_IE_?(goog.dependencies_.deferred[r]=o,goog.queuedModules_.push(r)):n(t,o)}},goog.transpile_=function(code,path){var jscomp=goog.global.$jscomp;jscomp||(goog.global.$jscomp=jscomp={});var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER,transpilerCode=goog.loadFileSync_(transpilerPath);transpilerCode&&(eval(transpilerCode+"\n//# sourceURL="+transpilerPath),jscomp=goog.global.$jscomp,transpile=jscomp.transpile)}if(!transpile){var suffix=" requires transpilation but no transpiler was found.";transpile=jscomp.transpile=function(t,e){return goog.logToConsole_(e+suffix),t}}return transpile(code,path)},goog.typeOf=function(t){var e=void 0===t?"undefined":(0,_typeof3.default)(t);if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var i=Object.prototype.toString.call(t);if("[object Window]"==i)return"object";if("[object Array]"==i||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==i||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var e=goog.typeOf(t);return"array"==e||"object"==e&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var e=void 0===t?"undefined":(0,_typeof3.default)(t);return"object"==e&&null!=t||"function"==e},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){null!==t&&"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_)
/** @preserveTry */;try{delete t[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var e=goog.typeOf(t);if("object"==e||"array"==e){if(t.clone)return t.clone();var i="array"==e?[]:{};for(var r in t)i[r]=goog.cloneObject(t[r]);return i}return t},goog.bindNative_=function(t,e,i){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,e,i){if(!t)throw new Error;if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}},goog.bind=function(t,e,i){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var i=Array.prototype.slice.call(arguments,1);return function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(t,e){for(var i in e)t[i]=e[i]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(t);else{var e=goog.global.document,i=e.createElement("SCRIPT");i.type="text/javascript",i.defer=!1,i.appendChild(e.createTextNode(t)),e.body.appendChild(i),e.body.removeChild(i)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(t,e){var i,r=function(t){return goog.cssNameMapping_[t]||t};return i=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?r:function(t){for(var e=t.split("-"),i=[],n=0;n<e.length;n++)i.push(r(e[n]));return i.join("-")}:function(t){return t},e?t+"-"+i(e):i(t)},goog.setCssNameMapping=function(t,e){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=e},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,e){return e&&(t=t.replace(/\{\$([^}]+)}/g,function(t,i){return null!=e&&i in e?e[i]:t})),t},goog.getMsgWithFallback=function(t,e){return t},goog.exportSymbol=function(t,e,i){goog.exportPath_(t,e,i)},goog.exportProperty=function(t,e,i){t[e]=i},goog.inherits=function(t,e){function i(){}i.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.base=function(t,i,r){for(var n=new Array(arguments.length-2),o=2;o<arguments.length;o++)n[o-2]=arguments[o];return e.prototype[i].apply(t,n)}},goog.base=function(t,e,i){var r=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!r)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(r.superClass_){for(var n=new Array(arguments.length-1),o=1;o<arguments.length;o++)n[o-1]=arguments[o];return r.superClass_.constructor.apply(t,n)}var a=new Array(arguments.length-2);for(o=2;o<arguments.length;o++)a[o-2]=arguments[o];for(var s=!1,l=t.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[e]===r)s=!0;else if(s)return l.prototype[e].apply(t,a);if(t[e]===r)return t.constructor.prototype[e].apply(t,a);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,e){var i=e.constructor,r=e.statics;i&&i!=Object.prototype.constructor||(i=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var n=goog.defineClass.createSealingConstructor_(i,t);return t&&goog.inherits(n,t),delete e.constructor,delete e.statics,goog.defineClass.applyProperties_(n.prototype,e),null!=r&&(r instanceof Function?r(n):goog.defineClass.applyProperties_(n,r)),n},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var i=!goog.defineClass.isUnsealable_(e);return function e(){var r=t.apply(this,arguments)||this;return r[goog.UID_PROPERTY_]=r[goog.UID_PROPERTY_],this.constructor===e&&i&&_seal2.default instanceof Function&&(0,_seal2.default)(r),r}},goog.defineClass.isUnsealable_=function(t){return t&&t.prototype&&t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(t,e){var i;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);for(var r=0;r<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;r++)i=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[r],Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",exports.default=goog},function(t,e,i){t.exports={default:i(541),__esModule:!0}},function(t,e,i){i(542),t.exports=i(80).Object.seal},function(t,e,i){var r=i(141),n=i(352).onFreeze;i(234)("seal",function(t){return function(e){return t&&r(e)?t(n(e)):e}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbolThemeSource=e.GraphThemeSource=e.RandomThemeSource=e.SimpleThemeSource=e.UniqueThemeSource=e.RangeThemeSource=e.ThemeStyle=void 0;var r=i(544),n=i(545),o=i(547),a=i(560),s=i(561),l=i(396),u=i(562);e.ThemeStyle=r.ThemeStyle,e.RangeThemeSource=n.RangeThemeSource,e.UniqueThemeSource=o.UniqueThemeSource,e.SimpleThemeSource=a.SimpleThemeSource,e.RandomThemeSource=s.RandomThemeSource,e.GraphThemeSource=l.GraphThemeSource,e.RankSymbolThemeSource=u.RankSymbolThemeSource},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeStyle=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(8)),n=i(6),o=i(22),a=function t(e){(0,r.default)(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,(0,o.extend)(this,e)};e.ThemeStyle=a,n.Zondy.Map.ThemeStyle=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangeThemeSource=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(15)),l=i(6),u=i(237),c=i(22),h=i(201),d=i(104);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,n.default)(this,e);var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.style=i.style,o.isHoverAble=i.isHoverAble,o.highlightStyle=i.highlightStyle,o.themeField=i.themeField,o.styleGroups=i.styleGroups,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,u.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=d.ShapeFactory.transformStyle(this.highlightStyle);for(var r=new h.ThemeVector(t,this,d.ShapeFactory.transformStyle(e),i),n=0;n<r.shapes.length;n++)this.renderer.addShape(r.shapes[n]);return r}},{key:"getStyleByData",value:function(t){var e={},i=t;if(e=(0,c.copyAttributesWithClip)(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&i.attributes){var r=this.themeField,n=i.attributes,o=this.styleGroups,a=!1,s=null;for(var l in n)if(r===l){a=!0,s=n[l];break}if(a)for(var u=0,h=o.length;u<h;u++)if(s>=o[u].start&&s<o[u].end){var d=o[u].style;e=(0,c.copyAttributesWithClip)(e,d)}}return i.style&&!0===this.isAllowFeatureStyle&&(e=(0,c.copyAttributesWithClip)(i.style)),e}},{key:"canvasFunctionInternal_",value:function(t,e,i,r,n){return u.GeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(u.GeoFeatureSource);e.RangeThemeSource=f,l.Zondy.Source.RangeThemeSource=f},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(i(283));e.default=function(t,e,i){return e in t?(0,r.default)(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueThemeSource=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(15)),l=i(6),u=i(237),c=i(22),h=i(104),d=i(393);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,n.default)(this,e);var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.themeField=i.themeField,o.style=i.style,o.styleGroups=i.styleGroups,o.isHoverAble=i.isHoverAble,o.highlightStyle=i.highlightStyle,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,this.themeField=null,this.styleGroups=null,u.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=h.ShapeFactory.transformStyle(this.highlightStyle);for(var r=new d.ThemeVector(t,this,h.ShapeFactory.transformStyle(e),i),n=0;n<r.shapes.length;n++)this.renderer.addShape(r.shapes[n]);return r}},{key:"getStyleByData",value:function(t){var e={},i=t;if(e=(0,c.copyAttributesWithClip)(e,this.style),this.themeField&&this.styleGroups&&this.styleGroups.length>0&&i.attributes){var r=this.themeField,n=i.attributes,o=this.styleGroups,a=!1,s=null;for(var l in n)if(r===l){a=!0,s=n[l];break}if(a)for(var u=0,h=o.length;u<h;u++)if(s.toString()===o[u].value.toString()){var d=o[u].style;e=(0,c.copyAttributesWithClip)(e,d)}}return i.style&&!0===this.isAllowFeatureStyle&&(e=(0,c.copyAttributesWithClip)(i.style)),e}}]),e}(u.GeoFeatureSource);e.UniqueThemeSource=f,l.Zondy.Source.UniqueThemeSource=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar=void 0;var r=f(i(13)),n=f(i(8)),o=f(i(18)),a=f(i(14)),s=f(i(40)),l=f(i(15)),u=i(6),c=i(22),h=i(104),d=i(242),p=i(298);function f(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Bar",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,a=n.length;o<a;o++)if(n[o]<i[0]||n[o]>i[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(h.ShapeFactory.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(h.ShapeFactory.GraphAxis(this.shapeFactory,r,e,s)));for(var p=0;p<n.length;p++){var f=r[1]-(n[p]-i[0])/this.DVBUnitValue,g=[[l[p]-u/2,r[1]-1],[l[p]+u/2,r[1]-1],[l[p]+u/2,f],[l[p]-u/2,f]],y=new d.Polygon(g);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var v=e.barShadowStyle;v.shadowBlur&&(t.shadowBlur=v.shadowBlur),v.shadowColor&&(t.shadowColor=v.shadowColor),v.shadowOffsetX&&(t.shadowOffsetX=v.shadowOffsetX),v.shadowOffsetY&&(t.shadowOffsetY=v.shadowOffsetY)}y.style={},(0,c.copyAttributesWithClip)(y.style,t)}y.refDataID=this.data.FID,y.dataInfo={field:this.fields[p],value:n[p]},void 0!==e.barHoverAble&&(y.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(y.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(y))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,r=this.dataValues.length;if(r<1)return null;var n=[],o=0,a=this.DVBWidth;if(i.xShapeBlank&&i.xShapeBlank.length&&3===i.xShapeBlank.length){var s=a-((t=i.xShapeBlank)[0]+t[2]+(r-1)*t[1]);if(s<=r)return null;o=s/r}else t=[o=a/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0===u?l=t[0]+o/2:l+=o+t[1],n.push(e[0]+l);return{xPositions:n,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,i=-1,r=0;r<t;r++){var n=this.shapes[r];if("Zondy.LevelRenderer.Shape.SmicPolygon"===n.CLASS_NAME){var o=n.style,a=this.location[0]+o.pointList[0][0],s=this.location[0]+o.pointList[1][0];++i>=e.length&&(i%=e.length);var l=e[i][0],u=e[i][1],c=(new p.Color).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);n.style.color=c}}}}]),e}(i(152).Graph);e.Bar=g,u.Zondy.Theme.Bar=g},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bar3D=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(22),h=i(104),d=i(242);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Bar3D",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var i=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var n=0,o=r.length;n<o;n++)if(r[n]<e[0]||r[n]>e[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(h.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(h.ShapeFactory.GraphAxis(this.shapeFactory,i,t,a)));for(var u=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,p=0;p<r.length;p++){var f=i[1]-(r[p]-e[0])/this.DVBUnitValue,g=s[p]-l/2,y=s[p]+l/2,v=[[g,f],[y,f],[y-u,f+u],[g-u,f+u]],m=[[y,f],[y-u,f+u],[y-u,i[1]+u],[y,i[1]]],_=[[g-u,i[1]+u],[y-u,i[1]+u],[y-u,f+u],[g-u,f+u]];u<=0&&(_=[[g,i[1]],[y,i[1]],[y,f],[g,f]]);var b=new d.Polygon(v),S=new d.Polygon(m),O=new d.Polygon(_);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,O.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,p,r[p]),S.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,p,r[p]),b.style=h.ShapeFactory.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,p,r[p]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,O.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),S.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),b.highlightStyle=h.ShapeFactory.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),b.refDataID=S.refDataID=O.refDataID=this.data.FID,b.isHoverByRefDataID=S.isHoverByRefDataID=O.isHoverByRefDataID=!0,b.refDataHoverGroup=S.refDataHoverGroup=O.refDataHoverGroup=(0,c.newGuid)(),b.dataInfo=S.dataInfo=O.dataInfo={field:this.fields[p],value:r[p]},void 0!==t.barHoverAble&&(b.hoverable=S.hoverable=O.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(b.clickable=S.clickable=O.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(S)),this.shapes.push(this.shapeFactory.createShape(b)),this.shapes.push(this.shapeFactory.createShape(O))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,r=this.dataValues.length;if(r<1)return null;var n=[],o=0,a=this.DVBWidth;if(i.xShapeBlank&&i.xShapeBlank.length&&3===i.xShapeBlank.length){var s=a-((t=i.xShapeBlank)[0]+t[2]+(r-1)*t[1]);if(s<=r)return null;o=s/r}else t=[o=a/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0===u?l=t[0]+o/2:l+=o+t[1],n.push(e[0]+l);return{xPositions:n,width:o}}}]),e}(i(152).Graph);e.Bar3D=f,u.Zondy.Theme.Bar3D=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(202),h=i(302),d=i(104);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Circle",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,i=c.Theme.getDataValues(this.data,this.fields,e);this.dataValues=i||[];var r=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var n=this.DVBCodomain;n&&n[1]-n[0]>0?this.DVBUnitValue=t.maxR/(n[1]-n[0]):this.DVBUnitValue=t.maxR;var o=this.DVBUnitValue,a=r[0]*o+t.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!n||!(r[0]<n[0]||r[0]>n[1]))){var s=this.DVBCenterPoint,l=new h.Circle(s[0],s[1],a);l.style=d.ShapeFactory.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?l.style.fillColor=t.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=d.ShapeFactory.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(l.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(l.clickable=t.circleClickAble),l.refDataID=this.data.FID,l.dataInfo={field:this.fields[0],r:a,value:r[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}]),e}(i(394).RankSymbol);e.Circle=f,u.Zondy.Theme.Circle=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(40)),l=p(i(15)),u=i(6),c=i(104),h=i(241),d=i(301);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Line",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var r=this.DVBUnitValue,n=this.dataValues;if(!(n.length<1)){var o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(c.ShapeFactory.GraphAxis(this.shapeFactory,e,t,o));for(var u=[],p=[],f=0,g=n.length;f<g;f++){if(n[f]<i[0]||n[f]>i[1])return null;a=l[f],s=e[1]-(n[f]-i[0])/r;var y=new h.Point(a,s);y.style=c.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,n[f]),y.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(y.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(y.clickable=t.pointClickAble),y.refDataID=this.data.FID,y.dataInfo={field:this.fields[f],value:n[f]},p.push(this.shapeFactory.createShape(y));var v=[a,s];u.push(v)}var m=new d.Line(u);m.style=c.ShapeFactory.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),m.clickable=!1,m.hoverable=!1;var _=this.shapeFactory.createShape(m);this.shapes.push(_),this.shapes=this.shapes.concat(p),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,r=this.dataValues.length;if(r<1)return null;var n=[],o=this.DVBWidth,a=0;if(i.xShapeBlank&&i.xShapeBlank.length&&2===i.xShapeBlank.length){var s=o-((t=i.xShapeBlank)[0]+t[1]);if(s<=r)return null;a=s/(r-1)}else t=[a=o/(r+1),a,a];for(var l=0,u=0;u<r;u++)0===u?l=t[0]:l+=a,n.push(e[0]+l);return{xPositions:n,width:0}}}]),e}(i(152).Graph);e.Line=f,u.Zondy.Theme.Line=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pie=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(104),h=i(243);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Pie",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t));var i=this.dataValues;if(!(i.length<1)){for(var r=this.DVBCodomain,n=0;n<i.length;n++)if(i[n]<r[0]||i[n]>r[1])return;for(var o=0,a=0;a<i.length;a++)o+=Math.abs(i[a]);this.DVBUnitValue=360/o;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,d=0,p=u,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,g=0;g<i.length;g++){var y=Math.abs(i[g]);(d=0===g?u+y*s:g===y.length-1?p:u+y*s)-u>=360&&(d=359.9999999);var v=new h.Sector(l[0],l[1],f,u,d);if(void 0===t.sectorStyleByFields){var m=g%e.length;v.style=c.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,e,null,m)}else v.style=c.ShapeFactory.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,g,i[g]);v.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.FID,v.dataInfo={field:this.fields[g],value:i[g]},this.shapes.push(this.shapeFactory.createShape(v)),u=d}this.shapesConvertToRelativeCoordinate()}}}}]),e}(i(152).Graph);e.Pie=p,u.Zondy.Theme.Pie=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Point=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(104),h=i(241);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Point",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,i=this.DVBCodomain;this.DVBUnitValue=(i[1]-i[0])/this.DVBHeight;var r=this.DVBUnitValue,n=this.dataValues,o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(c.ShapeFactory.GraphAxis(this.shapeFactory,e,t,o));for(var u=0,d=n.length;u<d;u++){if(n[u]<i[0]||n[u]>i[1])return null;a=l[u],s=e[1]-(n[u]-i[0])/r;var p=new h.Point(a,s);p.style=c.ShapeFactory.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,u,n[u]),p.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.FID,p.dataInfo={field:this.fields[u],value:n[u]},this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,i=this.setting,r=this.dataValues.length;if(r<1)return null;var n=[],o=this.DVBWidth,a=0;if(i.xShapeBlank&&i.xShapeBlank.length&&2===i.xShapeBlank.length){var s=o-((t=i.xShapeBlank)[0]+t[1]);if(s<=r)return null;a=s/(r-1)}else t=[a=o/(r+1),a,a];for(var l=0,u=0;u<r;u++)0===u?l=t[0]:l+=a,n.push(e[0]+l);return{xPositions:n,width:0}}}]),e}(i(152).Graph);e.Point=p,u.Zondy.Theme.Point=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ring=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(104),h=i(243);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o,s,l,u));return c.CLASS_NAME="Zondy.Theme.Ring",c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(c.ShapeFactory.Background(this.shapeFactory,this.chartBox,e));var i=this.dataValues;if(!(i.length<1)){for(var r=this.DVBCodomain,n=0;n<i.length;n++)if(i[n]<r[0]||i[n]>r[1])return;for(var o=0,a=0;a<i.length;a++)o+=Math.abs(i[a]);this.DVBUnitValue=360/o;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,d=0,p=u,f=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,g=e.innerRingRadius>=0&&e.innerRingRadius<f,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&g?e.innerRingRadius:0,v=0;v<i.length;v++){var m=Math.abs(i[v]);d=0===v?u+m*s:v===m.length-1?p:u+m*s;var _=new h.Sector(l[0],l[1],f,u,d,y);if(void 0===e.sectorStyleByFields){var b=v%t.length;_.style=c.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,t,null,b)}else _.style=c.ShapeFactory.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,v,i[v]);_.highlightStyle=c.ShapeFactory.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(_.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(_.clickable=e.sectorClickAble),_.refDataID=this.data.FID,_.dataInfo={field:this.fields[v],value:i[v]},this.shapes.push(this.shapeFactory.createShape(_)),u=d}this.shapesConvertToRelativeCoordinate()}}}}]),e}(i(152).Graph);e.Ring=p,u.Zondy.Theme.Ring=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SUtil=e.LevelRendererVector=e.Util=e.Transformable=e.Storage=e.SmicText=e.SmicStar=e.SmicSector=e.SmicRing=e.SmicRectangle=e.SmicPolygon=e.SmicPoint=e.SmicIsogon=e.SmicImage=e.SmicEllipse=e.SmicCircle=e.SmicBrokenLine=e.Shape=e.PaintLayer=e.Painter=e.Matrix=e.Math=e.Http=e.Handler=e.Group=e.Eventful=e.LevelRendererEvent=e.Env=e.Easing=e.LevelRendererCurve=e.Config=e.ComputeBoundingBox=e.Color=e.Clip=e.Area=e.Animator=e.Animation=e.Render=e.LevelRenderer=void 0;var r=i(367),n=i(368),o=i(380),a=i(371),s=i(381),l=i(298),u=i(372),c=i(299),h=i(239),d=i(382),p=i(373),f=i(374),g=i(200),y=i(370),v=i(379),m=i(375),_=i(376),b=i(377),S=i(378),O=i(111),C=i(304),T=i(387),x=i(556),E=i(300),P=i(557),j=i(303),R=i(244),I=i(388),L=i(558),w=i(389),A=i(559),M=i(386),F=i(369),k=i(238),N=i(179),D=i(240),G=i(117);e.LevelRenderer=r.LevelRenderer,e.Render=n.Render,e.Animation=o.Animation,e.Animator=o.Animator,e.Area=a.Area,e.Clip=s.Clip,e.Color=l.Color,e.ComputeBoundingBox=u.ComputeBoundingBox,e.Config=c.Config,e.LevelRendererCurve=h.Curve,e.Easing=d.Easing,e.Env=p.Env,e.LevelRendererEvent=f.Event,e.Eventful=g.Eventful,e.Group=y.Group,e.Handler=v.Handler,e.Http=m.Http,e.Math=_.Math,e.Matrix=b.Matrix,e.Painter=S.Painter,e.PaintLayer=S.PaintLayer,e.Shape=O.Shape,e.SmicBrokenLine=C.SmicBrokenLine,e.SmicCircle=T.SmicCircle,e.SmicEllipse=x.SmicEllipse,e.SmicImage=E.SmicImage,e.SmicIsogon=P.SmicIsogon,e.SmicPoint=j.SmicPoint,e.SmicPolygon=R.SmicPolygon,e.SmicRectangle=I.SmicRectangle,e.SmicRing=L.SmicRing,e.SmicSector=w.SmicSector,e.SmicStar=A.SmicStar,e.SmicText=M.SmicText,e.Storage=F.Storage,e.Transformable=k.Transformable,e.Util=N.Util,e.LevelRendererVector=D.Vector,e.SUtil=G.SUtil},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicEllipse=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicellipse",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicEllipse",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=.5522848,n=e.x+i[0],o=e.y+i[1],a=e.a,s=e.b,l=a*r,u=s*r;t.moveTo(n-a,o),t.bezierCurveTo(n-a,o-u,n-l,o-s,n,o-s),t.bezierCurveTo(n+l,o-s,n+a,o-u,n+a,o),t.bezierCurveTo(n+a,o+u,n+l,o+s,n,o+s),t.bezierCurveTo(n-l,o+s,n-a,o+u,n-a,o),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.a-e/2),y:Math.round(t.x+i[1]-t.b-e/2),width:2*t.a+e,height:2*t.b+e},t.__rect}}]),e}(i(111).Shape);e.SmicEllipse=h,u.Zondy.LevelRenderer.SmicEllipse=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicIsogon=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(111),h=i(117);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicisogon",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.SmicIsogon",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=h.SUtil.Util_math.sin,n=h.SUtil.Util_math.cos,o=Math.PI,a=e.n;if(a&&!(a<2)){var s=e.x+i[0],l=e.y+i[1],u=e.r,c=2*o/a,d=-o/2,p=s+u*n(d),f=l+u*r(d);d+=c;var g=e.pointList=[];g.push([p,f]);for(var y=0,v=a-1;y<v;y++)g.push([s+u*n(d),l+u*r(d)]),d+=c;g.push([p,f]),t.moveTo(g[0][0],g[0][1]);for(var m=0;m<g.length;m++)t.lineTo(g[m][0],g[m][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(c.Shape);e.SmicIsogon=p,u.Zondy.LevelRenderer.SmicIsogon=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicRing=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(6);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicring",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicRing",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition;t.arc(e.x+i[0],e.y+i[1],e.r,0,2*Math.PI,!1),t.moveTo(e.x+i[0]+e.r0,e.y+i[1]),t.arc(e.x+i[0],e.y+i[1],e.r0,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(i(111).Shape);e.SmicRing=h,u.Zondy.LevelRenderer.SmicRing=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmicStar=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(40)),l=d(i(15)),u=i(6),c=i(111),h=i(117);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var i=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t));return i.type="smicstar",i.refOriginalPosition&&2===i.refOriginalPosition.length||(i.refOriginalPosition=[0,0]),i.CLASS_NAME="Zondy.LevelRenderer.Shape.SmicStar",i}return(0,l.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.type=null,(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,r=e.n;if(r&&!(r<2)){var n=h.SUtil.Util_math.sin,o=h.SUtil.Util_math.cos,a=Math.PI,s=e.x+i[0],l=e.y+i[1],u=e.r,c=e.r0;null==c&&(c=r>4?u*o(2*a/r)/o(a/r):u/3);var d=a/r,p=-a/2,f=s+u*o(p),g=l+u*n(p);p+=d;var y=e.pointList=[];y.push([f,g]);for(var v,m=0,_=2*r-1;m<_;m++)v=m%2==0?c:u,y.push([s+v*o(p),l+v*n(p)]),p+=d;y.push([f,g]),t.moveTo(y[0][0],y[0][1]);for(var b=0;b<y.length;b++)t.lineTo(y[b][0],y[b][1]);t.closePath()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,i=this.refOriginalPosition;return e="stroke"===t.brushType||"fill"===t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+i[0]-t.r-e/2),y:Math.round(t.y+i[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect}}]),e}(c.Shape);e.SmicStar=p,u.Zondy.LevelRenderer.SmicStar=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleThemeSource=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(15)),l=i(6),u=i(237),c=i(22),h=i(201),d=i(104);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,n.default)(this,e);var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.style=i.style,o.isHoverAble=i.isHoverAble,o.highlightStyle=i.highlightStyle,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,u.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=d.ShapeFactory.transformStyle(this.highlightStyle);for(var r=new h.ThemeVector(t,this,d.ShapeFactory.transformStyle(e),i),n=0;n<r.shapes.length;n++)this.renderer.addShape(r.shapes[n]);return r}},{key:"getColor",value:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",i=0;i<6;i++)e+=t[Math.floor(16*Math.random())];return e}},{key:"getStyleByData",value:function(){var t=(0,c.copyAttributesWithClip)({},this.style);return null==t.fillColor&&(t.fillColor=this.getColor()),this.style=t,t}},{key:"canvasFunctionInternal_",value:function(t,e,i,r,n){return u.GeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(u.GeoFeatureSource);e.SimpleThemeSource=f,l.Zondy.Source.SimpleThemeSource=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomThemeSource=void 0;var r=p(i(13)),n=p(i(8)),o=p(i(18)),a=p(i(14)),s=p(i(15)),l=i(6),u=i(237),c=i(22),h=i(201),d=i(104);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i){(0,n.default)(this,e);var o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i));return o.style=i.style,o.isHoverAble=i.isHoverAble,o.highlightStyle=i.highlightStyle,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.style=null,u.GeoFeatureSource.prototype.destroy.apply(this,arguments)}},{key:"createThematicFeature",value:function(t){var e=this.getStyleByData(t),i={};i.nodesClipPixel=this.nodesClipPixel,i.isHoverAble=this.isHoverAble,i.isMultiHover=this.isMultiHover,i.isClickAble=this.isClickAble,i.highlightStyle=d.ShapeFactory.transformStyle(this.highlightStyle);for(var r=new h.ThemeVector(t,this,d.ShapeFactory.transformStyle(e),i),n=0;n<r.shapes.length;n++)this.renderer.addShape(r.shapes[n]);return r}},{key:"getColor",value:function(){for(var t="0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f".split(","),e="#",i=0;i<6;i++)e+=t[Math.floor(16*Math.random())];return e}},{key:"getStyleByData",value:function(){var t=(0,c.copyAttributesWithClip)({},this.style);return t.fillColor=this.getColor(),this.style=t,t}},{key:"canvasFunctionInternal_",value:function(t,e,i,r,n){return u.GeoFeatureSource.prototype.canvasFunctionInternal_.apply(this,arguments)}}]),e}(u.GeoFeatureSource);e.RandomThemeSource=f,l.Zondy.Source.RandomThemeSource=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RankSymbolThemeSource=void 0;var r=h(i(13)),n=h(i(8)),o=h(i(18)),a=h(i(14)),s=h(i(15)),l=i(6),u=i(396),c=i(395);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i,o){(0,n.default)(this,e);var s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o));return s.symbolType=i,s.symbolSetting=o.symbolSetting,s.themeField=o.themeField,s.options={calGravity:o.calGravity||!0},s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"destroy",value:function(){this.symbolType=null,this.symbolSetting=null,this.themeField=null,u.GraphThemeSource.prototype.destroy.apply(this,arguments)}},{key:"setSymbolType",value:function(t){this.symbolType=t,this.redraw()}},{key:"createThematicFeature",value:function(t){var e;return c.FeatureTheme[this.symbolType]&&this.themeField&&this.symbolSetting&&(e=new c.FeatureTheme[this.symbolType](t,this,[this.themeField],this.symbolSetting,null,this.options)),!!e&&(e.assembleShapes(),e)}}]),e}(u.GraphThemeSource);e.RankSymbolThemeSource=d,l.Zondy.Source.RankSymbolThemeSource=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvasContext2D=e.mixin=e.merge=e.DeepMerge=e.ChineseToUtf8=e.getTopAnalysisResult=e.bindAsEventListener=e.bind=e.newGuid=e.cloneObject=e.copyAttributesWithClip=e.copyAttributes=e.transformResult=e.toJSON=e.isInTheSameDomain=e.supportCanvas=e.isSupportCanvas=e.getBrowser=e.Browser=e.IS_GECKO=e.getParameters=e.urlAppend=e.getWFParameterString=e.getParameterString=e.applyDefaults=e.modifyDOMElement=e.indexOf=e.removeItem=e.isElement=e.getElement=e.reset=e.copyExcluce=e.copy=e.extendDeep=e.isArray=e.extend=e.WebGraphicsInfo=e.VectCls=e.Tangram=e.Rectangle=e.PolyLine=e.Polygon=e.Point2D=e.MultiPolygon=e.LablePntInfo=e.LabelRegInfo=e.LabelLinInfo=e.GRegion=e.GPoint=e.GLine=e.FeatureSet=e.FeatureGraphicBase=e.FeatureGeometry=e.Feature=e.LayerStatusType=e.MapType=e.CItemType=e.CLinStyleMakeType=e.CLinJointType=e.CLinHeadType=e.CLinAdjustType=e.NetElemType=e.NetAnalyType=e.ISShowArc=e.EightDirType=e.LineConstrain=e.LabelSpreadType=e.RepeatType=e.LabelPntType=e.LabelRegType=e.LabelLinType=e.FontShape=e.FeatureType=e.VectClsType=e.XClsType=e.DynShowStyle=e.DynNoteLableType=e.CRegionInfo=e.CPointInfo=e.CLineInfo=e.Circle=e.CGDBInfo=e.CDynNoteInfo=e.CDisplayStyleExtend=e.CDisplayStyle=e.CAttDataRow=e.CAttStruct=e.Zondy=e.Arc=e.AnyLine=void 0;var r=i(307),n=i(564),o=i(6),a=i(246),s=i(565),l=i(566),u=i(403),c=i(398),h=i(404),d=i(567),p=i(248),f=i(309),g=i(310),y=i(399),v=i(397),m=i(112),_=i(390),b=i(391),S=i(247),O=i(245),C=i(306),T=i(305),x=i(308),E=i(401),P=i(402),j=i(400),R=i(568),I=i(118),L=i(405),w=i(569),A=i(203),M=i(169),F=i(570),k=i(392),N=i(22);e.AnyLine=r.AnyLine,e.Arc=n.Arc,e.Zondy=o.Zondy,e.CAttStruct=a.CAttStruct,e.CAttDataRow=s.CAttDataRow,e.CDisplayStyle=l.CDisplayStyle,e.CDisplayStyleExtend=u.CDisplayStyleExtend,e.CDynNoteInfo=c.CDynNoteInfo,e.CGDBInfo=h.CGDBInfo,e.Circle=d.Circle,e.CLineInfo=p.CLineInfo,e.CPointInfo=f.CPointInfo,e.CRegionInfo=g.CRegionInfo,e.DynNoteLableType=y.DynNoteLableType,e.DynShowStyle=v.DynShowStyle,e.XClsType=m.XClsType,e.VectClsType=m.VectClsType,e.FeatureType=m.FeatureType,e.FontShape=m.FontShape,e.LabelLinType=m.LabelLinType,e.LabelRegType=m.LabelRegType,e.LabelPntType=m.LabelPntType,e.RepeatType=m.RepeatType,e.LabelSpreadType=m.LabelSpreadType,e.LineConstrain=m.LineConstrain,e.EightDirType=m.EightDirType,e.ISShowArc=m.ISShowArc,e.NetAnalyType=m.NetAnalyType,e.NetElemType=m.NetElemType,e.CLinAdjustType=m.CLinAdjustType,e.CLinHeadType=m.CLinHeadType,e.CLinJointType=m.CLinJointType,e.CLinStyleMakeType=m.CLinStyleMakeType,e.CItemType=m.CItemType,e.MapType=m.MapType,e.LayerStatusType=m.LayerStatusType,e.Feature=_.Feature,e.FeatureGeometry=b.FeatureGeometry,e.FeatureGraphicBase=S.FeatureGraphicBase,e.FeatureSet=O.FeatureSet,e.GLine=C.GLine,e.GPoint=T.GPoint,e.GRegion=x.GRegion,e.LabelLinInfo=E.LabelLinInfo,e.LabelRegInfo=P.LabelRegInfo,e.LablePntInfo=j.LablePntInfo,e.MultiPolygon=R.MultiPolygon,e.Point2D=I.Point2D,e.Polygon=L.Polygon,e.PolyLine=w.PolyLine,e.Rectangle=A.Rectangle,e.Tangram=M.Tangram,e.VectCls=F.VectCls,e.WebGraphicsInfo=k.WebGraphicsInfo,e.extend=N.extend,e.isArray=N.isArray,e.extendDeep=N.extendDeep,e.copy=N.copy,e.copyExcluce=N.copyExcluce,e.reset=N.reset,e.getElement=N.getElement,e.isElement=N.isElement,e.removeItem=N.removeItem,e.indexOf=N.indexOf,e.modifyDOMElement=N.modifyDOMElement,e.applyDefaults=N.applyDefaults,e.getParameterString=N.getParameterString,e.getWFParameterString=N.getWFParameterString,e.urlAppend=N.urlAppend,e.getParameters=N.getParameters,e.IS_GECKO=N.IS_GECKO,e.Browser=N.Browser,e.getBrowser=N.getBrowser,e.isSupportCanvas=N.isSupportCanvas,e.supportCanvas=N.supportCanvas,e.isInTheSameDomain=N.isInTheSameDomain,e.toJSON=N.toJSON,e.transformResult=N.transformResult,e.copyAttributes=N.copyAttributes,e.copyAttributesWithClip=N.copyAttributesWithClip,e.cloneObject=N.cloneObject,e.newGuid=N.newGuid,e.bind=N.bind,e.bindAsEventListener=N.bindAsEventListener,e.getTopAnalysisResult=N.getTopAnalysisResult,e.ChineseToUtf8=N.ChineseToUtf8,e.DeepMerge=N.DeepMerge,e.merge=N.merge,e.mixin=N.mixin,e.createCanvasContext2D=N.createCanvasContext2D},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arc=void 0;var r=i(6),n=i(22),o=function(t,e){this.ArcID=0;var i=void 0!==e?e:{};(0,n.extend)(this,i),this.Dots=void 0!==t&&null!==t?t:null};e.Arc=o,r.Zondy.Object.Arc=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CAttDataRow=void 0;var r=i(6),n=i(22),o=function(t,e,i){var r=void 0!==i?i:{};(0,n.extend)(this,r),this.FID=void 0!==e?e:0,this.Values=void 0!==t?t:null};e.CAttDataRow=o,r.Zondy.Object.CAttDataRow=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CDisplayStyle=void 0;var r=i(6),n=i(22),o=(i(397),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.AnnSizeFixed=void 0!==e.AnnSizeFixed&&e.AnnSizeFixed,this.DriverQuality=void 0!==e.DriverQuality?e.DriverQuality:0,this.DynProjFlag=void 0!==e.DynProjFlag&&e.DynProjFlag,this.FollowScale=void 0!==e.FollowScale&&e.FollowScale,this.LinPenWidFixed=void 0!==e.LinPenWidFixed&&e.LinPenWidFixed,this.LinSizeFixed=void 0!==e.LinSizeFixed&&e.LinSizeFixed,this.PntPenWidFixed=void 0!==e.PntPenWidFixed&&e.PntPenWidFixed,this.PntSizeFixed=void 0!==e.PntSizeFixed&&e.PntSizeFixed,this.RegPenWidFixed=void 0!==e.RegPenWidFixed&&e.RegPenWidFixed,this.RegSizeFixed=void 0!==e.RegSizeFixed&&e.RegSizeFixed,this.ShowCoordPnt=void 0!==e.ShowCoordPnt&&e.ShowCoordPnt,this.ShowElemRect=void 0!==e.ShowElemRect&&e.ShowElemRect,this.ShowStyle=void 0!==e.ShowStyle?e.ShowStyle:null,this.SymbleShow=void 0!==e.SymbleShow&&e.SymbleShow});e.CDisplayStyle=o,r.Zondy.Object.CDisplayStyle=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Circle=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(6),u=i(169);function c(t){return t&&t.__esModule?t:{default:t}}i(118);var h=function(t){function e(t,i,o){(0,n.default)(this,e);var s=o||{},l=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,s));return l.point=void 0!==t&&null!==t?t:null,l.radious=void 0!==i&&null!==i?i:null,l}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){var e=t.getCenter(),i=t.getRadius();this.point=new l.Zondy.Object.Point2D(e[0],e[1]),this.radious=i}}},{key:"toString",value:function(){return null===this.point||0===this.point.length||null===this.radious?"":this.point.x+","+this.point.y+","+this.radious}},{key:"getGeometryType",value:function(){return"Circle"}}]),e}(u.Tangram);e.Circle=h,l.Zondy.Object.Circle=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiPolygon=void 0;var r=h(i(13)),n=h(i(8)),o=h(i(18)),a=h(i(14)),s=h(i(15)),l=i(169),u=i(118),c=i(405);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t,i){(0,n.default)(this,e);var o=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,o));return s.polygonArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t){this.polygonArr=[];for(var e=t.getLinearRingCount(),i=t.getLinearRings(),r=0;r<e;r++){for(var n=i[r].getCoordinates(),o=n.length,a=[],s=0;s<o;s++)a[s]=new u.Point2D(n[s][0],n[s][1]);this.polygonArr[r]=new c.Polygon(a)}}}},{key:"toString",value:function(){if(void 0===this.polygonArr||null===this.polygonArr||0===this.polygonArr.length)return"";for(var t="",e=0;e<this.polygonArr.length;e++)t+=this.polygonArr[e].toString()+";";return t.substring(0,t.length-1)}},{key:"getGeometryType",value:function(){return"multiPolygon"}}]),e}(l.Tangram);e.MultiPolygon=d,Zondy.Object.MultiPolygon=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolyLine=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(169),u=i(118);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,n.default)(this,e);var o=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,o));return s.nearDis=void 0!==o.nearDis&&null!==o.nearDis?parseFloat(o.nearDis):null,s.pointArr=void 0!==t&&null!==t&&Array.isArray(t)?t:new Array,s}return(0,s.default)(e,t),(0,o.default)(e,[{key:"setByOL",value:function(t){if(void 0!==t&&null!==t)for(var e=t.getCoordinates(),i=e.length,r=0;r<i;r++)this.pointArr[r]=new u.Point2D(e[r][0],e[r][1])}},{key:"toString",value:function(){if(null===this.pointArr||0===this.pointArr.length)return"";for(var t=this.pointArr[0].x+","+this.pointArr[0].y,e=1;e<this.pointArr.length;e++)t+=","+this.pointArr[e].x+","+this.pointArr[e].y;return void 0!==this.nearDis&&null!==this.nearDis?t+=";"+this.nearDis:t=t.substring(0,t.length-1),this.Trim(t,"g")}},{key:"getGeometryType",value:function(){return"line"}}]),e}(l.Tangram);e.PolyLine=h,Zondy.Object.PolyLine=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectCls=void 0;var r=i(6),n=i(22),o=i(112),a=(i(246),function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.clsType=void 0!==e.clsType?e.clsType:o.VectClsType.SFCls,this.clsName=void 0!==e.clsName?e.clsName:null,this.geoType=void 0!==e.geoType?e.geoType:1,this.srefName=void 0!==e.srefName?encodeURI(e.srefName):"",this.dsName=void 0!==e.dsName?encodeURI(e.dsName):"",this.attStruct=void 0!==e.attStruct?e.attStruct:null});e.VectCls=a,r.Zondy.Object.VectCls=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlopLineParam=e.NetAnalysisExtent=e.NetAnalyse=e.MeshingParam=e.ContourRegionInfo=e.ContourZValue=e.ContourParam=e.ContourNoteParam=void 0;var r=i(406),n=i(407),o=i(409),a=i(410),s=i(411),l=i(572),u=i(573),c=i(408);e.ContourNoteParam=r.ContourNoteParam,e.ContourParam=n.ContourParam,e.ContourZValue=o.ContourZValue,e.ContourRegionInfo=a.ContourRegionInfo,e.MeshingParam=s.MeshingParam,e.NetAnalyse=l.NetAnalyse,e.NetAnalysisExtent=u.NetAnalysisExtent,e.SlopLineParam=c.SlopLineParam},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalyse=void 0;var r=i(6),n=i(22),o=function(t){var e=void 0!==t?t:{};(0,n.extend)(this,e),this.netCls=void 0!==e.netCls?e.netCls:null,this.flagPosStr=void 0!==e.flagPosStr?e.flagPosStr:null,this.barrierPosStr=void 0!==e.barrierPosStr?e.barrierPosStr:null,this.weight=void 0!==e.weight?e.weight:null,this.mode=void 0!==e.mode?e.mode:null,this.isTour=void 0!==e.isTour&&e.isTour,this.isTravel=void 0!==e.isTravel&&e.isTravel,this.usedTWgt=void 0!==e.usedTWgt&&e.usedTWgt,this.turnWgt=void 0!==e.turnWgt?e.turnWgt:null,this.roadName=void 0!==e.roadName?e.roadName:"name"};e.NetAnalyse=o,r.Zondy.Object.NetAnalyse=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysisExtent=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=(i(22),i(143)),h=i(53);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.netClsUrl=void 0!==i.netClsUrl?i.netClsUrl:null,r.flagPosStr=void 0!==i.flagPosStr?i.flagPosStr:null,r.analyTp=void 0!==i.analyTp?i.analyTp:"UserMode",r.weight=void 0!==i.weight?i.weight:",Weight1,Weight1",r.outFormat=void 0!==i.outFormat?i.outFormat:"JSON",r.elementType=void 0!==i.elementType?i.elementType:2,r.nearDis=void 0!==i.nearDis?i.nearDis:.001,r.barrierPosStr=void 0!==i.barrierPosStr?i.barrierPosStr:null,r.roadName=void 0!==i.roadName?i.roadName:"name",r.baseUrl="igs/rest/netAnaly",r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"getNetInfo",value:function(t,e,i,r){null!=t&&void 0!=t||(t="weight"),this.partUrl="netClsInfo?netCls="+this.netClsUrl+"&type="+t;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"addNetFlag",value:function(t,e,i,n,o){var a={};null!=n&&"POST"==n.toUpperCase()?(a.dotVal=t,this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&nearDis="+this.nearDis):this.partUrl="netClsFlag?netCls="+this.netClsUrl+"&type="+this.elementType+"&value="+t+"&nearDis="+this.nearDis;var s=this.getFullUrl(),l=new h.IgsServiceBase(s,{eventListeners:{scope:this,processCompleted:e,processFailed:i}});null!=n&&"POST"==n.toUpperCase()?l.processAsync({method:"POST",data:(0,r.default)(a),headers:{"Content-Type":"text/plain;charset=UTF-8"}}):l.processAsync()}},{key:"netAnalyse",value:function(t,e,i,n){this.partUrl="netAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"comNetAnalyse",value:function(t,e,i,n){this.partUrl="comNetAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"pluNetAnalyse",value:function(t,e,i,n){this.partUrl="pluNetAnalyse";var o=this.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.ServiceBase);e.NetAnalysisExtent=p,u.Zondy.Service.NetAnalysisExtent=p},function(t,e,i){i(364),i(360),i(363),i(575),i(587),i(588),t.exports=i(80).Promise},function(t,e,i){"use strict";var r,n,o,a,s=i(198),l=i(103),u=i(195),c=i(417),h=i(133),d=i(141),p=i(232),f=i(576),g=i(577),y=i(418),v=i(311).set,m=i(582)(),_=i(312),b=i(419),S=i(583),O=i(420),C=l.TypeError,T=l.process,x=T&&T.versions,E=x&&x.v8||"",P=l.Promise,j="process"==c(T),R=function(){},I=n=_.f,L=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[i(110)("species")]=function(t){t(R,R)};return(j||"function"==typeof PromiseRejectionEvent)&&t.then(R)instanceof e&&0!==E.indexOf("6.6")&&-1===S.indexOf("Chrome/66")}catch(t){}}(),w=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var i=t._c;m(function(){for(var r=t._v,n=1==t._s,o=0,a=function(e){var i,o,a,s=n?e.ok:e.fail,l=e.resolve,u=e.reject,c=e.domain;try{s?(n||(2==t._h&&k(t),t._h=1),!0===s?i=r:(c&&c.enter(),i=s(r),c&&(c.exit(),a=!0)),i===e.promise?u(C("Promise-chain cycle")):(o=w(i))?o.call(i,l,u):l(i)):u(r)}catch(t){c&&!a&&c.exit(),u(t)}};i.length>o;)a(i[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){v.call(l,function(){var e,i,r,n=t._v,o=F(t);if(o&&(e=b(function(){j?T.emit("unhandledRejection",n,t):(i=l.onunhandledrejection)?i({promise:t,reason:n}):(r=l.console)&&r.error&&r.error("Unhandled promise rejection",n)}),t._h=j||F(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},k=function(t){v.call(l,function(){var e;j?T.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},D=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw C("Promise can't be resolved itself");(e=w(t))?m(function(){var r={_w:i,_d:!1};try{e.call(t,u(D,r,1),u(N,r,1))}catch(t){N.call(r,t)}}):(i._v=t,i._s=1,A(i,!1))}catch(t){N.call({_w:i,_d:!1},t)}}};L||(P=function(t){f(this,P,"Promise","_h"),p(t),r.call(this);try{t(u(D,this,1),u(N,this,1))}catch(t){N.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(584)(P.prototype,{then:function(t,e){var i=I(y(this,P));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=j?T.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&A(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=u(D,t,1),this.reject=u(N,t,1)},_.f=I=function(t){return t===P||t===a?new o(t):n(t)}),h(h.G+h.W+h.F*!L,{Promise:P}),i(236)(P,"Promise"),i(585)("Promise"),a=i(80).Promise,h(h.S+h.F*!L,"Promise",{reject:function(t){var e=I(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!L),"Promise",{resolve:function(t){return O(s&&this===a?P:this,t)}}),h(h.S+h.F*!(L&&i(586)(function(t){P.all(t).catch(R)})),"Promise",{all:function(t){var e=this,i=I(e),r=i.resolve,n=i.reject,o=b(function(){var i=[],o=0,a=1;g(t,!1,function(t){var s=o++,l=!1;i.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,i[s]=t,--a||r(i))},n)}),--a||r(i)});return o.e&&n(o.v),i.promise},race:function(t){var e=this,i=I(e),r=i.reject,n=b(function(){g(t,!1,function(t){e.resolve(t).then(i.resolve,r)})});return n.e&&r(n.v),i.promise}})},function(t,e){t.exports=function(t,e,i,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var r=i(195),n=i(578),o=i(579),a=i(140),s=i(354),l=i(580),u={},c={};(e=t.exports=function(t,e,i,h,d){var p,f,g,y,v=d?function(){return t}:l(t),m=r(i,h,e?2:1),_=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(o(v)){for(p=s(t.length);p>_;_++)if((y=e?m(a(f=t[_])[0],f[1]):m(t[_]))===u||y===c)return y}else for(g=v.call(t);!(f=g.next()).done;)if((y=n(g,m,f.value,e))===u||y===c)return y}).BREAK=u,e.RETURN=c},function(t,e,i){var r=i(140);t.exports=function(t,e,i,n){try{return n?e(r(i)[0],i[1]):e(i)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,i){var r=i(199),n=i(110)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[n]===t)}},function(t,e,i){var r=i(417),n=i(110)("iterator"),o=i(199);t.exports=i(80).getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||o[r(t)]}},function(t,e){t.exports=function(t,e,i){var r=void 0===i;switch(e.length){case 0:return r?t():t.call(i);case 1:return r?t(e[0]):t.call(i,e[0]);case 2:return r?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var r=i(103),n=i(311).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,l="process"==i(197)(a);t.exports=function(){var t,e,i,u=function(){var r,n;for(l&&(r=a.domain)&&r.exit();t;){n=t.fn,t=t.next;try{n()}catch(r){throw t?i():e=void 0,r}}e=void 0,r&&r.enter()};if(l)i=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);i=function(){c.then(u)}}else i=function(){n.call(r,u)};else{var h=!0,d=document.createTextNode("");new o(u).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(r){var n={fn:r,next:void 0};e&&(e.next=n),t||(t=n,i()),e=n}}},function(t,e,i){var r=i(103).navigator;t.exports=r&&r.userAgent||""},function(t,e,i){var r=i(166);t.exports=function(t,e,i){for(var n in e)i&&t[n]?t[n]=e[n]:r(t,n,e[n]);return t}},function(t,e,i){"use strict";var r=i(103),n=i(80),o=i(150),a=i(151),s=i(110)("species");t.exports=function(t){var e="function"==typeof n[t]?n[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,i){var r=i(110)("iterator"),n=!1;try{var o=[7][r]();o.return=function(){n=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:i=!0}},o[r]=function(){return a},t(o)}catch(t){}return i}},function(t,e,i){"use strict";var r=i(133),n=i(80),o=i(103),a=i(418),s=i(420);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,n.Promise||o.Promise),i="function"==typeof t;return this.then(i?function(i){return s(e,t()).then(function(){return i})}:t,i?function(i){return s(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var r=i(133),n=i(312),o=i(419);r(r.S,"Promise",{try:function(t){var e=n.f(this),i=o(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(i(590));window.Promise=r.default},function(t,e,i){"use strict";var r,n,o=s(i(591)),a=s(i(125));function s(t){return t&&t.__esModule?t:{default:t}}!function(o,s){"object"===(0,a.default)(e)&&void 0!==t?t.exports=s():void 0===(n="function"==typeof(r=s)?r.call(e,i,e,t):r)||(t.exports=n)}(0,function(){var t=setTimeout;function e(){}function i(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,u._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var o;try{o=i(t._value)}catch(t){return void n(e.promise,t)}r(e.promise,o)}else(1===t._state?r:n)(e.promise,t._value)})):t._deferreds.push(e)}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===(void 0===e?"undefined":(0,a.default)(e))||"function"==typeof e)){var i=e.then;if(e instanceof u)return t._state=3,t._value=e,void s(t);if("function"==typeof i)return void l(function(t,e){return function(){t.apply(e,arguments)}}(i,e),t)}t._state=1,t._value=e,s(t)}catch(e){n(t,e)}}function n(t,e){t._state=2,t._value=e,s(t)}function s(t){2===t._state&&0===t._deferreds.length&&u._immediateFn(function(){t._handled||u._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)i(t,t._deferreds[e]);t._deferreds=null}function l(t,e){var i=!1;try{t(function(t){i||(i=!0,r(e,t))},function(t){i||(i=!0,n(e,t))})}catch(t){if(i)return;i=!0,n(e,t)}}function u(t){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(t,this)}var c=u.prototype;return c.catch=function(t){return this.then(null,t)},c.then=function(t,r){var n=new this.constructor(e);return i(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,r,n)),n},u.all=function(t){return new u(function(e,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,s){try{if(s&&("object"===(void 0===s?"undefined":(0,a.default)(s))||"function"==typeof s)){var l=s.then;if("function"==typeof l)return void l.call(s,function(e){o(t,e)},i)}r[t]=s,0==--n&&e(r)}catch(t){i(t)}}for(var s=0;s<r.length;s++)o(s,r[s])})},u.resolve=function(t){return t&&"object"===(void 0===t?"undefined":(0,a.default)(t))&&t.constructor===u?t:new u(function(e){e(t)})},u.reject=function(t){return new u(function(e,i){i(t)})},u.race=function(t){return new u(function(e,i){for(var r=0,n=t.length;r<n;r++)t[r].then(e,i)})},u._immediateFn="function"==typeof o.default&&function(t){(0,o.default)(t)}||function(e){t(e,0)},u._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},u})},function(t,e,i){t.exports={default:i(592),__esModule:!0}},function(t,e,i){i(593),t.exports=i(80).setImmediate},function(t,e,i){var r=i(133),n=i(311);r(r.G+r.B,{setImmediate:n.set,clearImmediate:n.clear})},function(t,e,i){"use strict";var r=o(i(416)),n=o(i(359));function o(t){return t&&t.__esModule?t:{default:t}}!function(e){if(e.__disableNativeFetch||!e.fetch){u.prototype.append=function(t,e){t=s(t),e=l(e);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(e)},u.prototype.delete=function(t){delete this.map[s(t)]},u.prototype.get=function(t){var e=this.map[s(t)];return e?e[0]:null},u.prototype.getAll=function(t){return this.map[s(t)]||[]},u.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},u.prototype.set=function(t,e){this.map[s(t)]=[l(e)]},u.prototype.forEach=function(t,e){(0,n.default)(this.map).forEach(function(i){this.map[i].forEach(function(r){t.call(e,r,i,this)},this)},this)};var i={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},o=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},p.call(f.prototype),p.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var a=[301,302,303,307,308];y.redirect=function(t,e){if(-1===a.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=u,e.Request=f,e.Response=y,e.fetch=function(t,e){return new r.default(function(r,n){var o;o=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var a=new XMLHttpRequest,s=!1;function l(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(s)return;return s=!0,void n(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:function(t){var e=new u;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var i=t.trim().split(":"),r=i.shift().trim(),n=i.join(":").trim();e.append(r,n)}),e}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},i="response"in a?a.response:a.responseText;s||(s=!0,r(new y(i,e)))}}a.onreadystatechange=l,a.onload=l,a.onerror=function(){s||(s=!0,n(new TypeError("Network request failed")))},a.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&i.blob&&(a.responseType="blob"),o.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},e.fetch.polyfill=!0,void 0!==t&&t.exports&&(t.exports=e.fetch)}function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){this.map={},t instanceof u?t.forEach(function(t,e){this.append(e,t)},this):t&&(0,n.default)(t).forEach(function(e){this.append(e,t[e])},this)}function c(t){if(t.bodyUsed)return r.default.reject(new TypeError("Already read"));t.bodyUsed=!0}function h(t){return new r.default(function(e,i){t.onload=function(){e(t.result)},t.onerror=function(){i(t.error)}})}function d(t){var e=new FileReader;return e.readAsArrayBuffer(t),h(e)}function p(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(i.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(i.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!i.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},i.blob?(this.blob=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return r.default.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return r.default.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(d)},this.text=function(){var t=c(this);if(t)return t;if(this._bodyBlob)return function(t,e){var i=new FileReader,r=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",n=/charset\=[0-9a-zA-Z\-\_]*;?/,o=t.type.match(n)||r.match(n),a=[t];return o&&a.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),i.readAsText.apply(i,a),h(i)}(this._bodyBlob,this._options);if(this._bodyFormData)throw new Error("could not read FormData body as text");return r.default.resolve(this._bodyText)}):this.text=function(){return c(this)||r.default.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(g)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(t,e){var i=(e=e||{}).body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=function(t){var e=t.toUpperCase();return o.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function g(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var i=t.split("="),r=i.shift().replace(/\+/g," "),n=i.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(n))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof u?e.headers:new u(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:void 0)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSONFormat=e.IgsServiceBase=e.FetchRequest=e.RequestTimeout=e.CORS=e.Events=e.CommonServiceBase=void 0;var r=i(412),n=i(413),o=i(415),a=i(53),s=i(414);e.CommonServiceBase=r.CommonServiceBase,e.Events=n.Events,e.CORS=o.CORS,e.RequestTimeout=o.RequestTimeout,e.FetchRequest=o.FetchRequest,e.IgsServiceBase=a.IgsServiceBase,e.JSONFormat=s.JSONFormat},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=e.VectorLayer=e.TileLayer=e.CatalogService=e.MapDoc=e.GDBInfo=e.ColorInfo=void 0;var r=i(597),n=i(421),o=i(598),a=i(180),s=i(599),l=i(600),u=i(601);e.ColorInfo=r.ColorInfo,e.GDBInfo=n.GDBInfo,e.MapDoc=o.MapDoc,e.CatalogService=a.CatalogService,e.TileLayer=s.TileLayer,e.VectorLayer=l.VectorLayer,e.SystomInfo=u.SystomInfo},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorInfo=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(180),u=i(53);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.SystemLibID=void 0!==i.SystemLibID?i.SystemLibID:0,o.ColorNO=void 0!==i.ColorNO?i.ColorNO:6,o.Red=void 0!==i.Red?i.Red:0,o.Green=void 0!==i.Green?i.Green:0,o.Blue=void 0!==i.Blue?i.Blue:0,o.addNew=void 0!==i.addNew&&i.addNew,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getColorNO",value:function(t,e,i){var r=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(r.SystemLibID=t.SystemLibID),void 0!==t.Red&&(r.Red=t.Red),void 0!==t.Green&&(r.Green=t.Green),void 0!==t.Blue&&(r.Blue=t.Blue),void 0!==t.addNew&&(r.addNew=t.addNew)),r.partUrl="ColorLib/getColorNO?f=json&libID="+r.SystemLibID+"&r="+r.Red+"&g="+r.Green+"&b="+r.Blue+"&addNew="+r.addNew;var n=r.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getColorRGB",value:function(t,e,i){var r=this;null!==t&&void 0!==t&&(void 0!==t.SystemLibID&&(r.SystemLibID=t.SystemLibID),void 0!==t.ColorNO&&(r.ColorNO=t.ColorNO)),r.partUrl="ColorLib/getColorRGB?f=json&libID="+r.SystemLibID+"&colorNO="+r.ColorNO;var n=r.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}}]),e}(l.CatalogService);e.ColorInfo=h,Zondy.Catalog.ColorInfo=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapDoc=void 0;var r=p(i(58)),n=p(i(13)),o=p(i(8)),a=p(i(18)),s=p(i(14)),l=p(i(15)),u=i(6),c=i(22),h=i(180),d=i(53);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.docName=void 0!==i.docName?i.docName:null,r.mapIndex=void 0!==i.mapIndex?i.mapIndex:0,r.layerID=void 0!==i.layerID?i.layerID:0,r.version=void 0!==i.version?i.version:2,r.include=void 0!==i.include?i.include:"{includeDetails:true,includeSubs:false}",r.returnFullStyle=void 0!==i.returnFullStyle&&i.returnFullStyle,r.guid=void 0!==i.guid?i.guid:(0,c.newGuid)(),r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"getMapDocList",value:function(t,e){this.partUrl="docs?v="+this.version+"&f=json";var i=this.getFullUrl();new d.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getMapDocInfo",value:function(t,e,i,r,n){var o=this;if("boolean"==typeof n&&(o.returnFullStyle=n),"boolean"==typeof e||"boolean"==typeof i){var a={includeDetails:"boolean"!=typeof e||e,includeSubs:"boolean"==typeof i&&i};o.include=(0,c.toJSON)(a)}o.partUrl="docs/"+o.docName+"?include="+o.include+"&returnFullStyle="+o.returnFullStyle+"&guid="+o.guid+"&f=json";var s=o.getFullUrl();new d.IgsServiceBase(s,{eventListeners:{scope:o,processCompleted:t,processFailed:r}}).processAsync()}},{key:"getMapInfo",value:function(t,e,i){var r=this;"boolean"==typeof e&&(r.returnFullStyle=e),r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"?returnFullStyle="+r.returnFullStyle+"&guid="+r.guid+"&f=json";var n=r.getFullUrl();new d.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:t,processFailed:i}}).processAsync()}},{key:"getMapDocTree",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"?tree=true&guid="+i.guid+"&f=json";var r=i.getFullUrl();new d.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerInfo",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/"+i.layerID+"?returnFullStyle="+i.returnFullStyle+"&guid="+i.guid+"&f=json";var r=i.getFullUrl();new d.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayersInfo",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/layers?f=json";var r=i.getFullUrl();new d.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"deleteLayer",value:function(t,e){var i=this;i.partUrl="docs/"+i.docName+"/"+i.mapIndex+"/layers/delete?layerIDs="+i.layerID+"&guid="+i.guid+"&f=json";var r=i.getFullUrl();new d.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"addLayer",value:function(t,e,i){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/add?guid="+n.guid+"&f=json";var o=n.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"changeIndex",value:function(t,e,i){var n=this;n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/layers/index?guid="+n.guid+"&f=json";var o=n.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),header:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"getLegendInfo",value:function(t,e,i,r){this.partUrl="legendInfo/"+this.docName+"?f=json&layerIndexes="+t+"&fields="+e;var n=this.getFullUrl();new d.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:i,processFailed:r}}).processAsync()}}]),e}(h.CatalogService);e.MapDoc=f,u.Zondy.Catalog.MapDoc=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayer=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(180),u=i(53);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.tileName=void 0!==i.tileName?i.tileName:null,o.version=void 0!==i.version?i.version:"2.0",o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"getTileList",value:function(t,e){var i=this;i.partUrl="tiles?f=json",this.version&&("2.0"===i.version?i.partUrl+="&v=2":i.partUrl+="&v="+i.version);var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getTileInfo",value:function(t,e){var i=this;i.partUrl="tiles/"+i.tileName+"?f=json",i.version&&(i.partUrl+="&v="+i.version);var r=i.getFullUrl();new u.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}]),e}(l.CatalogService);e.TileLayer=h,Zondy.Catalog.TileLayer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VectorLayer=void 0;var r=p(i(58)),n=p(i(13)),o=p(i(8)),a=p(i(18)),s=p(i(14)),l=p(i(15)),u=i(22),c=i(421),h=i(53),d=i(246);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{};return(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i))}return(0,l.default)(e,t),(0,a.default)(e,[{key:"getSfclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/sfcls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/sfcls?user="+i.User+"&psw="+i.Password+"&containAll="+this.containAll+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getAclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/acls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/acls?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getOclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ocls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ocls?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getNclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ncls?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/ncls?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rds?containAll="+i.containAll+"&f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/rds?user="+i.User+"&psw="+i.Password+"&containAll="+i.containAll+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsSfclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/sfcls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/sfcls?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsAclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/acls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/acls?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsOclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ocls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ocls?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getDsNclsList",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ncls?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.dsName+"/ncls?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getRdsListInRcs",value:function(t,e){var i=this;"mapgislocal"===i.serverName.toLowerCase()?i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.rcsName+"/rds?f=json":i.partUrl="datasource/"+i.serverName+"/"+i.gdbName+"/"+i.rcsName+"/rds?user="+i.User+"&psw="+i.Password+"&f=json";var r=i.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getLayerList",value:function(t,e,i){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?containAll="+r.containAll+"&f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+t+"?user="+r.User+"&psw="+r.Password+"&containAll="+r.containAll+"&f=json";var n=r.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getLayerListInDS",value:function(t,e,i){var r=this;"mapgislocal"===r.serverName.toLowerCase()?r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/"+t+"?f=json":r.partUrl="datasource/"+r.serverName+"/"+r.gdbName+"/"+r.dsName+"/"+t+"?user="+r.User+"&psw="+r.Password+"&f=json";var n=r.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getLayerInfo",value:function(t,e,i,r){this.partUrl="layerinfo?gdbpUrl="+t+"&f=json&encryptPassword="+r+"&proj="+this.proj;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"CreateVectCls",value:function(t,e,i){var n=this;if(null!==(t=null!==t?t:null)&&null!==n.serverName&&null!==n.gdbName){null!==n.User&&null!==n.Password?n.partUrl="datasource/"+n.User+":"+n.Password+"@":n.partUrl="datasource/",null===t.clsName&&(t.clsName=(0,u.newGuid)()),n.partUrl+=n.serverName+"/"+n.gdbName+"/"+t.clsType+"/"+t.clsName+"/create?geoType="+t.geoType+"&srefName="+t.srefName+"&dsName="+t.dsName+"&f=json",null===t.attStruct&&(t.attStruct=new d.CAttStruct);var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t.attStruct),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deleteXCls",value:function(t,e,i,r){var n=this;if(null!==n.serverName&&null!==n.gdbName&&null!==t&&null!==e){n.partUrl="datasource/"+n.serverName+"/"+n.gdbName+"/"+t+"/"+e+"/delete?f=json";var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:i,processFailed:r}}).processAsync()}}}]),e}(c.GDBInfo);e.VectorLayer=f,Zondy.Catalog.VectorLayer=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystomInfo=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(15)),l=i(180),u=i(53);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.f=i.f||"json",o.page=i.page||0,o.pageCount=i.pageCount||20,o.systemLib=i.systemLib||null,o.type=i.type||null,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"GetSystemLibrary",value:function(t,e){this.partUrl="systemlibraries?f="+this.f;var i=this.getFullUrl();new u.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"GetSymbol",value:function(t,e){var i=this,r="symbols?&systemLib="+i.systemLib+"&type="+i.type;i.f&&(r+="&f="+i.f),i.page&&(r+="&page="+i.page),i.size&&(r+="&size="+i.pageCount),i.partUrl=r;var n=i.getFullUrl();new u.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}]),e}(l.CatalogService);e.SystomInfo=h,Zondy.Catalog.SystomInfo=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryServiceBase=e.QueryParameterBase=e.QueryParameter=e.QueryLayerFeature=e.QueryFeatureStruct=e.QueryFeatureRule=e.QueryDocFeature=e.QueryByLayerParameter=e.ObjClsQueryParameter=e.ObjClsQuery=e.MultiGeoQueryParameter=e.MultiGeoQuery=e.EditServiceBase=e.EditLayerFeature=e.EditDocFeature=void 0;var r=i(603),n=i(604),o=i(313),a=i(605),s=i(424),l=i(606),u=i(425),c=i(607),h=i(608),d=i(423),p=i(315),f=i(609),g=i(314),y=i(422),v=i(204);e.EditDocFeature=r.EditDocFeature,e.EditLayerFeature=n.EditLayerFeature,e.EditServiceBase=o.EditServiceBase,e.MultiGeoQuery=a.MultiGeoQuery,e.MultiGeoQueryParameter=s.MultiGeoQueryParameter,e.ObjClsQuery=l.ObjClsQuery,e.ObjClsQueryParameter=u.ObjClsQueryParameter,e.QueryByLayerParameter=c.QueryByLayerParameter,e.QueryDocFeature=h.QueryDocFeature,e.QueryFeatureRule=d.QueryFeatureRule,e.QueryFeatureStruct=p.QueryFeatureStruct,e.QueryLayerFeature=f.QueryLayerFeature,e.QueryParameter=g.QueryParameter,e.QueryParameterBase=y.QueryParameterBase,e.QueryServiceBase=v.QueryServiceBase},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditDocFeature=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=i(313),h=i(53);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,r){(0,o.default)(this,e);var a=r||{},l=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,a));return l.docName=void 0!==t?t:null,l.mapIndex=0,l.layerIndex=void 0!==i?i:0,l}return(0,l.default)(e,t),(0,a.default)(e,[{key:"add",value:function(t,e,i){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/addFeatures?f="+n.f+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,i){var n=this;if(void 0!==t){n.partUrl="docs/"+n.docName+"/"+n.mapIndex+"/"+n.layerIndex+"/updateFeatures?f="+n.f+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,i){var r=this;if(void 0!==t){r.partUrl="docs/"+r.docName+"/"+r.mapIndex+"/"+r.layerIndex+"/deleteFeatures?f="+r.f+"&objectIds="+t+"&guid="+r.guid;var n=r.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}}}]),e}(c.EditServiceBase);e.EditDocFeature=p,u.Zondy.Service.EditDocFeature=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditLayerFeature=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=i(313),h=i(53);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i){(0,o.default)(this,e);var r=i||{},a=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,r));return a.gdbp=void 0!==t?t:null,a}return(0,l.default)(e,t),(0,a.default)(e,[{key:"add",value:function(t,e,i){var n=this;if(void 0!==t){n.partUrl="layer/addFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"update",value:function(t,e,i){var n=this;if(void 0!==t){n.partUrl="layer/updateFeatures?f="+n.f+"&gdbp="+n.gdbp+"&guid="+n.guid;var o=n.getFullUrl();new h.IgsServiceBase(o,{eventListeners:{scope:n,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}},{key:"deletes",value:function(t,e,i){var r=this;if(void 0!==t){r.partUrl="layer/deleteFeatures?f="+r.f+"&objectIds="+t+"&gdbp="+r.gdbp+"&guid="+r.guid;var n=r.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:r,processCompleted:e,processFailed:i}}).processAsync()}}}]),e}(c.EditServiceBase);e.EditLayerFeature=p,u.Zondy.Service.EditLayerFeature=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiGeoQuery=void 0;var r=p(i(58)),n=p(i(13)),o=p(i(8)),a=p(i(18)),s=p(i(14)),l=p(i(15)),u=i(6),c=i(204),h=i(424),d=i(53);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t,i,r,a){(0,o.default)(this,e);var l=a||{},u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,l));return u.queryParam=t,u.mapName=i,u.mapIndex=0,u.layerIndex=r,u.baseUrl="igs/rest/extend/MultiGeo",u.partUrl="docs/"+u.mapName+"/"+u.mapIndex.toString()+"/"+u.layerIndex+"/Geoquery",u.partUrl+=t.getParameterURL(),u}return(0,l.default)(e,t),(0,a.default)(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof h.MultiGeoQueryParameter){var i=null;"point"===this.queryParam.geometryType?i={pointArr:this.queryParam.geometry}:"line"===this.queryParam.geometryType?i={lineArr:this.queryParam.geometry}:"polygon"===this.queryParam.geometryType&&(i={PolygonObjs:this.queryParam.geometry});var n=this.getFullUrl();new d.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:(0,r.default)(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}}]),e}(c.QueryServiceBase);e.MultiGeoQuery=f,u.Zondy.Service.MultiGeoQuery=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjClsQuery=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(15)),l=i(6),u=i(204),c=i(425),h=i(53);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,o){(0,n.default)(this,e);var s=o||{},l=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,s));return l.queryParam=t,l.gdbp=i,l.baseUrl="igs/rest/extend/dxlcz",l.partUrl="objlayer/query?gdbp="+i,l.partUrl+=t.getParameterURL(),l}return(0,s.default)(e,t),(0,o.default)(e,[{key:"query",value:function(t,e){if(null!==this.queryParam&&this.queryParam instanceof c.ObjClsQueryParameter){var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(u.QueryServiceBase);e.ObjClsQuery=p,l.Zondy.Service.ObjClsQuery=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryByLayerParameter=void 0;var r=h(i(13)),n=h(i(8)),o=h(i(18)),a=h(i(14)),s=h(i(40)),l=h(i(15)),u=i(6),c=i(314);function h(t){return t&&t.__esModule?t:{default:t}}i(315);var d=function(t){function e(t,i){(0,n.default)(this,e);var o=i||{},s=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,o));return s.gdbp=void 0!==t?encodeURI(t):null,s}return(0,l.default)(e,t),(0,o.default)(e,[{key:"getParameterURL",value:function(){return(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"getParameterURL",this).call(this)+"&gdbp="+this.gdbp}},{key:"getParameterObject",value:function(){var t=(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"getParameterObject",this).call(this,this);return t.gdbp=this.gdbp,t}}]),e}(c.QueryParameter);e.QueryByLayerParameter=d,u.Zondy.Service.QueryByLayerParameter=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryDocFeature=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i,a,s){(0,n.default)(this,e);var l=s||{},u=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,l));return u.queryParam=t,u.docName=i,u.layerIndex=a,u.mapIndex=0,u.partUrl="docs/"+u.docName+"/"+u.mapIndex.toString()+"/"+u.layerIndex.toString()+"/query",u}return(0,a.default)(e,t),e}(i(204).QueryServiceBase);e.QueryDocFeature=u,s.Zondy.Service.QueryDocFeature=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryLayerFeature=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{},s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.queryParam=t,s.partUrl="layer/query",s}return(0,a.default)(e,t),e}(i(204).QueryServiceBase);e.QueryLayerFeature=u,s.Zondy.Service.QueryLayerFeature=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=e.ProjectBySRID=e.ProjectByLayer=e.ProjectBase=e.OverlayByPolygon=e.OverlayByLayer=e.OverlayBase=e.NetAnalysis=e.FeatureBuffBySingleRing=e.FeatureBuffByMultiplyRing=e.FeatureBuffBase=e.ContourAnalyse=e.ClipByPolygon=e.ClipByLayer=e.ClipByCircle=e.ClipBase=e.ClassBufferBySingleRing=e.ClassBufferByMultiplyRing=e.ClassBufferBase=e.AnalysisBase=void 0;var r=i(144),n=i(316),o=i(611),a=i(612),s=i(249),l=i(613),u=i(614),c=i(615),h=i(616),d=i(317),p=i(617),f=i(618),g=i(619),y=i(318),v=i(620),m=i(621),_=i(319),b=i(622),S=i(623),O=i(624);e.AnalysisBase=r.AnalysisBase,e.ClassBufferBase=n.ClassBufferBase,e.ClassBufferByMultiplyRing=o.ClassBufferByMultiplyRing,e.ClassBufferBySingleRing=a.ClassBufferBySingleRing,e.ClipBase=s.ClipBase,e.ClipByCircle=l.ClipByCircle,e.ClipByLayer=u.ClipByLayer,e.ClipByPolygon=c.ClipByPolygon,e.ContourAnalyse=h.ContourAnalyse,e.FeatureBuffBase=d.FeatureBuffBase,e.FeatureBuffByMultiplyRing=p.FeatureBuffByMultiplyRing,e.FeatureBuffBySingleRing=f.FeatureBuffBySingleRing,e.NetAnalysis=g.NetAnalysis,e.OverlayBase=y.OverlayBase,e.OverlayByLayer=v.OverlayByLayer,e.OverlayByPolygon=m.OverlayByPolygon,e.ProjectBase=_.ProjectBase,e.ProjectByLayer=b.ProjectByLayer,e.ProjectBySRID=S.ProjectBySRID,e.FunctionWareService=O.FunctionWareService},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferByMultiplyRing=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.flowID="600232",a.radiusStr=void 0!==i.radiusStr?i.radiusStr:"2,4,8,10",a}return(0,a.default)(e,t),e}(i(316).ClassBufferBase);e.ClassBufferByMultiplyRing=u,s.Zondy.Service.ClassBufferByMultiplyRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClassBufferBySingleRing=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.leftRad=void 0!==i.leftRad?i.leftRad:.001,a.rightRad=void 0!==i.rightRad?i.rightRad:.001,a.isByAtt=void 0===i.isByAtt||i.isByAtt,a.fldName=void 0!==i.fldName?i.fldName:null,a.dynPrjRad=void 0!==i.dynPrjRad?i.dynPrjRad:0,a.flowID="600231",a}return(0,a.default)(e,t),e}(i(316).ClassBufferBase);e.ClassBufferBySingleRing=u,s.Zondy.Service.ClassBufferBySingleRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByCircle=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.srcInfo=void 0!==i.srcInfo?i.srcInfo:null,a.center=void 0!==i.center?i.center:null,a.radius=void 0!==i.radius?i.radius:null,a.step=void 0!==i.step?i.step:.001,a.flowID="600229",a}return(0,a.default)(e,t),e}(i(249).ClipBase);e.ClipByCircle=u,s.Zondy.Service.ClipByCircle=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByLayer=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.srcInfo1=void 0!==i.srcInfo1?i.srcInfo1:null,a.srcInfo2=void 0!==i.srcInfo2?i.srcInfo2:null,a.flowID="600230",a}return(0,a.default)(e,t),e}(i(249).ClipBase);e.ClipByLayer=u,s.Zondy.Service.ClipByLayer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClipByPolygon=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.srcInfo=void 0!==i.srcInfo?i.srcInfo:null,a.strPos=void 0!==i.strPos?i.strPos:null,a.flowID="600228",a}return(0,a.default)(e,t),e}(i(249).ClipBase);e.ClipByPolygon=u,s.Zondy.Service.ClipByPolygon=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContourAnalyse=void 0;var r=u(i(13)),n=u(i(8)),o=u(i(14)),a=u(i(15)),s=i(6),l=(i(22),i(144));function u(t){return t&&t.__esModule?t:{default:t}}i(53),i(411),i(407);var c=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.flowID="600320",a.linSfclsURL=void 0!==i.linSfclsURL?i.linSfclsURL:null,a.regSfclsURL=void 0!==i.regSfclsURL?i.regSfclsURL:null,a.annoClsURL=void 0!==i.annoClsURL?i.annoClsURL:null,a.meshingParam=void 0!==i.meshingParam?i.meshingParam:null,a.contourParam=void 0!==i.contourParam?i.contourParam:null,a}return(0,a.default)(e,t),e}(l.AnalysisBase);e.ContourAnalyse=c,s.Zondy.Service.ContourAnalyse=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffByMultiplyRing=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.radiusStr=void 0!==i.radiusStr?i.radiusStr:"0.003,0.002,0.001",a.flowID="600239",a}return(0,a.default)(e,t),e}(i(317).FeatureBuffBase);e.FeatureBuffByMultiplyRing=u,s.Zondy.Service.FeatureBuffByMultiplyRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureBuffBySingleRing=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.leftRad=void 0!==i.leftRad?i.leftRad:.001,a.rightRad=void 0!==i.rightRad?i.rightRad:.001,a.flowID="600238",a}return(0,a.default)(e,t),e}(i(317).FeatureBuffBase);e.FeatureBuffBySingleRing=u,s.Zondy.Service.FeatureBuffBySingleRing=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NetAnalysis=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(144),u=i(112);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.netClsUrl=void 0!==i.netClsUrl?i.netClsUrl:null,a.flagPosStr=void 0!==i.flagPosStr?i.flagPosStr:null,a.barrierPosStr=void 0!==i.barrierPosStr?i.barrierPosStr:null,a.analyType=void 0!==i.analyType?i.analyType:u.NetAnalyType.UserMode,a.weight=void 0!==i.weight?i.weight:",Weight1,Weight1",a.elementType=void 0!==i.elementType?i.elementType:u.NetElemType.Edge,a.nearDis=void 0!==i.nearDis?i.nearDis:.001,a.outFormat=void 0!==i.outFormat?i.outFormat:"json",a.flowID="600233",a}return(0,a.default)(e,t),e}(l.AnalysisBase);e.NetAnalysis=h,s.Zondy.Service.NetAnalysis=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByLayer=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.srcInfo2=void 0!==i.srcInfo2?i.srcInfo2:null,a.flowID="600227",a}return(0,a.default)(e,t),e}(i(318).OverlayBase);e.OverlayByLayer=u,s.Zondy.Service.OverlayByLayer=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayByPolygon=void 0;var r=l(i(13)),n=l(i(8)),o=l(i(14)),a=l(i(15)),s=i(6);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(t){(0,n.default)(this,e);var i=t||{},a=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return a.strGRegionXML=void 0!==i.strGRegionXML?i.strGRegionXML:null,a.inFormat=void 0!==i.inFormat?i.inFormat:"json",a.flowID="600237",a}return(0,a.default)(e,t),e}(i(318).OverlayBase);e.OverlayByPolygon=u,s.Zondy.Service.OverlayByPolygon=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectByLayer=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(319),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{};(0,u.extend)(a,t);var s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.flowID="600235",s}return(0,a.default)(e,t),e}(l.ProjectBase);e.ProjectByLayer=h,s.Zondy.Service.ProjectByLayer=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectBySRID=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(319),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{};(0,u.extend)(a,t);var s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.flowID="600234",s.srID=void 0!==a.srID?a.srID:32,s}return(0,a.default)(e,t),e}(l.ProjectBase);e.ProjectBySRID=h,s.Zondy.Service.ProjectBySRID=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionWareService=void 0;var r=p(i(58)),n=p(i(13)),o=p(i(8)),a=p(i(18)),s=p(i(14)),l=p(i(15)),u=i(6),c=i(144),h=i(53),d=i(22);function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.guid=i.guid?i.guid:(0,d.newGuid)(),r.f=void 0!==i.f?i.f:"json",r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"executeWorkFlow",value:function(t,e,i,n,o,a){i||(i=!1);var s={};null!==a&&"POST"===a.toUpperCase()?(s.paraValues=e,this.partUrl="execute/"+t+"?f="+this.f+"&isAsy="+i+"&guid="+this.guid):this.partUrl="execute/"+t+"?paraValues="+e+"&f="+this.f+"&isAsy="+i+"&guid="+this.guid;var l=this.getFullUrl(),u=new h.IgsServiceBase(l,{eventListeners:{scope:this,processCompleted:n,processFailed:o}});null!==a&&"POST"===a.toUpperCase()?u.processAsync({method:"POST",data:(0,r.default)(s)}):u.processAsync()}},{key:"getInstanceMessage",value:function(t,e,i){this.partUrl="instanceLogs/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getInstanceOutPutValue",value:function(t,e,i,r){this.partUrl="outputvalues/"+t+"?name="+e+"&f="+this.f+"&guid="+this.guid;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:i,processFailed:r}}).processAsync()}},{key:"getInstanceResult",value:function(t,e,i){this.partUrl="results/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getInstanceStatus",value:function(t,e,i){this.partUrl="status/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getWorkFlowGroups",value:function(t,e){this.partUrl="groups/?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfoByID",value:function(t,e,i){this.partUrl="workflows/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getWorkFlowInfos",value:function(t,e){this.partUrl="workflows?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getWorkFlowInfosByGroup",value:function(t,e,i){this.partUrl="workflowsbygroup/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}},{key:"getFolder1",value:function(t,e){this.partUrl="folderInfos?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder2",value:function(t,e){this.partUrl="folderInfos/workflow?f="+this.f+"&guid="+this.guid;var i=this.getFullUrl();new h.IgsServiceBase(i,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync()}},{key:"getFolder3",value:function(t,e,i){this.partUrl="folderInfos/workflow/"+t+"?f="+this.f+"&guid="+this.guid;var r=this.getFullUrl();new h.IgsServiceBase(r,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}}]),e}(c.AnalysisBase);e.FunctionWareService=f,u.Zondy.Service.FunctionWareService=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoordinateElpTrans=e.TopAnalysis=e.Smooth=e.ProjectRang=e.ProjectDots=e.GeometryAnalysisBase=e.CProjectParam=e.CProjectBySRSID=e.CalServiceBase=e.CalPolyLineLength=e.CalArea=void 0;var r=i(626),n=i(627),o=i(320),a=i(322),s=i(321),l=i(170),u=i(628),c=i(629),h=i(630),d=i(631),p=i(426);e.CalArea=r.CalArea,e.CalPolyLineLength=n.CalPolyLineLength,e.CalServiceBase=o.CalServiceBase,e.CProjectBySRSID=a.CProjectBySRSID,e.CProjectParam=s.CProjectParam,e.GeometryAnalysisBase=l.GeometryAnalysisBase,e.ProjectDots=u.ProjectDots,e.ProjectRang=c.ProjectRang,e.Smooth=h.Smooth,e.TopAnalysis=d.TopAnalysis,e.CoordinateElpTrans=p.CoordinateElpTrans},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalArea=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(320),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}i(118);var h=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{};(0,u.extend)(a,{dots:t});var s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.partUrl="geomservice/calArea?f=json",s}return(0,a.default)(e,t),e}(l.CalServiceBase);e.CalArea=h,s.Zondy.Service.CalArea=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CalPolyLineLength=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(14)),a=c(i(15)),s=i(6),l=i(320),u=i(22);function c(t){return t&&t.__esModule?t:{default:t}}i(118);var h=function(t){function e(t,i){(0,n.default)(this,e);var a=i||{};(0,u.extend)(a,{dots:t});var s=(0,o.default)(this,(e.__proto__||(0,r.default)(e)).call(this,a));return s.partUrl="geomservice/calLength?f=json",s}return(0,a.default)(e,t),e}(l.CalServiceBase);e.CalPolyLineLength=h,s.Zondy.Service.CalPolyLineLength=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectDots=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=i(170),h=(i(118),i(321),i(53));function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t,i,r,a){(0,o.default)(this,e);var l=a||{},u=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,l));return u.InputDots=t,u.SrcProjParam=i,u.DesProjParm=r,u}return(0,l.default)(e,t),(0,a.default)(e,[{key:"execute",value:function(t,e){this.partUrl="geomservice/projectdots?f=json";var i={};i.InputDots=this.InputDots,i.SrcProjParam=this.SrcProjParam,i.DesProjParm=this.DesProjParm;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:t,processFailed:e}}).processAsync({method:"POST",data:(0,r.default)(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.ProjectDots=p,u.Zondy.Service.ProjectDots=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProjectRang=void 0;var r=h(i(13)),n=h(i(8)),o=h(i(18)),a=h(i(14)),s=h(i(15)),l=i(6),u=i(170),c=i(53);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.gdbsvrName=void 0!==i.gdbsvrName?i.gdbsvrName:"MapGISLocal",o.gdbName=void 0!==i.gdbName?i.gdbName:null,o.srefID=void 0!==i.srefID?i.srefID:0,o.desfID=void 0!==i.desfID?i.desfID:0,o.userName=void 0!==i.userName?i.userName:null,o.password=void 0!==i.password?i.password:null,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"execute",value:function(t,e,i){var r="";t&&(r=t.xmin+"$"+t.ymin+"$"+t.xmax+"$"+t.ymax),null===this.userName||null===this.password?this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+r:this.partUrl="geomservice/"+this.gdbsvrName+"/"+this.gdbName+"/"+this.srefID+"/"+this.desfID+"?f=json&rang="+r+"&userName="+this.userName+"&password="+this.password;var n=this.getFullUrl();new c.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync()}}]),e}(u.GeometryAnalysisBase);e.ProjectRang=d,l.Zondy.Service.ProjectRang=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Smooth=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=i(170),h=(i(118),i(53));function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.type=void 0!==i.type?i.type:0,r.step=void 0!==i.step?i.step:1,r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"setType",value:function(t){this.type=t}},{key:"setStep",value:function(t){this.step=t}},{key:"execute",value:function(t,e,i){if(2==this.type){if(t.length<4)return void alert("å½“å‰é€‰ä¸­çš„ä¸ºä¸‰æ¬¡Beizeræ ·æ¡ï¼Œæœ€å°‘éœ€å››ä¸ªç‚¹")}else if(t.length<3)return void alert("å½“å‰é€‰ä¸­çš„ç±»åž‹æœ€å°‘éœ€ä¸‰ä¸ªç‚¹");this.partUrl="geomservice/smooth?f=json&type="+this.type+"&step="+this.step;var n=this.getFullUrl();new h.IgsServiceBase(n,{eventListeners:{scope:this,processCompleted:e,processFailed:i}}).processAsync({method:"POST",data:(0,r.default)(t),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.Smooth=p,u.Zondy.Service.Smooth=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TopAnalysis=void 0;var r=p(i(58)),n=p(i(13)),o=p(i(8)),a=p(i(18)),s=p(i(14)),l=p(i(15)),u=i(6),c=i(170),h=i(53),d=(i(305),i(306),i(308),i(22));function p(t){return t&&t.__esModule?t:{default:t}}var f=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.pnt=void 0!==i.pnt?i.pnt:null,r.line=void 0!==i.line?i.line:null,r.reg=void 0!==i.reg?i.reg:null,r.nearDis=void 0!==i.nearDis?i.nearDis:.01,r.relativeObj=void 0!==i.relativeObj?i.relativeObj:null,r.p_onSuccess=void 0!==i.p_onSuccess?i.p_onSuccess:null,r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"setPnt",value:function(t){this.pnt=t}},{key:"setLine",value:function(t){this.line=t}},{key:"setReg",value:function(t){this.reg=t}},{key:"setRelativeObj",value:function(t){this.relativeObj=t}},{key:"onGetRltSuccess",value:function(t){var e=(0,d.getTopAnalysisResult)(t);this.p_onSuccess(e)}},{key:"execute",value:function(t,e){(o=this).p_onSuccess=t;var i={};i.NearDis=this.nearDis,i.Pnt=this.pnt,i.Line=this.line,i.Reg=this.reg,i.RelativeObj=this.relativeObj,o.partUrl="geomservice/topanalysis?f=json";var n=o.getFullUrl(),o=this;new h.IgsServiceBase(n,{eventListeners:{scope:o,processCompleted:o.onGetRltSuccess,processFailed:e}}).processAsync({method:"POST",data:(0,r.default)(i),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.GeometryAnalysisBase);e.TopAnalysis=f,u.Zondy.Service.TopAnalysis=f},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapServiceBase=e.GetTileImageService=e.GetMapInfoService=e.GetMapImageService=e.GetLayerImageService=e.GetDocImageService=void 0;var r=i(633),n=i(634),o=i(635),a=i(636),s=i(637),l=i(181);e.GetDocImageService=r.GetDocImageService,e.GetLayerImageService=n.GetLayerImageService,e.GetMapImageService=o.GetMapImageService,e.GetMapInfoService=a.GetMapInfoService,e.GetTileImageService=s.GetTileImageService,e.MapServiceBase=l.MapServiceBase},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetDocImageService=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=i(6),c=i(181),h=(i(322),i(22));function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.docName=void 0!==i.docName?i.docName:null,r.cache=void 0!==i.cache&&i.cache,r.cache?(r.level=void 0!==i.level?i.level:0,r.row=void 0!==i.row?i.row:0,r.col=void 0!==i.col?i.col:0,r.update=void 0!==i.update&&i.update):(r.layers=void 0!==i.layers?i.layers:null,r.style=void 0!==i.style?i.style:null,r.picType=void 0!==i.picType?i.picType:"gif",r.bbox=void 0!==i.bbox?i.bbox:null,r.filters=void 0!==i.filters?i.filters:null,r.picWidth=void 0!==i.picWidth?i.picWidth:512,r.picHeight=void 0!==i.picHeight?i.picHeight:512,r.proj=void 0!==i.proj?i.proj:null,r.guid=void 0!==i.guid?i.guid:(0,h.newGuid)()),r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"GetMapImage",value:function(){return this.docName?(!0===this.cache?this.partUrl="docs/"+this.docName+"?cache="+this.cache.toString()+"&level="+this.level+"&row="+this.row+"&col="+this.col+"&update="+this.update.toString():(this.partUrl="docs/"+this.docName+"?",null!==this.bbox&&(this.partUrl+="bbox="+this.bbox),null!==this.picWidth&&(this.partUrl+="&w="+this.picWidth),null!==this.picHeight&&(this.partUrl+="&h="+this.picHeight),null!==this.layers&&(this.partUrl+="&layers="+this.layers),null!==this.filters&&(this.partUrl+="&filters="+encodeURI(this.filters)),null!==this.style&&(this.partUrl+="&style="+(0,r.default)(this.style)),null!==this.proj&&(this.partUrl+="&proj="+(0,r.default)(this.proj)),null!==this.picType&&(this.partUrl+="&f="+this.picType),null!==this.guid&&(this.partUrl+="&guid="+this.guid)),this.getFullUrl()):null}}]),e}(c.MapServiceBase);e.GetDocImageService=p,u.Zondy.Service.GetDocImageService=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetLayerImageService=void 0;var r=h(i(58)),n=h(i(13)),o=h(i(8)),a=h(i(18)),s=h(i(14)),l=h(i(15)),u=i(6),c=i(181);function h(t){return t&&t.__esModule?t:{default:t}}i(403);var d=function(t){function e(t){(0,o.default)(this,e);var i=t||{},r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.gdbps=void 0!==i.gdbps?i.gdbps:null,r.picType=void 0!==i.picType?i.picType:"gif",r.style=void 0!==i.style?i.style:null,r.bbox=void 0!==i.bbox?i.bbox:null,r.filters=void 0!==i.filters?i.filters:null,r.picWidth=void 0!==i.picWidth?i.picWidth:512,r.picHeight=void 0!==i.picHeight?i.picHeight:512,r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"GetLayerImage",value:function(){if(null!==this.gdbps&&null!==this.picWidth&&null!==this.picHeight){this.partUrl="layers?f="+this.picType,this.partUrl+="&gdbps=",this.gdbps.split(",");for(var t=this.gdbps.split(","),e=0;e<t.length;e++)this.partUrl+=t[e],e<t.length-1&&(this.partUrl+=",");return null!==this.style&&(this.partUrl+="&style="+(0,r.default)(this.style)),null!==this.filters&&(this.partUrl+="&filters="+this.filters),null!==this.bbox&&(this.partUrl+="&bbox="+this.bbox),this.partUrl+="&w="+this.picWidth,this.partUrl+="&h="+this.picHeight,this.getFullUrl()}return null}}]),e}(c.MapServiceBase);e.GetLayerImageService=d,u.Zondy.Service.GetLayerImageService=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapImageService=void 0;var r=h(i(13)),n=h(i(8)),o=h(i(18)),a=h(i(14)),s=h(i(15)),l=i(6),u=i(181),c=i(112);function h(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.mapName=void 0!==i.mapName?i.mapName:null,o.mapType=void 0!==i.mapType?i.mapType:c.MapType.Doc,o.mapType===c.MapType.Tile?(o.level=void 0!==i.level?i.level:0,o.row=void 0!==i.row?i.row:0,o.col=void 0!==i.col?i.col:0):(o.picType=void 0!==i.picType?i.picType:"gif",o.picWidth=void 0!==i.picWidth?i.picWidth:512,o.picHeight=void 0!==i.picHeight?i.picHeight:512,o.xmin=void 0!==i.xmin?i.xmin:null,o.xmax=void 0!==i.xmax?i.xmax:null,o.ymin=void 0!==i.ymin?i.ymin:null,o.ymax=void 0!==i.ymax?i.ymax:null),o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"GetImage",value:function(){return this.mapName?(this.mapType===c.MapType.Tile?this.partUrl="tile/"+this.mapName+"?lvl="+this.level+"&row="+this.row+"&col="+this.col:(this.partUrl="map/"+this.mapName+"?width="+this.picWidth+"&height="+this.picHeight+"&f="+this.picType,null!==this.xmin&&null!==this.xmax&&null!==this.ymin&&null!==this.ymax&&(this.partUrl+="&xmin="+this.xmin+"&ymin="+this.ymin+"&xmax="+this.xmax+"&ymax="+this.ymax)),this.getFullUrl()):null}}]),e}(u.MapServiceBase);e.GetMapImageService=d,l.Zondy.Service.GetMapImageService=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetMapInfoService=void 0;var r=d(i(13)),n=d(i(8)),o=d(i(18)),a=d(i(14)),s=d(i(15)),l=i(6),u=i(181),c=i(53),h=i(22);function d(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.mapName=void 0!==i.mapName?i.mapName:null,o.guid=void 0!==i.guid?i.guid:(0,h.newGuid)(),o.token=i.token,o.type=i.type,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"GetMapInfo",value:function(t,e){var i=this;if(i.mapName){i.partUrl="info/"+this.mapName;var r=[];i.guid&&r.push("guid="+i.guid),this.token&&r.push("token="+i.token),this.type&&r.push("type="+i.type),r.length>0&&(i.partUrl+="?"+r.join("&"));var n=i.getFullUrl();new c.IgsServiceBase(n,{eventListeners:{scope:i,processCompleted:t,processFailed:e}}).processAsync()}}}]),e}(u.MapServiceBase);e.GetMapInfoService=p,l.Zondy.Service.GetMapInfoService=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GetTileImageService=void 0;var r=u(i(13)),n=u(i(8)),o=u(i(18)),a=u(i(14)),s=u(i(15)),l=i(6);function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(t){(0,n.default)(this,e);var i=t||{},o=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,i));return o.hdfName=void 0!==i.hdfName?i.hdfName:null,o.level=void 0!==i.level?i.level:0,o.row=void 0!==i.row?i.row:0,o.col=void 0!==i.col?i.col:0,o}return(0,s.default)(e,t),(0,o.default)(e,[{key:"GetTileImage",value:function(){return void 0!==this.hdfName?(this.partUrl="tile/"+this.hdfName+"/"+this.level+"/"+this.row+"/"+this.col,this.getFullUrl()):null}}]),e}(i(181).MapServiceBase);e.GetTileImageService=c,l.Zondy.Service.GetTileImageService=c},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemesInfo=e.ThemeOper=e.ItemValue=e.FolderInfoAttribute=e.FolderInfo=e.ExpInfo=e.CUniqueThemeInfo=e.CUniqueTheme=e.CThemeInfo=e.CTheme=e.CSimpleTheme=e.CRegInfo=e.CRangeThemeInfo=e.CRangeTheme=e.CRandomTheme=e.CPntInfo=e.CMultiClassTheme=e.CLinInfo=e.CGraduatedSymbolTheme=e.CFourColorTheme=e.CDotDensityTheme=e.CChartType=e.CChartThemeRepresentInfo=e.CChartThemeInfo=e.CChartTheme=e.CChartLabelFormat=e.CAnnInfo=e.CAllOtherDataItemInfoSource=void 0;var r=i(427),n=i(428),o=i(429),a=i(430),s=i(432),l=i(435),u=i(431),c=i(436),h=i(437),d=i(438),p=i(433),f=i(439),g=i(250),y=i(441),v=i(442),m=i(443),_=i(434),b=i(444),S=i(126),O=i(153),C=i(445),T=i(446),x=i(440),E=i(447),P=i(323),j=i(639),R=i(640),I=i(448);e.CAllOtherDataItemInfoSource=r.CAllOtherDataItemInfoSource,e.CAnnInfo=n.CAnnInfo,e.CChartLabelFormat=o.CChartLabelFormat,e.CChartTheme=a.CChartTheme,e.CChartThemeInfo=s.CChartThemeInfo,e.CChartThemeRepresentInfo=l.CChartThemeRepresentInfo,e.CChartType=u.CChartType,e.CDotDensityTheme=c.CDotDensityTheme,e.CFourColorTheme=h.CFourColorTheme,e.CGraduatedSymbolTheme=d.CGraduatedSymbolTheme,e.CLinInfo=p.CLinInfo,e.CMultiClassTheme=f.CMultiClassTheme,e.CPntInfo=g.CPntInfo,e.CRandomTheme=y.CRandomTheme,e.CRangeTheme=v.CRangeTheme,e.CRangeThemeInfo=m.CRangeThemeInfo,e.CRegInfo=_.CRegInfo,e.CSimpleTheme=b.CSimpleTheme,e.CTheme=S.CTheme,e.CThemeInfo=O.CThemeInfo,e.CUniqueTheme=C.CUniqueTheme,e.CUniqueThemeInfo=T.CUniqueThemeInfo,e.ExpInfo=x.ExpInfo,e.FolderInfo=E.FolderInfo,e.FolderInfoAttribute=P.FolderInfoAttribute,e.ItemValue=j.ItemValue,e.ThemeOper=R.ThemeOper,e.ThemesInfo=I.ThemesInfo},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemValue=void 0;var r=i(6),n=i(22),o=i(112),a=function(t,e,i,r){var a=void 0!==r?r:{};(0,n.extend)(this,a),this.StartValue=void 0!==t?t:"",this.EndValue=void 0!==e?e:"",this.ClassItemType=void 0!==i?i:o.CItemType.RangeTheme};e.ItemValue=a,r.Zondy.Object.Theme.ItemValue=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeOper=void 0;var r=x(i(58)),n=x(i(13)),o=x(i(8)),a=x(i(18)),s=x(i(14)),l=x(i(15)),u=i(6),c=i(143),h=i(22),d=i(53),p=i(439),f=i(444),g=i(430),y=i(438),v=i(436),m=i(441),_=i(437),b=i(445),S=i(442),O=i(323),C=i(447),T=i(448);function x(t){return t&&t.__esModule?t:{default:t}}var E=function(t){function e(t,i){(0,o.default)(this,e),(i=i||{}).baseUrl="igs/rest/theme";var r=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,i));return r.guid=null!==t?t:(0,h.newGuid)(),r.p_onSuccess=void 0!==i.p_onSuccess?i.p_onSuccess:null,r}return(0,l.default)(e,t),(0,a.default)(e,[{key:"onGetThemesInfoSuccess",value:function(t){var e=new C.FolderInfo;if((0,h.extendDeep)(e,t.result||t),null!==e&&null!==e.attribute&&e.attribute.length>0){for(var i=[],r=null,n=0;n<e.attribute.length;n++)if(i[n]=new T.ThemesInfo,null!==e.attribute[n]&&(i[n].LayerName=e.attribute[n].name,null!==(r=JSON.parse(e.attribute[n].value))&&r.length>0)){i[n].ThemeArr=[];for(var o=0;o<r.length;o++){switch(r[o].name){case"CMultiClassTheme":i[n].ThemeArr[o]=new p.CMultiClassTheme;break;case"CSimpleTheme":i[n].ThemeArr[o]=new f.CSimpleTheme;break;case"CChartTheme":i[n].ThemeArr[o]=new g.CChartTheme;break;case"CGraduatedSymbolTheme":i[n].ThemeArr[o]=new y.CGraduatedSymbolTheme;break;case"CDotDensityTheme":i[n].ThemeArr[o]=new v.CDotDensityTheme;break;case"CRandomTheme":i[n].ThemeArr[o]=new m.CRandomTheme;break;case"CFourColorTheme":i[n].ThemeArr[o]=new _.CFourColorTheme;break;case"CUniqueTheme":i[n].ThemeArr[o]=new b.CUniqueTheme;break;case"CRangeTheme":i[n].ThemeArr[o]=new S.CRangeTheme}(0,h.extendDeep)(i[n].ThemeArr[o],JSON.parse(r[o].value))}}null!==this.p_onSuccess&&"function"==typeof this.p_onSuccess&&this.p_onSuccess(i)}}},{key:"getThemesInfo",value:function(t,e,i,r){var n=this;n.p_onSuccess=i;var o=Math.random();n.partUrl=t+"/get?idxArr="+e+"&r="+o+"&guid="+n.guid;var a=n.getFullUrl();new d.IgsServiceBase(a,{eventListeners:{scope:n,processCompleted:n.onGetThemesInfoSuccess,processFailed:r}}).processAsync()}},{key:"removeThemesInfo",value:function(t,e,i,r){var n=Math.random();this.partUrl=t+"/remove?idxArr="+e+"&r="+n+"&guid="+this.guid;var o=this.getFullUrl();new d.IgsServiceBase(o,{eventListeners:{scope:this,processCompleted:i,processFailed:r}}).processAsync()}},{key:"updateThemesInfo",value:function(t,e,i,n,o){Math.random(),this.partUrl=t+"/update?idxArr="+e+"&guid="+this.guid;var a=this.getFullUrl(),s=new C.FolderInfo;if(null!==i&&i.length>0){s.name="ThemeInfo",s.attribute=[];for(var l=0;l<i.length;l++)if(s.attribute[l]=new O.FolderInfoAttribute,s.attribute[l].name=i[l].LayerName,null!==i[l].ThemeArr&&i[l].ThemeArr.length>0){for(var u=[],c=0;c<i[l].ThemeArr.length;c++)null!==i[l].ThemeArr[c]&&(u[c]=new O.FolderInfoAttribute(i[l].ThemeArr[c].Type,(0,r.default)(i[l].ThemeArr[c])));s.attribute[l].value=(0,r.default)(u)}}new d.IgsServiceBase(a,{eventListeners:{scope:this,processCompleted:n,processFailed:o}}).processAsync({method:"POST",data:(0,r.default)(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}},{key:"addThemesInfo",value:function(t,e,i,n,o){Math.random(),this.partUrl=t+"/add?idxArr="+e+"&guid="+this.guid;var a=this.getFullUrl(),s=new C.FolderInfo;if(null!==i&&i.length>0){s.name="ThemeInfo",s.attribute=[];for(var l=0;l<i.length;l++)if(s.attribute[l]=new O.FolderInfoAttribute,s.attribute[l].name=i[l].LayerName,null!==i[l].ThemeArr&&i[l].ThemeArr.length>0){for(var u=[],c=0;c<i[l].ThemeArr.length;c++)null!==i[l].ThemeArr[c]&&(u[c]=new O.FolderInfoAttribute(i[l].ThemeArr[c].Type,(0,r.default)(i[l].ThemeArr[c])));s.attribute[l].value=(0,r.default)(u)}}new d.IgsServiceBase(a,{eventListeners:{scope:this,processCompleted:n,processFailed:o}}).processAsync({method:"POST",data:(0,r.default)(s),headers:{"Content-Type":"text/plain;charset=UTF-8"}})}}]),e}(c.ServiceBase);e.ThemeOper=E,u.Zondy.Service.ThemeOper=E},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvSource=void 0;var r=i(642);e.MapvSource=r.MapvSource},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvSource=void 0;var r=d(i(58)),n=d(i(13)),o=d(i(8)),a=d(i(18)),s=d(i(14)),l=d(i(15)),u=d(i(282)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(449)),h=i(643);function d(t){return t&&t.__esModule?t:{default:t}}var p=e.MapvSource=function(t){function e(t){(0,o.default)(this,e);var i=(0,s.default)(this,(e.__proto__||(0,n.default)(e)).call(this,{canvasFunction:function(t,e,i,n,o){var s=n[0]/i,l=n[1]/i,u=[(s-this.map.getSize()[0])/2,(l-this.map.getSize()[1])/2];a.mapHeight=l,a.mapWidth=s,a.layer||(a.layer=new h.MapvLayer(a.map,a.dataSet,a.mapVOptions,a,s,l,u,i)),a.layer.pixelRatio=i,a.layer.setOffset(u),a.layer.resizeCanvas(s,l),a.rotate=a.map.getView().getRotation();var c=a.layer.getCanvas();a.context||((c=document.createElement("CANVAS")).width=s,c.height=l,a.context=c.getContext("2d")),a.layer.isEnabledTime()||(a.layer.resizeCanvas(s,l),a.layer.render());var d=a.context.canvas;return a.context.canvas.getContext("2d").scale(i,i),a.context.clearRect(0,0,d.width,d.height),a.context.canvas.width=n[0]/i,a.context.canvas.height=n[1]/i,a.context.drawImage(c,0,0),(a.resolution!==e||(0,r.default)(a.extent)!==(0,r.default)(t))&&(a.resolution=e,a.extent=t),a.context.canvas},projection:t.projection,ratio:t.ratio,resolutions:t.resolutions,state:t.state}));i.map=t.map,i.dataSet=t.dataSet,i.mapVOptions=t.mapVOptions,i.layer=void 0;var a=i;return i.mapHeight=0,i.mapWidth=0,i.initDevicePixelRatio(),i.layer,a.refresh(),i}return(0,l.default)(e,t),(0,a.default)(e,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"addData",value:function(t,e){this.layer.addData(t,e)}},{key:"updateData",value:function(t,e){this.layer.updateData(t,e)}},{key:"update",value:function(t){this.layer.update(t)}},{key:"removeData",value:function(t){this.layer.removeData(t)}},{key:"removeAllData",value:function(){this.layer.clearData()}},{key:"destroy",value:function(){this.layer.clearData(),this.layer.destroy()}}]),e}(u.default);c.source=c.source||{},c.source.Mapv=p},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvLayer=void 0;var r=s(i(8)),n=s(i(18)),o=(s(i(83)),s(i(251)),function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(449))),a=i(644);function s(t){return t&&t.__esModule?t:{default:t}}var l=e.MapvLayer=function(){function t(e,i,n,o,s,l,u,c){(0,r.default)(this,t),this.map=e,this.layerID=n.layerID,delete n.layerID,this.mapvBaseLayer=new a.MapvBaseLayer(e,i,n,this,u,c),this.mapVOptions=n,this.mapWidth=s,this.mapHeight=l,this.pixelRatio=c,this.offset=u,this.initDevicePixelRatio(),this.canvas=this._createCanvas(),this.render=this.render.bind(this),this.bindEvent(),this.resizeCanvas(this.mapWidth,this.mapHeight),this.render(),e.getView().setZoom(e.getView().getZoom()+1)}return(0,n.default)(t,[{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"bindEvent",value:function(){var t=this.map;this.innerMoveStart=this.moveStartEvent.bind(this),this.innerMoveEnd=this.moveEndEvent.bind(this),this.innnerZoomStart=this.zoomStartEvent.bind(this),this.innnerZoomEnd=this.zoomEndEvent.bind(this),this.innnerRotateStart=this.rotateStartEvent.bind(this),this.innnerRotateEnd=this.rotateEndEvent.bind(this),this.innerResize=this.resizeEvent.bind(this),this.innerRemove=this.removeEvent.bind(this),t.on("movestart",this.innerMoveStart),t.on("moveend",this.innerMoveEnd),t.getView().on("change:center",this.innnerZoomEnd),t.getView().on("change:size",this.innerResize)}},{key:"unbindEvent",value:function(){var t=this.map;t.off("movestart",this.innerMoveStart),t.off("moveend",this.innerMoveEnd),t.getView().off("change:center",this.innnerZoomEnd),t.getView().off("change:size",this.innerResize)}},{key:"moveStartEvent",value:function(){var t=this.mapVOptions.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start)}},{key:"moveEndEvent",value:function(){this.draw()}},{key:"zoomStartEvent",value:function(){this.mapvBaseLayer.clear()}},{key:"zoomEndEvent",value:function(){this.mapvBaseLayer.clear()}},{key:"rotateStartEvent",value:function(){this.mapvBaseLayer.animatorMovestartEvent(),this._unvisiable()}},{key:"rotateEndEvent",value:function(){this.mapvBaseLayer.animatorMoveendEvent(),this._reset(),this._visiable()}},{key:"resizeEvent",value:function(){this._reset(),this._visiable()}},{key:"removeEvent",value:function(){}},{key:"addData",value:function(t,e){this.mapvBaseLayer.addData(t,e)}},{key:"updateData",value:function(t,e){this.mapvBaseLayer.updateData(t,e)}},{key:"getData",value:function(){return this.mapvBaseLayer&&(this.dataSet=this.mapvBaseLayer.getData()),this.dataSet}},{key:"removeData",value:function(t){this.mapvBaseLayer&&this.mapvBaseLayer.removeData(t)}},{key:"removeAllData",value:function(){this.mapvBaseLayer.clearData()}},{key:"isEnabledTime",value:function(){var t=this.mapVOptions.animation;return t&&!(!1===t.enabled)}},{key:"_visiable",value:function(){return this.canvas.style.display="block",this}},{key:"_unvisiable",value:function(){return this.canvas.style.display="none",this}},{key:"_createCanvas",value:function(){var t=document.createElement("canvas");t.id=this.layerID,t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.width=parseInt(this.mapWidth),t.height=parseInt(this.mapHeight),t.style.width=this.mapWidth,t.style.height=this.mapHeight+"px";var e=this.devicePixelRatio;return t.getContext("2d").scale(e,e),t}},{key:"_reset",value:function(){null!=this.canvas&&(this.resizeCanvas(this.mapWidth,this.mapHeight),this.fixPosition(),this.onResize(),this.render())}},{key:"draw",value:function(){return this._reset()}},{key:"show",value:function(){this._visiable()}},{key:"hide",value:function(){this._unvisiable()}},{key:"update",value:function(t){void 0!=t&&this.updateData(t.data,t.options)}},{key:"resizeCanvas",value:function(t,e){var i=this.canvas;i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.width=parseInt(t),i.height=parseInt(e),i.style.width=t+"px",i.style.height=e+"px"}},{key:"setOffset",value:function(t){this.offset=t,this.mapvBaseLayer&&this.mapvBaseLayer.setOffset(t)}},{key:"fixPosition",value:function(){}},{key:"onResize",value:function(){}},{key:"originPosition",value:function(){}},{key:"render",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer._canvasUpdate()}},{key:"clear",value:function(){this.mapvBaseLayer&&this.mapvBaseLayer.clear()}},{key:"addTo",value:function(t){t.addLayer(this)}},{key:"getCanvas",value:function(){return this.canvas}},{key:"moveTo",value:function(t,e){}},{key:"remove",value:function(){this.removeAllData(),this.unbindEvent(),this.disposeFlag=!0}},{key:"destroy",value:function(){this.removeAllData(),this.unbindEvent(),this.disposeFlag=!0}}]),t}();o.zondy=o.zondy||{},o.zondy.MapvLayer=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapvBaseLayer=void 0;var r=c(i(13)),n=c(i(8)),o=c(i(18)),a=c(i(14)),s=c(i(40)),l=c(i(15)),u=i(645);function c(t){return t&&t.__esModule?t:{default:t}}var h=u.baiduMapLayer?u.baiduMapLayer.__proto__:Function;e.MapvBaseLayer=function(t){function e(t,i,o,s,l,u){(0,n.default)(this,e);var c=(0,a.default)(this,(e.__proto__||(0,r.default)(e)).call(this,t,i,o));if(!h)return(0,a.default)(c);c.map=t,c.dataSet=i,c.offset=l,c.pixelRatio=u;var d=c;return c.options=o||{},d.init(o),d.argCheck(o),c.initDevicePixelRatio(),c.canvasLayer=s,c.clickEvent=c.clickEvent.bind(c),c.mousemoveEvent=c.mousemoveEvent.bind(c),c.bindEvent(),c}return(0,l.default)(e,t),(0,o.default)(e,[{key:"isEnabledTime",value:function(){var t=this.options.animation;return t&&!(!1===t.enabled)}},{key:"clickEvent",value:function(t){this.map.getPixelFromCoordinate([0,0]);this.devicePixelRatio;var e=t.layerPoint;e[0],this.offset[0],e[1],this.offset[1]}},{key:"mousemoveEvent",value:function(t){if(t){var e=this.map.getPixelFromCoordinate([0,0]),i=(this.devicePixelRatio,t.layerPoint);i[0],e[0],i[1],e[1]}}},{key:"addAnimatorEvent",value:function(){this.map.on("movestart",this.animatorMovestartEvent.bind(this)),this.map.on("moveend",this.animatorMoveendEvent.bind(this))}},{key:"removeAnimatorEvent",value:function(){this.map.off("movestart",this.animatorMovestartEvent.bind(this)),this.map.off("moveend",this.animatorMoveendEvent.bind(this))}},{key:"animatorMovestartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this.animator.stop())}},{key:"animatorMoveendEvent",value:function(){this.isEnabledTime()&&this.animator&&this.animator.start()}},{key:"bindEvent",value:function(t){var e=this.map;this.addAnimatorEvent(),this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent))}},{key:"unbindEvent",value:function(t){var e=this.map;this.removeAnimatorEvent(),this.options.methods&&(this.options.methods.click&&e.removeListener("click",this.clickEvent),this.options.methods.mousemove&&e.removeListener("mousemove",this.mousemoveEvent))}},{key:"initDevicePixelRatio",value:function(){this.devicePixelRatio=window.devicePixelRatio||1}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer&&!this.canvasLayer.disposeFlag){var e=this,i=this.map,r=e.options.animation,n=this.getContext();if(e.isEnabledTime()){if(void 0===t)return void this.clear(n);"2d"==this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"==this.context)for(var o in e.options)n[o]=e.options[o];else n.clear(n.COLOR_BUFFER_BIT);var a=i.getView().calculateExtent(),s=i.getPixelFromCoordinate([a[0],a[3]]);e._mapCenter=i.getView().getCenter(),e._mapCenterPx=i.getPixelFromCoordinate(e._mapCenter),e._reselutions=i.getView().getResolution(),e._rotation=-i.getView().getRotation();var l=e.pixelRatio||1,c={transferCoordinate:function(t){var i=(t[0]-e._mapCenter[0])/e._reselutions,r=(e._mapCenter[1]-t[1])/e._reselutions,n=[i+e._mapCenterPx[0],r+e._mapCenterPx[1]];return[((n=function(t,e,i){return[1*(t[0]-e[0])+e[0],1*(t[1]-e[1])+e[1]]}(n,e._mapCenterPx))[0]+e.offset[0])*l,(n[1]+e.offset[1])*l]}};void 0!==t&&(c.filter=function(e){var i=r.trails||10;return!!(t&&e.time>t-i&&e.time<t)});var h=e.dataSet.get(c);this.processData(h),"m"==e.options.unit&&e.options.size,e.options._size=e.options.size;var d=i.getPixelFromCoordinate([0,0]),p={x:d[0]-s[0],y:d[1]-s[1]};this.drawContext(n,new u.DataSet(h),e.options,p),e.options.updateCallback&&e.options.updateCallback(t)}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"setOffset",value:function(t){this.offset=t}},{key:"updateData",value:function(t,i){var n=t;n&&n.get&&(n=n.get()),void 0!=n&&this.dataSet.set(n),(0,s.default)(e.prototype.__proto__||(0,r.default)(e.prototype),"update",this).call(this,{options:i})}},{key:"addData",value:function(t,e){var i=t;t&&t.get&&(i=t.get()),this.dataSet.add(i),this.update({options:e})}},{key:"draw",value:function(){this.canvasLayer.draw()}},{key:"clear",value:function(t){(t=t||this.getContext())&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}}]),e}(h)},function(t,e){t.exports=function(){try{return mapv}catch(t){return{}}}()},function(t,e,i){"use strict";i.r(e);var r=i(23),n=i(36),o=i(33),a=i(191),s=i(20),l=i(39),u=i(76);function c(t,e,i,r,n,o){var a,s;void 0!==n?(a=n,s=void 0!==o?o:0):(a=[],s=0);for(var l=e;l<i;){var u=t[l++];a[s++]=t[l++],a[s++]=u;for(var c=2;c<r;++c)a[s++]=t[l++]}return a.length=s,a}var h=i(91),d=i(9);i.d(e,"encodeDeltas",function(){return f}),i.d(e,"decodeDeltas",function(){return g}),i.d(e,"encodeFloats",function(){return y}),i.d(e,"decodeFloats",function(){return v}),i.d(e,"encodeSignedIntegers",function(){return m}),i.d(e,"decodeSignedIntegers",function(){return _}),i.d(e,"encodeUnsignedIntegers",function(){return b}),i.d(e,"decodeUnsignedIntegers",function(){return S}),i.d(e,"encodeUnsignedInteger",function(){return O});var p=function(t){function e(e){t.call(this);var i=e||{};this.dataProjection=Object(d.get)("EPSG:4326"),this.factor_=i.factor?i.factor:1e5,this.geometryLayout_=i.geometryLayout?i.geometryLayout:s.default.XY}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFeatureFromText=function(t,e){var i=this.readGeometryFromText(t,e);return new n.default(i)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var i=Object(u.getStrideForLayout)(this.geometryLayout_),r=g(t,i,this.factor_);c(r,0,r.length,i,r);var n=Object(h.a)(r,0,r.length,i);return Object(o.transformWithOptions)(new l.default(n,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var i=t.getGeometry();return i?this.writeGeometryText(i,e):(Object(r.a)(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var i=(t=Object(o.transformWithOptions)(t,!0,this.adaptOptions(e))).getFlatCoordinates(),r=t.getStride();return c(i,0,i.length,r,i),f(i,r,this.factor_)},e}(a.a);function f(t,e,i){var r,n=i||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var a=0,s=t.length;a<s;)for(r=0;r<e;++r,++a){var l=t[a],u=l-o[r];o[r]=l,t[a]=u}return y(t,n)}function g(t,e,i){var r,n=i||1e5,o=new Array(e);for(r=0;r<e;++r)o[r]=0;for(var a=v(t,n),s=0,l=a.length;s<l;)for(r=0;r<e;++r,++s)o[r]+=a[s],a[s]=o[r];return a}function y(t,e){for(var i=e||1e5,r=0,n=t.length;r<n;++r)t[r]=Math.round(t[r]*i);return m(t)}function v(t,e){for(var i=e||1e5,r=_(t),n=0,o=r.length;n<o;++n)r[n]/=i;return r}function m(t){for(var e=0,i=t.length;e<i;++e){var r=t[e];t[e]=r<0?~(r<<1):r<<1}return b(t)}function _(t){for(var e=S(t),i=0,r=e.length;i<r;++i){var n=e[i];e[i]=1&n?~(n>>1):n>>1}return e}function b(t){for(var e="",i=0,r=t.length;i<r;++i)e+=O(t[i]);return e}function S(t){for(var e=[],i=0,r=0,n=0,o=t.length;n<o;++n){var a=t.charCodeAt(n)-63;i|=(31&a)<<r,a<32?(e.push(i),i=0,r=0):r+=5}return e}function O(t){for(var e,i="";t>=32;)e=63+(32|31&t),i+=String.fromCharCode(e),t>>=5;return e=t+63,i+String.fromCharCode(e)}e.default=p},function(t,e,i){"use strict";i.r(e);var r=i(1),n=i(149),o=i(193),a=i(2),s=i(0),l=[null,"http://www.opengis.net/ows/1.1"],u=Object(s.makeStructureNS)(l,{ServiceIdentification:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},O,t,e)}),ServiceProvider:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},C,t,e)}),OperationsMetadata:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},m,t,e)})}),c=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return Object(s.pushParseAndPop)({},u,t,[])||null},e}(o.a),h=Object(s.makeStructureNS)(l,{DeliveryPoint:Object(s.makeObjectPropertySetter)(a.h),City:Object(s.makeObjectPropertySetter)(a.h),AdministrativeArea:Object(s.makeObjectPropertySetter)(a.h),PostalCode:Object(s.makeObjectPropertySetter)(a.h),Country:Object(s.makeObjectPropertySetter)(a.h),ElectronicMailAddress:Object(s.makeObjectPropertySetter)(a.h)}),d=Object(s.makeStructureNS)(l,{Value:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(a.h)(t)})}),p=Object(s.makeStructureNS)(l,{AllowedValues:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},d,t,e)})}),f=Object(s.makeStructureNS)(l,{Phone:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},_,t,e)}),Address:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},h,t,e)})}),g=Object(s.makeStructureNS)(l,{HTTP:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},y,t,e)})}),y=Object(s.makeStructureNS)(l,{Get:Object(s.makeObjectPropertyPusher)(function(t,e){var i=Object(n.a)(t);if(i)return Object(s.pushParseAndPop)({href:i},b,t,e)}),Post:void 0}),v=Object(s.makeStructureNS)(l,{DCP:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},g,t,e)})}),m=Object(s.makeStructureNS)(l,{Operation:function(t,e){var i=t.getAttribute("name"),r=Object(s.pushParseAndPop)({},v,t,e);r&&(e[e.length-1][i]=r)}}),_=Object(s.makeStructureNS)(l,{Voice:Object(s.makeObjectPropertySetter)(a.h),Facsimile:Object(s.makeObjectPropertySetter)(a.h)}),b=Object(s.makeStructureNS)(l,{Constraint:Object(s.makeObjectPropertyPusher)(function(t,e){var i=t.getAttribute("name");if(i)return Object(s.pushParseAndPop)({name:i},p,t,e)})}),S=Object(s.makeStructureNS)(l,{IndividualName:Object(s.makeObjectPropertySetter)(a.h),PositionName:Object(s.makeObjectPropertySetter)(a.h),ContactInfo:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},f,t,e)})}),O=Object(s.makeStructureNS)(l,{Abstract:Object(s.makeObjectPropertySetter)(a.h),AccessConstraints:Object(s.makeObjectPropertySetter)(a.h),Fees:Object(s.makeObjectPropertySetter)(a.h),Title:Object(s.makeObjectPropertySetter)(a.h),ServiceTypeVersion:Object(s.makeObjectPropertySetter)(a.h),ServiceType:Object(s.makeObjectPropertySetter)(a.h)}),C=Object(s.makeStructureNS)(l,{ProviderName:Object(s.makeObjectPropertySetter)(a.h),ProviderSite:Object(s.makeObjectPropertySetter)(n.a),ServiceContact:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},S,t,e)})}),T=c,x=[null,"http://www.opengis.net/wmts/1.0"],E=[null,"http://www.opengis.net/ows/1.1"],P=Object(s.makeStructureNS)(x,{Contents:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)({},R,t,e)})}),j=function(t){function e(){t.call(this),this.owsParser_=new T}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version").trim(),i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=Object(s.pushParseAndPop)(i,P,t,[]))||null):null},e}(o.a),R=Object(s.makeStructureNS)(x,{Layer:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},I,t,e)}),TileMatrixSet:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},N,t,e)})}),I=Object(s.makeStructureNS)(x,{Style:Object(s.makeObjectPropertyPusher)(function(t,e){var i=Object(s.pushParseAndPop)({},L,t,e);if(i){var r="true"===t.getAttribute("isDefault");return i.isDefault=r,i}}),Format:Object(s.makeObjectPropertyPusher)(a.h),TileMatrixSetLink:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},w,t,e)}),Dimension:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},F,t,e)}),ResourceURL:Object(s.makeObjectPropertyPusher)(function(t,e){var i=t.getAttribute("format"),r=t.getAttribute("template"),n=t.getAttribute("resourceType"),o={};return i&&(o.format=i),r&&(o.template=r),n&&(o.resourceType=n),o})},Object(s.makeStructureNS)(E,{Title:Object(s.makeObjectPropertySetter)(a.h),Abstract:Object(s.makeObjectPropertySetter)(a.h),WGS84BoundingBox:Object(s.makeObjectPropertySetter)(function(t,e){var i=Object(s.pushParseAndPop)([],k,t,e);if(2==i.length)return Object(r.boundingExtent)(i)}),Identifier:Object(s.makeObjectPropertySetter)(a.h)})),L=Object(s.makeStructureNS)(x,{LegendURL:Object(s.makeObjectPropertyPusher)(function(t,e){var i={};return i.format=t.getAttribute("format"),i.href=Object(n.a)(t),i})},Object(s.makeStructureNS)(E,{Title:Object(s.makeObjectPropertySetter)(a.h),Identifier:Object(s.makeObjectPropertySetter)(a.h)})),w=Object(s.makeStructureNS)(x,{TileMatrixSet:Object(s.makeObjectPropertySetter)(a.h),TileMatrixSetLimits:Object(s.makeObjectPropertySetter)(function(t,e){return Object(s.pushParseAndPop)([],A,t,e)})}),A=Object(s.makeStructureNS)(x,{TileMatrixLimits:Object(s.makeArrayPusher)(function(t,e){return Object(s.pushParseAndPop)({},M,t,e)})}),M=Object(s.makeStructureNS)(x,{TileMatrix:Object(s.makeObjectPropertySetter)(a.h),MinTileRow:Object(s.makeObjectPropertySetter)(a.f),MaxTileRow:Object(s.makeObjectPropertySetter)(a.f),MinTileCol:Object(s.makeObjectPropertySetter)(a.f),MaxTileCol:Object(s.makeObjectPropertySetter)(a.f)}),F=Object(s.makeStructureNS)(x,{Default:Object(s.makeObjectPropertySetter)(a.h),Value:Object(s.makeObjectPropertyPusher)(a.h)},Object(s.makeStructureNS)(E,{Identifier:Object(s.makeObjectPropertySetter)(a.h)})),k=Object(s.makeStructureNS)(E,{LowerCorner:Object(s.makeArrayPusher)(G),UpperCorner:Object(s.makeArrayPusher)(G)}),N=Object(s.makeStructureNS)(x,{WellKnownScaleSet:Object(s.makeObjectPropertySetter)(a.h),TileMatrix:Object(s.makeObjectPropertyPusher)(function(t,e){return Object(s.pushParseAndPop)({},D,t,e)})},Object(s.makeStructureNS)(E,{SupportedCRS:Object(s.makeObjectPropertySetter)(a.h),Identifier:Object(s.makeObjectPropertySetter)(a.h)})),D=Object(s.makeStructureNS)(x,{TopLeftCorner:Object(s.makeObjectPropertySetter)(G),ScaleDenominator:Object(s.makeObjectPropertySetter)(a.d),TileWidth:Object(s.makeObjectPropertySetter)(a.f),TileHeight:Object(s.makeObjectPropertySetter)(a.f),MatrixWidth:Object(s.makeObjectPropertySetter)(a.f),MatrixHeight:Object(s.makeObjectPropertySetter)(a.f)},Object(s.makeStructureNS)(E,{Identifier:Object(s.makeObjectPropertySetter)(a.h)}));function G(t,e){var i=Object(a.h)(t).split(/\s+/);if(i&&2==i.length){var r=+i[0],n=+i[1];if(!isNaN(r)&&!isNaN(n))return[r,n]}}e.default=j},function(t,e,i){"use strict";i.r(e);var r=i(90),n=i(12),o=i(1),a=i(11),s=i(9),l=i(81),u={KVP:"KVP",REST:"REST"},c=i(346),h=i(95);i.d(e,"optionsFromCapabilities",function(){return p});var d=function(t){function e(e){var i=void 0!==e.requestEncoding?e.requestEncoding:u.KVP,n=e.tileGrid,o=e.urls;void 0===o&&void 0!==e.url&&(o=Object(r.c)(e.url)),t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:r.d,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition}),this.version_=void 0!==e.version?e.version:"1.0.0",this.format_=void 0!==e.format?e.format:"image/jpeg",this.dimensions_=void 0!==e.dimensions?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=i,this.setKey(this.getKeyForDimensions_()),o&&o.length>0&&(this.tileUrlFunction=Object(r.b)(o.map(f.bind(this))))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(Object(r.b)(t.map(f.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+"-"+this.dimensions_[i];return e.join("/")},e.prototype.updateDimensions=function(t){Object(a.assign)(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(l.default);function p(t,e){var i=t.Contents.Layer,r=Object(n.d)(i,function(t,i,r){return t.Identifier==e.layer});if(null===r)return null;var a,l=t.Contents.TileMatrixSet;(a=r.TileMatrixSetLink.length>1?"projection"in e?Object(n.e)(r.TileMatrixSetLink,function(t,i,r){var o=Object(n.d)(l,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,a=Object(s.get)(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(s.get)(o),u=Object(s.get)(e.projection);return a&&u?Object(s.equivalent)(a,u):o==e.projection}):Object(n.e)(r.TileMatrixSetLink,function(t,i,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(a=0);var h=r.TileMatrixSetLink[a].TileMatrixSet,d=r.TileMatrixSetLink[a].TileMatrixSetLimits,p=r.Format[0];"format"in e&&(p=e.format),(a=Object(n.e)(r.Style,function(t,i,r){return"style"in e?t.Title==e.style:t.isDefault}))<0&&(a=0);var f=r.Style[a].Identifier,g={};"Dimension"in r&&r.Dimension.forEach(function(t,e,i){var r=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),g[r]=n});var y,v=t.Contents.TileMatrixSet,m=Object(n.d)(v,function(t,e,i){return t.Identifier==h}),_=m.SupportedCRS;if(_&&(y=Object(s.get)(_.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||Object(s.get)(_)),"projection"in e){var b=Object(s.get)(e.projection);b&&(y&&!Object(s.equivalent)(b,y)||(y=b))}var S,O,C=r.WGS84BoundingBox;if(void 0!==C){var T=Object(s.get)("EPSG:4326").getExtent();O=C[0]==T[0]&&C[2]==T[2],S=Object(s.transformExtent)(C,"EPSG:4326",y);var x=y.getExtent();x&&(Object(o.containsExtent)(x,S)||(S=void 0))}var E=Object(c.createFromCapabilitiesMatrixSet)(m,S,d),P=[],j=e.requestEncoding;if(j=void 0!==j?j:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var R=t.OperationsMetadata.GetTile.DCP.HTTP.Get,I=0,L=R.length;I<L;++I)if(R[I].Constraint){var w=Object(n.d)(R[I].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===j&&(j=w[0]),j!==u.KVP)break;Object(n.f)(w,u.KVP)&&P.push(R[I].href)}else R[I].href&&(j=u.KVP,P.push(R[I].href));return 0===P.length&&(j=u.REST,r.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(p=t.format,P.push(t.template))})),{urls:P,layer:e.layer,matrixSet:h,format:p,projection:y,requestEncoding:j,tileGrid:E,style:f,dimensions:g,wrapX:O,crossOrigin:e.crossOrigin}}function f(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==u.KVP&&Object(a.assign)(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==u.KVP?Object(h.appendParams)(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var r=this.tileGrid,n=this.dimensions_;return function(i,o,s){if(i){var l={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:-i[2]-1};Object(a.assign)(l,n);var c=t;return e==u.KVP?Object(h.appendParams)(c,l):c.replace(/\{(\w+?)\}/g,function(t,e){return l[e]})}}}e.default=d}]);